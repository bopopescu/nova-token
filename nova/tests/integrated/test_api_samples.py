begin_unit
comment|'# vim: tabstop=4 shiftwidth=4 softtabstop=4'
nl|'\n'
comment|'# Copyright 2012 Nebula, Inc.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
name|'import'
name|'base64'
newline|'\n'
name|'import'
name|'os'
newline|'\n'
name|'import'
name|'re'
newline|'\n'
name|'import'
name|'uuid'
newline|'\n'
nl|'\n'
name|'from'
name|'lxml'
name|'import'
name|'etree'
newline|'\n'
nl|'\n'
name|'from'
name|'nova'
name|'import'
name|'flags'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'importutils'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'jsonutils'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
op|'.'
name|'log'
name|'import'
name|'logging'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'test'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
name|'import'
name|'fake_network'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'image'
name|'import'
name|'fake'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'integrated'
name|'import'
name|'integrated_helpers'
newline|'\n'
nl|'\n'
DECL|variable|FLAGS
name|'FLAGS'
op|'='
name|'flags'
op|'.'
name|'FLAGS'
newline|'\n'
DECL|variable|LOG
name|'LOG'
op|'='
name|'logging'
op|'.'
name|'getLogger'
op|'('
name|'__name__'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|NoMatch
name|'class'
name|'NoMatch'
op|'('
name|'test'
op|'.'
name|'TestingException'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'pass'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ApiSampleTestBase
dedent|''
name|'class'
name|'ApiSampleTestBase'
op|'('
name|'integrated_helpers'
op|'.'
name|'_IntegratedTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'json'"
newline|'\n'
DECL|variable|all_extensions
name|'all_extensions'
op|'='
name|'False'
newline|'\n'
DECL|variable|extension_name
name|'extension_name'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'flags'
op|'('
name|'use_ipv6'
op|'='
name|'False'
op|','
nl|'\n'
name|'osapi_compute_link_prefix'
op|'='
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
name|'osapi_glance_link_prefix'
op|'='
name|'self'
op|'.'
name|'_get_glance_host'
op|'('
op|')'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'self'
op|'.'
name|'all_extensions'
op|':'
newline|'\n'
indent|'            '
name|'ext'
op|'='
op|'['
name|'self'
op|'.'
name|'extension_name'
op|']'
name|'if'
name|'self'
op|'.'
name|'extension_name'
name|'else'
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'flags'
op|'('
name|'osapi_compute_extension'
op|'='
name|'ext'
op|')'
newline|'\n'
dedent|''
name|'super'
op|'('
name|'ApiSampleTestBase'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'fake_network'
op|'.'
name|'stub_compute_with_ips'
op|'('
name|'self'
op|'.'
name|'stubs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'generate_samples'
op|'='
name|'os'
op|'.'
name|'getenv'
op|'('
string|"'GENERATE_SAMPLES'"
op|')'
name|'is'
name|'not'
name|'None'
newline|'\n'
nl|'\n'
DECL|member|_pretty_data
dedent|''
name|'def'
name|'_pretty_data'
op|'('
name|'self'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'self'
op|'.'
name|'ctype'
op|'=='
string|"'json'"
op|':'
newline|'\n'
indent|'            '
name|'data'
op|'='
name|'jsonutils'
op|'.'
name|'dumps'
op|'('
name|'jsonutils'
op|'.'
name|'loads'
op|'('
name|'data'
op|')'
op|','
name|'sort_keys'
op|'='
name|'True'
op|','
nl|'\n'
name|'indent'
op|'='
number|'4'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'xml'
op|'='
name|'etree'
op|'.'
name|'XML'
op|'('
name|'data'
op|')'
newline|'\n'
name|'data'
op|'='
name|'etree'
op|'.'
name|'tostring'
op|'('
name|'xml'
op|','
name|'encoding'
op|'='
string|'"UTF-8"'
op|','
nl|'\n'
name|'xml_declaration'
op|'='
name|'True'
op|','
name|'pretty_print'
op|'='
name|'True'
op|')'
newline|'\n'
dedent|''
name|'return'
string|"'\\n'"
op|'.'
name|'join'
op|'('
name|'line'
op|'.'
name|'rstrip'
op|'('
op|')'
name|'for'
name|'line'
name|'in'
name|'data'
op|'.'
name|'split'
op|'('
string|"'\\n'"
op|')'
op|')'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_objectify
dedent|''
name|'def'
name|'_objectify'
op|'('
name|'self'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'not'
name|'data'
op|':'
newline|'\n'
indent|'            '
name|'return'
op|'{'
op|'}'
newline|'\n'
dedent|''
name|'if'
name|'self'
op|'.'
name|'ctype'
op|'=='
string|"'json'"
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'jsonutils'
op|'.'
name|'loads'
op|'('
name|'data'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
DECL|function|to_dict
indent|'            '
name|'def'
name|'to_dict'
op|'('
name|'node'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'ret'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'if'
name|'node'
op|'.'
name|'items'
op|'('
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'.'
name|'update'
op|'('
name|'dict'
op|'('
name|'node'
op|'.'
name|'items'
op|'('
op|')'
op|')'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'text'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'['
string|"'__content__'"
op|']'
op|'='
name|'node'
op|'.'
name|'text'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'tag'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'['
string|"'__tag__'"
op|']'
op|'='
name|'node'
op|'.'
name|'tag'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'nsmap'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'['
string|"'__nsmap__'"
op|']'
op|'='
name|'node'
op|'.'
name|'nsmap'
newline|'\n'
dedent|''
name|'for'
name|'element'
name|'in'
name|'node'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'.'
name|'setdefault'
op|'('
name|'node'
op|'.'
name|'tag'
op|','
op|'['
op|']'
op|')'
newline|'\n'
name|'ret'
op|'['
name|'node'
op|'.'
name|'tag'
op|']'
op|'.'
name|'append'
op|'('
name|'to_dict'
op|'('
name|'element'
op|')'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'ret'
newline|'\n'
dedent|''
name|'return'
name|'to_dict'
op|'('
name|'etree'
op|'.'
name|'fromstring'
op|'('
name|'data'
op|')'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
op|'@'
name|'classmethod'
newline|'\n'
DECL|member|_get_sample_path
name|'def'
name|'_get_sample_path'
op|'('
name|'cls'
op|','
name|'name'
op|','
name|'dirname'
op|','
name|'suffix'
op|'='
string|"''"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'parts'
op|'='
op|'['
name|'dirname'
op|']'
newline|'\n'
name|'parts'
op|'.'
name|'append'
op|'('
string|"'api_samples'"
op|')'
newline|'\n'
name|'if'
name|'cls'
op|'.'
name|'all_extensions'
op|':'
newline|'\n'
indent|'            '
name|'parts'
op|'.'
name|'append'
op|'('
string|"'all_extensions'"
op|')'
newline|'\n'
dedent|''
name|'if'
name|'cls'
op|'.'
name|'extension_name'
op|':'
newline|'\n'
indent|'            '
name|'alias'
op|'='
name|'importutils'
op|'.'
name|'import_class'
op|'('
name|'cls'
op|'.'
name|'extension_name'
op|')'
op|'.'
name|'alias'
newline|'\n'
name|'parts'
op|'.'
name|'append'
op|'('
name|'alias'
op|')'
newline|'\n'
dedent|''
name|'parts'
op|'.'
name|'append'
op|'('
name|'name'
op|'+'
string|'"."'
op|'+'
name|'cls'
op|'.'
name|'ctype'
op|'+'
name|'suffix'
op|')'
newline|'\n'
name|'return'
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
op|'*'
name|'parts'
op|')'
newline|'\n'
nl|'\n'
dedent|''
op|'@'
name|'classmethod'
newline|'\n'
DECL|member|_get_sample
name|'def'
name|'_get_sample'
op|'('
name|'cls'
op|','
name|'name'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'dirname'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'abspath'
op|'('
name|'__file__'
op|')'
op|')'
newline|'\n'
name|'dirname'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'dirname'
op|','
string|'"../../../doc"'
op|')'
newline|'\n'
name|'return'
name|'cls'
op|'.'
name|'_get_sample_path'
op|'('
name|'name'
op|','
name|'dirname'
op|')'
newline|'\n'
nl|'\n'
dedent|''
op|'@'
name|'classmethod'
newline|'\n'
DECL|member|_get_template
name|'def'
name|'_get_template'
op|'('
name|'cls'
op|','
name|'name'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'dirname'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'abspath'
op|'('
name|'__file__'
op|')'
op|')'
newline|'\n'
name|'return'
name|'cls'
op|'.'
name|'_get_sample_path'
op|'('
name|'name'
op|','
name|'dirname'
op|','
name|'suffix'
op|'='
string|"'.tpl'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_read_template
dedent|''
name|'def'
name|'_read_template'
op|'('
name|'self'
op|','
name|'name'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'template'
op|'='
name|'self'
op|'.'
name|'_get_template'
op|'('
name|'name'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'generate_samples'
name|'and'
name|'not'
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'template'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'with'
name|'open'
op|'('
name|'template'
op|','
string|"'w'"
op|')'
name|'as'
name|'outf'
op|':'
newline|'\n'
indent|'                '
name|'pass'
newline|'\n'
dedent|''
dedent|''
name|'with'
name|'open'
op|'('
name|'template'
op|')'
name|'as'
name|'inf'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'inf'
op|'.'
name|'read'
op|'('
op|')'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_write_sample
dedent|''
dedent|''
name|'def'
name|'_write_sample'
op|'('
name|'self'
op|','
name|'name'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'with'
name|'open'
op|'('
name|'self'
op|'.'
name|'_get_sample'
op|'('
name|'name'
op|')'
op|','
string|"'w'"
op|')'
name|'as'
name|'outf'
op|':'
newline|'\n'
indent|'            '
name|'outf'
op|'.'
name|'write'
op|'('
name|'data'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_compare_result
dedent|''
dedent|''
name|'def'
name|'_compare_result'
op|'('
name|'self'
op|','
name|'subs'
op|','
name|'expected'
op|','
name|'result'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'matched_value'
op|'='
name|'None'
newline|'\n'
name|'if'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'dict'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'result'
op|','
name|'dict'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
nl|'\n'
name|'_'
op|'('
string|"'Result: %(result)s is not a dict.'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'ex_keys'
op|'='
name|'sorted'
op|'('
name|'expected'
op|'.'
name|'keys'
op|'('
op|')'
op|')'
newline|'\n'
name|'res_keys'
op|'='
name|'sorted'
op|'('
name|'result'
op|'.'
name|'keys'
op|'('
op|')'
op|')'
newline|'\n'
name|'if'
name|'ex_keys'
op|'!='
name|'res_keys'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
name|'_'
op|'('
string|"'Key mismatch:\\n'"
nl|'\n'
string|"'%(ex_keys)s\\n%(res_keys)s'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'key'
name|'in'
name|'ex_keys'
op|':'
newline|'\n'
indent|'                '
name|'res'
op|'='
name|'self'
op|'.'
name|'_compare_result'
op|'('
name|'subs'
op|','
name|'expected'
op|'['
name|'key'
op|']'
op|','
name|'result'
op|'['
name|'key'
op|']'
op|')'
newline|'\n'
name|'matched_value'
op|'='
name|'res'
name|'or'
name|'matched_value'
newline|'\n'
dedent|''
dedent|''
name|'elif'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'list'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'result'
op|','
name|'list'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
nl|'\n'
name|'_'
op|'('
string|"'Result: %(result)s is not a list.'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
comment|'# NOTE(maurosr): sort the list of dicts by their __tag__ element'
nl|'\n'
comment|'# when using xml. This will avoid some fails in keypairs api sample'
nl|'\n'
comment|'# which order in different way when using a private key itself or'
nl|'\n'
comment|"# its regular expression, and after all doesn't interfere with"
nl|'\n'
comment|'# other tests.'
nl|'\n'
comment|"# Should we define a criteria when ordering json? Doesn't seems"
nl|'\n'
comment|'# necessary so far.'
nl|'\n'
dedent|''
name|'for'
name|'ex_obj'
op|','
name|'res_obj'
name|'in'
name|'zip'
op|'('
name|'sorted'
op|'('
name|'expected'
op|','
name|'key'
op|'='
name|'lambda'
name|'k'
op|':'
nl|'\n'
name|'k'
op|'.'
name|'get'
op|'('
string|"'__tag__'"
op|','
name|'k'
op|')'
op|')'
op|','
nl|'\n'
name|'sorted'
op|'('
name|'result'
op|','
name|'key'
op|'='
name|'lambda'
name|'k'
op|':'
nl|'\n'
name|'k'
op|'.'
name|'get'
op|'('
string|"'__tag__'"
op|','
name|'k'
op|')'
op|')'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'res'
op|'='
name|'self'
op|'.'
name|'_compare_result'
op|'('
name|'subs'
op|','
name|'ex_obj'
op|','
name|'res_obj'
op|')'
newline|'\n'
name|'matched_value'
op|'='
name|'res'
name|'or'
name|'matched_value'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'elif'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'basestring'
op|')'
name|'and'
string|"'%'"
name|'in'
name|'expected'
op|':'
newline|'\n'
indent|'            '
name|'try'
op|':'
newline|'\n'
comment|'# NOTE(vish): escape stuff for regex'
nl|'\n'
indent|'                '
name|'for'
name|'char'
name|'in'
op|'['
string|"'['"
op|','
string|"']'"
op|','
string|"'<'"
op|','
string|"'>'"
op|','
string|"'?'"
op|']'
op|':'
newline|'\n'
indent|'                    '
name|'expected'
op|'='
name|'expected'
op|'.'
name|'replace'
op|'('
name|'char'
op|','
string|"'\\%s'"
op|'%'
name|'char'
op|')'
newline|'\n'
dedent|''
name|'expected'
op|'='
name|'expected'
op|'%'
name|'subs'
newline|'\n'
name|'match'
op|'='
name|'re'
op|'.'
name|'match'
op|'('
name|'expected'
op|','
name|'result'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'Exception'
name|'as'
name|'exc'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
name|'_'
op|'('
string|"'Values do not match:\\n'"
nl|'\n'
string|"'%(expected)s\\n%(result)s'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'not'
name|'match'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
name|'_'
op|'('
string|"'Values do not match:\\n'"
nl|'\n'
string|"'%(expected)s\\n%(result)s'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'match'
op|'.'
name|'groups'
op|'('
op|')'
op|':'
newline|'\n'
indent|'                '
name|'matched_value'
op|'='
name|'match'
op|'.'
name|'groups'
op|'('
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'basestring'
op|')'
op|':'
newline|'\n'
comment|'# NOTE(danms): Ignore whitespace in this comparison'
nl|'\n'
indent|'                '
name|'expected'
op|'='
name|'expected'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
name|'result'
op|'='
name|'result'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
dedent|''
name|'if'
name|'expected'
op|'!='
name|'result'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
name|'_'
op|'('
string|"'Values do not match:\\n'"
nl|'\n'
string|"'%(expected)s\\n%(result)s'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'return'
name|'matched_value'
newline|'\n'
nl|'\n'
DECL|member|_verify_response
dedent|''
name|'def'
name|'_verify_response'
op|'('
name|'self'
op|','
name|'name'
op|','
name|'subs'
op|','
name|'response'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'expected'
op|'='
name|'self'
op|'.'
name|'_read_template'
op|'('
name|'name'
op|')'
newline|'\n'
name|'expected'
op|'='
name|'self'
op|'.'
name|'_objectify'
op|'('
name|'expected'
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'_pretty_data'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'generate_samples'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_write_sample'
op|'('
name|'name'
op|','
name|'result'
op|')'
newline|'\n'
dedent|''
name|'result'
op|'='
name|'self'
op|'.'
name|'_objectify'
op|'('
name|'result'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_compare_result'
op|'('
name|'subs'
op|','
name|'expected'
op|','
name|'result'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_host
dedent|''
name|'def'
name|'_get_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'http://openstack.example.com'"
newline|'\n'
nl|'\n'
DECL|member|_get_glance_host
dedent|''
name|'def'
name|'_get_glance_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'http://glance.openstack.example.com'"
newline|'\n'
nl|'\n'
DECL|member|_get_regexes
dedent|''
name|'def'
name|'_get_regexes'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'self'
op|'.'
name|'ctype'
op|'=='
string|"'json'"
op|':'
newline|'\n'
indent|'            '
name|'text'
op|'='
string|'r\'(\\\\"|[^"])*\''
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'text'
op|'='
string|"r'[^<]*'"
newline|'\n'
dedent|''
name|'return'
op|'{'
nl|'\n'
string|"'timestamp'"
op|':'
string|"'[0-9]{4}-[0,1][0-9]-[0-3][0-9]T'"
nl|'\n'
string|"'[0-9]{2}:[0-9]{2}:[0-9]{2}'"
nl|'\n'
string|"'(Z|(\\+|-)[0-9]{2}:[0-9]{2})'"
op|','
nl|'\n'
string|"'password'"
op|':'
string|"'[0-9a-zA-Z]{1,12}'"
op|','
nl|'\n'
string|"'ip'"
op|':'
string|"'[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}'"
op|','
nl|'\n'
string|"'ip6'"
op|':'
string|"'([0-9a-zA-Z]{1,4}:){1,7}:?[0-9a-zA-Z]'"
op|','
nl|'\n'
string|"'id'"
op|':'
string|"'([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}'"
nl|'\n'
string|"'-[0-9a-f]{4}-[0-9a-f]{12})'"
op|','
nl|'\n'
string|"'uuid'"
op|':'
string|"'[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}'"
nl|'\n'
string|"'-[0-9a-f]{4}-[0-9a-f]{12}'"
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'glance_host'"
op|':'
name|'self'
op|'.'
name|'_get_glance_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'compute_host'"
op|':'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|','
nl|'\n'
string|"'text'"
op|':'
name|'text'
op|','
nl|'\n'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|_get_response
dedent|''
name|'def'
name|'_get_response'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'method'
op|','
name|'body'
op|'='
name|'None'
op|','
name|'strip_version'
op|'='
name|'False'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'headers'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'headers'
op|'['
string|"'Content-Type'"
op|']'
op|'='
string|"'application/'"
op|'+'
name|'self'
op|'.'
name|'ctype'
newline|'\n'
name|'headers'
op|'['
string|"'Accept'"
op|']'
op|'='
string|"'application/'"
op|'+'
name|'self'
op|'.'
name|'ctype'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'api'
op|'.'
name|'api_request'
op|'('
name|'url'
op|','
name|'body'
op|'='
name|'body'
op|','
name|'method'
op|'='
name|'method'
op|','
nl|'\n'
name|'headers'
op|'='
name|'headers'
op|','
name|'strip_version'
op|'='
name|'strip_version'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_get
dedent|''
name|'def'
name|'_do_get'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'strip_version'
op|'='
name|'False'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_get_response'
op|'('
name|'url'
op|','
string|"'GET'"
op|','
name|'strip_version'
op|'='
name|'strip_version'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_post
dedent|''
name|'def'
name|'_do_post'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'name'
op|','
name|'subs'
op|','
name|'method'
op|'='
string|"'POST'"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'body'
op|'='
name|'self'
op|'.'
name|'_read_template'
op|'('
name|'name'
op|')'
op|'%'
name|'subs'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'generate_samples'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_write_sample'
op|'('
name|'name'
op|','
name|'body'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'self'
op|'.'
name|'_get_response'
op|'('
name|'url'
op|','
name|'method'
op|','
name|'body'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_put
dedent|''
name|'def'
name|'_do_put'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'name'
op|','
name|'subs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_do_post'
op|'('
name|'url'
op|','
name|'name'
op|','
name|'subs'
op|','
name|'method'
op|'='
string|"'PUT'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_delete
dedent|''
name|'def'
name|'_do_delete'
op|'('
name|'self'
op|','
name|'url'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_get_response'
op|'('
name|'url'
op|','
string|"'DELETE'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VersionsSampleJsonTest
dedent|''
dedent|''
name|'class'
name|'VersionsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_versions_get
indent|'    '
name|'def'
name|'test_versions_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"''"
op|','
name|'strip_version'
op|'='
name|'True'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'versions-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VersionsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'VersionsSampleXmlTest'
op|'('
name|'VersionsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleBase
dedent|''
name|'class'
name|'ServersSampleBase'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|_post_server
indent|'    '
name|'def'
name|'_post_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'server-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleJsonTest
dedent|''
dedent|''
name|'class'
name|'ServersSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_servers_post
indent|'    '
name|'def'
name|'test_servers_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_servers_get
dedent|''
name|'def'
name|'test_servers_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'test_servers_post'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_servers_list
dedent|''
name|'def'
name|'test_servers_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_servers_details
dedent|''
name|'def'
name|'test_servers_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-details-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersSampleXmlTest'
op|'('
name|'ServersSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleAllExtensionJsonTest
dedent|''
name|'class'
name|'ServersSampleAllExtensionJsonTest'
op|'('
name|'ServersSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleAllExtensionXmlTest
dedent|''
name|'class'
name|'ServersSampleAllExtensionXmlTest'
op|'('
name|'ServersSampleXmlTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersMetadataJsonTest
dedent|''
name|'class'
name|'ServersMetadataJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|_create_and_set
indent|'    '
name|'def'
name|'_create_and_set'
op|'('
name|'self'
op|','
name|'subs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'servers/%s/metadata'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-metadata-all-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-all-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
name|'return'
name|'uuid'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_put_all
dedent|''
name|'def'
name|'test_metadata_put_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test setting all metadata for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_post_all
dedent|''
name|'def'
name|'test_metadata_post_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test updating all metadata for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'value'"
op|']'
op|'='
string|"'Bar Value'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/metadata'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-metadata-all-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-all-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_get_all
dedent|''
name|'def'
name|'test_metadata_get_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test getting all metadata for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/metadata'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-all-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_put
dedent|''
name|'def'
name|'test_metadata_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test putting an individual metadata item for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'value'"
op|']'
op|'='
string|"'Bar Value'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'servers/%s/metadata/foo'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-metadata-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_get
dedent|''
name|'def'
name|'test_metadata_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test getting an individual metadata item for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/metadata/foo'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_delete
dedent|''
name|'def'
name|'test_metadata_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test deleting an individual metadata item for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'servers/%s/metadata/foo'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|"''"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersMetadataXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersMetadataXmlTest'
op|'('
name|'ServersMetadataJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtensionsSampleJsonTest
dedent|''
name|'class'
name|'ExtensionsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
DECL|member|test_extensions_get
name|'def'
name|'test_extensions_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'extensions'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'extensions-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtensionsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ExtensionsSampleXmlTest'
op|'('
name|'ExtensionsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleJsonTest
dedent|''
name|'class'
name|'FlavorsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_get
indent|'    '
name|'def'
name|'test_flavors_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/1'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_list
dedent|''
name|'def'
name|'test_flavors_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'FlavorsSampleXmlTest'
op|'('
name|'FlavorsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleAllExtensionJsonTest
dedent|''
name|'class'
name|'FlavorsSampleAllExtensionJsonTest'
op|'('
name|'FlavorsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleAllExtensionXmlTest
dedent|''
name|'class'
name|'FlavorsSampleAllExtensionXmlTest'
op|'('
name|'FlavorsSampleXmlTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ImagesSampleJsonTest
dedent|''
name|'class'
name|'ImagesSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_images_list
indent|'    '
name|'def'
name|'test_images_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of images get list request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'images-list-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_get
dedent|''
name|'def'
name|'test_image_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of one single image details request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s'"
op|'%'
name|'image_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'image_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_images_details
dedent|''
name|'def'
name|'test_images_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of all images details request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/detail'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'images-details-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_metadata_get
dedent|''
name|'def'
name|'test_image_metadata_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of a image metadata request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s/metadata'"
op|'%'
name|'image_id'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'image_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-metadata-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_metadata_post
dedent|''
name|'def'
name|'test_image_metadata_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample to update metadata of an image metadata request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
nl|'\n'
string|"'images/%s/metadata'"
op|'%'
name|'image_id'
op|','
nl|'\n'
string|"'image-metadata-post-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-metadata-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_metadata_put
dedent|''
name|'def'
name|'test_image_metadata_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of image metadata put request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'images/%s/metadata'"
op|'%'
name|'image_id'
op|','
nl|'\n'
string|"'image-metadata-put-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-metadata-put-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_meta_key_get
dedent|''
name|'def'
name|'test_image_meta_key_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of a image metadata key request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'key'
op|'='
string|'"kernel_id"'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s/metadata/%s'"
op|'%'
op|'('
name|'image_id'
op|','
name|'key'
op|')'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-meta-key-get'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_meta_key_put
dedent|''
name|'def'
name|'test_image_meta_key_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of image metadata key put request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'key'
op|'='
string|'"auto_disk_config"'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'images/%s/metadata/%s'"
op|'%'
op|'('
name|'image_id'
op|','
name|'key'
op|')'
op|','
nl|'\n'
string|"'image-meta-key-put-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-meta-key-put-resp'"
op|','
nl|'\n'
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ImagesSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ImagesSampleXmlTest'
op|'('
name|'ImagesSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|LimitsSampleJsonTest
dedent|''
name|'class'
name|'LimitsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_limits_get
indent|'    '
name|'def'
name|'test_limits_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'limits'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'limit-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|LimitsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'LimitsSampleXmlTest'
op|'('
name|'LimitsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersActionsJsonTest
dedent|''
name|'class'
name|'ServersActionsJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|setUp
indent|'    '
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'ServersActionsJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_test_server_action
dedent|''
name|'def'
name|'_test_server_action'
op|'('
name|'self'
op|','
name|'uuid'
op|','
name|'action'
op|','
nl|'\n'
name|'subs'
op|'='
op|'{'
op|'}'
op|','
name|'resp_tpl'
op|'='
name|'None'
op|','
name|'code'
op|'='
number|'202'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'.'
name|'update'
op|'('
op|'{'
string|"'action'"
op|':'
name|'action'
op|'}'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-action-%s'"
op|'%'
name|'action'
op|'.'
name|'lower'
op|'('
op|')'
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
name|'code'
op|')'
newline|'\n'
name|'if'
name|'resp_tpl'
op|':'
newline|'\n'
indent|'            '
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
name|'resp_tpl'
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|'""'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_password
dedent|''
dedent|''
name|'def'
name|'test_server_password'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"changePassword"'
op|','
nl|'\n'
op|'{'
string|'"password"'
op|':'
string|'"foo"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_reboot
dedent|''
name|'def'
name|'test_server_reboot'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"reboot"'
op|','
nl|'\n'
op|'{'
string|'"type"'
op|':'
string|'"HARD"'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"reboot"'
op|','
nl|'\n'
op|'{'
string|'"type"'
op|':'
string|'"SOFT"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_rebuild
dedent|''
name|'def'
name|'test_server_rebuild'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'image'
op|'='
name|'self'
op|'.'
name|'api'
op|'.'
name|'get_images'
op|'('
op|')'
op|'['
number|'0'
op|']'
op|'['
string|"'id'"
op|']'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'uuid'"
op|':'
name|'image'
op|','
nl|'\n'
string|"'name'"
op|':'
string|"'foobar'"
op|','
nl|'\n'
string|"'pass'"
op|':'
string|"'seekr3t'"
op|','
nl|'\n'
string|"'ip'"
op|':'
string|"'1.2.3.4'"
op|','
nl|'\n'
string|"'ip6'"
op|':'
string|"'fe80::100'"
op|','
nl|'\n'
string|"'hostid'"
op|':'
string|"'[a-f0-9]+'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'rebuild'"
op|','
name|'subs'
op|','
nl|'\n'
string|"'server-action-rebuild-resp'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_resize
dedent|''
name|'def'
name|'test_server_resize'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'FLAGS'
op|'.'
name|'allow_resize_to_same_host'
op|'='
name|'True'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"resize"'
op|','
nl|'\n'
op|'{'
string|'"id"'
op|':'
number|'2'
op|','
nl|'\n'
string|'"host"'
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|'}'
op|')'
newline|'\n'
name|'return'
name|'uuid'
newline|'\n'
nl|'\n'
DECL|member|test_server_revert_resize
dedent|''
name|'def'
name|'test_server_revert_resize'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'test_server_resize'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"revertResize"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_confirm_resize
dedent|''
name|'def'
name|'test_server_confirm_resize'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'test_server_resize'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"confirmResize"'
op|','
name|'code'
op|'='
number|'204'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_create_image
dedent|''
name|'def'
name|'test_server_create_image'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'createImage'"
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'foo-image'"
op|','
nl|'\n'
string|"'meta_var'"
op|':'
string|"'myvar'"
op|','
nl|'\n'
string|"'meta_val'"
op|':'
string|"'foobar'"
op|'}'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersActionsXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersActionsXmlTest'
op|'('
name|'ServersActionsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerStartStopJsonTest
dedent|''
name|'class'
name|'ServerStartStopJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".server_start_stop.Server_start_stop"'
newline|'\n'
nl|'\n'
DECL|member|_test_server_action
name|'def'
name|'_test_server_action'
op|'('
name|'self'
op|','
name|'uuid'
op|','
name|'action'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server_start_stop'"
op|','
nl|'\n'
op|'{'
string|"'action'"
op|':'
name|'action'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|'""'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_start
dedent|''
name|'def'
name|'test_server_start'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'os-stop'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'os-start'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_stop
dedent|''
name|'def'
name|'test_server_stop'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'os-stop'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerStartStopXmlTest
dedent|''
dedent|''
name|'class'
name|'ServerStartStopXmlTest'
op|'('
name|'ServerStartStopJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UserDataJsonTest
dedent|''
name|'class'
name|'UserDataJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.user_data.User_data"'
newline|'\n'
nl|'\n'
DECL|member|test_user_data_post
name|'def'
name|'test_user_data_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'user_data_contents'
op|'='
string|'\'#!/bin/bash\\n/bin/su\\necho "I am in you!"\\n\''
newline|'\n'
name|'user_data'
op|'='
name|'base64'
op|'.'
name|'b64encode'
op|'('
name|'user_data_contents'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'user_data'"
op|':'
name|'user_data'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'userdata-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'userdata-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UserDataXmlTest
dedent|''
dedent|''
name|'class'
name|'UserDataXmlTest'
op|'('
name|'UserDataJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsExtraDataJsonTest
dedent|''
name|'class'
name|'FlavorsExtraDataJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|"'nova.api.openstack.compute.contrib.flavorextradata.'"
nl|'\n'
string|"'Flavorextradata'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_flags
name|'def'
name|'_get_flags'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'f'
op|'='
name|'super'
op|'('
name|'FlavorsExtraDataJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'_get_flags'
op|'('
op|')'
newline|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'='
name|'FLAGS'
op|'.'
name|'osapi_compute_extension'
op|'['
op|':'
op|']'
newline|'\n'
comment|'# Flavorextradata extension also needs Flavormanage to be loaded.'
nl|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
string|"'nova.api.openstack.compute.contrib.flavormanage.Flavormanage'"
op|')'
newline|'\n'
name|'return'
name|'f'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_extra_data_get
dedent|''
name|'def'
name|'test_flavors_extra_data_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/1'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-extra-data-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_extra_data_list
dedent|''
name|'def'
name|'test_flavors_extra_data_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/detail'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-extra-data-list-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_extra_data_post
dedent|''
name|'def'
name|'test_flavors_extra_data_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'flavors'"
op|','
nl|'\n'
string|"'flavors-extra-data-post-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-extra-data-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsExtraDataXmlTest
dedent|''
dedent|''
name|'class'
name|'FlavorsExtraDataXmlTest'
op|'('
name|'FlavorsExtraDataJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SecurityGroupsSampleJsonTest
dedent|''
name|'class'
name|'SecurityGroupsSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".security_groups.Security_groups"'
newline|'\n'
nl|'\n'
DECL|member|test_security_group_create
name|'def'
name|'test_security_group_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'name'
op|'='
name|'self'
op|'.'
name|'ctype'
op|'+'
string|"'-test'"
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'group_name'"
op|':'
name|'name'
op|','
nl|'\n'
string|'"description"'
op|':'
string|'"description"'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-security-groups'"
op|','
nl|'\n'
string|"'security-group-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-groups-create-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_groups_list
dedent|''
name|'def'
name|'test_security_groups_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of security groups get list request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-security-groups'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-groups-list-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_groups_get
dedent|''
name|'def'
name|'test_security_groups_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of security groups get request"""'
newline|'\n'
name|'security_group_id'
op|'='
string|"'1'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-security-groups/%s'"
op|'%'
name|'security_group_id'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-groups-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_groups_list_server
dedent|''
name|'def'
name|'test_security_groups_list_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of security groups for a specific server."""'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/os-security-groups'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-security-groups-list-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SecurityGroupsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'SecurityGroupsSampleXmlTest'
op|'('
name|'SecurityGroupsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SchedulerHintsJsonTest
dedent|''
name|'class'
name|'SchedulerHintsJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.scheduler_hints."'
nl|'\n'
string|'"Scheduler_hints"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_scheduler_hints_post
name|'def'
name|'test_scheduler_hints_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of scheduler hint post request"""'
newline|'\n'
name|'hints'
op|'='
op|'{'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'image_near'"
op|':'
name|'str'
op|'('
name|'uuid'
op|'.'
name|'uuid4'
op|'('
op|')'
op|')'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'scheduler-hints-post-req'"
op|','
nl|'\n'
name|'hints'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'scheduler-hints-post-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SchedulerHintsXmlTest
dedent|''
dedent|''
name|'class'
name|'SchedulerHintsXmlTest'
op|'('
name|'SchedulerHintsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ConsoleOutputSampleJsonTest
dedent|''
name|'class'
name|'ConsoleOutputSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".console_output.Console_output"'
newline|'\n'
nl|'\n'
DECL|member|test_get_console_output
name|'def'
name|'test_get_console_output'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'console-output-post-req'"
op|','
nl|'\n'
op|'{'
string|"'action'"
op|':'
string|"'os-getConsoleOutput'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'console-output-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ConsoleOutputSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ConsoleOutputSampleXmlTest'
op|'('
name|'ConsoleOutputSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'        '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedServerAttributesJsonTest
dedent|''
name|'class'
name|'ExtendedServerAttributesJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
string|'".extended_server_attributes"'
op|'+'
DECL|variable|extension_name
string|'".Extended_server_attributes"'
newline|'\n'
nl|'\n'
DECL|member|test_extended_server_attrs_get
name|'def'
name|'test_extended_server_attrs_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'instance_name'"
op|']'
op|'='
string|"'instance-\\d{8}'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'extended-server-attrs-get'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_extended_server_attrs_list
dedent|''
name|'def'
name|'test_extended_server_attrs_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'instance_name'"
op|']'
op|'='
string|"'instance-\\d{8}'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'extended-server-attrs-list'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedServerAttributesXmlTest
dedent|''
dedent|''
name|'class'
name|'ExtendedServerAttributesXmlTest'
op|'('
name|'ExtendedServerAttributesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
dedent|''
endmarker|''
end_unit
