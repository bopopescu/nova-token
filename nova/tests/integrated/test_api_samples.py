begin_unit
comment|'# vim: tabstop=4 shiftwidth=4 softtabstop=4'
nl|'\n'
comment|'# Copyright 2012 Nebula, Inc.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
name|'import'
name|'base64'
newline|'\n'
name|'import'
name|'copy'
newline|'\n'
name|'import'
name|'datetime'
newline|'\n'
name|'import'
name|'inspect'
newline|'\n'
name|'import'
name|'json'
newline|'\n'
name|'import'
name|'os'
newline|'\n'
name|'import'
name|'re'
newline|'\n'
name|'import'
name|'urllib'
newline|'\n'
name|'import'
name|'uuid'
name|'as'
name|'uuid_lib'
newline|'\n'
nl|'\n'
name|'import'
name|'coverage'
newline|'\n'
name|'from'
name|'lxml'
name|'import'
name|'etree'
newline|'\n'
nl|'\n'
name|'from'
name|'nova'
op|'.'
name|'api'
op|'.'
name|'metadata'
name|'import'
name|'password'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'api'
op|'.'
name|'openstack'
op|'.'
name|'compute'
op|'.'
name|'contrib'
name|'import'
name|'coverage_ext'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'api'
op|'.'
name|'openstack'
op|'.'
name|'compute'
op|'.'
name|'contrib'
name|'import'
name|'fping'
newline|'\n'
comment|'# Import extensions to pull in osapi_compute_extension CONF option used below.'
nl|'\n'
name|'from'
name|'nova'
op|'.'
name|'cloudpipe'
name|'import'
name|'pipelib'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'context'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'db'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'db'
op|'.'
name|'sqlalchemy'
name|'import'
name|'models'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'exception'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'network'
name|'import'
name|'api'
name|'as'
name|'network_api'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'cfg'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'importutils'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'jsonutils'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
op|'.'
name|'log'
name|'import'
name|'logging'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'timeutils'
newline|'\n'
name|'import'
name|'nova'
op|'.'
name|'quota'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'scheduler'
name|'import'
name|'driver'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'servicegroup'
name|'import'
name|'api'
name|'as'
name|'service_group_api'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'test'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'api'
op|'.'
name|'openstack'
op|'.'
name|'compute'
op|'.'
name|'contrib'
name|'import'
name|'test_fping'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'api'
op|'.'
name|'openstack'
op|'.'
name|'compute'
op|'.'
name|'contrib'
name|'import'
name|'test_networks'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'api'
op|'.'
name|'openstack'
op|'.'
name|'compute'
op|'.'
name|'contrib'
name|'import'
name|'test_services'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'api'
op|'.'
name|'openstack'
name|'import'
name|'fakes'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'baremetal'
op|'.'
name|'db'
name|'import'
name|'base'
name|'as'
name|'bm_db_base'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
name|'import'
name|'fake_instance_actions'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
name|'import'
name|'fake_network'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'image'
name|'import'
name|'fake'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'integrated'
name|'import'
name|'integrated_helpers'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
name|'import'
name|'utils'
name|'as'
name|'test_utils'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'utils'
newline|'\n'
nl|'\n'
DECL|variable|CONF
name|'CONF'
op|'='
name|'cfg'
op|'.'
name|'CONF'
newline|'\n'
name|'CONF'
op|'.'
name|'import_opt'
op|'('
string|"'allow_resize_to_same_host'"
op|','
string|"'nova.compute.api'"
op|')'
newline|'\n'
name|'CONF'
op|'.'
name|'import_opt'
op|'('
string|"'osapi_compute_extension'"
op|','
nl|'\n'
string|"'nova.api.openstack.compute.extensions'"
op|')'
newline|'\n'
name|'CONF'
op|'.'
name|'import_opt'
op|'('
string|"'vpn_image_id'"
op|','
string|"'nova.cloudpipe.pipelib'"
op|')'
newline|'\n'
name|'CONF'
op|'.'
name|'import_opt'
op|'('
string|"'osapi_compute_link_prefix'"
op|','
string|"'nova.api.openstack.common'"
op|')'
newline|'\n'
name|'CONF'
op|'.'
name|'import_opt'
op|'('
string|"'osapi_glance_link_prefix'"
op|','
string|"'nova.api.openstack.common'"
op|')'
newline|'\n'
name|'CONF'
op|'.'
name|'import_opt'
op|'('
string|"'enable'"
op|','
string|"'nova.cells.opts'"
op|','
name|'group'
op|'='
string|"'cells'"
op|')'
newline|'\n'
name|'CONF'
op|'.'
name|'import_opt'
op|'('
string|"'db_check_interval'"
op|','
string|"'nova.cells.state'"
op|','
name|'group'
op|'='
string|"'cells'"
op|')'
newline|'\n'
DECL|variable|LOG
name|'LOG'
op|'='
name|'logging'
op|'.'
name|'getLogger'
op|'('
name|'__name__'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|NoMatch
name|'class'
name|'NoMatch'
op|'('
name|'test'
op|'.'
name|'TestingException'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'pass'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ApiSampleTestBase
dedent|''
name|'class'
name|'ApiSampleTestBase'
op|'('
name|'integrated_helpers'
op|'.'
name|'_IntegratedTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'json'"
newline|'\n'
DECL|variable|all_extensions
name|'all_extensions'
op|'='
name|'False'
newline|'\n'
DECL|variable|extension_name
name|'extension_name'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'flags'
op|'('
name|'use_ipv6'
op|'='
name|'False'
op|','
nl|'\n'
name|'osapi_compute_link_prefix'
op|'='
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
name|'osapi_glance_link_prefix'
op|'='
name|'self'
op|'.'
name|'_get_glance_host'
op|'('
op|')'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'self'
op|'.'
name|'all_extensions'
op|':'
newline|'\n'
indent|'            '
name|'ext'
op|'='
op|'['
name|'self'
op|'.'
name|'extension_name'
op|']'
name|'if'
name|'self'
op|'.'
name|'extension_name'
name|'else'
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'flags'
op|'('
name|'osapi_compute_extension'
op|'='
name|'ext'
op|')'
newline|'\n'
dedent|''
name|'super'
op|'('
name|'ApiSampleTestBase'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'fake_network'
op|'.'
name|'stub_compute_with_ips'
op|'('
name|'self'
op|'.'
name|'stubs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'generate_samples'
op|'='
name|'os'
op|'.'
name|'getenv'
op|'('
string|"'GENERATE_SAMPLES'"
op|')'
name|'is'
name|'not'
name|'None'
newline|'\n'
nl|'\n'
DECL|member|_pretty_data
dedent|''
name|'def'
name|'_pretty_data'
op|'('
name|'self'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'self'
op|'.'
name|'ctype'
op|'=='
string|"'json'"
op|':'
newline|'\n'
indent|'            '
name|'data'
op|'='
name|'jsonutils'
op|'.'
name|'dumps'
op|'('
name|'jsonutils'
op|'.'
name|'loads'
op|'('
name|'data'
op|')'
op|','
name|'sort_keys'
op|'='
name|'True'
op|','
nl|'\n'
name|'indent'
op|'='
number|'4'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'data'
name|'is'
name|'None'
op|':'
newline|'\n'
comment|'# Likely from missing XML file.'
nl|'\n'
indent|'                '
name|'return'
string|'""'
newline|'\n'
dedent|''
name|'xml'
op|'='
name|'etree'
op|'.'
name|'XML'
op|'('
name|'data'
op|')'
newline|'\n'
name|'data'
op|'='
name|'etree'
op|'.'
name|'tostring'
op|'('
name|'xml'
op|','
name|'encoding'
op|'='
string|'"UTF-8"'
op|','
nl|'\n'
name|'xml_declaration'
op|'='
name|'True'
op|','
name|'pretty_print'
op|'='
name|'True'
op|')'
newline|'\n'
dedent|''
name|'return'
string|"'\\n'"
op|'.'
name|'join'
op|'('
name|'line'
op|'.'
name|'rstrip'
op|'('
op|')'
name|'for'
name|'line'
name|'in'
name|'data'
op|'.'
name|'split'
op|'('
string|"'\\n'"
op|')'
op|')'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_objectify
dedent|''
name|'def'
name|'_objectify'
op|'('
name|'self'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'not'
name|'data'
op|':'
newline|'\n'
indent|'            '
name|'return'
op|'{'
op|'}'
newline|'\n'
dedent|''
name|'if'
name|'self'
op|'.'
name|'ctype'
op|'=='
string|"'json'"
op|':'
newline|'\n'
comment|'# NOTE(vish): allow non-quoted replacements to survive json'
nl|'\n'
indent|'            '
name|'data'
op|'='
name|'re'
op|'.'
name|'sub'
op|'('
string|'r\'([^"])%\\((.+)\\)s([^"])\''
op|','
string|'r\'\\1"%(int:\\2)s"\\3\''
op|','
name|'data'
op|')'
newline|'\n'
name|'return'
name|'jsonutils'
op|'.'
name|'loads'
op|'('
name|'data'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
DECL|function|to_dict
indent|'            '
name|'def'
name|'to_dict'
op|'('
name|'node'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'ret'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'if'
name|'node'
op|'.'
name|'items'
op|'('
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'.'
name|'update'
op|'('
name|'dict'
op|'('
name|'node'
op|'.'
name|'items'
op|'('
op|')'
op|')'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'text'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'['
string|"'__content__'"
op|']'
op|'='
name|'node'
op|'.'
name|'text'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'tag'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'['
string|"'__tag__'"
op|']'
op|'='
name|'node'
op|'.'
name|'tag'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'nsmap'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'['
string|"'__nsmap__'"
op|']'
op|'='
name|'node'
op|'.'
name|'nsmap'
newline|'\n'
dedent|''
name|'for'
name|'element'
name|'in'
name|'node'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'.'
name|'setdefault'
op|'('
name|'node'
op|'.'
name|'tag'
op|','
op|'['
op|']'
op|')'
newline|'\n'
name|'ret'
op|'['
name|'node'
op|'.'
name|'tag'
op|']'
op|'.'
name|'append'
op|'('
name|'to_dict'
op|'('
name|'element'
op|')'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'ret'
newline|'\n'
dedent|''
name|'return'
name|'to_dict'
op|'('
name|'etree'
op|'.'
name|'fromstring'
op|'('
name|'data'
op|')'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
op|'@'
name|'classmethod'
newline|'\n'
DECL|member|_get_sample_path
name|'def'
name|'_get_sample_path'
op|'('
name|'cls'
op|','
name|'name'
op|','
name|'dirname'
op|','
name|'suffix'
op|'='
string|"''"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'parts'
op|'='
op|'['
name|'dirname'
op|']'
newline|'\n'
name|'parts'
op|'.'
name|'append'
op|'('
string|"'api_samples'"
op|')'
newline|'\n'
name|'if'
name|'cls'
op|'.'
name|'all_extensions'
op|':'
newline|'\n'
indent|'            '
name|'parts'
op|'.'
name|'append'
op|'('
string|"'all_extensions'"
op|')'
newline|'\n'
dedent|''
name|'if'
name|'cls'
op|'.'
name|'extension_name'
op|':'
newline|'\n'
indent|'            '
name|'alias'
op|'='
name|'importutils'
op|'.'
name|'import_class'
op|'('
name|'cls'
op|'.'
name|'extension_name'
op|')'
op|'.'
name|'alias'
newline|'\n'
name|'parts'
op|'.'
name|'append'
op|'('
name|'alias'
op|')'
newline|'\n'
dedent|''
name|'parts'
op|'.'
name|'append'
op|'('
name|'name'
op|'+'
string|'"."'
op|'+'
name|'cls'
op|'.'
name|'ctype'
op|'+'
name|'suffix'
op|')'
newline|'\n'
name|'return'
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
op|'*'
name|'parts'
op|')'
newline|'\n'
nl|'\n'
dedent|''
op|'@'
name|'classmethod'
newline|'\n'
DECL|member|_get_sample
name|'def'
name|'_get_sample'
op|'('
name|'cls'
op|','
name|'name'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'dirname'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'abspath'
op|'('
name|'__file__'
op|')'
op|')'
newline|'\n'
name|'dirname'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'dirname'
op|','
string|'"../../../doc"'
op|')'
newline|'\n'
name|'return'
name|'cls'
op|'.'
name|'_get_sample_path'
op|'('
name|'name'
op|','
name|'dirname'
op|')'
newline|'\n'
nl|'\n'
dedent|''
op|'@'
name|'classmethod'
newline|'\n'
DECL|member|_get_template
name|'def'
name|'_get_template'
op|'('
name|'cls'
op|','
name|'name'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'dirname'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'abspath'
op|'('
name|'__file__'
op|')'
op|')'
newline|'\n'
name|'return'
name|'cls'
op|'.'
name|'_get_sample_path'
op|'('
name|'name'
op|','
name|'dirname'
op|','
name|'suffix'
op|'='
string|"'.tpl'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_read_template
dedent|''
name|'def'
name|'_read_template'
op|'('
name|'self'
op|','
name|'name'
op|')'
op|':'
newline|'\n'
nl|'\n'
indent|'        '
name|'template'
op|'='
name|'self'
op|'.'
name|'_get_template'
op|'('
name|'name'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'generate_samples'
name|'and'
name|'not'
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'template'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'with'
name|'open'
op|'('
name|'template'
op|','
string|"'w'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'pass'
newline|'\n'
dedent|''
dedent|''
name|'with'
name|'open'
op|'('
name|'template'
op|')'
name|'as'
name|'inf'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'inf'
op|'.'
name|'read'
op|'('
op|')'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_write_sample
dedent|''
dedent|''
name|'def'
name|'_write_sample'
op|'('
name|'self'
op|','
name|'name'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'with'
name|'open'
op|'('
name|'self'
op|'.'
name|'_get_sample'
op|'('
name|'name'
op|')'
op|','
string|"'w'"
op|')'
name|'as'
name|'outf'
op|':'
newline|'\n'
indent|'            '
name|'outf'
op|'.'
name|'write'
op|'('
name|'data'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_compare_result
dedent|''
dedent|''
name|'def'
name|'_compare_result'
op|'('
name|'self'
op|','
name|'subs'
op|','
name|'expected'
op|','
name|'result'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'matched_value'
op|'='
name|'None'
newline|'\n'
name|'if'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'dict'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'result'
op|','
name|'dict'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
nl|'\n'
name|'_'
op|'('
string|"'Result: %(result)s is not a dict.'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'ex_keys'
op|'='
name|'sorted'
op|'('
name|'expected'
op|'.'
name|'keys'
op|'('
op|')'
op|')'
newline|'\n'
name|'res_keys'
op|'='
name|'sorted'
op|'('
name|'result'
op|'.'
name|'keys'
op|'('
op|')'
op|')'
newline|'\n'
name|'if'
name|'ex_keys'
op|'!='
name|'res_keys'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
name|'_'
op|'('
string|"'Key mismatch:\\n'"
nl|'\n'
string|"'%(ex_keys)s\\n%(res_keys)s'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'key'
name|'in'
name|'ex_keys'
op|':'
newline|'\n'
indent|'                '
name|'res'
op|'='
name|'self'
op|'.'
name|'_compare_result'
op|'('
name|'subs'
op|','
name|'expected'
op|'['
name|'key'
op|']'
op|','
name|'result'
op|'['
name|'key'
op|']'
op|')'
newline|'\n'
name|'matched_value'
op|'='
name|'res'
name|'or'
name|'matched_value'
newline|'\n'
dedent|''
dedent|''
name|'elif'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'list'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'result'
op|','
name|'list'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
nl|'\n'
name|'_'
op|'('
string|"'Result: %(result)s is not a list.'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'expected'
op|'='
name|'expected'
op|'['
op|':'
op|']'
newline|'\n'
name|'extra'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'res_obj'
name|'in'
name|'result'
op|':'
newline|'\n'
indent|'                '
name|'for'
name|'i'
op|','
name|'ex_obj'
name|'in'
name|'enumerate'
op|'('
name|'expected'
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'try'
op|':'
newline|'\n'
indent|'                        '
name|'matched_value'
op|'='
name|'self'
op|'.'
name|'_compare_result'
op|'('
name|'subs'
op|','
name|'ex_obj'
op|','
nl|'\n'
name|'res_obj'
op|')'
newline|'\n'
name|'del'
name|'expected'
op|'['
name|'i'
op|']'
newline|'\n'
name|'break'
newline|'\n'
dedent|''
name|'except'
name|'NoMatch'
op|':'
newline|'\n'
indent|'                        '
name|'pass'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'extra'
op|'.'
name|'append'
op|'('
name|'res_obj'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'error'
op|'='
op|'['
op|']'
newline|'\n'
name|'if'
name|'expected'
op|':'
newline|'\n'
indent|'                '
name|'error'
op|'.'
name|'append'
op|'('
name|'_'
op|'('
string|"'Extra items in expected:'"
op|')'
op|')'
newline|'\n'
name|'error'
op|'.'
name|'extend'
op|'('
op|'['
name|'repr'
op|'('
name|'o'
op|')'
name|'for'
name|'o'
name|'in'
name|'expected'
op|']'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'extra'
op|':'
newline|'\n'
indent|'                '
name|'error'
op|'.'
name|'append'
op|'('
name|'_'
op|'('
string|"'Extra items in result:'"
op|')'
op|')'
newline|'\n'
name|'error'
op|'.'
name|'extend'
op|'('
op|'['
name|'repr'
op|'('
name|'o'
op|')'
name|'for'
name|'o'
name|'in'
name|'extra'
op|']'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'error'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
string|"'\\n'"
op|'.'
name|'join'
op|'('
name|'error'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'elif'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'basestring'
op|')'
name|'and'
string|"'%'"
name|'in'
name|'expected'
op|':'
newline|'\n'
comment|'# NOTE(vish): escape stuff for regex'
nl|'\n'
indent|'            '
name|'for'
name|'char'
name|'in'
string|"'[]<>?'"
op|':'
newline|'\n'
indent|'                '
name|'expected'
op|'='
name|'expected'
op|'.'
name|'replace'
op|'('
name|'char'
op|','
string|"'\\\\%s'"
op|'%'
name|'char'
op|')'
newline|'\n'
comment|'# NOTE(vish): special handling of subs that are not quoted. We are'
nl|'\n'
comment|'#             expecting an int but we had to pass in a string'
nl|'\n'
comment|'#             so the json would parse properly.'
nl|'\n'
dedent|''
name|'if'
name|'expected'
op|'.'
name|'startswith'
op|'('
string|'"%(int:"'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'result'
op|'='
name|'str'
op|'('
name|'result'
op|')'
newline|'\n'
name|'expected'
op|'='
name|'expected'
op|'.'
name|'replace'
op|'('
string|"'int:'"
op|','
string|"''"
op|')'
newline|'\n'
dedent|''
name|'expected'
op|'='
name|'expected'
op|'%'
name|'subs'
newline|'\n'
name|'expected'
op|'='
string|"'^%s$'"
op|'%'
name|'expected'
newline|'\n'
name|'match'
op|'='
name|'re'
op|'.'
name|'match'
op|'('
name|'expected'
op|','
name|'result'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'match'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
name|'_'
op|'('
string|"'Values do not match:\\n'"
nl|'\n'
string|"'%(expected)s\\n%(result)s'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'try'
op|':'
newline|'\n'
indent|'                '
name|'matched_value'
op|'='
name|'match'
op|'.'
name|'group'
op|'('
string|"'id'"
op|')'
newline|'\n'
dedent|''
name|'except'
name|'IndexError'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'match'
op|'.'
name|'groups'
op|'('
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'matched_value'
op|'='
name|'match'
op|'.'
name|'groups'
op|'('
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'basestring'
op|')'
op|':'
newline|'\n'
comment|'# NOTE(danms): Ignore whitespace in this comparison'
nl|'\n'
indent|'                '
name|'expected'
op|'='
name|'expected'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
name|'result'
op|'='
name|'result'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
dedent|''
name|'if'
name|'expected'
op|'!='
name|'result'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
name|'_'
op|'('
string|"'Values do not match:\\n'"
nl|'\n'
string|"'%(expected)s\\n%(result)s'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'return'
name|'matched_value'
newline|'\n'
nl|'\n'
DECL|member|_verify_something
dedent|''
name|'def'
name|'_verify_something'
op|'('
name|'self'
op|','
name|'subs'
op|','
name|'expected'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'result'
op|'='
name|'self'
op|'.'
name|'_pretty_data'
op|'('
name|'data'
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'_objectify'
op|'('
name|'result'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_compare_result'
op|'('
name|'subs'
op|','
name|'expected'
op|','
name|'result'
op|')'
newline|'\n'
nl|'\n'
DECL|member|generalize_subs
dedent|''
name|'def'
name|'generalize_subs'
op|'('
name|'self'
op|','
name|'subs'
op|','
name|'vanilla_regexes'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Give the test a chance to modify subs after the server response\n        was verified, and before the on-disk doc/api_samples file is checked.\n        This may be needed by some tests to convert exact matches expected\n        from the server into pattern matches to verify what is in the\n        sample file.\n\n        If there are no changes to be made, subs is returned unharmed.\n        """'
newline|'\n'
name|'return'
name|'subs'
newline|'\n'
nl|'\n'
DECL|member|_verify_response
dedent|''
name|'def'
name|'_verify_response'
op|'('
name|'self'
op|','
name|'name'
op|','
name|'subs'
op|','
name|'response'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'expected'
op|'='
name|'self'
op|'.'
name|'_read_template'
op|'('
name|'name'
op|')'
newline|'\n'
name|'expected'
op|'='
name|'self'
op|'.'
name|'_objectify'
op|'('
name|'expected'
op|')'
newline|'\n'
name|'response_data'
op|'='
name|'response'
op|'.'
name|'read'
op|'('
op|')'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'with'
name|'file'
op|'('
name|'self'
op|'.'
name|'_get_sample'
op|'('
name|'name'
op|')'
op|')'
name|'as'
name|'sample'
op|':'
newline|'\n'
indent|'                '
name|'sample_data'
op|'='
name|'sample'
op|'.'
name|'read'
op|'('
op|')'
newline|'\n'
dedent|''
dedent|''
name|'except'
name|'IOError'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'self'
op|'.'
name|'ctype'
op|'=='
string|"'json'"
op|':'
newline|'\n'
indent|'                '
name|'sample_data'
op|'='
string|'"{}"'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'sample_data'
op|'='
name|'None'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'response_result'
op|'='
name|'self'
op|'.'
name|'_verify_something'
op|'('
name|'subs'
op|','
name|'expected'
op|','
nl|'\n'
name|'response_data'
op|')'
newline|'\n'
comment|'# NOTE(danms): replace some of the subs with patterns for the'
nl|'\n'
comment|"# doc/api_samples check, which won't have things like the"
nl|'\n'
comment|'# correct compute host name. Also let the test do some of its'
nl|'\n'
comment|'# own generalization, if necessary'
nl|'\n'
name|'vanilla_regexes'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'compute_host'"
op|']'
op|'='
name|'vanilla_regexes'
op|'['
string|"'host_name'"
op|']'
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'vanilla_regexes'
op|'['
string|"'id'"
op|']'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'generalize_subs'
op|'('
name|'subs'
op|','
name|'vanilla_regexes'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_something'
op|'('
name|'subs'
op|','
name|'expected'
op|','
name|'sample_data'
op|')'
newline|'\n'
name|'return'
name|'response_result'
newline|'\n'
dedent|''
name|'except'
name|'NoMatch'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'self'
op|'.'
name|'generate_samples'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'_write_sample'
op|'('
name|'name'
op|','
name|'self'
op|'.'
name|'_pretty_data'
op|'('
name|'response_data'
op|')'
op|')'
newline|'\n'
dedent|''
name|'raise'
newline|'\n'
nl|'\n'
DECL|member|_get_host
dedent|''
dedent|''
name|'def'
name|'_get_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'http://openstack.example.com'"
newline|'\n'
nl|'\n'
DECL|member|_get_glance_host
dedent|''
name|'def'
name|'_get_glance_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'http://glance.openstack.example.com'"
newline|'\n'
nl|'\n'
DECL|member|_get_regexes
dedent|''
name|'def'
name|'_get_regexes'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'self'
op|'.'
name|'ctype'
op|'=='
string|"'json'"
op|':'
newline|'\n'
indent|'            '
name|'text'
op|'='
string|'r\'(\\\\"|[^"])*\''
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'text'
op|'='
string|"r'[^<]*'"
newline|'\n'
dedent|''
name|'return'
op|'{'
nl|'\n'
comment|'# NOTE(treinish): Could result in a false positive, but it'
nl|'\n'
comment|"# shouldn't be an issue for this case."
nl|'\n'
string|"'timestamp'"
op|':'
string|"'\\d{4}-[0,1]\\d-[0-3]\\d[ ,T]'"
nl|'\n'
string|"'\\d{2}:\\d{2}:\\d{2}'"
nl|'\n'
string|"'(Z|(\\+|-)\\d{2}:\\d{2}|\\.\\d{6}|)'"
op|','
nl|'\n'
string|"'password'"
op|':'
string|"'[0-9a-zA-Z]{1,12}'"
op|','
nl|'\n'
string|"'ip'"
op|':'
string|"'[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}'"
op|','
nl|'\n'
string|"'ip6'"
op|':'
string|"'([0-9a-zA-Z]{1,4}:){1,7}:?[0-9a-zA-Z]{1,4}'"
op|','
nl|'\n'
string|"'id'"
op|':'
string|"'(?P<id>[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}'"
nl|'\n'
string|"'-[0-9a-f]{4}-[0-9a-f]{12})'"
op|','
nl|'\n'
string|"'uuid'"
op|':'
string|"'[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}'"
nl|'\n'
string|"'-[0-9a-f]{4}-[0-9a-f]{12}'"
op|','
nl|'\n'
string|"'reservation_id'"
op|':'
string|"'r-[0-9a-zA-Z]{8}'"
op|','
nl|'\n'
string|"'private_key'"
op|':'
string|"'-----BEGIN RSA PRIVATE KEY-----'"
nl|'\n'
string|"'[a-zA-Z0-9\\n/+=]*'"
nl|'\n'
string|"'-----END RSA PRIVATE KEY-----'"
op|','
nl|'\n'
string|"'public_key'"
op|':'
string|"'ssh-rsa[ a-zA-Z0-9/+=]*'"
nl|'\n'
string|"'Generated by Nova'"
op|','
nl|'\n'
string|"'fingerprint'"
op|':'
string|"'([0-9a-f]{2}:){15}[0-9a-f]{2}'"
op|','
nl|'\n'
comment|"#            '[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:'"
nl|'\n'
comment|"#                           '[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:'"
nl|'\n'
comment|"#                           '[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:'"
nl|'\n'
comment|"#                           '[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}',"
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'host_name'"
op|':'
string|"'[0-9a-z]{32}'"
op|','
nl|'\n'
string|"'glance_host'"
op|':'
name|'self'
op|'.'
name|'_get_glance_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'compute_host'"
op|':'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|','
nl|'\n'
string|"'text'"
op|':'
name|'text'
op|','
nl|'\n'
string|"'int'"
op|':'
string|"'[0-9]+'"
op|','
nl|'\n'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|_get_response
dedent|''
name|'def'
name|'_get_response'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'method'
op|','
name|'body'
op|'='
name|'None'
op|','
name|'strip_version'
op|'='
name|'False'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'headers'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'headers'
op|'['
string|"'Content-Type'"
op|']'
op|'='
string|"'application/'"
op|'+'
name|'self'
op|'.'
name|'ctype'
newline|'\n'
name|'headers'
op|'['
string|"'Accept'"
op|']'
op|'='
string|"'application/'"
op|'+'
name|'self'
op|'.'
name|'ctype'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'api'
op|'.'
name|'api_request'
op|'('
name|'url'
op|','
name|'body'
op|'='
name|'body'
op|','
name|'method'
op|'='
name|'method'
op|','
nl|'\n'
name|'headers'
op|'='
name|'headers'
op|','
name|'strip_version'
op|'='
name|'strip_version'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_get
dedent|''
name|'def'
name|'_do_get'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'strip_version'
op|'='
name|'False'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_get_response'
op|'('
name|'url'
op|','
string|"'GET'"
op|','
name|'strip_version'
op|'='
name|'strip_version'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_post
dedent|''
name|'def'
name|'_do_post'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'name'
op|','
name|'subs'
op|','
name|'method'
op|'='
string|"'POST'"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'body'
op|'='
name|'self'
op|'.'
name|'_read_template'
op|'('
name|'name'
op|')'
op|'%'
name|'subs'
newline|'\n'
name|'sample'
op|'='
name|'self'
op|'.'
name|'_get_sample'
op|'('
name|'name'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'generate_samples'
name|'and'
name|'not'
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'sample'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'_write_sample'
op|'('
name|'name'
op|','
name|'body'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'self'
op|'.'
name|'_get_response'
op|'('
name|'url'
op|','
name|'method'
op|','
name|'body'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_put
dedent|''
name|'def'
name|'_do_put'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'name'
op|','
name|'subs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_do_post'
op|'('
name|'url'
op|','
name|'name'
op|','
name|'subs'
op|','
name|'method'
op|'='
string|"'PUT'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_delete
dedent|''
name|'def'
name|'_do_delete'
op|'('
name|'self'
op|','
name|'url'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_get_response'
op|'('
name|'url'
op|','
string|"'DELETE'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ApiSamplesTrap
dedent|''
dedent|''
name|'class'
name|'ApiSamplesTrap'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Make sure extensions don\'t get added without tests."""'
newline|'\n'
nl|'\n'
DECL|variable|all_extensions
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
DECL|member|_get_extensions_tested
name|'def'
name|'_get_extensions_tested'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'tests'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'attr'
name|'in'
name|'globals'
op|'('
op|')'
op|'.'
name|'values'
op|'('
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'inspect'
op|'.'
name|'isclass'
op|'('
name|'attr'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'continue'
comment|'# Skip non-class objects'
newline|'\n'
dedent|''
name|'if'
name|'not'
name|'issubclass'
op|'('
name|'attr'
op|','
name|'integrated_helpers'
op|'.'
name|'_IntegratedTestBase'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'continue'
comment|'# Skip non-test classes'
newline|'\n'
dedent|''
name|'if'
name|'attr'
op|'.'
name|'extension_name'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'                '
name|'continue'
comment|'# Skip base tests'
newline|'\n'
dedent|''
name|'cls'
op|'='
name|'importutils'
op|'.'
name|'import_class'
op|'('
name|'attr'
op|'.'
name|'extension_name'
op|')'
newline|'\n'
name|'tests'
op|'.'
name|'append'
op|'('
name|'cls'
op|'.'
name|'alias'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'tests'
newline|'\n'
nl|'\n'
DECL|member|_get_extensions
dedent|''
name|'def'
name|'_get_extensions'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'extensions'
op|'='
op|'['
op|']'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'extensions'"
op|')'
newline|'\n'
name|'for'
name|'extension'
name|'in'
name|'jsonutils'
op|'.'
name|'loads'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|')'
op|'['
string|"'extensions'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'extensions'
op|'.'
name|'append'
op|'('
name|'str'
op|'('
name|'extension'
op|'['
string|"'alias'"
op|']'
op|')'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'extensions'
newline|'\n'
nl|'\n'
DECL|member|test_all_extensions_have_samples
dedent|''
name|'def'
name|'test_all_extensions_have_samples'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# NOTE(danms): This is a list of extensions which are currently'
nl|'\n'
comment|"# in the tree but that don't (yet) have tests. This list should"
nl|'\n'
comment|'# NOT be allowed to grow, and should shrink to zero (and be'
nl|'\n'
comment|'# removed) soon.'
nl|'\n'
indent|'        '
name|'do_not_approve_additions'
op|'='
op|'['
op|']'
newline|'\n'
name|'do_not_approve_additions'
op|'.'
name|'append'
op|'('
string|"'os-create-server-ext'"
op|')'
newline|'\n'
name|'do_not_approve_additions'
op|'.'
name|'append'
op|'('
string|"'os-hypervisors'"
op|')'
newline|'\n'
name|'do_not_approve_additions'
op|'.'
name|'append'
op|'('
string|"'os-volumes'"
op|')'
newline|'\n'
nl|'\n'
name|'tests'
op|'='
name|'self'
op|'.'
name|'_get_extensions_tested'
op|'('
op|')'
newline|'\n'
name|'extensions'
op|'='
name|'self'
op|'.'
name|'_get_extensions'
op|'('
op|')'
newline|'\n'
name|'missing_tests'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'extension'
name|'in'
name|'extensions'
op|':'
newline|'\n'
comment|'# NOTE(danms): if you add tests, remove it from the'
nl|'\n'
comment|'# exclusions list'
nl|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertFalse'
op|'('
name|'extension'
name|'in'
name|'do_not_approve_additions'
name|'and'
nl|'\n'
name|'extension'
name|'in'
name|'tests'
op|')'
newline|'\n'
nl|'\n'
comment|'# NOTE(danms): if you add an extension, it must come with'
nl|'\n'
comment|'# api_samples tests!'
nl|'\n'
name|'if'
op|'('
name|'extension'
name|'not'
name|'in'
name|'tests'
name|'and'
nl|'\n'
name|'extension'
name|'not'
name|'in'
name|'do_not_approve_additions'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'missing_tests'
op|'.'
name|'append'
op|'('
name|'extension'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'missing_tests'
op|':'
newline|'\n'
indent|'            '
name|'LOG'
op|'.'
name|'error'
op|'('
string|'"Extensions are missing tests: %s"'
op|'%'
name|'missing_tests'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'missing_tests'
op|','
op|'['
op|']'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VersionsSampleJsonTest
dedent|''
dedent|''
name|'class'
name|'VersionsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_versions_get
indent|'    '
name|'def'
name|'test_versions_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"''"
op|','
name|'strip_version'
op|'='
name|'True'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'versions-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VersionsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'VersionsSampleXmlTest'
op|'('
name|'VersionsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleBase
dedent|''
name|'class'
name|'ServersSampleBase'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|_post_server
indent|'    '
name|'def'
name|'_post_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'server-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleJsonTest
dedent|''
dedent|''
name|'class'
name|'ServersSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_servers_post
indent|'    '
name|'def'
name|'test_servers_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_servers_get
dedent|''
name|'def'
name|'test_servers_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'test_servers_post'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'hypervisor_hostname'"
op|']'
op|'='
string|"r'[\\w\\.\\-]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_servers_list
dedent|''
name|'def'
name|'test_servers_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_servers_details
dedent|''
name|'def'
name|'test_servers_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'hypervisor_hostname'"
op|']'
op|'='
string|"r'[\\w\\.\\-]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-details-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersSampleXmlTest'
op|'('
name|'ServersSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleAllExtensionJsonTest
dedent|''
name|'class'
name|'ServersSampleAllExtensionJsonTest'
op|'('
name|'ServersSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleAllExtensionXmlTest
dedent|''
name|'class'
name|'ServersSampleAllExtensionXmlTest'
op|'('
name|'ServersSampleXmlTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleHideAddressesJsonTest
dedent|''
name|'class'
name|'ServersSampleHideAddressesJsonTest'
op|'('
name|'ServersSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|"'.'"
op|'.'
name|'join'
op|'('
op|'('
string|"'nova.api.openstack.compute.contrib'"
op|','
nl|'\n'
string|"'hide_server_addresses'"
op|','
nl|'\n'
string|"'Hide_server_addresses'"
op|')'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleHideAddressesXMLTest
dedent|''
name|'class'
name|'ServersSampleHideAddressesXMLTest'
op|'('
name|'ServersSampleHideAddressesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersMetadataJsonTest
dedent|''
name|'class'
name|'ServersMetadataJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|_create_and_set
indent|'    '
name|'def'
name|'_create_and_set'
op|'('
name|'self'
op|','
name|'subs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'servers/%s/metadata'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-metadata-all-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-all-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
name|'return'
name|'uuid'
newline|'\n'
nl|'\n'
DECL|member|generalize_subs
dedent|''
name|'def'
name|'generalize_subs'
op|'('
name|'self'
op|','
name|'subs'
op|','
name|'vanilla_regexes'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'['
string|"'value'"
op|']'
op|'='
string|"'(Foo|Bar) Value'"
newline|'\n'
name|'return'
name|'subs'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_put_all
dedent|''
name|'def'
name|'test_metadata_put_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Test setting all metadata for a server.'
nl|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_post_all
dedent|''
name|'def'
name|'test_metadata_post_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Test updating all metadata for a server.'
nl|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'value'"
op|']'
op|'='
string|"'Bar Value'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/metadata'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-metadata-all-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-all-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_get_all
dedent|''
name|'def'
name|'test_metadata_get_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Test getting all metadata for a server.'
nl|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/metadata'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-all-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_put
dedent|''
name|'def'
name|'test_metadata_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Test putting an individual metadata item for a server.'
nl|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'value'"
op|']'
op|'='
string|"'Bar Value'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'servers/%s/metadata/foo'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-metadata-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_get
dedent|''
name|'def'
name|'test_metadata_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Test getting an individual metadata item for a server.'
nl|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/metadata/foo'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_delete
dedent|''
name|'def'
name|'test_metadata_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Test deleting an individual metadata item for a server.'
nl|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'servers/%s/metadata/foo'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|"''"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersMetadataXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersMetadataXmlTest'
op|'('
name|'ServersMetadataJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersIpsJsonTest
dedent|''
name|'class'
name|'ServersIpsJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_get
indent|'    '
name|'def'
name|'test_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|"# Test getting a server's IP information."
nl|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/ips'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-ips-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_by_network
dedent|''
name|'def'
name|'test_get_by_network'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|"# Test getting a server's IP information by network id."
nl|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/ips/private'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-ips-network-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersIpsXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersIpsXmlTest'
op|'('
name|'ServersIpsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtensionsSampleJsonTest
dedent|''
name|'class'
name|'ExtensionsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
DECL|member|test_extensions_get
name|'def'
name|'test_extensions_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'extensions'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'extensions-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtensionsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ExtensionsSampleXmlTest'
op|'('
name|'ExtensionsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleJsonTest
dedent|''
name|'class'
name|'FlavorsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_get
indent|'    '
name|'def'
name|'test_flavors_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/1'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_list
dedent|''
name|'def'
name|'test_flavors_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'FlavorsSampleXmlTest'
op|'('
name|'FlavorsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|HostsSampleJsonTest
dedent|''
name|'class'
name|'HostsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.hosts.Hosts"'
newline|'\n'
nl|'\n'
DECL|member|test_host_startup
name|'def'
name|'test_host_startup'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-hosts/%s/startup'"
op|'%'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'host-get-startup'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_host_reboot
dedent|''
name|'def'
name|'test_host_reboot'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-hosts/%s/reboot'"
op|'%'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'host-get-reboot'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_host_shutdown
dedent|''
name|'def'
name|'test_host_shutdown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-hosts/%s/shutdown'"
op|'%'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'host-get-shutdown'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_host_maintenance
dedent|''
name|'def'
name|'test_host_maintenance'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'os-hosts/%s'"
op|'%'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|','
nl|'\n'
string|"'host-put-maintenance-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'host-put-maintenance-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_host_get
dedent|''
name|'def'
name|'test_host_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-hosts/%s'"
op|'%'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'host-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_hosts_list
dedent|''
name|'def'
name|'test_hosts_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-hosts'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'hosts-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|HostsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'HostsSampleXmlTest'
op|'('
name|'HostsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleAllExtensionJsonTest
dedent|''
name|'class'
name|'FlavorsSampleAllExtensionJsonTest'
op|'('
name|'FlavorsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleAllExtensionXmlTest
dedent|''
name|'class'
name|'FlavorsSampleAllExtensionXmlTest'
op|'('
name|'FlavorsSampleXmlTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ImagesSampleJsonTest
dedent|''
name|'class'
name|'ImagesSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_images_list
indent|'    '
name|'def'
name|'test_images_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of images get list request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'images-list-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_get
dedent|''
name|'def'
name|'test_image_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of one single image details request.'
nl|'\n'
indent|'        '
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s'"
op|'%'
name|'image_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'image_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_images_details
dedent|''
name|'def'
name|'test_images_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of all images details request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/detail'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'images-details-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_metadata_get
dedent|''
name|'def'
name|'test_image_metadata_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of an image metadata request.'
nl|'\n'
indent|'        '
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s/metadata'"
op|'%'
name|'image_id'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'image_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-metadata-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_metadata_post
dedent|''
name|'def'
name|'test_image_metadata_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to update metadata of an image metadata request.'
nl|'\n'
indent|'        '
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
nl|'\n'
string|"'images/%s/metadata'"
op|'%'
name|'image_id'
op|','
nl|'\n'
string|"'image-metadata-post-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-metadata-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_metadata_put
dedent|''
name|'def'
name|'test_image_metadata_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of image metadata put request.'
nl|'\n'
indent|'        '
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'images/%s/metadata'"
op|'%'
name|'image_id'
op|','
nl|'\n'
string|"'image-metadata-put-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-metadata-put-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_meta_key_get
dedent|''
name|'def'
name|'test_image_meta_key_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of an image metadata key request.'
nl|'\n'
indent|'        '
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'key'
op|'='
string|'"kernel_id"'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s/metadata/%s'"
op|'%'
op|'('
name|'image_id'
op|','
name|'key'
op|')'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-meta-key-get'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_meta_key_put
dedent|''
name|'def'
name|'test_image_meta_key_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of image metadata key put request.'
nl|'\n'
indent|'        '
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'key'
op|'='
string|'"auto_disk_config"'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'images/%s/metadata/%s'"
op|'%'
op|'('
name|'image_id'
op|','
name|'key'
op|')'
op|','
nl|'\n'
string|"'image-meta-key-put-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-meta-key-put-resp'"
op|','
nl|'\n'
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ImagesSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ImagesSampleXmlTest'
op|'('
name|'ImagesSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|LimitsSampleJsonTest
dedent|''
name|'class'
name|'LimitsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_limits_get
indent|'    '
name|'def'
name|'test_limits_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'limits'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'limit-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|LimitsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'LimitsSampleXmlTest'
op|'('
name|'LimitsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CoverageExtJsonTests
dedent|''
name|'class'
name|'CoverageExtJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.coverage_ext."'
nl|'\n'
string|'"Coverage_ext"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'CoverageExtJsonTests'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|_fake_check_coverage
name|'def'
name|'_fake_check_coverage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'False'
newline|'\n'
nl|'\n'
DECL|function|_fake_xml_report
dedent|''
name|'def'
name|'_fake_xml_report'
op|'('
name|'self'
op|','
name|'outfile'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'coverage_ext'
op|'.'
name|'CoverageController'
op|','
string|"'_check_coverage'"
op|','
nl|'\n'
name|'_fake_check_coverage'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'coverage'
op|'.'
name|'coverage'
op|','
string|"'xml_report'"
op|','
name|'_fake_xml_report'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_start_coverage
dedent|''
name|'def'
name|'test_start_coverage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Start coverage data collection.'
nl|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-coverage/action'"
op|','
nl|'\n'
string|"'coverage-start-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_start_coverage_combine
dedent|''
name|'def'
name|'test_start_coverage_combine'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Start coverage data collection.'
nl|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-coverage/action'"
op|','
nl|'\n'
string|"'coverage-start-combine-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_stop_coverage
dedent|''
name|'def'
name|'test_stop_coverage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Stop coverage data collection.'
nl|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'path'"
op|':'
string|"'/.*'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-coverage/action'"
op|','
nl|'\n'
string|"'coverage-stop-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'coverage-stop-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_report_coverage
dedent|''
name|'def'
name|'test_report_coverage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Generate a coverage report.'
nl|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'filename'"
op|':'
string|"'report'"
op|','
nl|'\n'
string|"'path'"
op|':'
string|"'/.*/report'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-coverage/action'"
op|','
nl|'\n'
string|"'coverage-report-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'coverage-report-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_xml_report_coverage
dedent|''
name|'def'
name|'test_xml_report_coverage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'filename'"
op|':'
string|"'report'"
op|','
nl|'\n'
string|"'path'"
op|':'
string|"'/.*/report'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-coverage/action'"
op|','
nl|'\n'
string|"'coverage-xml-report-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'coverage-xml-report-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CoverageExtXmlTests
dedent|''
dedent|''
name|'class'
name|'CoverageExtXmlTests'
op|'('
name|'CoverageExtJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersActionsJsonTest
dedent|''
name|'class'
name|'ServersActionsJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|_test_server_action
indent|'    '
name|'def'
name|'_test_server_action'
op|'('
name|'self'
op|','
name|'uuid'
op|','
name|'action'
op|','
nl|'\n'
name|'subs'
op|'='
op|'{'
op|'}'
op|','
name|'resp_tpl'
op|'='
name|'None'
op|','
name|'code'
op|'='
number|'202'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'.'
name|'update'
op|'('
op|'{'
string|"'action'"
op|':'
name|'action'
op|'}'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-action-%s'"
op|'%'
name|'action'
op|'.'
name|'lower'
op|'('
op|')'
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
name|'code'
op|')'
newline|'\n'
name|'if'
name|'resp_tpl'
op|':'
newline|'\n'
indent|'            '
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
name|'resp_tpl'
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|'""'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_password
dedent|''
dedent|''
name|'def'
name|'test_server_password'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"changePassword"'
op|','
nl|'\n'
op|'{'
string|'"password"'
op|':'
string|'"foo"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_reboot
dedent|''
name|'def'
name|'test_server_reboot'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"reboot"'
op|','
nl|'\n'
op|'{'
string|'"type"'
op|':'
string|'"HARD"'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"reboot"'
op|','
nl|'\n'
op|'{'
string|'"type"'
op|':'
string|'"SOFT"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_rebuild
dedent|''
name|'def'
name|'test_server_rebuild'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'image'
op|'='
name|'self'
op|'.'
name|'api'
op|'.'
name|'get_images'
op|'('
op|')'
op|'['
number|'0'
op|']'
op|'['
string|"'id'"
op|']'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'uuid'"
op|':'
name|'image'
op|','
nl|'\n'
string|"'name'"
op|':'
string|"'foobar'"
op|','
nl|'\n'
string|"'pass'"
op|':'
string|"'seekr3t'"
op|','
nl|'\n'
string|"'ip'"
op|':'
string|"'1.2.3.4'"
op|','
nl|'\n'
string|"'ip6'"
op|':'
string|"'fe80::100'"
op|','
nl|'\n'
string|"'hostid'"
op|':'
string|"'[a-f0-9]+'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'rebuild'"
op|','
name|'subs'
op|','
nl|'\n'
string|"'server-action-rebuild-resp'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_resize
dedent|''
name|'def'
name|'test_server_resize'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'flags'
op|'('
name|'allow_resize_to_same_host'
op|'='
name|'True'
op|')'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"resize"'
op|','
nl|'\n'
op|'{'
string|'"id"'
op|':'
number|'2'
op|','
nl|'\n'
string|'"host"'
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|'}'
op|')'
newline|'\n'
name|'return'
name|'uuid'
newline|'\n'
nl|'\n'
DECL|member|test_server_revert_resize
dedent|''
name|'def'
name|'test_server_revert_resize'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'test_server_resize'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"revertResize"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_confirm_resize
dedent|''
name|'def'
name|'test_server_confirm_resize'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'test_server_resize'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"confirmResize"'
op|','
name|'code'
op|'='
number|'204'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_create_image
dedent|''
name|'def'
name|'test_server_create_image'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'createImage'"
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'foo-image'"
op|','
nl|'\n'
string|"'meta_var'"
op|':'
string|"'myvar'"
op|','
nl|'\n'
string|"'meta_val'"
op|':'
string|"'foobar'"
op|'}'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersActionsXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersActionsXmlTest'
op|'('
name|'ServersActionsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersActionsAllJsonTest
dedent|''
name|'class'
name|'ServersActionsAllJsonTest'
op|'('
name|'ServersActionsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersActionsAllXmlTest
dedent|''
name|'class'
name|'ServersActionsAllXmlTest'
op|'('
name|'ServersActionsXmlTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerStartStopJsonTest
dedent|''
name|'class'
name|'ServerStartStopJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".server_start_stop.Server_start_stop"'
newline|'\n'
nl|'\n'
DECL|member|_test_server_action
name|'def'
name|'_test_server_action'
op|'('
name|'self'
op|','
name|'uuid'
op|','
name|'action'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server_start_stop'"
op|','
nl|'\n'
op|'{'
string|"'action'"
op|':'
name|'action'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|'""'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_start
dedent|''
name|'def'
name|'test_server_start'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'os-stop'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'os-start'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_stop
dedent|''
name|'def'
name|'test_server_stop'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'os-stop'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerStartStopXmlTest
dedent|''
dedent|''
name|'class'
name|'ServerStartStopXmlTest'
op|'('
name|'ServerStartStopJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UserDataJsonTest
dedent|''
name|'class'
name|'UserDataJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.user_data.User_data"'
newline|'\n'
nl|'\n'
DECL|member|test_user_data_post
name|'def'
name|'test_user_data_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'user_data_contents'
op|'='
string|'\'#!/bin/bash\\n/bin/su\\necho "I am in you!"\\n\''
newline|'\n'
name|'user_data'
op|'='
name|'base64'
op|'.'
name|'b64encode'
op|'('
name|'user_data_contents'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'user_data'"
op|':'
name|'user_data'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'userdata-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'userdata-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UserDataXmlTest
dedent|''
dedent|''
name|'class'
name|'UserDataXmlTest'
op|'('
name|'UserDataJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsExtraDataJsonTest
dedent|''
name|'class'
name|'FlavorsExtraDataJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|"'nova.api.openstack.compute.contrib.flavorextradata.'"
nl|'\n'
string|"'Flavorextradata'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_flags
name|'def'
name|'_get_flags'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'f'
op|'='
name|'super'
op|'('
name|'FlavorsExtraDataJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'_get_flags'
op|'('
op|')'
newline|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'='
name|'CONF'
op|'.'
name|'osapi_compute_extension'
op|'['
op|':'
op|']'
newline|'\n'
comment|'# Flavorextradata extension also needs Flavormanage to be loaded.'
nl|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
string|"'nova.api.openstack.compute.contrib.flavormanage.Flavormanage'"
op|')'
newline|'\n'
name|'return'
name|'f'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_extra_data_get
dedent|''
name|'def'
name|'test_flavors_extra_data_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'flavor_id'
op|'='
number|'1'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/%s'"
op|'%'
name|'flavor_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'flavor_id'"
op|':'
name|'flavor_id'
op|','
nl|'\n'
string|"'flavor_name'"
op|':'
string|"'m1.tiny'"
nl|'\n'
op|'}'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-extra-data-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_extra_data_list
dedent|''
name|'def'
name|'test_flavors_extra_data_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-extra-data-list-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_extra_data_create
dedent|''
name|'def'
name|'test_flavors_extra_data_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'flavor_id'"
op|':'
number|'666'
op|','
nl|'\n'
string|"'flavor_name'"
op|':'
string|"'flavortest'"
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'flavors'"
op|','
nl|'\n'
string|"'flavors-extra-data-post-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-extra-data-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsExtraDataXmlTest
dedent|''
dedent|''
name|'class'
name|'FlavorsExtraDataXmlTest'
op|'('
name|'FlavorsExtraDataJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorRxtxJsonTest
dedent|''
name|'class'
name|'FlavorRxtxJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|"'nova.api.openstack.compute.contrib.flavor_rxtx.'"
nl|'\n'
string|"'Flavor_rxtx'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_flags
name|'def'
name|'_get_flags'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'f'
op|'='
name|'super'
op|'('
name|'FlavorRxtxJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'_get_flags'
op|'('
op|')'
newline|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'='
name|'CONF'
op|'.'
name|'osapi_compute_extension'
op|'['
op|':'
op|']'
newline|'\n'
comment|'# FlavorRxtx extension also needs Flavormanage to be loaded.'
nl|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
string|"'nova.api.openstack.compute.contrib.flavormanage.Flavormanage'"
op|')'
newline|'\n'
name|'return'
name|'f'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_rxtx_get
dedent|''
name|'def'
name|'test_flavor_rxtx_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'flavor_id'
op|'='
number|'1'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/%s'"
op|'%'
name|'flavor_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'flavor_id'"
op|':'
name|'flavor_id'
op|','
nl|'\n'
string|"'flavor_name'"
op|':'
string|"'m1.tiny'"
nl|'\n'
op|'}'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-rxtx-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_rxtx_list
dedent|''
name|'def'
name|'test_flavors_rxtx_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-rxtx-list-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_rxtx_create
dedent|''
name|'def'
name|'test_flavors_rxtx_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'flavor_id'"
op|':'
number|'100'
op|','
nl|'\n'
string|"'flavor_name'"
op|':'
string|"'flavortest'"
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'flavors'"
op|','
nl|'\n'
string|"'flavor-rxtx-post-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-rxtx-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorRxtxXmlTest
dedent|''
dedent|''
name|'class'
name|'FlavorRxtxXmlTest'
op|'('
name|'FlavorRxtxJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorSwapJsonTest
dedent|''
name|'class'
name|'FlavorSwapJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|"'nova.api.openstack.compute.contrib.flavor_swap.'"
nl|'\n'
string|"'Flavor_swap'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_flags
name|'def'
name|'_get_flags'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'f'
op|'='
name|'super'
op|'('
name|'FlavorSwapJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'_get_flags'
op|'('
op|')'
newline|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'='
name|'CONF'
op|'.'
name|'osapi_compute_extension'
op|'['
op|':'
op|']'
newline|'\n'
comment|'# FlavorSwap extension also needs Flavormanage to be loaded.'
nl|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
string|"'nova.api.openstack.compute.contrib.flavormanage.Flavormanage'"
op|')'
newline|'\n'
name|'return'
name|'f'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_swap_get
dedent|''
name|'def'
name|'test_flavor_swap_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'flavor_id'
op|'='
number|'1'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/%s'"
op|'%'
name|'flavor_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'flavor_id'"
op|':'
name|'flavor_id'
op|','
nl|'\n'
string|"'flavor_name'"
op|':'
string|"'m1.tiny'"
nl|'\n'
op|'}'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-swap-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_swap_list
dedent|''
name|'def'
name|'test_flavor_swap_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-swap-list-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_swap_create
dedent|''
name|'def'
name|'test_flavor_swap_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'flavor_id'"
op|':'
number|'100'
op|','
nl|'\n'
string|"'flavor_name'"
op|':'
string|"'flavortest'"
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'flavors'"
op|','
nl|'\n'
string|"'flavor-swap-post-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-swap-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorSwapXmlTest
dedent|''
dedent|''
name|'class'
name|'FlavorSwapXmlTest'
op|'('
name|'FlavorSwapJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SecurityGroupsSampleJsonTest
dedent|''
name|'class'
name|'SecurityGroupsSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".security_groups.Security_groups"'
newline|'\n'
nl|'\n'
DECL|member|test_security_group_create
name|'def'
name|'test_security_group_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'name'
op|'='
name|'self'
op|'.'
name|'ctype'
op|'+'
string|"'-test'"
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'group_name'"
op|':'
name|'name'
op|','
nl|'\n'
string|'"description"'
op|':'
string|'"description"'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-security-groups'"
op|','
nl|'\n'
string|"'security-group-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-groups-create-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_groups_list
dedent|''
name|'def'
name|'test_security_groups_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of security groups get list request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-security-groups'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-groups-list-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_groups_get
dedent|''
name|'def'
name|'test_security_groups_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of security groups get request.'
nl|'\n'
indent|'        '
name|'security_group_id'
op|'='
string|"'1'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-security-groups/%s'"
op|'%'
name|'security_group_id'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-groups-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_groups_list_server
dedent|''
name|'def'
name|'test_security_groups_list_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of security groups for a specific server.'
nl|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/os-security-groups'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-security-groups-list-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SecurityGroupsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'SecurityGroupsSampleXmlTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SecurityGroupDefaultRulesSampleJsonTest
dedent|''
name|'class'
name|'SecurityGroupDefaultRulesSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|"'nova.api.openstack.compute.contrib'"
nl|'\n'
string|"'.security_group_default_rules'"
nl|'\n'
string|"'.Security_group_default_rules'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_group_default_rules_create
name|'def'
name|'test_security_group_default_rules_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-security-group-default-rules'"
op|','
nl|'\n'
string|"'security-group-default-rules-create-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
nl|'\n'
string|"'security-group-default-rules-create-resp'"
op|','
op|'{'
op|'}'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_group_default_rules_list
dedent|''
name|'def'
name|'test_security_group_default_rules_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_security_group_default_rules_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-security-group-default-rules'"
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-group-default-rules-list-resp'"
op|','
nl|'\n'
op|'{'
op|'}'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_group_default_rules_show
dedent|''
name|'def'
name|'test_security_group_default_rules_show'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_security_group_default_rules_create'
op|'('
op|')'
newline|'\n'
name|'rule_id'
op|'='
string|"'1'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-security-group-default-rules/%s'"
op|'%'
name|'rule_id'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-group-default-rules-show-resp'"
op|','
nl|'\n'
op|'{'
op|'}'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
dedent|''
name|'class'
name|'SecurityGroupDefaultRulesSampleXmlTest'
op|'('
nl|'\n'
DECL|class|SecurityGroupDefaultRulesSampleXmlTest
name|'SecurityGroupDefaultRulesSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SchedulerHintsJsonTest
dedent|''
name|'class'
name|'SchedulerHintsJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.scheduler_hints."'
nl|'\n'
string|'"Scheduler_hints"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_scheduler_hints_post
name|'def'
name|'test_scheduler_hints_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of scheduler hint post request.'
nl|'\n'
indent|'        '
name|'hints'
op|'='
op|'{'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'image_near'"
op|':'
name|'str'
op|'('
name|'uuid_lib'
op|'.'
name|'uuid4'
op|'('
op|')'
op|')'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'scheduler-hints-post-req'"
op|','
nl|'\n'
name|'hints'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'scheduler-hints-post-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SchedulerHintsXmlTest
dedent|''
dedent|''
name|'class'
name|'SchedulerHintsXmlTest'
op|'('
name|'SchedulerHintsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ConsoleOutputSampleJsonTest
dedent|''
name|'class'
name|'ConsoleOutputSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".console_output.Console_output"'
newline|'\n'
nl|'\n'
DECL|member|test_get_console_output
name|'def'
name|'test_get_console_output'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'console-output-post-req'"
op|','
nl|'\n'
op|'{'
string|"'action'"
op|':'
string|"'os-getConsoleOutput'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'console-output-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ConsoleOutputSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ConsoleOutputSampleXmlTest'
op|'('
name|'ConsoleOutputSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'        '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedServerAttributesJsonTest
dedent|''
name|'class'
name|'ExtendedServerAttributesJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
string|'".extended_server_attributes"'
op|'+'
DECL|variable|extension_name
string|'".Extended_server_attributes"'
newline|'\n'
nl|'\n'
DECL|member|test_show
name|'def'
name|'test_show'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'instance_name'"
op|']'
op|'='
string|"'instance-\\d{8}'"
newline|'\n'
name|'subs'
op|'['
string|"'hypervisor_hostname'"
op|']'
op|'='
string|"r'[\\w\\.\\-]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_detail
dedent|''
name|'def'
name|'test_detail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'instance_name'"
op|']'
op|'='
string|"'instance-\\d{8}'"
newline|'\n'
name|'subs'
op|'['
string|"'hypervisor_hostname'"
op|']'
op|'='
string|"r'[\\w\\.\\-]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-detail-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedServerAttributesXmlTest
dedent|''
dedent|''
name|'class'
name|'ExtendedServerAttributesXmlTest'
op|'('
name|'ExtendedServerAttributesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FloatingIpsJsonTest
dedent|''
name|'class'
name|'FloatingIpsJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib."'
DECL|variable|extension_name
string|'"floating_ips.Floating_ips"'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FloatingIpsJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'pool'
op|'='
name|'CONF'
op|'.'
name|'default_floating_pool'
newline|'\n'
name|'interface'
op|'='
name|'CONF'
op|'.'
name|'public_interface'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'ip_pool'
op|'='
op|'['
nl|'\n'
op|'{'
nl|'\n'
string|"'address'"
op|':'
string|'"10.10.10.1"'
op|','
nl|'\n'
string|"'pool'"
op|':'
name|'pool'
op|','
nl|'\n'
string|"'interface'"
op|':'
name|'interface'
nl|'\n'
op|'}'
op|','
nl|'\n'
op|'{'
nl|'\n'
string|"'address'"
op|':'
string|'"10.10.10.2"'
op|','
nl|'\n'
string|"'pool'"
op|':'
name|'pool'
op|','
nl|'\n'
string|"'interface'"
op|':'
name|'interface'
nl|'\n'
op|'}'
op|','
nl|'\n'
op|'{'
nl|'\n'
string|"'address'"
op|':'
string|'"10.10.10.3"'
op|','
nl|'\n'
string|"'pool'"
op|':'
name|'pool'
op|','
nl|'\n'
string|"'interface'"
op|':'
name|'interface'
nl|'\n'
op|'}'
op|','
nl|'\n'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'db'
op|'.'
name|'floating_ip_bulk_create'
op|'('
nl|'\n'
name|'context'
op|'.'
name|'get_admin_context'
op|'('
op|')'
op|','
name|'self'
op|'.'
name|'ip_pool'
op|')'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'compute'
op|'.'
name|'db'
op|'.'
name|'floating_ip_bulk_destroy'
op|'('
nl|'\n'
name|'context'
op|'.'
name|'get_admin_context'
op|'('
op|')'
op|','
name|'self'
op|'.'
name|'ip_pool'
op|')'
newline|'\n'
name|'super'
op|'('
name|'FloatingIpsJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'tearDown'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_list_empty
dedent|''
name|'def'
name|'test_floating_ips_list_empty'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ips'"
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-list-empty-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_list
dedent|''
name|'def'
name|'test_floating_ips_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-floating-ips'"
op|','
nl|'\n'
string|"'floating-ips-create-nopool-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-floating-ips'"
op|','
nl|'\n'
string|"'floating-ips-create-nopool-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ips'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-list-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_create_nopool
dedent|''
name|'def'
name|'test_floating_ips_create_nopool'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-floating-ips'"
op|','
nl|'\n'
string|"'floating-ips-create-nopool-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-create-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_create
dedent|''
name|'def'
name|'test_floating_ips_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-floating-ips'"
op|','
nl|'\n'
string|"'floating-ips-create-req'"
op|','
nl|'\n'
op|'{'
string|'"pool"'
op|':'
name|'CONF'
op|'.'
name|'default_floating_pool'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-create-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_get
dedent|''
name|'def'
name|'test_floating_ips_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_floating_ips_create'
op|'('
op|')'
newline|'\n'
comment|'# NOTE(sdague): the first floating ip will always have 1 as an id,'
nl|'\n'
comment|'# but it would be better if we could get this from the create'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ips/%d'"
op|'%'
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-create-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_delete
dedent|''
name|'def'
name|'test_floating_ips_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_floating_ips_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'os-floating-ips/%d'"
op|'%'
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FloatingIpsXmlTest
dedent|''
dedent|''
name|'class'
name|'FloatingIpsXmlTest'
op|'('
name|'FloatingIpsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FloatingIpsBulkJsonTest
dedent|''
name|'class'
name|'FloatingIpsBulkJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib."'
DECL|variable|extension_name
string|'"floating_ips_bulk.Floating_ips_bulk"'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FloatingIpsBulkJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'pool'
op|'='
name|'CONF'
op|'.'
name|'default_floating_pool'
newline|'\n'
name|'interface'
op|'='
name|'CONF'
op|'.'
name|'public_interface'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'ip_pool'
op|'='
op|'['
nl|'\n'
op|'{'
nl|'\n'
string|"'address'"
op|':'
string|'"10.10.10.1"'
op|','
nl|'\n'
string|"'pool'"
op|':'
name|'pool'
op|','
nl|'\n'
string|"'interface'"
op|':'
name|'interface'
nl|'\n'
op|'}'
op|','
nl|'\n'
op|'{'
nl|'\n'
string|"'address'"
op|':'
string|'"10.10.10.2"'
op|','
nl|'\n'
string|"'pool'"
op|':'
name|'pool'
op|','
nl|'\n'
string|"'interface'"
op|':'
name|'interface'
nl|'\n'
op|'}'
op|','
nl|'\n'
op|'{'
nl|'\n'
string|"'address'"
op|':'
string|'"10.10.10.3"'
op|','
nl|'\n'
string|"'pool'"
op|':'
name|'pool'
op|','
nl|'\n'
string|"'interface'"
op|':'
name|'interface'
op|','
nl|'\n'
string|"'host'"
op|':'
string|'"testHost"'
nl|'\n'
op|'}'
op|','
nl|'\n'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'db'
op|'.'
name|'floating_ip_bulk_create'
op|'('
nl|'\n'
name|'context'
op|'.'
name|'get_admin_context'
op|'('
op|')'
op|','
name|'self'
op|'.'
name|'ip_pool'
op|')'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'compute'
op|'.'
name|'db'
op|'.'
name|'floating_ip_bulk_destroy'
op|'('
nl|'\n'
name|'context'
op|'.'
name|'get_admin_context'
op|'('
op|')'
op|','
name|'self'
op|'.'
name|'ip_pool'
op|')'
newline|'\n'
name|'super'
op|'('
name|'FloatingIpsBulkJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'tearDown'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_bulk_list
dedent|''
name|'def'
name|'test_floating_ips_bulk_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ips-bulk'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-bulk-list-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_bulk_list_by_host
dedent|''
name|'def'
name|'test_floating_ips_bulk_list_by_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ips-bulk/testHost'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-bulk-list-by-host-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_bulk_create
dedent|''
name|'def'
name|'test_floating_ips_bulk_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-floating-ips-bulk'"
op|','
nl|'\n'
string|"'floating-ips-bulk-create-req'"
op|','
nl|'\n'
op|'{'
string|'"ip_range"'
op|':'
string|'"192.168.1.0/24"'
op|','
nl|'\n'
string|'"pool"'
op|':'
name|'CONF'
op|'.'
name|'default_floating_pool'
op|','
nl|'\n'
string|'"interface"'
op|':'
name|'CONF'
op|'.'
name|'public_interface'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-bulk-create-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_bulk_delete
dedent|''
name|'def'
name|'test_floating_ips_bulk_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'os-floating-ips-bulk/delete'"
op|','
nl|'\n'
string|"'floating-ips-bulk-delete-req'"
op|','
nl|'\n'
op|'{'
string|'"ip_range"'
op|':'
string|'"192.168.1.0/24"'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-bulk-delete-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FloatingIpsBulkXmlTest
dedent|''
dedent|''
name|'class'
name|'FloatingIpsBulkXmlTest'
op|'('
name|'FloatingIpsBulkJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|KeyPairsSampleJsonTest
dedent|''
name|'class'
name|'KeyPairsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.keypairs.Keypairs"'
newline|'\n'
nl|'\n'
DECL|member|generalize_subs
name|'def'
name|'generalize_subs'
op|'('
name|'self'
op|','
name|'subs'
op|','
name|'vanilla_regexes'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'['
string|"'keypair_name'"
op|']'
op|'='
string|"'keypair-[0-9a-f-]+'"
newline|'\n'
name|'return'
name|'subs'
newline|'\n'
nl|'\n'
DECL|member|test_keypairs_post
dedent|''
name|'def'
name|'test_keypairs_post'
op|'('
name|'self'
op|','
name|'public_key'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of key pairs post request."""'
newline|'\n'
name|'key_name'
op|'='
string|"'keypair-'"
op|'+'
name|'str'
op|'('
name|'uuid_lib'
op|'.'
name|'uuid4'
op|'('
op|')'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-keypairs'"
op|','
string|"'keypairs-post-req'"
op|','
nl|'\n'
op|'{'
string|"'keypair_name'"
op|':'
name|'key_name'
op|'}'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'keypair_name'"
op|']'
op|'='
string|"'(%s)'"
op|'%'
name|'key_name'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'keypairs-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
comment|'# NOTE(maurosr): return the key_name is necessary cause the'
nl|'\n'
comment|'# verification returns the label of the last compared information in'
nl|'\n'
comment|'# the response, not necessarily the key name.'
nl|'\n'
name|'return'
name|'key_name'
newline|'\n'
nl|'\n'
DECL|member|test_keypairs_import_key_post
dedent|''
name|'def'
name|'test_keypairs_import_key_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|"# Get api sample of key pairs post to import user's key."
nl|'\n'
indent|'        '
name|'key_name'
op|'='
string|"'keypair-'"
op|'+'
name|'str'
op|'('
name|'uuid_lib'
op|'.'
name|'uuid4'
op|'('
op|')'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'keypair_name'"
op|':'
name|'key_name'
op|','
nl|'\n'
string|"'public_key'"
op|':'
string|'"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQDx8nkQv/zgGg"'
nl|'\n'
string|'"B4rMYmIf+6A4l6Rr+o/6lHBQdW5aYd44bd8JttDCE/F/pNRr0l"'
nl|'\n'
string|'"RE+PiqSPO8nDPHw0010JeMH9gYgnnFlyY3/OcJ02RhIPyyxYpv"'
nl|'\n'
string|'"9FhY+2YiUkpwFOcLImyrxEsYXpD/0d3ac30bNH6Sw9JD9UZHYc"'
nl|'\n'
string|'"pSxsIbECHw== Generated by Nova"'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-keypairs'"
op|','
string|"'keypairs-import-post-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'keypair_name'"
op|']'
op|'='
string|"'(%s)'"
op|'%'
name|'key_name'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'keypairs-import-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_keypairs_get
dedent|''
name|'def'
name|'test_keypairs_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of key pairs get request.'
nl|'\n'
indent|'        '
name|'key_name'
op|'='
name|'self'
op|'.'
name|'test_keypairs_post'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-keypairs'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'keypair_name'"
op|']'
op|'='
string|"'(%s)'"
op|'%'
name|'key_name'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'keypairs-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|KeyPairsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'KeyPairsSampleXmlTest'
op|'('
name|'KeyPairsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|RescueJsonTest
dedent|''
name|'class'
name|'RescueJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".rescue.Rescue"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_rescue
name|'def'
name|'_rescue'
op|'('
name|'self'
op|','
name|'uuid'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req_subs'
op|'='
op|'{'
nl|'\n'
string|"'password'"
op|':'
string|"'MySecretPass'"
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-rescue-req'"
op|','
name|'req_subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-rescue'"
op|','
name|'req_subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_unrescue
dedent|''
name|'def'
name|'_unrescue'
op|'('
name|'self'
op|','
name|'uuid'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-unrescue-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_rescue
dedent|''
name|'def'
name|'test_server_rescue'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_rescue'
op|'('
name|'uuid'
op|')'
newline|'\n'
nl|'\n'
comment|"# Do a server get to make sure that the 'RESCUE' state is set"
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'status'"
op|']'
op|'='
string|"'RESCUE'"
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp-rescue'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_unrescue
dedent|''
name|'def'
name|'test_server_unrescue'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_rescue'
op|'('
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_unrescue'
op|'('
name|'uuid'
op|')'
newline|'\n'
nl|'\n'
comment|"# Do a server get to make sure that the 'ACTIVE' state is back"
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'status'"
op|']'
op|'='
string|"'ACTIVE'"
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp-unrescue'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|RescueXmlTest
dedent|''
dedent|''
name|'class'
name|'RescueXmlTest'
op|'('
name|'RescueJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualInterfacesJsonTest
dedent|''
name|'class'
name|'VirtualInterfacesJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".virtual_interfaces.Virtual_interfaces"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_vifs_list
name|'def'
name|'test_vifs_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/os-virtual-interfaces'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
nl|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'mac_addr'"
op|']'
op|'='
string|"'(?:[a-f0-9]{2}:){5}[a-f0-9]{2}'"
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'vifs-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualInterfacesXmlTest
dedent|''
dedent|''
name|'class'
name|'VirtualInterfacesXmlTest'
op|'('
name|'VirtualInterfacesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CloudPipeSampleJsonTest
dedent|''
name|'class'
name|'CloudPipeSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.cloudpipe.Cloudpipe"'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'CloudPipeSampleJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|get_user_data
name|'def'
name|'get_user_data'
op|'('
name|'self'
op|','
name|'project_id'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Stub method to generate user data for cloudpipe tests."""'
newline|'\n'
name|'return'
string|'"VVNFUiBEQVRB\\n"'
newline|'\n'
nl|'\n'
DECL|function|network_api_get
dedent|''
name|'def'
name|'network_api_get'
op|'('
name|'self'
op|','
name|'context'
op|','
name|'network_uuid'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Stub to get a valid network and its information."""'
newline|'\n'
name|'return'
op|'{'
string|"'vpn_public_address'"
op|':'
string|"'127.0.0.1'"
op|','
nl|'\n'
string|"'vpn_public_port'"
op|':'
number|'22'
op|'}'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'pipelib'
op|'.'
name|'CloudPipe'
op|','
string|"'get_encoded_zip'"
op|','
name|'get_user_data'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'network_api'
op|'.'
name|'API'
op|','
string|'"get"'
op|','
nl|'\n'
name|'network_api_get'
op|')'
newline|'\n'
nl|'\n'
DECL|member|generalize_subs
dedent|''
name|'def'
name|'generalize_subs'
op|'('
name|'self'
op|','
name|'subs'
op|','
name|'vanilla_regexes'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'['
string|"'project_id'"
op|']'
op|'='
string|"'cloudpipe-[0-9a-f-]+'"
newline|'\n'
name|'return'
name|'subs'
newline|'\n'
nl|'\n'
DECL|member|test_cloud_pipe_create
dedent|''
name|'def'
name|'test_cloud_pipe_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples of cloud pipe extension creation.'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'flags'
op|'('
name|'vpn_image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|')'
newline|'\n'
name|'project'
op|'='
op|'{'
string|"'project_id'"
op|':'
string|"'cloudpipe-'"
op|'+'
name|'str'
op|'('
name|'uuid_lib'
op|'.'
name|'uuid4'
op|'('
op|')'
op|')'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-cloudpipe'"
op|','
string|"'cloud-pipe-create-req'"
op|','
nl|'\n'
name|'project'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'project'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'CONF'
op|'.'
name|'vpn_image_id'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'cloud-pipe-create-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
name|'return'
name|'project'
newline|'\n'
nl|'\n'
DECL|member|test_cloud_pipe_list
dedent|''
name|'def'
name|'test_cloud_pipe_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples of cloud pipe extension get request.'
nl|'\n'
indent|'        '
name|'project'
op|'='
name|'self'
op|'.'
name|'test_cloud_pipe_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-cloudpipe'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'project'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'CONF'
op|'.'
name|'vpn_image_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'cloud-pipe-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CloudPipeSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'CloudPipeSampleXmlTest'
op|'('
name|'CloudPipeSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CloudPipeUpdateJsonTest
dedent|''
name|'class'
name|'CloudPipeUpdateJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".cloudpipe_update.Cloudpipe_update"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_flags
name|'def'
name|'_get_flags'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'f'
op|'='
name|'super'
op|'('
name|'CloudPipeUpdateJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'_get_flags'
op|'('
op|')'
newline|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'='
name|'CONF'
op|'.'
name|'osapi_compute_extension'
op|'['
op|':'
op|']'
newline|'\n'
comment|'# Cloudpipe_update also needs cloudpipe to be loaded'
nl|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
string|"'nova.api.openstack.compute.contrib.cloudpipe.Cloudpipe'"
op|')'
newline|'\n'
name|'return'
name|'f'
newline|'\n'
nl|'\n'
DECL|member|setUp
dedent|''
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'CloudPipeUpdateJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_cloud_pipe_update
dedent|''
name|'def'
name|'test_cloud_pipe_update'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'vpn_ip'"
op|':'
string|"'192.168.1.1'"
op|','
nl|'\n'
string|"'vpn_port'"
op|':'
number|'2000'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'os-cloudpipe/configure-project'"
op|','
nl|'\n'
string|"'cloud-pipe-update-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CloudPipeUpdateXmlTest
dedent|''
dedent|''
name|'class'
name|'CloudPipeUpdateXmlTest'
op|'('
name|'CloudPipeUpdateJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AgentsJsonTest
dedent|''
name|'class'
name|'AgentsJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.agents.Agents"'
newline|'\n'
nl|'\n'
DECL|member|_get_flags
name|'def'
name|'_get_flags'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'f'
op|'='
name|'super'
op|'('
name|'AgentsJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'_get_flags'
op|'('
op|')'
newline|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'='
name|'CONF'
op|'.'
name|'osapi_compute_extension'
op|'['
op|':'
op|']'
newline|'\n'
name|'return'
name|'f'
newline|'\n'
nl|'\n'
DECL|member|setUp
dedent|''
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'AgentsJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'fake_agents_list'
op|'='
op|'['
op|'{'
string|"'url'"
op|':'
string|"'xxxxxxxxxxxx'"
op|','
nl|'\n'
string|"'hypervisor'"
op|':'
string|"'hypervisor'"
op|','
nl|'\n'
string|"'architecture'"
op|':'
string|"'x86'"
op|','
nl|'\n'
string|"'os'"
op|':'
string|"'os'"
op|','
nl|'\n'
string|"'version'"
op|':'
string|"'8.0'"
op|','
nl|'\n'
string|"'md5hash'"
op|':'
string|"'add6bb58e139be103324d04d82d8f545'"
op|','
nl|'\n'
string|"'id'"
op|':'
string|"'1'"
op|'}'
op|']'
newline|'\n'
nl|'\n'
DECL|function|fake_agent_build_create
name|'def'
name|'fake_agent_build_create'
op|'('
name|'context'
op|','
name|'values'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'values'
op|'['
string|"'id'"
op|']'
op|'='
string|"'1'"
newline|'\n'
name|'agent_build_ref'
op|'='
name|'models'
op|'.'
name|'AgentBuild'
op|'('
op|')'
newline|'\n'
name|'agent_build_ref'
op|'.'
name|'update'
op|'('
name|'values'
op|')'
newline|'\n'
name|'return'
name|'agent_build_ref'
newline|'\n'
nl|'\n'
DECL|function|fake_agent_build_get_all
dedent|''
name|'def'
name|'fake_agent_build_get_all'
op|'('
name|'context'
op|','
name|'hypervisor'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'agent_build_all'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'agent'
name|'in'
name|'fake_agents_list'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'hypervisor'
name|'and'
name|'hypervisor'
op|'!='
name|'agent'
op|'['
string|"'hypervisor'"
op|']'
op|':'
newline|'\n'
indent|'                    '
name|'continue'
newline|'\n'
dedent|''
name|'agent_build_ref'
op|'='
name|'models'
op|'.'
name|'AgentBuild'
op|'('
op|')'
newline|'\n'
name|'agent_build_ref'
op|'.'
name|'update'
op|'('
name|'agent'
op|')'
newline|'\n'
name|'agent_build_all'
op|'.'
name|'append'
op|'('
name|'agent_build_ref'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'agent_build_all'
newline|'\n'
nl|'\n'
DECL|function|fake_agent_build_update
dedent|''
name|'def'
name|'fake_agent_build_update'
op|'('
name|'context'
op|','
name|'agent_build_id'
op|','
name|'values'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
nl|'\n'
DECL|function|fake_agent_build_destroy
dedent|''
name|'def'
name|'fake_agent_build_destroy'
op|'('
name|'context'
op|','
name|'agent_update_id'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"agent_build_create"'
op|','
nl|'\n'
name|'fake_agent_build_create'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"agent_build_get_all"'
op|','
nl|'\n'
name|'fake_agent_build_get_all'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"agent_build_update"'
op|','
nl|'\n'
name|'fake_agent_build_update'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"agent_build_destroy"'
op|','
nl|'\n'
name|'fake_agent_build_destroy'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_agent_create
dedent|''
name|'def'
name|'test_agent_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Creates a new agent build.'
nl|'\n'
indent|'        '
name|'project'
op|'='
op|'{'
string|"'url'"
op|':'
string|"'xxxxxxxxxxxx'"
op|','
nl|'\n'
string|"'hypervisor'"
op|':'
string|"'hypervisor'"
op|','
nl|'\n'
string|"'architecture'"
op|':'
string|"'x86'"
op|','
nl|'\n'
string|"'os'"
op|':'
string|"'os'"
op|','
nl|'\n'
string|"'version'"
op|':'
string|"'8.0'"
op|','
nl|'\n'
string|"'md5hash'"
op|':'
string|"'add6bb58e139be103324d04d82d8f545'"
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-agents'"
op|','
string|"'agent-post-req'"
op|','
nl|'\n'
name|'project'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'project'
op|'['
string|"'agent_id'"
op|']'
op|'='
number|'1'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'agent-post-resp'"
op|','
name|'project'
op|','
name|'response'
op|')'
newline|'\n'
name|'return'
name|'project'
newline|'\n'
nl|'\n'
DECL|member|test_agent_list
dedent|''
name|'def'
name|'test_agent_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Return a list of all agent builds.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-agents'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'project'
op|'='
op|'{'
string|"'url'"
op|':'
string|"'xxxxxxxxxxxx'"
op|','
nl|'\n'
string|"'hypervisor'"
op|':'
string|"'hypervisor'"
op|','
nl|'\n'
string|"'architecture'"
op|':'
string|"'x86'"
op|','
nl|'\n'
string|"'os'"
op|':'
string|"'os'"
op|','
nl|'\n'
string|"'version'"
op|':'
string|"'8.0'"
op|','
nl|'\n'
string|"'md5hash'"
op|':'
string|"'add6bb58e139be103324d04d82d8f545'"
op|','
nl|'\n'
string|"'agent_id'"
op|':'
number|'1'
nl|'\n'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'agents-get-resp'"
op|','
name|'project'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_agent_update
dedent|''
name|'def'
name|'test_agent_update'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Update an existing agent build.'
nl|'\n'
indent|'        '
name|'agent_id'
op|'='
number|'1'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'version'"
op|':'
string|"'7.0'"
op|','
nl|'\n'
string|"'url'"
op|':'
string|"'xxx://xxxx/xxx/xxx'"
op|','
nl|'\n'
string|"'md5hash'"
op|':'
string|"'add6bb58e139be103324d04d82d8f545'"
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'os-agents/%s'"
op|'%'
name|'agent_id'
op|','
nl|'\n'
string|"'agent-update-put-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'agent_id'"
op|']'
op|'='
number|'1'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'agent-update-put-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_agent_delete
dedent|''
name|'def'
name|'test_agent_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Deletes an existing agent build.'
nl|'\n'
indent|'        '
name|'agent_id'
op|'='
number|'1'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'os-agents/%s'"
op|'%'
name|'agent_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AgentsXmlTest
dedent|''
dedent|''
name|'class'
name|'AgentsXmlTest'
op|'('
name|'AgentsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FixedIpJsonTest
dedent|''
name|'class'
name|'FixedIpJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.fixed_ips.Fixed_ips"'
newline|'\n'
nl|'\n'
DECL|member|_get_flags
name|'def'
name|'_get_flags'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'f'
op|'='
name|'super'
op|'('
name|'FixedIpJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'_get_flags'
op|'('
op|')'
newline|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'='
name|'CONF'
op|'.'
name|'osapi_compute_extension'
op|'['
op|':'
op|']'
newline|'\n'
name|'return'
name|'f'
newline|'\n'
nl|'\n'
DECL|member|setUp
dedent|''
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FixedIpJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'fake_fixed_ips'
op|'='
op|'['
op|'{'
string|"'id'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'address'"
op|':'
string|"'192.168.1.1'"
op|','
nl|'\n'
string|"'network_id'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'virtual_interface_id'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'instance_uuid'"
op|':'
string|"'1'"
op|','
nl|'\n'
string|"'allocated'"
op|':'
name|'False'
op|','
nl|'\n'
string|"'leased'"
op|':'
name|'False'
op|','
nl|'\n'
string|"'reserved'"
op|':'
name|'False'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'None'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'id'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'address'"
op|':'
string|"'192.168.1.2'"
op|','
nl|'\n'
string|"'network_id'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'virtual_interface_id'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'instance_uuid'"
op|':'
string|"'2'"
op|','
nl|'\n'
string|"'allocated'"
op|':'
name|'False'
op|','
nl|'\n'
string|"'leased'"
op|':'
name|'False'
op|','
nl|'\n'
string|"'reserved'"
op|':'
name|'False'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'None'
op|'}'
op|','
nl|'\n'
op|']'
newline|'\n'
nl|'\n'
DECL|function|fake_fixed_ip_get_by_address
name|'def'
name|'fake_fixed_ip_get_by_address'
op|'('
name|'context'
op|','
name|'address'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'fixed_ip'
name|'in'
name|'fake_fixed_ips'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'fixed_ip'
op|'['
string|"'address'"
op|']'
op|'=='
name|'address'
op|':'
newline|'\n'
indent|'                    '
name|'return'
name|'fixed_ip'
newline|'\n'
dedent|''
dedent|''
name|'raise'
name|'exception'
op|'.'
name|'FixedIpNotFoundForAddress'
op|'('
name|'address'
op|'='
name|'address'
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake_fixed_ip_get_by_address_detailed
dedent|''
name|'def'
name|'fake_fixed_ip_get_by_address_detailed'
op|'('
name|'context'
op|','
name|'address'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'network'
op|'='
op|'{'
string|"'id'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'cidr'"
op|':'
string|'"192.168.1.0/24"'
op|'}'
newline|'\n'
name|'host'
op|'='
op|'{'
string|"'host'"
op|':'
string|'"host"'
op|','
nl|'\n'
string|"'hostname'"
op|':'
string|"'openstack'"
op|'}'
newline|'\n'
name|'for'
name|'fixed_ip'
name|'in'
name|'fake_fixed_ips'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'fixed_ip'
op|'['
string|"'address'"
op|']'
op|'=='
name|'address'
op|':'
newline|'\n'
indent|'                    '
name|'return'
op|'('
name|'fixed_ip'
op|','
name|'network'
op|','
name|'host'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'raise'
name|'exception'
op|'.'
name|'FixedIpNotFoundForAddress'
op|'('
name|'address'
op|'='
name|'address'
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake_fixed_ip_update
dedent|''
name|'def'
name|'fake_fixed_ip_update'
op|'('
name|'context'
op|','
name|'address'
op|','
name|'values'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'fixed_ip'
op|'='
name|'fake_fixed_ip_get_by_address'
op|'('
name|'context'
op|','
name|'address'
op|')'
newline|'\n'
name|'if'
name|'fixed_ip'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'exception'
op|'.'
name|'FixedIpNotFoundForAddress'
op|'('
name|'address'
op|'='
name|'address'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'for'
name|'key'
name|'in'
name|'values'
op|':'
newline|'\n'
indent|'                    '
name|'fixed_ip'
op|'['
name|'key'
op|']'
op|'='
name|'values'
op|'['
name|'key'
op|']'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"fixed_ip_get_by_address"'
op|','
nl|'\n'
name|'fake_fixed_ip_get_by_address'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"fixed_ip_get_by_address_detailed"'
op|','
nl|'\n'
name|'fake_fixed_ip_get_by_address_detailed'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"fixed_ip_update"'
op|','
name|'fake_fixed_ip_update'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_fixed_ip_reserve
dedent|''
name|'def'
name|'test_fixed_ip_reserve'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Reserve a Fixed IP.'
nl|'\n'
indent|'        '
name|'project'
op|'='
op|'{'
string|"'reserve'"
op|':'
name|'None'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-fixed-ips/192.168.1.1/action'"
op|','
nl|'\n'
string|"'fixedip-post-req'"
op|','
nl|'\n'
name|'project'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_fixed_ip
dedent|''
name|'def'
name|'test_get_fixed_ip'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Return data about the given fixed ip.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-fixed-ips/192.168.1.1'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'project'
op|'='
op|'{'
string|"'cidr'"
op|':'
string|"'192.168.1.0/24'"
op|','
nl|'\n'
string|"'hostname'"
op|':'
string|"'openstack'"
op|','
nl|'\n'
string|"'host'"
op|':'
string|"'host'"
op|','
nl|'\n'
string|"'address'"
op|':'
string|"'192.168.1.1'"
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'fixedips-get-resp'"
op|','
name|'project'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FixedIpXmlTest
dedent|''
dedent|''
name|'class'
name|'FixedIpXmlTest'
op|'('
name|'FixedIpJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AggregatesSampleJsonTest
dedent|''
name|'class'
name|'AggregatesSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".aggregates.Aggregates"'
newline|'\n'
nl|'\n'
DECL|member|test_aggregate_create
name|'def'
name|'test_aggregate_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|'"aggregate_id"'
op|':'
string|"'(?P<id>\\d+)'"
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-aggregates'"
op|','
string|"'aggregate-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregate-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_list_aggregates
dedent|''
name|'def'
name|'test_list_aggregates'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_aggregate_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-aggregates'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregates-list-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_aggregate_get
dedent|''
name|'def'
name|'test_aggregate_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'agg_id'
op|'='
name|'self'
op|'.'
name|'test_aggregate_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-aggregates/%s'"
op|'%'
name|'agg_id'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregates-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_add_metadata
dedent|''
name|'def'
name|'test_add_metadata'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'agg_id'
op|'='
name|'self'
op|'.'
name|'test_aggregate_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-aggregates/%s/action'"
op|'%'
name|'agg_id'
op|','
nl|'\n'
string|"'aggregate-metadata-post-req'"
op|','
nl|'\n'
op|'{'
string|"'action'"
op|':'
string|"'set_metadata'"
op|'}'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregates-metadata-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_add_host
dedent|''
name|'def'
name|'test_add_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'aggregate_id'
op|'='
name|'self'
op|'.'
name|'test_aggregate_create'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|'"host_name"'
op|':'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-aggregates/%s/action'"
op|'%'
name|'aggregate_id'
op|','
nl|'\n'
string|"'aggregate-add-host-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregates-add-host-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_remove_host
dedent|''
name|'def'
name|'test_remove_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_add_host'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|'"host_name"'
op|':'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-aggregates/1/action'"
op|','
nl|'\n'
string|"'aggregate-remove-host-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregates-remove-host-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_update_aggregate
dedent|''
name|'def'
name|'test_update_aggregate'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'aggregate_id'
op|'='
name|'self'
op|'.'
name|'test_aggregate_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'os-aggregates/%s'"
op|'%'
name|'aggregate_id'
op|','
nl|'\n'
string|"'aggregate-update-post-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregate-update-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AggregatesSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'AggregatesSampleXmlTest'
op|'('
name|'AggregatesSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CertificatesSamplesJsonTest
dedent|''
name|'class'
name|'CertificatesSamplesJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.certificates."'
nl|'\n'
string|'"Certificates"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'CertificatesSamplesJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_create_certificates
dedent|''
name|'def'
name|'test_create_certificates'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-certificates'"
op|','
nl|'\n'
string|"'certificate-create-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'certificate-create-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_root_certificate
dedent|''
name|'def'
name|'test_get_root_certificate'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-certificates/root'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'certificate-get-root-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CertificatesSamplesXmlTest
dedent|''
dedent|''
name|'class'
name|'CertificatesSamplesXmlTest'
op|'('
name|'CertificatesSamplesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UsedLimitsSamplesJsonTest
dedent|''
name|'class'
name|'UsedLimitsSamplesJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.used_limits."'
nl|'\n'
string|'"Used_limits"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_used_limits
name|'def'
name|'test_get_used_limits'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to used limits.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'limits'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'usedlimits-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UsedLimitsSamplesXmlTest
dedent|''
dedent|''
name|'class'
name|'UsedLimitsSamplesXmlTest'
op|'('
name|'UsedLimitsSamplesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|MultipleCreateJsonTest
dedent|''
name|'class'
name|'MultipleCreateJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.multiple_create."'
nl|'\n'
string|'"Multiple_create"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_multiple_create
name|'def'
name|'test_multiple_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'min_count'"
op|':'
string|'"2"'
op|','
nl|'\n'
string|"'max_count'"
op|':'
string|'"3"'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'multiple-create-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'multiple-create-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_multiple_create_without_reservation_id
dedent|''
name|'def'
name|'test_multiple_create_without_reservation_id'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'min_count'"
op|':'
string|'"2"'
op|','
nl|'\n'
string|"'max_count'"
op|':'
string|'"3"'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'multiple-create-no-resv-post-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'multiple-create-no-resv-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|MultipleCreateXmlTest
dedent|''
dedent|''
name|'class'
name|'MultipleCreateXmlTest'
op|'('
name|'MultipleCreateJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServicesJsonTest
dedent|''
name|'class'
name|'ServicesJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.services.Services"'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'ServicesJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"service_get_all"'
op|','
nl|'\n'
name|'test_services'
op|'.'
name|'fake_service_get_all'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'timeutils'
op|','
string|'"utcnow"'
op|','
name|'test_services'
op|'.'
name|'fake_utcnow'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"service_get_by_args"'
op|','
nl|'\n'
name|'test_services'
op|'.'
name|'fake_service_get_by_host_binary'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"service_update"'
op|','
nl|'\n'
name|'test_services'
op|'.'
name|'fake_service_update'
op|')'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'ServicesJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'tearDown'
op|'('
op|')'
newline|'\n'
name|'timeutils'
op|'.'
name|'clear_time_override'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_services_list
dedent|''
name|'def'
name|'test_services_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Return a list of all agent builds."""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-services'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'binary'"
op|':'
string|"'nova-compute'"
op|','
nl|'\n'
string|"'host'"
op|':'
string|"'host1'"
op|','
nl|'\n'
string|"'zone'"
op|':'
string|"'nova'"
op|','
nl|'\n'
string|"'status'"
op|':'
string|"'disabled'"
op|','
nl|'\n'
string|"'state'"
op|':'
string|"'up'"
op|'}'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'services-list-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_service_enable
dedent|''
name|'def'
name|'test_service_enable'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Enable an existing agent build."""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|'"host"'
op|':'
string|'"host1"'
op|','
nl|'\n'
string|"'service'"
op|':'
string|"'nova-compute'"
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'/os-services/enable'"
op|','
nl|'\n'
string|"'service-enable-put-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|'"host"'
op|':'
string|'"host1"'
op|','
nl|'\n'
string|'"service"'
op|':'
string|'"nova-compute"'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'service-enable-put-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_service_disable
dedent|''
name|'def'
name|'test_service_disable'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Disable an existing agent build."""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|'"host"'
op|':'
string|'"host1"'
op|','
nl|'\n'
string|"'service'"
op|':'
string|"'nova-compute'"
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'/os-services/disable'"
op|','
nl|'\n'
string|"'service-disable-put-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|'"host"'
op|':'
string|'"host1"'
op|','
nl|'\n'
string|'"service"'
op|':'
string|'"nova-compute"'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'service-disable-put-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SimpleTenantUsageSampleJsonTest
dedent|''
dedent|''
name|'class'
name|'SimpleTenantUsageSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.simple_tenant_usage."'
nl|'\n'
string|'"Simple_tenant_usage"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""setUp method for simple tenant usage."""'
newline|'\n'
name|'super'
op|'('
name|'SimpleTenantUsageSampleJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'timeutils'
op|'.'
name|'set_time_override'
op|'('
name|'timeutils'
op|'.'
name|'utcnow'
op|'('
op|')'
op|'+'
nl|'\n'
name|'datetime'
op|'.'
name|'timedelta'
op|'('
name|'hours'
op|'='
number|'1'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'query'
op|'='
op|'{'
nl|'\n'
string|"'start'"
op|':'
name|'str'
op|'('
name|'timeutils'
op|'.'
name|'utcnow'
op|'('
op|')'
op|'-'
name|'datetime'
op|'.'
name|'timedelta'
op|'('
name|'hours'
op|'='
number|'1'
op|')'
op|')'
op|','
nl|'\n'
string|"'end'"
op|':'
name|'str'
op|'('
name|'timeutils'
op|'.'
name|'utcnow'
op|'('
op|')'
op|')'
nl|'\n'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""tearDown method for simple tenant usage."""'
newline|'\n'
name|'super'
op|'('
name|'SimpleTenantUsageSampleJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'tearDown'
op|'('
op|')'
newline|'\n'
name|'timeutils'
op|'.'
name|'clear_time_override'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_tenants_usage
dedent|''
name|'def'
name|'test_get_tenants_usage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to get all tenants usage request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-simple-tenant-usage?%s'"
op|'%'
op|'('
nl|'\n'
name|'urllib'
op|'.'
name|'urlencode'
op|'('
name|'self'
op|'.'
name|'query'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'simple-tenant-usage-get'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_tenant_usage_details
dedent|''
name|'def'
name|'test_get_tenant_usage_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to get specific tenant usage request.'
nl|'\n'
indent|'        '
name|'tenant_id'
op|'='
string|"'openstack'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-simple-tenant-usage/%s?%s'"
op|'%'
op|'('
name|'tenant_id'
op|','
nl|'\n'
name|'urllib'
op|'.'
name|'urlencode'
op|'('
name|'self'
op|'.'
name|'query'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'simple-tenant-usage-get-specific'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SimpleTenantUsageSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'SimpleTenantUsageSampleXmlTest'
op|'('
name|'SimpleTenantUsageSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerDiagnosticsSamplesJsonTest
dedent|''
name|'class'
name|'ServerDiagnosticsSamplesJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.server_diagnostics."'
nl|'\n'
string|'"Server_diagnostics"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_diagnostics_get
name|'def'
name|'test_server_diagnostics_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/diagnostics'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-diagnostics-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerDiagnosticsSamplesXmlTest
dedent|''
dedent|''
name|'class'
name|'ServerDiagnosticsSamplesXmlTest'
op|'('
name|'ServerDiagnosticsSamplesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AvailabilityZoneJsonTest
dedent|''
name|'class'
name|'AvailabilityZoneJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.availability_zone."'
nl|'\n'
string|'"Availability_zone"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_create_availability_zone
name|'def'
name|'test_create_availability_zone'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|'"availability_zone"'
op|':'
string|'"nova"'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'availability-zone-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'availability-zone-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AvailabilityZoneXmlTest
dedent|''
dedent|''
name|'class'
name|'AvailabilityZoneXmlTest'
op|'('
name|'AvailabilityZoneJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AdminActionsSamplesJsonTest
dedent|''
name|'class'
name|'AdminActionsSamplesJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.admin_actions."'
nl|'\n'
string|'"Admin_actions"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""setUp Method for AdminActions api samples extension\n        This method creates the server that will be used in each tests"""'
newline|'\n'
name|'super'
op|'('
name|'AdminActionsSamplesJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_pause
dedent|''
name|'def'
name|'test_post_pause'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to pause server request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-pause'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_unpause
dedent|''
name|'def'
name|'test_post_unpause'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to unpause server request.'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_post_pause'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-unpause'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_suspend
dedent|''
name|'def'
name|'test_post_suspend'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to suspend server request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-suspend'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_resume
dedent|''
name|'def'
name|'test_post_resume'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to server resume request.'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_post_suspend'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-resume'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_migrate
dedent|''
name|'def'
name|'test_post_migrate'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to migrate server request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-migrate'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_reset_network
dedent|''
name|'def'
name|'test_post_reset_network'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to reset server network request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-reset-network'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_inject_network_info
dedent|''
name|'def'
name|'test_post_inject_network_info'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to inject network info request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-inject-network-info'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_lock_server
dedent|''
name|'def'
name|'test_post_lock_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to lock server request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-lock-server'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_unlock_server
dedent|''
name|'def'
name|'test_post_unlock_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to unlock server request.'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_post_lock_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-unlock-server'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_backup_server
dedent|''
name|'def'
name|'test_post_backup_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to backup server request.'
nl|'\n'
DECL|function|image_details
indent|'        '
name|'def'
name|'image_details'
op|'('
name|'self'
op|','
name|'context'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""This stub is specifically used on the backup action."""'
newline|'\n'
comment|"# NOTE(maurosr): I've added this simple stub cause backup action"
nl|'\n'
comment|'# was trapped in infinite loop during fetch image phase since the'
nl|'\n'
comment|'# fake Image Service always returns the same set of images'
nl|'\n'
name|'return'
name|'None'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'fake'
op|'.'
name|'_FakeImageService'
op|','
string|"'detail'"
op|','
name|'image_details'
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-backup-server'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_live_migrate_server
dedent|''
name|'def'
name|'test_post_live_migrate_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api samples to server live migrate request.'
nl|'\n'
DECL|function|fake_live_migration_src_check
indent|'        '
name|'def'
name|'fake_live_migration_src_check'
op|'('
name|'self'
op|','
name|'context'
op|','
name|'instance_ref'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Skip live migration scheduler checks."""'
newline|'\n'
name|'return'
newline|'\n'
nl|'\n'
DECL|function|fake_live_migration_dest_check
dedent|''
name|'def'
name|'fake_live_migration_dest_check'
op|'('
name|'self'
op|','
name|'context'
op|','
name|'instance_ref'
op|','
name|'dest'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Skip live migration scheduler checks."""'
newline|'\n'
name|'return'
name|'dest'
newline|'\n'
nl|'\n'
DECL|function|fake_live_migration_common
dedent|''
name|'def'
name|'fake_live_migration_common'
op|'('
name|'self'
op|','
name|'context'
op|','
name|'instance_ref'
op|','
name|'dest'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Skip live migration scheduler checks."""'
newline|'\n'
name|'return'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'driver'
op|'.'
name|'Scheduler'
op|','
string|"'_live_migration_src_check'"
op|','
nl|'\n'
name|'fake_live_migration_src_check'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'driver'
op|'.'
name|'Scheduler'
op|','
string|"'_live_migration_dest_check'"
op|','
nl|'\n'
name|'fake_live_migration_dest_check'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'driver'
op|'.'
name|'Scheduler'
op|','
string|"'_live_migration_common_check'"
op|','
nl|'\n'
name|'fake_live_migration_common'
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake_get_compute
name|'def'
name|'fake_get_compute'
op|'('
name|'context'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'service'
op|'='
name|'dict'
op|'('
name|'host'
op|'='
name|'host'
op|','
nl|'\n'
name|'binary'
op|'='
string|"'nova-compute'"
op|','
nl|'\n'
name|'topic'
op|'='
string|"'compute'"
op|','
nl|'\n'
name|'report_count'
op|'='
number|'1'
op|','
nl|'\n'
name|'updated_at'
op|'='
string|"'foo'"
op|','
nl|'\n'
name|'hypervisor_type'
op|'='
string|"'bar'"
op|','
nl|'\n'
name|'hypervisor_version'
op|'='
string|"'1'"
op|','
nl|'\n'
name|'disabled'
op|'='
name|'False'
op|')'
newline|'\n'
name|'return'
op|'{'
string|"'compute_node'"
op|':'
op|'['
name|'service'
op|']'
op|'}'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"service_get_by_compute_host"'
op|','
name|'fake_get_compute'
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-live-migrate'"
op|','
nl|'\n'
op|'{'
string|"'hostname'"
op|':'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_reset_state
dedent|''
name|'def'
name|'test_post_reset_state'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# get api samples to server reset state request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-reset-server-state'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AdminActionsSamplesXmlTest
dedent|''
dedent|''
name|'class'
name|'AdminActionsSamplesXmlTest'
op|'('
name|'AdminActionsSamplesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ConsolesSampleJsonTests
dedent|''
name|'class'
name|'ConsolesSampleJsonTests'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".consoles.Consoles"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'ConsolesSampleJsonTests'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'flags'
op|'('
name|'vnc_enabled'
op|'='
name|'True'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'flags'
op|'('
name|'enabled'
op|'='
name|'True'
op|','
name|'group'
op|'='
string|"'spice'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_vnc_console
dedent|''
name|'def'
name|'test_get_vnc_console'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'get-vnc-console-post-req'"
op|','
nl|'\n'
op|'{'
string|"'action'"
op|':'
string|"'os-getVNCConsole'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|'"url"'
op|']'
op|'='
string|'"((https?):((//)|(\\\\\\\\))+([\\w\\d:#@%/;$()~_?\\+-=\\\\\\.&](#!)?)*)"'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'get-vnc-console-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_spice_console
dedent|''
name|'def'
name|'test_get_spice_console'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'get-spice-console-post-req'"
op|','
nl|'\n'
op|'{'
string|"'action'"
op|':'
string|"'os-getSPICEConsole'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|'"url"'
op|']'
op|'='
string|'"((https?):((//)|(\\\\\\\\))+([\\w\\d:#@%/;$()~_?\\+-=\\\\\\.&](#!)?)*)"'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'get-spice-console-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ConsolesSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'ConsolesSampleXmlTests'
op|'('
name|'ConsolesSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'        '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|DeferredDeleteSampleJsonTests
dedent|''
name|'class'
name|'DeferredDeleteSampleJsonTests'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".deferred_delete.Deferred_delete"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'DeferredDeleteSampleJsonTests'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'flags'
op|'('
name|'reclaim_instance_interval'
op|'='
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_restore
dedent|''
name|'def'
name|'test_restore'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'restore-post-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|"''"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_force_delete
dedent|''
name|'def'
name|'test_force_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'force-delete-post-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|"''"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|DeferredDeleteSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'DeferredDeleteSampleXmlTests'
op|'('
name|'DeferredDeleteSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'        '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|QuotasSampleJsonTests
dedent|''
name|'class'
name|'QuotasSampleJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.quotas.Quotas"'
newline|'\n'
nl|'\n'
DECL|member|test_show_quotas
name|'def'
name|'test_show_quotas'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to show quotas.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-quota-sets/fake_tenant'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'quotas-show-get-resp'"
op|','
op|'{'
op|'}'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_show_quotas_defaults
dedent|''
name|'def'
name|'test_show_quotas_defaults'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to show quotas defaults.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-quota-sets/fake_tenant/defaults'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'quotas-show-defaults-get-resp'"
op|','
nl|'\n'
op|'{'
op|'}'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_update_quotas
dedent|''
name|'def'
name|'test_update_quotas'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to update quotas.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'os-quota-sets/fake_tenant'"
op|','
nl|'\n'
string|"'quotas-update-post-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'quotas-update-post-resp'"
op|','
op|'{'
op|'}'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|QuotasSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'QuotasSampleXmlTests'
op|'('
name|'QuotasSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedIpsSampleJsonTests
dedent|''
name|'class'
name|'ExtendedIpsSampleJsonTests'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".extended_ips.Extended_ips"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_show
name|'def'
name|'test_show'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'hypervisor_hostname'"
op|']'
op|'='
string|"r'[\\w\\.\\-]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_detail
dedent|''
name|'def'
name|'test_detail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-detail-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedIpsSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'ExtendedIpsSampleXmlTests'
op|'('
name|'ExtendedIpsSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'        '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedStatusSampleJsonTests
dedent|''
name|'class'
name|'ExtendedStatusSampleJsonTests'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".extended_status.Extended_status"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_show
name|'def'
name|'test_show'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_detail
dedent|''
name|'def'
name|'test_detail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-detail-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedStatusSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'ExtendedStatusSampleXmlTests'
op|'('
name|'ExtendedStatusSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'        '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorManageSampleJsonTests
dedent|''
name|'class'
name|'FlavorManageSampleJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.flavormanage."'
nl|'\n'
string|'"Flavormanage"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_create_flavor
name|'def'
name|'_create_flavor'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Create a flavor."""'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'flavor_id'"
op|':'
number|'10'
op|','
nl|'\n'
string|"'flavor_name'"
op|':'
string|'"test_flavor"'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|'"flavors"'
op|','
nl|'\n'
string|'"flavor-create-post-req"'
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|'"flavor-create-post-resp"'
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_create_flavor
dedent|''
name|'def'
name|'test_create_flavor'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to create a flavor.'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_flavor'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_flavor
dedent|''
name|'def'
name|'test_delete_flavor'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to delete a flavor.'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_flavor'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|'"flavors/10"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|"''"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorManageSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'FlavorManageSampleXmlTests'
op|'('
name|'FlavorManageSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerPasswordSampleJsonTests
dedent|''
name|'class'
name|'ServerPasswordSampleJsonTests'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.server_password."'
nl|'\n'
string|'"Server_password"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_password
name|'def'
name|'test_get_password'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
nl|'\n'
comment|'# Mock password since there is no api to set it'
nl|'\n'
DECL|function|fake_ext_password
indent|'        '
name|'def'
name|'fake_ext_password'
op|'('
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
op|'('
string|'"xlozO3wLCBRWAa2yDjCCVx8vwNPypxnypmRYDa/zErlQ+EzPe1S/"'
nl|'\n'
string|'"Gz6nfmC52mOlOSCRuUOmG7kqqgejPof6M7bOezS387zjq4LSvvwp"'
nl|'\n'
string|'"28zUknzy4YzfFGhnHAdai3TxUJ26pfQCYrq8UTzmKF2Bq8ioSEtV"'
nl|'\n'
string|'"VzM0A96pDh8W2i7BOz6MdoiVyiev/I1K2LsuipfxSJR7Wdke4zNX"'
nl|'\n'
string|'"JjHHP2RfYsVbZ/k9ANu+Nz4iIH8/7Cacud/pphH7EjrY6a4RZNrj"'
nl|'\n'
string|'"QskrhKYed0YERpotyjYk1eDtRe72GrSiXteqCM4biaQ5w3ruS+Ac"'
nl|'\n'
string|'"X//PXk3uJ5kC7d67fPXaVz4WaQRYMg=="'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'password'
op|','
string|'"extract_password"'
op|','
name|'fake_ext_password'
op|')'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/os-server-password'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'encrypted_password'"
op|']'
op|'='
name|'fake_ext_password'
op|'('
op|')'
op|'.'
name|'replace'
op|'('
string|"'+'"
op|','
string|"'\\\\+'"
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'get-password-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_reset_password
dedent|''
name|'def'
name|'test_reset_password'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'servers/%s/os-server-password'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'204'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerPasswordSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'ServerPasswordSampleXmlTests'
op|'('
name|'ServerPasswordSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|DiskConfigJsonTest
dedent|''
name|'class'
name|'DiskConfigJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.disk_config."'
nl|'\n'
string|'"Disk_config"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_list_servers_detail
name|'def'
name|'test_list_servers_detail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'list-servers-detail-get'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_server
dedent|''
name|'def'
name|'test_get_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_update_server
dedent|''
name|'def'
name|'test_update_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-update-put-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-update-put-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_resize_server
dedent|''
name|'def'
name|'test_resize_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'flags'
op|'('
name|'allow_resize_to_same_host'
op|'='
name|'True'
op|')'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-resize-post-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
comment|'# NOTE(tmello): Resize does not return response body'
nl|'\n'
comment|'# Bug #1085213.'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|'""'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_rebuild_server
dedent|''
name|'def'
name|'test_rebuild_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-action-rebuild-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-action-rebuild-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_image
dedent|''
name|'def'
name|'test_get_image'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s'"
op|'%'
name|'image_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'image_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_list_images
dedent|''
name|'def'
name|'test_list_images'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|DiskConfigXmlTest
dedent|''
dedent|''
name|'class'
name|'DiskConfigXmlTest'
op|'('
name|'DiskConfigJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'        '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|OsNetworksJsonTests
dedent|''
name|'class'
name|'OsNetworksJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.os_tenant_networks"'
nl|'\n'
string|'".Os_tenant_networks"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'OsNetworksJsonTests'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'CONF'
op|'.'
name|'set_override'
op|'('
string|'"enable_network_quota"'
op|','
name|'True'
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake
name|'def'
name|'fake'
op|'('
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'nova'
op|'.'
name|'quota'
op|'.'
name|'QUOTAS'
op|','
string|'"reserve"'
op|','
name|'fake'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'nova'
op|'.'
name|'quota'
op|'.'
name|'QUOTAS'
op|','
string|'"commit"'
op|','
name|'fake'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'nova'
op|'.'
name|'quota'
op|'.'
name|'QUOTAS'
op|','
string|'"rollback"'
op|','
name|'fake'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'nova'
op|'.'
name|'quota'
op|'.'
name|'QuotaEngine'
op|','
string|'"reserve"'
op|','
name|'fake'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'nova'
op|'.'
name|'quota'
op|'.'
name|'QuotaEngine'
op|','
string|'"commit"'
op|','
name|'fake'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'nova'
op|'.'
name|'quota'
op|'.'
name|'QuotaEngine'
op|','
string|'"rollback"'
op|','
name|'fake'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_list_networks
dedent|''
name|'def'
name|'test_list_networks'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-tenant-networks'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'networks-list-res'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_create_network
dedent|''
name|'def'
name|'test_create_network'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-tenant-networks'"
op|','
string|'"networks-post-req"'
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'networks-post-res'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_network
dedent|''
name|'def'
name|'test_delete_network'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-tenant-networks'"
op|','
string|'"networks-post-req"'
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'net'
op|'='
name|'json'
op|'.'
name|'loads'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'os-tenant-networks/%s'"
op|'%'
nl|'\n'
name|'net'
op|'['
string|'"network"'
op|']'
op|'['
string|'"id"'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|NetworksJsonTests
dedent|''
dedent|''
name|'class'
name|'NetworksJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".os_networks.Os_networks"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'NetworksJsonTests'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'fake_network_api'
op|'='
name|'test_networks'
op|'.'
name|'FakeNetworkAPI'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'network_api'
op|'.'
name|'API'
op|','
string|'"get_all"'
op|','
nl|'\n'
name|'fake_network_api'
op|'.'
name|'get_all'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'network_api'
op|'.'
name|'API'
op|','
string|'"get"'
op|','
nl|'\n'
name|'fake_network_api'
op|'.'
name|'get'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'network_api'
op|'.'
name|'API'
op|','
string|'"associate"'
op|','
nl|'\n'
name|'fake_network_api'
op|'.'
name|'associate'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'network_api'
op|'.'
name|'API'
op|','
string|'"delete"'
op|','
nl|'\n'
name|'fake_network_api'
op|'.'
name|'delete'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'network_api'
op|'.'
name|'API'
op|','
string|'"create"'
op|','
nl|'\n'
name|'fake_network_api'
op|'.'
name|'create'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'network_api'
op|'.'
name|'API'
op|','
string|'"add_network_to_project"'
op|','
nl|'\n'
name|'fake_network_api'
op|'.'
name|'add_network_to_project'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_network_list
dedent|''
name|'def'
name|'test_network_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-networks'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'networks-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_network_disassociate
dedent|''
name|'def'
name|'test_network_disassociate'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'test_networks'
op|'.'
name|'FAKE_NETWORKS'
op|'['
number|'0'
op|']'
op|'['
string|"'uuid'"
op|']'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-networks/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'networks-disassociate-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_network_show
dedent|''
name|'def'
name|'test_network_show'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'test_networks'
op|'.'
name|'FAKE_NETWORKS'
op|'['
number|'0'
op|']'
op|'['
string|"'uuid'"
op|']'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-networks/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'network-show-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_network_create
dedent|''
name|'def'
name|'test_network_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|'"os-networks"'
op|','
nl|'\n'
string|"'network-create-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'network-create-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_network_add
dedent|''
name|'def'
name|'test_network_add'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|'"os-networks/add"'
op|','
nl|'\n'
string|"'network-add-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|NetworksXmlTests
dedent|''
dedent|''
name|'class'
name|'NetworksXmlTests'
op|'('
name|'NetworksJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|NetworksAssociateJsonTests
dedent|''
name|'class'
name|'NetworksAssociateJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".networks_associate.Networks_associate"'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|_sentinel
name|'_sentinel'
op|'='
name|'object'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_flags
name|'def'
name|'_get_flags'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'f'
op|'='
name|'super'
op|'('
name|'NetworksAssociateJsonTests'
op|','
name|'self'
op|')'
op|'.'
name|'_get_flags'
op|'('
op|')'
newline|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'='
name|'CONF'
op|'.'
name|'osapi_compute_extension'
op|'['
op|':'
op|']'
newline|'\n'
comment|'# Networks_associate requires Networks to be update'
nl|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
string|"'nova.api.openstack.compute.contrib.os_networks.Os_networks'"
op|')'
newline|'\n'
name|'return'
name|'f'
newline|'\n'
nl|'\n'
DECL|member|setUp
dedent|''
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'NetworksAssociateJsonTests'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake_associate
name|'def'
name|'fake_associate'
op|'('
name|'self'
op|','
name|'context'
op|','
name|'network_id'
op|','
nl|'\n'
name|'host'
op|'='
name|'NetworksAssociateJsonTests'
op|'.'
name|'_sentinel'
op|','
nl|'\n'
name|'project'
op|'='
name|'NetworksAssociateJsonTests'
op|'.'
name|'_sentinel'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'True'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'network_api'
op|'.'
name|'API'
op|','
string|'"associate"'
op|','
name|'fake_associate'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_disassociate
dedent|''
name|'def'
name|'test_disassociate'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-networks/1/action'"
op|','
nl|'\n'
string|"'network-disassociate-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_disassociate_host
dedent|''
name|'def'
name|'test_disassociate_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-networks/1/action'"
op|','
nl|'\n'
string|"'network-disassociate-host-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_disassociate_project
dedent|''
name|'def'
name|'test_disassociate_project'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-networks/1/action'"
op|','
nl|'\n'
string|"'network-disassociate-project-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_associate_host
dedent|''
name|'def'
name|'test_associate_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-networks/1/action'"
op|','
nl|'\n'
string|"'network-associate-host-req'"
op|','
nl|'\n'
op|'{'
string|'"host"'
op|':'
string|'"testHost"'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|NetworksAssociateXmlTests
dedent|''
dedent|''
name|'class'
name|'NetworksAssociateXmlTests'
op|'('
name|'NetworksAssociateJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorDisabledSampleJsonTests
dedent|''
name|'class'
name|'FlavorDisabledSampleJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.flavor_disabled."'
nl|'\n'
string|'"Flavor_disabled"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_show_flavor
name|'def'
name|'test_show_flavor'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to show flavor_disabled attr. of a flavor.'
nl|'\n'
indent|'        '
name|'flavor_id'
op|'='
number|'1'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/%s'"
op|'%'
name|'flavor_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'flavor_id'"
op|']'
op|'='
name|'flavor_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-show-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_detail_flavor
dedent|''
name|'def'
name|'test_detail_flavor'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to show details of a flavor.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-detail-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorDisabledSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'FlavorDisabledSampleXmlTests'
op|'('
name|'FlavorDisabledSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|QuotaClassesSampleJsonTests
dedent|''
name|'class'
name|'QuotaClassesSampleJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.quota_classes."'
nl|'\n'
string|'"Quota_classes"'
op|')'
newline|'\n'
DECL|variable|set_id
name|'set_id'
op|'='
string|"'test_class'"
newline|'\n'
nl|'\n'
DECL|member|test_show_quota_classes
name|'def'
name|'test_show_quota_classes'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to show quota classes.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-quota-class-sets/%s'"
op|'%'
name|'self'
op|'.'
name|'set_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'set_id'"
op|':'
name|'self'
op|'.'
name|'set_id'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'quota-classes-show-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_update_quota_classes
dedent|''
name|'def'
name|'test_update_quota_classes'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample to update quota classes.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'os-quota-class-sets/%s'"
op|'%'
name|'self'
op|'.'
name|'set_id'
op|','
nl|'\n'
string|"'quota-classes-update-post-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'quota-classes-update-post-resp'"
op|','
nl|'\n'
op|'{'
op|'}'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|QuotaClassesSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'QuotaClassesSampleXmlTests'
op|'('
name|'QuotaClassesSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CellsSampleJsonTest
dedent|''
name|'class'
name|'CellsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.cells.Cells"'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# db_check_interval < 0 makes cells manager always hit the DB'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'flags'
op|'('
name|'enable'
op|'='
name|'True'
op|','
name|'db_check_interval'
op|'='
op|'-'
number|'1'
op|','
name|'group'
op|'='
string|"'cells'"
op|')'
newline|'\n'
name|'super'
op|'('
name|'CellsSampleJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_stub_cells'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_stub_cells
dedent|''
name|'def'
name|'_stub_cells'
op|'('
name|'self'
op|','
name|'num_cells'
op|'='
number|'5'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'cells'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'cells_next_id'
op|'='
number|'1'
newline|'\n'
nl|'\n'
DECL|function|_fake_cell_get_all
name|'def'
name|'_fake_cell_get_all'
op|'('
name|'context'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'cells'
newline|'\n'
nl|'\n'
DECL|function|_fake_cell_get
dedent|''
name|'def'
name|'_fake_cell_get'
op|'('
name|'context'
op|','
name|'cell_name'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'cell'
name|'in'
name|'self'
op|'.'
name|'cells'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'cell'
op|'['
string|"'name'"
op|']'
op|'=='
name|'cell_name'
op|':'
newline|'\n'
indent|'                    '
name|'return'
name|'cell'
newline|'\n'
dedent|''
dedent|''
name|'raise'
name|'exception'
op|'.'
name|'CellNotFound'
op|'('
name|'cell_name'
op|'='
name|'cell_name'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'for'
name|'x'
name|'in'
name|'xrange'
op|'('
name|'num_cells'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'cell'
op|'='
name|'models'
op|'.'
name|'Cell'
op|'('
op|')'
newline|'\n'
name|'our_id'
op|'='
name|'self'
op|'.'
name|'cells_next_id'
newline|'\n'
name|'self'
op|'.'
name|'cells_next_id'
op|'+='
number|'1'
newline|'\n'
name|'cell'
op|'.'
name|'update'
op|'('
op|'{'
string|"'id'"
op|':'
name|'our_id'
op|','
nl|'\n'
string|"'name'"
op|':'
string|"'cell%s'"
op|'%'
name|'our_id'
op|','
nl|'\n'
string|"'username'"
op|':'
string|"'username%s'"
op|'%'
name|'our_id'
op|','
nl|'\n'
string|"'is_parent'"
op|':'
name|'our_id'
op|'%'
number|'2'
op|'=='
number|'0'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cells'
op|'.'
name|'append'
op|'('
name|'cell'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|"'cell_get_all'"
op|','
name|'_fake_cell_get_all'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|"'cell_get'"
op|','
name|'_fake_cell_get'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_cells_empty_list
dedent|''
name|'def'
name|'test_cells_empty_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Override this'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'_stub_cells'
op|'('
name|'num_cells'
op|'='
number|'0'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-cells'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'cells-list-empty-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_cells_list
dedent|''
name|'def'
name|'test_cells_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-cells'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'cells-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_cells_get
dedent|''
name|'def'
name|'test_cells_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-cells/cell3'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'cells-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CellsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'CellsSampleXmlTest'
op|'('
name|'CellsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|BareMetalNodesJsonTest
dedent|''
name|'class'
name|'BareMetalNodesJsonTest'
op|'('
name|'ApiSampleTestBase'
op|','
name|'bm_db_base'
op|'.'
name|'BMDBTestCase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|"'nova.api.openstack.compute.contrib.baremetal_nodes.'"
nl|'\n'
string|"'Baremetal_nodes'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_create_node
name|'def'
name|'_create_node'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|'"os-baremetal-nodes"'
op|','
nl|'\n'
string|'"baremetal-node-create-req"'
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'node_id'"
op|':'
string|"'(?P<id>\\d+)'"
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|'"baremetal-node-create-resp"'
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_create_node
dedent|''
name|'def'
name|'test_create_node'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_node'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_list_nodes
dedent|''
name|'def'
name|'test_list_nodes'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'node_id'
op|'='
name|'self'
op|'.'
name|'_create_node'
op|'('
op|')'
newline|'\n'
name|'interface_id'
op|'='
name|'self'
op|'.'
name|'_add_interface'
op|'('
name|'node_id'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-baremetal-nodes'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'node_id'"
op|':'
name|'node_id'
op|','
nl|'\n'
string|"'interface_id'"
op|':'
name|'interface_id'
op|','
nl|'\n'
string|"'address'"
op|':'
string|"'aa:aa:aa:aa:aa:aa'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'baremetal-node-list-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_show_node
dedent|''
name|'def'
name|'test_show_node'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'node_id'
op|'='
name|'self'
op|'.'
name|'_create_node'
op|'('
op|')'
newline|'\n'
name|'interface_id'
op|'='
name|'self'
op|'.'
name|'_add_interface'
op|'('
name|'node_id'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-baremetal-nodes/%s'"
op|'%'
name|'node_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'node_id'"
op|':'
name|'node_id'
op|','
nl|'\n'
string|"'interface_id'"
op|':'
name|'interface_id'
op|','
nl|'\n'
string|"'address'"
op|':'
string|"'aa:aa:aa:aa:aa:aa'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'baremetal-node-show-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_delete_node
dedent|''
name|'def'
name|'test_delete_node'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'node_id'
op|'='
name|'self'
op|'.'
name|'_create_node'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|'"os-baremetal-nodes/%s"'
op|'%'
name|'node_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_add_interface
dedent|''
name|'def'
name|'_add_interface'
op|'('
name|'self'
op|','
name|'node_id'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|'"os-baremetal-nodes/%s/action"'
op|'%'
name|'node_id'
op|','
nl|'\n'
string|'"baremetal-node-add-interface-req"'
op|','
nl|'\n'
op|'{'
string|"'address'"
op|':'
string|"'aa:aa:aa:aa:aa:aa'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'interface_id'"
op|':'
string|"r'(?P<id>\\d+)'"
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|'"baremetal-node-add-interface-resp"'
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_add_interface
dedent|''
name|'def'
name|'test_add_interface'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'node_id'
op|'='
name|'self'
op|'.'
name|'_create_node'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_add_interface'
op|'('
name|'node_id'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_remove_interface
dedent|''
name|'def'
name|'test_remove_interface'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'node_id'
op|'='
name|'self'
op|'.'
name|'_create_node'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_add_interface'
op|'('
name|'node_id'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|'"os-baremetal-nodes/%s/action"'
op|'%'
name|'node_id'
op|','
nl|'\n'
string|'"baremetal-node-remove-interface-req"'
op|','
nl|'\n'
op|'{'
string|"'address'"
op|':'
string|"'aa:aa:aa:aa:aa:aa'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|'""'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|BareMetalNodesXmlTest
dedent|''
dedent|''
name|'class'
name|'BareMetalNodesXmlTest'
op|'('
name|'BareMetalNodesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FloatingIPPoolsSampleJsonTests
dedent|''
name|'class'
name|'FloatingIPPoolsSampleJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.floating_ip_pools."'
nl|'\n'
string|'"Floating_ip_pools"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_list_floatingippools
name|'def'
name|'test_list_floatingippools'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'pool_list'
op|'='
op|'['
string|'"pool1"'
op|','
string|'"pool2"'
op|']'
newline|'\n'
nl|'\n'
DECL|function|fake_get_floating_ip_pools
name|'def'
name|'fake_get_floating_ip_pools'
op|'('
name|'self'
op|','
name|'context'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
op|'['
op|'{'
string|"'name'"
op|':'
name|'pool_list'
op|'['
number|'0'
op|']'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
name|'pool_list'
op|'['
number|'1'
op|']'
op|'}'
op|']'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'network_api'
op|'.'
name|'API'
op|','
string|'"get_floating_ip_pools"'
op|','
nl|'\n'
name|'fake_get_floating_ip_pools'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ip-pools'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'pool1'"
op|':'
name|'pool_list'
op|'['
number|'0'
op|']'
op|','
nl|'\n'
string|"'pool2'"
op|':'
name|'pool_list'
op|'['
number|'1'
op|']'
nl|'\n'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floatingippools-list-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FloatingIPPoolsSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'FloatingIPPoolsSampleXmlTests'
op|'('
name|'FloatingIPPoolsSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|MultinicSampleJsonTest
dedent|''
name|'class'
name|'MultinicSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.multinic.Multinic"'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'MultinicSampleJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_add_fixed_ip
dedent|''
name|'def'
name|'test_add_fixed_ip'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|'"networkId"'
op|':'
number|'1'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
op|'('
name|'self'
op|'.'
name|'uuid'
op|')'
op|','
nl|'\n'
string|"'multinic-add-fixed-ip-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_remove_fixed_ip
dedent|''
name|'def'
name|'test_remove_fixed_ip'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|'"ip"'
op|':'
string|'"10.0.0.2"'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
op|'('
name|'self'
op|'.'
name|'uuid'
op|')'
op|','
nl|'\n'
string|"'multinic-remove-fixed-ip-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|MultinicSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'MultinicSampleXmlTest'
op|'('
name|'MultinicSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|InstanceUsageAuditLogJsonTest
dedent|''
name|'class'
name|'InstanceUsageAuditLogJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib."'
nl|'\n'
string|'"instance_usage_audit_log.Instance_usage_audit_log"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_show_instance_usage_audit_log
name|'def'
name|'test_show_instance_usage_audit_log'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-instance_usage_audit_log/%s'"
op|'%'
nl|'\n'
name|'urllib'
op|'.'
name|'quote'
op|'('
string|"'2012-07-05 10:00:00'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'inst-usage-audit-log-show-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_index_instance_usage_audit_log
dedent|''
name|'def'
name|'test_index_instance_usage_audit_log'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-instance_usage_audit_log'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'inst-usage-audit-log-index-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|InstanceUsageAuditLogXmlTest
dedent|''
dedent|''
name|'class'
name|'InstanceUsageAuditLogXmlTest'
op|'('
name|'InstanceUsageAuditLogJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorExtraSpecsSampleJsonTests
dedent|''
name|'class'
name|'FlavorExtraSpecsSampleJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.flavorextraspecs."'
nl|'\n'
string|'"Flavorextraspecs"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_flavor_extra_specs_create
name|'def'
name|'_flavor_extra_specs_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'value1'"
op|':'
string|"'value1'"
op|','
nl|'\n'
string|"'value2'"
op|':'
string|"'value2'"
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'flavors/1/os-extra_specs'"
op|','
nl|'\n'
string|"'flavor-extra-specs-create-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-extra-specs-create-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_extra_specs_get
dedent|''
name|'def'
name|'test_flavor_extra_specs_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'value1'"
op|':'
string|"'value1'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_flavor_extra_specs_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/1/os-extra_specs/key1'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-extra-specs-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_extra_specs_list
dedent|''
name|'def'
name|'test_flavor_extra_specs_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'value1'"
op|':'
string|"'value1'"
op|','
nl|'\n'
string|"'value2'"
op|':'
string|"'value2'"
nl|'\n'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_flavor_extra_specs_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/1/os-extra_specs'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-extra-specs-list-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_extra_specs_create
dedent|''
name|'def'
name|'test_flavor_extra_specs_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_flavor_extra_specs_create'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_extra_specs_update
dedent|''
name|'def'
name|'test_flavor_extra_specs_update'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'value1'"
op|':'
string|"'new_value1'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_flavor_extra_specs_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'flavors/1/os-extra_specs/key1'"
op|','
nl|'\n'
string|"'flavor-extra-specs-update-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-extra-specs-update-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_extra_specs_delete
dedent|''
name|'def'
name|'test_flavor_extra_specs_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_flavor_extra_specs_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'flavors/1/os-extra_specs/key1'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|"''"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorExtraSpecsSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'FlavorExtraSpecsSampleXmlTests'
op|'('
name|'FlavorExtraSpecsSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FpingSampleJsonTests
dedent|''
name|'class'
name|'FpingSampleJsonTests'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.fping.Fping"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FpingSampleJsonTests'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake_check_fping
name|'def'
name|'fake_check_fping'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'utils'
op|','
string|'"execute"'
op|','
name|'test_fping'
op|'.'
name|'execute'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'fping'
op|'.'
name|'FpingController'
op|','
string|'"check_fping"'
op|','
nl|'\n'
name|'fake_check_fping'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_fping
dedent|''
name|'def'
name|'test_get_fping'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-fping'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'fping-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_fping_details
dedent|''
name|'def'
name|'test_get_fping_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-fping/%s'"
op|'%'
op|'('
name|'uuid'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'fping-get-details-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FpingSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'FpingSampleXmlTests'
op|'('
name|'FpingSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedAvailabilityZoneJsonTests
dedent|''
name|'class'
name|'ExtendedAvailabilityZoneJsonTests'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".extended_availability_zone"'
nl|'\n'
string|'".Extended_availability_zone"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_show
name|'def'
name|'test_show'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_detail
dedent|''
name|'def'
name|'test_detail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-detail-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedAvailabilityZoneXmlTests
dedent|''
dedent|''
name|'class'
name|'ExtendedAvailabilityZoneXmlTests'
op|'('
name|'ExtendedAvailabilityZoneJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|EvacuateJsonTest
dedent|''
name|'class'
name|'EvacuateJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".evacuate.Evacuate"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_evacuate
name|'def'
name|'test_server_evacuate'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'req_subs'
op|'='
op|'{'
nl|'\n'
string|"'host'"
op|':'
string|"'TargetHost'"
op|','
nl|'\n'
string|'"adminPass"'
op|':'
string|'"MySecretPass"'
op|','
nl|'\n'
string|'"onSharedStorage"'
op|':'
string|"'False'"
nl|'\n'
op|'}'
newline|'\n'
nl|'\n'
DECL|function|fake_service_is_up
name|'def'
name|'fake_service_is_up'
op|'('
name|'self'
op|','
name|'service'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Simulate validation of instance host is down."""'
newline|'\n'
name|'return'
name|'False'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'service_group_api'
op|'.'
name|'API'
op|','
string|"'service_is_up'"
op|','
nl|'\n'
name|'fake_service_is_up'
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-evacuate-req'"
op|','
name|'req_subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-evacuate-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|EvacuateXmlTest
dedent|''
dedent|''
name|'class'
name|'EvacuateXmlTest'
op|'('
name|'EvacuateJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FloatingIpDNSJsonTest
dedent|''
name|'class'
name|'FloatingIpDNSJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.floating_ip_dns."'
nl|'\n'
string|'"Floating_ip_dns"'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|domain
name|'domain'
op|'='
string|"'domain1.example.org'"
newline|'\n'
DECL|variable|name
name|'name'
op|'='
string|"'instance1'"
newline|'\n'
DECL|variable|scope
name|'scope'
op|'='
string|"'public'"
newline|'\n'
DECL|variable|project
name|'project'
op|'='
string|"'project1'"
newline|'\n'
DECL|variable|dns_type
name|'dns_type'
op|'='
string|"'A'"
newline|'\n'
DECL|variable|ip
name|'ip'
op|'='
string|"'192.168.1.1'"
newline|'\n'
nl|'\n'
DECL|member|_create_or_update
name|'def'
name|'_create_or_update'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'domain'"
op|':'
name|'self'
op|'.'
name|'domain'
op|','
nl|'\n'
string|"'project'"
op|':'
name|'self'
op|'.'
name|'project'
op|','
nl|'\n'
string|"'scope'"
op|':'
name|'self'
op|'.'
name|'scope'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'os-floating-ip-dns/%s'"
op|'%'
name|'self'
op|'.'
name|'domain'
op|','
nl|'\n'
string|"'floating-ip-dns-create-or-update-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ip-dns-create-or-update-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_create_or_update_entry
dedent|''
name|'def'
name|'_create_or_update_entry'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
string|"'ip'"
op|':'
name|'self'
op|'.'
name|'ip'
op|','
string|"'dns_type'"
op|':'
name|'self'
op|'.'
name|'dns_type'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'os-floating-ip-dns/%s/entries/%s'"
nl|'\n'
op|'%'
op|'('
name|'self'
op|'.'
name|'domain'
op|','
name|'self'
op|'.'
name|'name'
op|')'
op|','
nl|'\n'
string|"'floating-ip-dns-create-or-update-entry-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
op|'{'
string|"'name'"
op|':'
name|'self'
op|'.'
name|'name'
op|','
string|"'domain'"
op|':'
name|'self'
op|'.'
name|'domain'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ip-dns-create-or-update-entry-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ip_dns_list
dedent|''
name|'def'
name|'test_floating_ip_dns_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_or_update'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ip-dns'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'domain'"
op|':'
name|'self'
op|'.'
name|'domain'
op|','
nl|'\n'
string|"'project'"
op|':'
name|'self'
op|'.'
name|'project'
op|','
nl|'\n'
string|"'scope'"
op|':'
name|'self'
op|'.'
name|'scope'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ip-dns-list-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ip_dns_create_or_update
dedent|''
name|'def'
name|'test_floating_ip_dns_create_or_update'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_or_update'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ip_dns_delete
dedent|''
name|'def'
name|'test_floating_ip_dns_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_or_update'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'os-floating-ip-dns/%s'"
op|'%'
name|'self'
op|'.'
name|'domain'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ip_dns_create_or_update_entry
dedent|''
name|'def'
name|'test_floating_ip_dns_create_or_update_entry'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_or_update_entry'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ip_dns_entry_get
dedent|''
name|'def'
name|'test_floating_ip_dns_entry_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_or_update_entry'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ip-dns/%s/entries/%s'"
nl|'\n'
op|'%'
op|'('
name|'self'
op|'.'
name|'domain'
op|','
name|'self'
op|'.'
name|'name'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'domain'"
op|':'
name|'self'
op|'.'
name|'domain'
op|','
nl|'\n'
string|"'ip'"
op|':'
name|'self'
op|'.'
name|'ip'
op|','
nl|'\n'
string|"'name'"
op|':'
name|'self'
op|'.'
name|'name'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ip-dns-entry-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ip_dns_entry_delete
dedent|''
name|'def'
name|'test_floating_ip_dns_entry_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_or_update_entry'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'os-floating-ip-dns/%s/entries/%s'"
nl|'\n'
op|'%'
op|'('
name|'self'
op|'.'
name|'domain'
op|','
name|'self'
op|'.'
name|'name'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ip_dns_entry_list
dedent|''
name|'def'
name|'test_floating_ip_dns_entry_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_or_update_entry'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ip-dns/%s/entries/%s'"
nl|'\n'
op|'%'
op|'('
name|'self'
op|'.'
name|'domain'
op|','
name|'self'
op|'.'
name|'ip'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'domain'"
op|':'
name|'self'
op|'.'
name|'domain'
op|','
nl|'\n'
string|"'ip'"
op|':'
name|'self'
op|'.'
name|'ip'
op|','
nl|'\n'
string|"'name'"
op|':'
name|'self'
op|'.'
name|'name'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ip-dns-entry-list-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FloatingIpDNSXmlTest
dedent|''
dedent|''
name|'class'
name|'FloatingIpDNSXmlTest'
op|'('
name|'FloatingIpDNSJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|InstanceActionsSampleJsonTest
dedent|''
name|'class'
name|'InstanceActionsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|"'nova.api.openstack.compute.contrib.instance_actions.'"
nl|'\n'
string|"'Instance_actions'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'InstanceActionsSampleJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'actions'
op|'='
name|'fake_instance_actions'
op|'.'
name|'FAKE_ACTIONS'
newline|'\n'
name|'self'
op|'.'
name|'events'
op|'='
name|'fake_instance_actions'
op|'.'
name|'FAKE_EVENTS'
newline|'\n'
name|'self'
op|'.'
name|'instance'
op|'='
name|'test_utils'
op|'.'
name|'get_test_instance'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake_instance_action_get_by_request_id
name|'def'
name|'fake_instance_action_get_by_request_id'
op|'('
name|'context'
op|','
name|'uuid'
op|','
name|'request_id'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'copy'
op|'.'
name|'deepcopy'
op|'('
name|'self'
op|'.'
name|'actions'
op|'['
name|'uuid'
op|']'
op|'['
name|'request_id'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake_instance_actions_get
dedent|''
name|'def'
name|'fake_instance_actions_get'
op|'('
name|'context'
op|','
name|'uuid'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
op|'['
name|'copy'
op|'.'
name|'deepcopy'
op|'('
name|'value'
op|')'
name|'for'
name|'value'
name|'in'
nl|'\n'
name|'self'
op|'.'
name|'actions'
op|'['
name|'uuid'
op|']'
op|'.'
name|'itervalues'
op|'('
op|')'
op|']'
newline|'\n'
nl|'\n'
DECL|function|fake_instance_action_events_get
dedent|''
name|'def'
name|'fake_instance_action_events_get'
op|'('
name|'context'
op|','
name|'action_id'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'copy'
op|'.'
name|'deepcopy'
op|'('
name|'self'
op|'.'
name|'events'
op|'['
name|'action_id'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake_instance_get_by_uuid
dedent|''
name|'def'
name|'fake_instance_get_by_uuid'
op|'('
name|'context'
op|','
name|'instance_id'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'instance'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|"'action_get_by_request_id'"
op|','
nl|'\n'
name|'fake_instance_action_get_by_request_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|"'actions_get'"
op|','
name|'fake_instance_actions_get'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|"'action_events_get'"
op|','
nl|'\n'
name|'fake_instance_action_events_get'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|"'instance_get_by_uuid'"
op|','
name|'fake_instance_get_by_uuid'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_instance_action_get
dedent|''
name|'def'
name|'test_instance_action_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_uuid'
op|'='
name|'fake_instance_actions'
op|'.'
name|'FAKE_UUID'
newline|'\n'
name|'fake_request_id'
op|'='
name|'fake_instance_actions'
op|'.'
name|'FAKE_REQUEST_ID1'
newline|'\n'
name|'fake_action'
op|'='
name|'self'
op|'.'
name|'actions'
op|'['
name|'fake_uuid'
op|']'
op|'['
name|'fake_request_id'
op|']'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/os-instance-actions/%s'"
op|'%'
nl|'\n'
op|'('
name|'fake_uuid'
op|','
name|'fake_request_id'
op|')'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'action'"
op|']'
op|'='
string|"'(reboot)|(resize)'"
newline|'\n'
name|'subs'
op|'['
string|"'instance_uuid'"
op|']'
op|'='
name|'fake_uuid'
newline|'\n'
name|'subs'
op|'['
string|"'integer_id'"
op|']'
op|'='
string|"'[0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'request_id'"
op|']'
op|'='
name|'fake_action'
op|'['
string|"'request_id'"
op|']'
newline|'\n'
name|'subs'
op|'['
string|"'start_time'"
op|']'
op|'='
name|'fake_action'
op|'['
string|"'start_time'"
op|']'
newline|'\n'
name|'subs'
op|'['
string|"'result'"
op|']'
op|'='
string|"'(Success)|(Error)'"
newline|'\n'
name|'subs'
op|'['
string|"'event'"
op|']'
op|'='
string|"'(schedule)|(compute_create)'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'instance-action-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_instance_actions_list
dedent|''
name|'def'
name|'test_instance_actions_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_uuid'
op|'='
name|'fake_instance_actions'
op|'.'
name|'FAKE_UUID'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/os-instance-actions'"
op|'%'
op|'('
name|'fake_uuid'
op|')'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'action'"
op|']'
op|'='
string|"'(reboot)|(resize)'"
newline|'\n'
name|'subs'
op|'['
string|"'integer_id'"
op|']'
op|'='
string|"'[0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'request_id'"
op|']'
op|'='
op|'('
string|"'req-[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}'"
nl|'\n'
string|"'-[0-9a-f]{4}-[0-9a-f]{12}'"
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'instance-actions-list-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|InstanceActionsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'InstanceActionsSampleXmlTest'
op|'('
name|'InstanceActionsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'        '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ImageSizeSampleJsonTests
dedent|''
name|'class'
name|'ImageSizeSampleJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".image_size.Image_size"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_show
name|'def'
name|'test_show'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of one single image details request.'
nl|'\n'
indent|'        '
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s'"
op|'%'
name|'image_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'image_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_detail
dedent|''
name|'def'
name|'test_detail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Get api sample of all images details request.'
nl|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/detail'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'images-details-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ImageSizeSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'ImageSizeSampleXmlTests'
op|'('
name|'ImageSizeSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'        '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ConfigDriveSampleJsonTest
dedent|''
name|'class'
name|'ConfigDriveSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.config_drive."'
nl|'\n'
string|'"Config_drive"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'ConfigDriveSampleJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'fakes'
op|'.'
name|'stub_out_networking'
op|'('
name|'self'
op|'.'
name|'stubs'
op|')'
newline|'\n'
name|'fakes'
op|'.'
name|'stub_out_rate_limiting'
op|'('
name|'self'
op|'.'
name|'stubs'
op|')'
newline|'\n'
name|'fake'
op|'.'
name|'stub_out_image_service'
op|'('
name|'self'
op|'.'
name|'stubs'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_config_drive_show
dedent|''
name|'def'
name|'test_config_drive_show'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
comment|'# config drive can be an uuid or empty value'
nl|'\n'
name|'subs'
op|'['
string|"'cdrive'"
op|']'
op|'='
string|"'(%s)?'"
op|'%'
name|'subs'
op|'['
string|"'uuid'"
op|']'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-config-drive-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_config_drive_detail
dedent|''
name|'def'
name|'test_config_drive_detail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
comment|'# config drive can be an uuid or empty value'
nl|'\n'
name|'subs'
op|'['
string|"'cdrive'"
op|']'
op|'='
string|"'(%s)?'"
op|'%'
name|'subs'
op|'['
string|"'uuid'"
op|']'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-config-drive-details-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ConfigDriveSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ConfigDriveSampleXmlTest'
op|'('
name|'ConfigDriveSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorAccessSampleJsonTests
dedent|''
name|'class'
name|'FlavorAccessSampleJsonTests'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.flavor_access."'
nl|'\n'
string|'"Flavor_access"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_flags
name|'def'
name|'_get_flags'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'f'
op|'='
name|'super'
op|'('
name|'FlavorAccessSampleJsonTests'
op|','
name|'self'
op|')'
op|'.'
name|'_get_flags'
op|'('
op|')'
newline|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'='
name|'CONF'
op|'.'
name|'osapi_compute_extension'
op|'['
op|':'
op|']'
newline|'\n'
comment|'# FlavorAccess extension also needs Flavormanage to be loaded.'
nl|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
string|"'nova.api.openstack.compute.contrib.flavormanage.Flavormanage'"
op|')'
newline|'\n'
name|'return'
name|'f'
newline|'\n'
nl|'\n'
DECL|member|_add_tenant
dedent|''
name|'def'
name|'_add_tenant'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'tenant_id'"
op|':'
string|"'fake_tenant'"
op|','
nl|'\n'
string|"'flavor_id'"
op|':'
number|'10'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'flavors/10/action'"
op|','
nl|'\n'
string|"'flavor-access-add-tenant-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-access-add-tenant-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_create_flavor
dedent|''
name|'def'
name|'_create_flavor'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'flavor_id'"
op|':'
number|'10'
op|','
nl|'\n'
string|"'flavor_name'"
op|':'
string|"'test_flavor'"
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|'"flavors"'
op|','
nl|'\n'
string|'"flavor-access-create-req"'
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|'"flavor-access-create-resp"'
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_access_create
dedent|''
name|'def'
name|'test_flavor_access_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_flavor'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_access_detail
dedent|''
name|'def'
name|'test_flavor_access_detail'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-access-detail-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_access_list
dedent|''
name|'def'
name|'test_flavor_access_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_flavor'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_add_tenant'
op|'('
op|')'
newline|'\n'
name|'flavor_id'
op|'='
number|'10'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/%s/os-flavor-access'"
op|'%'
name|'flavor_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'flavor_id'"
op|':'
name|'flavor_id'
op|','
nl|'\n'
string|"'tenant_id'"
op|':'
string|"'fake_tenant'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-access-list-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_access_show
dedent|''
name|'def'
name|'test_flavor_access_show'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'flavor_id'
op|'='
number|'1'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/%s'"
op|'%'
name|'flavor_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'flavor_id'"
op|':'
name|'flavor_id'
nl|'\n'
op|'}'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-access-show-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_access_add_tenant
dedent|''
name|'def'
name|'test_flavor_access_add_tenant'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_flavor'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_add_tenant'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavor_access_remove_tenant
dedent|''
name|'def'
name|'test_flavor_access_remove_tenant'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_create_flavor'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_add_tenant'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'tenant_id'"
op|':'
string|"'fake_tenant'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'flavors/10/action'"
op|','
nl|'\n'
string|'"flavor-access-remove-tenant-req"'
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-access-remove-tenant-resp'"
op|','
nl|'\n'
op|'{'
op|'}'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorAccessSampleXmlTests
dedent|''
dedent|''
name|'class'
name|'FlavorAccessSampleXmlTests'
op|'('
name|'FlavorAccessSampleJsonTests'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
dedent|''
endmarker|''
end_unit
