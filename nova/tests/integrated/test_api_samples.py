begin_unit
comment|'# vim: tabstop=4 shiftwidth=4 softtabstop=4'
nl|'\n'
comment|'# Copyright 2012 Nebula, Inc.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
name|'import'
name|'base64'
newline|'\n'
name|'import'
name|'datetime'
newline|'\n'
name|'import'
name|'os'
newline|'\n'
name|'import'
name|'re'
newline|'\n'
name|'import'
name|'urllib'
newline|'\n'
name|'import'
name|'uuid'
newline|'\n'
nl|'\n'
name|'from'
name|'lxml'
name|'import'
name|'etree'
newline|'\n'
nl|'\n'
name|'from'
name|'nova'
op|'.'
name|'cloudpipe'
op|'.'
name|'pipelib'
name|'import'
name|'CloudPipe'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'compute'
name|'import'
name|'api'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'context'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'db'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'flags'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'network'
op|'.'
name|'manager'
name|'import'
name|'NetworkManager'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'importutils'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'jsonutils'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
op|'.'
name|'log'
name|'import'
name|'logging'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'timeutils'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'scheduler'
name|'import'
name|'driver'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'test'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
name|'import'
name|'fake_network'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'image'
name|'import'
name|'fake'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
op|'.'
name|'integrated'
name|'import'
name|'integrated_helpers'
newline|'\n'
nl|'\n'
DECL|variable|FLAGS
name|'FLAGS'
op|'='
name|'flags'
op|'.'
name|'FLAGS'
newline|'\n'
DECL|variable|LOG
name|'LOG'
op|'='
name|'logging'
op|'.'
name|'getLogger'
op|'('
name|'__name__'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|NoMatch
name|'class'
name|'NoMatch'
op|'('
name|'test'
op|'.'
name|'TestingException'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'pass'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ApiSampleTestBase
dedent|''
name|'class'
name|'ApiSampleTestBase'
op|'('
name|'integrated_helpers'
op|'.'
name|'_IntegratedTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'json'"
newline|'\n'
DECL|variable|all_extensions
name|'all_extensions'
op|'='
name|'False'
newline|'\n'
DECL|variable|extension_name
name|'extension_name'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'flags'
op|'('
name|'use_ipv6'
op|'='
name|'False'
op|','
nl|'\n'
name|'osapi_compute_link_prefix'
op|'='
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
name|'osapi_glance_link_prefix'
op|'='
name|'self'
op|'.'
name|'_get_glance_host'
op|'('
op|')'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'self'
op|'.'
name|'all_extensions'
op|':'
newline|'\n'
indent|'            '
name|'ext'
op|'='
op|'['
name|'self'
op|'.'
name|'extension_name'
op|']'
name|'if'
name|'self'
op|'.'
name|'extension_name'
name|'else'
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'flags'
op|'('
name|'osapi_compute_extension'
op|'='
name|'ext'
op|')'
newline|'\n'
dedent|''
name|'super'
op|'('
name|'ApiSampleTestBase'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'fake_network'
op|'.'
name|'stub_compute_with_ips'
op|'('
name|'self'
op|'.'
name|'stubs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'generate_samples'
op|'='
name|'os'
op|'.'
name|'getenv'
op|'('
string|"'GENERATE_SAMPLES'"
op|')'
name|'is'
name|'not'
name|'None'
newline|'\n'
nl|'\n'
DECL|member|_pretty_data
dedent|''
name|'def'
name|'_pretty_data'
op|'('
name|'self'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'self'
op|'.'
name|'ctype'
op|'=='
string|"'json'"
op|':'
newline|'\n'
indent|'            '
name|'data'
op|'='
name|'jsonutils'
op|'.'
name|'dumps'
op|'('
name|'jsonutils'
op|'.'
name|'loads'
op|'('
name|'data'
op|')'
op|','
name|'sort_keys'
op|'='
name|'True'
op|','
nl|'\n'
name|'indent'
op|'='
number|'4'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'xml'
op|'='
name|'etree'
op|'.'
name|'XML'
op|'('
name|'data'
op|')'
newline|'\n'
name|'data'
op|'='
name|'etree'
op|'.'
name|'tostring'
op|'('
name|'xml'
op|','
name|'encoding'
op|'='
string|'"UTF-8"'
op|','
nl|'\n'
name|'xml_declaration'
op|'='
name|'True'
op|','
name|'pretty_print'
op|'='
name|'True'
op|')'
newline|'\n'
dedent|''
name|'return'
string|"'\\n'"
op|'.'
name|'join'
op|'('
name|'line'
op|'.'
name|'rstrip'
op|'('
op|')'
name|'for'
name|'line'
name|'in'
name|'data'
op|'.'
name|'split'
op|'('
string|"'\\n'"
op|')'
op|')'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_objectify
dedent|''
name|'def'
name|'_objectify'
op|'('
name|'self'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'not'
name|'data'
op|':'
newline|'\n'
indent|'            '
name|'return'
op|'{'
op|'}'
newline|'\n'
dedent|''
name|'if'
name|'self'
op|'.'
name|'ctype'
op|'=='
string|"'json'"
op|':'
newline|'\n'
comment|'# NOTE(vish): allow non-quoted replacements to survive json'
nl|'\n'
indent|'            '
name|'data'
op|'='
name|'re'
op|'.'
name|'sub'
op|'('
string|'r\'([^"])%\\((.+)\\)s([^"])\''
op|','
string|'r\'\\1"%(int:\\2)s"\\3\''
op|','
name|'data'
op|')'
newline|'\n'
name|'return'
name|'jsonutils'
op|'.'
name|'loads'
op|'('
name|'data'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
DECL|function|to_dict
indent|'            '
name|'def'
name|'to_dict'
op|'('
name|'node'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'ret'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'if'
name|'node'
op|'.'
name|'items'
op|'('
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'.'
name|'update'
op|'('
name|'dict'
op|'('
name|'node'
op|'.'
name|'items'
op|'('
op|')'
op|')'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'text'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'['
string|"'__content__'"
op|']'
op|'='
name|'node'
op|'.'
name|'text'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'tag'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'['
string|"'__tag__'"
op|']'
op|'='
name|'node'
op|'.'
name|'tag'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'nsmap'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'['
string|"'__nsmap__'"
op|']'
op|'='
name|'node'
op|'.'
name|'nsmap'
newline|'\n'
dedent|''
name|'for'
name|'element'
name|'in'
name|'node'
op|':'
newline|'\n'
indent|'                    '
name|'ret'
op|'.'
name|'setdefault'
op|'('
name|'node'
op|'.'
name|'tag'
op|','
op|'['
op|']'
op|')'
newline|'\n'
name|'ret'
op|'['
name|'node'
op|'.'
name|'tag'
op|']'
op|'.'
name|'append'
op|'('
name|'to_dict'
op|'('
name|'element'
op|')'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'ret'
newline|'\n'
dedent|''
name|'return'
name|'to_dict'
op|'('
name|'etree'
op|'.'
name|'fromstring'
op|'('
name|'data'
op|')'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
op|'@'
name|'classmethod'
newline|'\n'
DECL|member|_get_sample_path
name|'def'
name|'_get_sample_path'
op|'('
name|'cls'
op|','
name|'name'
op|','
name|'dirname'
op|','
name|'suffix'
op|'='
string|"''"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'parts'
op|'='
op|'['
name|'dirname'
op|']'
newline|'\n'
name|'parts'
op|'.'
name|'append'
op|'('
string|"'api_samples'"
op|')'
newline|'\n'
name|'if'
name|'cls'
op|'.'
name|'all_extensions'
op|':'
newline|'\n'
indent|'            '
name|'parts'
op|'.'
name|'append'
op|'('
string|"'all_extensions'"
op|')'
newline|'\n'
dedent|''
name|'if'
name|'cls'
op|'.'
name|'extension_name'
op|':'
newline|'\n'
indent|'            '
name|'alias'
op|'='
name|'importutils'
op|'.'
name|'import_class'
op|'('
name|'cls'
op|'.'
name|'extension_name'
op|')'
op|'.'
name|'alias'
newline|'\n'
name|'parts'
op|'.'
name|'append'
op|'('
name|'alias'
op|')'
newline|'\n'
dedent|''
name|'parts'
op|'.'
name|'append'
op|'('
name|'name'
op|'+'
string|'"."'
op|'+'
name|'cls'
op|'.'
name|'ctype'
op|'+'
name|'suffix'
op|')'
newline|'\n'
name|'return'
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
op|'*'
name|'parts'
op|')'
newline|'\n'
nl|'\n'
dedent|''
op|'@'
name|'classmethod'
newline|'\n'
DECL|member|_get_sample
name|'def'
name|'_get_sample'
op|'('
name|'cls'
op|','
name|'name'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'dirname'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'abspath'
op|'('
name|'__file__'
op|')'
op|')'
newline|'\n'
name|'dirname'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'dirname'
op|','
string|'"../../../doc"'
op|')'
newline|'\n'
name|'return'
name|'cls'
op|'.'
name|'_get_sample_path'
op|'('
name|'name'
op|','
name|'dirname'
op|')'
newline|'\n'
nl|'\n'
dedent|''
op|'@'
name|'classmethod'
newline|'\n'
DECL|member|_get_template
name|'def'
name|'_get_template'
op|'('
name|'cls'
op|','
name|'name'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'dirname'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'abspath'
op|'('
name|'__file__'
op|')'
op|')'
newline|'\n'
name|'return'
name|'cls'
op|'.'
name|'_get_sample_path'
op|'('
name|'name'
op|','
name|'dirname'
op|','
name|'suffix'
op|'='
string|"'.tpl'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_read_template
dedent|''
name|'def'
name|'_read_template'
op|'('
name|'self'
op|','
name|'name'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'template'
op|'='
name|'self'
op|'.'
name|'_get_template'
op|'('
name|'name'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'generate_samples'
name|'and'
name|'not'
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'template'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'with'
name|'open'
op|'('
name|'template'
op|','
string|"'w'"
op|')'
name|'as'
name|'outf'
op|':'
newline|'\n'
indent|'                '
name|'pass'
newline|'\n'
dedent|''
dedent|''
name|'with'
name|'open'
op|'('
name|'template'
op|')'
name|'as'
name|'inf'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'inf'
op|'.'
name|'read'
op|'('
op|')'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_write_sample
dedent|''
dedent|''
name|'def'
name|'_write_sample'
op|'('
name|'self'
op|','
name|'name'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'with'
name|'open'
op|'('
name|'self'
op|'.'
name|'_get_sample'
op|'('
name|'name'
op|')'
op|','
string|"'w'"
op|')'
name|'as'
name|'outf'
op|':'
newline|'\n'
indent|'            '
name|'outf'
op|'.'
name|'write'
op|'('
name|'data'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_compare_result
dedent|''
dedent|''
name|'def'
name|'_compare_result'
op|'('
name|'self'
op|','
name|'subs'
op|','
name|'expected'
op|','
name|'result'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'matched_value'
op|'='
name|'None'
newline|'\n'
name|'if'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'dict'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'result'
op|','
name|'dict'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
nl|'\n'
name|'_'
op|'('
string|"'Result: %(result)s is not a dict.'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'ex_keys'
op|'='
name|'sorted'
op|'('
name|'expected'
op|'.'
name|'keys'
op|'('
op|')'
op|')'
newline|'\n'
name|'res_keys'
op|'='
name|'sorted'
op|'('
name|'result'
op|'.'
name|'keys'
op|'('
op|')'
op|')'
newline|'\n'
name|'if'
name|'ex_keys'
op|'!='
name|'res_keys'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
name|'_'
op|'('
string|"'Key mismatch:\\n'"
nl|'\n'
string|"'%(ex_keys)s\\n%(res_keys)s'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'key'
name|'in'
name|'ex_keys'
op|':'
newline|'\n'
indent|'                '
name|'res'
op|'='
name|'self'
op|'.'
name|'_compare_result'
op|'('
name|'subs'
op|','
name|'expected'
op|'['
name|'key'
op|']'
op|','
name|'result'
op|'['
name|'key'
op|']'
op|')'
newline|'\n'
name|'matched_value'
op|'='
name|'res'
name|'or'
name|'matched_value'
newline|'\n'
dedent|''
dedent|''
name|'elif'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'list'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'result'
op|','
name|'list'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
nl|'\n'
name|'_'
op|'('
string|"'Result: %(result)s is not a list.'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'len'
op|'('
name|'expected'
op|')'
op|'!='
name|'len'
op|'('
name|'result'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
nl|'\n'
name|'_'
op|'('
string|"'Length mismatch: %(result)s\\n%(expected)s.'"
op|')'
nl|'\n'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'res_obj'
name|'in'
name|'result'
op|':'
newline|'\n'
indent|'                '
name|'for'
name|'ex_obj'
name|'in'
name|'expected'
op|':'
newline|'\n'
indent|'                    '
name|'try'
op|':'
newline|'\n'
indent|'                        '
name|'res'
op|'='
name|'self'
op|'.'
name|'_compare_result'
op|'('
name|'subs'
op|','
name|'ex_obj'
op|','
name|'res_obj'
op|')'
newline|'\n'
name|'break'
newline|'\n'
dedent|''
name|'except'
name|'NoMatch'
op|':'
newline|'\n'
indent|'                        '
name|'pass'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'raise'
name|'NoMatch'
op|'('
nl|'\n'
name|'_'
op|'('
string|"'Result: %(res_obj)s not in %(expected)s.'"
op|')'
nl|'\n'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'matched_value'
op|'='
name|'res'
name|'or'
name|'matched_value'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'elif'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'basestring'
op|')'
name|'and'
string|"'%'"
name|'in'
name|'expected'
op|':'
newline|'\n'
comment|'# NOTE(vish): escape stuff for regex'
nl|'\n'
indent|'            '
name|'for'
name|'char'
name|'in'
string|"'[]<>?'"
op|':'
newline|'\n'
indent|'                '
name|'expected'
op|'='
name|'expected'
op|'.'
name|'replace'
op|'('
name|'char'
op|','
string|"'\\\\%s'"
op|'%'
name|'char'
op|')'
newline|'\n'
comment|'# NOTE(vish): special handling of subs that are not quoted. We are'
nl|'\n'
comment|'#             expecting an int but we had to pass in a string'
nl|'\n'
comment|'#             so the json would parse properly.'
nl|'\n'
dedent|''
name|'if'
name|'expected'
op|'.'
name|'startswith'
op|'('
string|'"%(int:"'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'result'
op|'='
name|'str'
op|'('
name|'result'
op|')'
newline|'\n'
name|'expected'
op|'='
name|'expected'
op|'.'
name|'replace'
op|'('
string|"'int:'"
op|','
string|"''"
op|')'
newline|'\n'
dedent|''
name|'expected'
op|'='
name|'expected'
op|'%'
name|'subs'
newline|'\n'
name|'expected'
op|'='
string|"'^%s$'"
op|'%'
name|'expected'
newline|'\n'
name|'match'
op|'='
name|'re'
op|'.'
name|'match'
op|'('
name|'expected'
op|','
name|'result'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'match'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
name|'_'
op|'('
string|"'Values do not match:\\n'"
nl|'\n'
string|"'%(expected)s\\n%(result)s'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'try'
op|':'
newline|'\n'
indent|'                '
name|'matched_value'
op|'='
name|'match'
op|'.'
name|'group'
op|'('
string|"'id'"
op|')'
newline|'\n'
dedent|''
name|'except'
name|'IndexError'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'match'
op|'.'
name|'groups'
op|'('
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'matched_value'
op|'='
name|'match'
op|'.'
name|'groups'
op|'('
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'isinstance'
op|'('
name|'expected'
op|','
name|'basestring'
op|')'
op|':'
newline|'\n'
comment|'# NOTE(danms): Ignore whitespace in this comparison'
nl|'\n'
indent|'                '
name|'expected'
op|'='
name|'expected'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
name|'result'
op|'='
name|'result'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
dedent|''
name|'if'
name|'expected'
op|'!='
name|'result'
op|':'
newline|'\n'
indent|'                '
name|'raise'
name|'NoMatch'
op|'('
name|'_'
op|'('
string|"'Values do not match:\\n'"
nl|'\n'
string|"'%(expected)s\\n%(result)s'"
op|')'
op|'%'
name|'locals'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'return'
name|'matched_value'
newline|'\n'
nl|'\n'
DECL|member|_verify_response
dedent|''
name|'def'
name|'_verify_response'
op|'('
name|'self'
op|','
name|'name'
op|','
name|'subs'
op|','
name|'response'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'expected'
op|'='
name|'self'
op|'.'
name|'_read_template'
op|'('
name|'name'
op|')'
newline|'\n'
name|'expected'
op|'='
name|'self'
op|'.'
name|'_objectify'
op|'('
name|'expected'
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'_pretty_data'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'generate_samples'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_write_sample'
op|'('
name|'name'
op|','
name|'result'
op|')'
newline|'\n'
dedent|''
name|'result'
op|'='
name|'self'
op|'.'
name|'_objectify'
op|'('
name|'result'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_compare_result'
op|'('
name|'subs'
op|','
name|'expected'
op|','
name|'result'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_host
dedent|''
name|'def'
name|'_get_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'http://openstack.example.com'"
newline|'\n'
nl|'\n'
DECL|member|_get_glance_host
dedent|''
name|'def'
name|'_get_glance_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'http://glance.openstack.example.com'"
newline|'\n'
nl|'\n'
DECL|member|_get_regexes
dedent|''
name|'def'
name|'_get_regexes'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'self'
op|'.'
name|'ctype'
op|'=='
string|"'json'"
op|':'
newline|'\n'
indent|'            '
name|'text'
op|'='
string|'r\'(\\\\"|[^"])*\''
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'text'
op|'='
string|"r'[^<]*'"
newline|'\n'
dedent|''
name|'return'
op|'{'
nl|'\n'
comment|'# NOTE(treinish): Could result in a false positive, but it'
nl|'\n'
comment|"# shouldn't be an issue for this case."
nl|'\n'
string|"'timestamp'"
op|':'
string|"'\\d{4}-[0,1]\\d-[0-3]\\d[ ,T]'"
nl|'\n'
string|"'\\d{2}:\\d{2}:\\d{2}'"
nl|'\n'
string|"'(Z|(\\+|-)\\d{2}:\\d{2}|\\.\\d{6})'"
op|','
nl|'\n'
string|"'password'"
op|':'
string|"'[0-9a-zA-Z]{1,12}'"
op|','
nl|'\n'
string|"'ip'"
op|':'
string|"'[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}'"
op|','
nl|'\n'
string|"'ip6'"
op|':'
string|"'([0-9a-zA-Z]{1,4}:){1,7}:?[0-9a-zA-Z]{1,4}'"
op|','
nl|'\n'
string|"'id'"
op|':'
string|"'(?P<id>[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}'"
nl|'\n'
string|"'-[0-9a-f]{4}-[0-9a-f]{12})'"
op|','
nl|'\n'
string|"'uuid'"
op|':'
string|"'[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}'"
nl|'\n'
string|"'-[0-9a-f]{4}-[0-9a-f]{12}'"
op|','
nl|'\n'
string|"'reservation_id'"
op|':'
string|"'r-[0-9a-zA-Z]{8}'"
op|','
nl|'\n'
string|"'private_key'"
op|':'
string|"'-----BEGIN RSA PRIVATE KEY-----'"
nl|'\n'
string|"'[a-zA-Z0-9\\n/+=]*'"
nl|'\n'
string|"'-----END RSA PRIVATE KEY-----'"
op|','
nl|'\n'
string|"'public_key'"
op|':'
string|"'ssh-rsa[ a-zA-Z0-9/+=]*'"
nl|'\n'
string|"'Generated by Nova'"
op|','
nl|'\n'
string|"'fingerprint'"
op|':'
string|"'([0-9a-f]{2}:){15}[0-9a-f]{2}'"
op|','
nl|'\n'
comment|"#            '[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:'"
nl|'\n'
comment|"#                           '[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:'"
nl|'\n'
comment|"#                           '[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:'"
nl|'\n'
comment|"#                           '[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}:[0-9a-f]{2}',"
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'glance_host'"
op|':'
name|'self'
op|'.'
name|'_get_glance_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'compute_host'"
op|':'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|','
nl|'\n'
string|"'text'"
op|':'
name|'text'
op|','
nl|'\n'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|_get_response
dedent|''
name|'def'
name|'_get_response'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'method'
op|','
name|'body'
op|'='
name|'None'
op|','
name|'strip_version'
op|'='
name|'False'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'headers'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'headers'
op|'['
string|"'Content-Type'"
op|']'
op|'='
string|"'application/'"
op|'+'
name|'self'
op|'.'
name|'ctype'
newline|'\n'
name|'headers'
op|'['
string|"'Accept'"
op|']'
op|'='
string|"'application/'"
op|'+'
name|'self'
op|'.'
name|'ctype'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'api'
op|'.'
name|'api_request'
op|'('
name|'url'
op|','
name|'body'
op|'='
name|'body'
op|','
name|'method'
op|'='
name|'method'
op|','
nl|'\n'
name|'headers'
op|'='
name|'headers'
op|','
name|'strip_version'
op|'='
name|'strip_version'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_get
dedent|''
name|'def'
name|'_do_get'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'strip_version'
op|'='
name|'False'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_get_response'
op|'('
name|'url'
op|','
string|"'GET'"
op|','
name|'strip_version'
op|'='
name|'strip_version'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_post
dedent|''
name|'def'
name|'_do_post'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'name'
op|','
name|'subs'
op|','
name|'method'
op|'='
string|"'POST'"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'body'
op|'='
name|'self'
op|'.'
name|'_read_template'
op|'('
name|'name'
op|')'
op|'%'
name|'subs'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'generate_samples'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_write_sample'
op|'('
name|'name'
op|','
name|'body'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'self'
op|'.'
name|'_get_response'
op|'('
name|'url'
op|','
name|'method'
op|','
name|'body'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_put
dedent|''
name|'def'
name|'_do_put'
op|'('
name|'self'
op|','
name|'url'
op|','
name|'name'
op|','
name|'subs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_do_post'
op|'('
name|'url'
op|','
name|'name'
op|','
name|'subs'
op|','
name|'method'
op|'='
string|"'PUT'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_do_delete
dedent|''
name|'def'
name|'_do_delete'
op|'('
name|'self'
op|','
name|'url'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_get_response'
op|'('
name|'url'
op|','
string|"'DELETE'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VersionsSampleJsonTest
dedent|''
dedent|''
name|'class'
name|'VersionsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_versions_get
indent|'    '
name|'def'
name|'test_versions_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"''"
op|','
name|'strip_version'
op|'='
name|'True'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'versions-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VersionsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'VersionsSampleXmlTest'
op|'('
name|'VersionsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleBase
dedent|''
name|'class'
name|'ServersSampleBase'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|_post_server
indent|'    '
name|'def'
name|'_post_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'server-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleJsonTest
dedent|''
dedent|''
name|'class'
name|'ServersSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_servers_post
indent|'    '
name|'def'
name|'test_servers_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_servers_get
dedent|''
name|'def'
name|'test_servers_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'test_servers_post'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'hypervisor_hostname'"
op|']'
op|'='
string|"r'[\\w\\.\\-]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_servers_list
dedent|''
name|'def'
name|'test_servers_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_servers_details
dedent|''
name|'def'
name|'test_servers_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'hypervisor_hostname'"
op|']'
op|'='
string|"r'[\\w\\.\\-]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'servers-details-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersSampleXmlTest'
op|'('
name|'ServersSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleAllExtensionJsonTest
dedent|''
name|'class'
name|'ServersSampleAllExtensionJsonTest'
op|'('
name|'ServersSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersSampleAllExtensionXmlTest
dedent|''
name|'class'
name|'ServersSampleAllExtensionXmlTest'
op|'('
name|'ServersSampleXmlTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersMetadataJsonTest
dedent|''
name|'class'
name|'ServersMetadataJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|_create_and_set
indent|'    '
name|'def'
name|'_create_and_set'
op|'('
name|'self'
op|','
name|'subs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'servers/%s/metadata'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-metadata-all-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-all-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
name|'return'
name|'uuid'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_put_all
dedent|''
name|'def'
name|'test_metadata_put_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test setting all metadata for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_post_all
dedent|''
name|'def'
name|'test_metadata_post_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test updating all metadata for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'value'"
op|']'
op|'='
string|"'Bar Value'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/metadata'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-metadata-all-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-all-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_get_all
dedent|''
name|'def'
name|'test_metadata_get_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test getting all metadata for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/metadata'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-all-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_put
dedent|''
name|'def'
name|'test_metadata_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test putting an individual metadata item for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'value'"
op|']'
op|'='
string|"'Bar Value'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'servers/%s/metadata/foo'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-metadata-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_get
dedent|''
name|'def'
name|'test_metadata_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test getting an individual metadata item for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/metadata/foo'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-metadata-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_metadata_delete
dedent|''
name|'def'
name|'test_metadata_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test deleting an individual metadata item for a server"""'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'value'"
op|':'
string|"'Foo Value'"
op|'}'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_create_and_set'
op|'('
name|'subs'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'servers/%s/metadata/foo'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'204'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|"''"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersMetadataXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersMetadataXmlTest'
op|'('
name|'ServersMetadataJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersIpsJsonTest
dedent|''
name|'class'
name|'ServersIpsJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_get
indent|'    '
name|'def'
name|'test_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test getting a server\'s IP information"""'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/ips'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-ips-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_by_network
dedent|''
name|'def'
name|'test_get_by_network'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Test getting a server\'s IP information by network id"""'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/ips/private'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-ips-network-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersIpsXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersIpsXmlTest'
op|'('
name|'ServersIpsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtensionsSampleJsonTest
dedent|''
name|'class'
name|'ExtensionsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
DECL|member|test_extensions_get
name|'def'
name|'test_extensions_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'extensions'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'extensions-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtensionsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ExtensionsSampleXmlTest'
op|'('
name|'ExtensionsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleJsonTest
dedent|''
name|'class'
name|'FlavorsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_get
indent|'    '
name|'def'
name|'test_flavors_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/1'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavor-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_list
dedent|''
name|'def'
name|'test_flavors_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'FlavorsSampleXmlTest'
op|'('
name|'FlavorsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleAllExtensionJsonTest
dedent|''
name|'class'
name|'FlavorsSampleAllExtensionJsonTest'
op|'('
name|'FlavorsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsSampleAllExtensionXmlTest
dedent|''
name|'class'
name|'FlavorsSampleAllExtensionXmlTest'
op|'('
name|'FlavorsSampleXmlTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ImagesSampleJsonTest
dedent|''
name|'class'
name|'ImagesSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_images_list
indent|'    '
name|'def'
name|'test_images_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of images get list request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'images-list-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_get
dedent|''
name|'def'
name|'test_image_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of one single image details request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s'"
op|'%'
name|'image_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'image_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_images_details
dedent|''
name|'def'
name|'test_images_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of all images details request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/detail'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'images-details-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_metadata_get
dedent|''
name|'def'
name|'test_image_metadata_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of a image metadata request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s/metadata'"
op|'%'
name|'image_id'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'image_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-metadata-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_metadata_post
dedent|''
name|'def'
name|'test_image_metadata_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample to update metadata of an image metadata request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
nl|'\n'
string|"'images/%s/metadata'"
op|'%'
name|'image_id'
op|','
nl|'\n'
string|"'image-metadata-post-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-metadata-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_metadata_put
dedent|''
name|'def'
name|'test_image_metadata_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of image metadata put request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'images/%s/metadata'"
op|'%'
name|'image_id'
op|','
nl|'\n'
string|"'image-metadata-put-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-metadata-put-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_meta_key_get
dedent|''
name|'def'
name|'test_image_meta_key_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of a image metadata key request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'key'
op|'='
string|'"kernel_id"'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'images/%s/metadata/%s'"
op|'%'
op|'('
name|'image_id'
op|','
name|'key'
op|')'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-meta-key-get'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_image_meta_key_put
dedent|''
name|'def'
name|'test_image_meta_key_put'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of image metadata key put request"""'
newline|'\n'
name|'image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'key'
op|'='
string|'"auto_disk_config"'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'images/%s/metadata/%s'"
op|'%'
op|'('
name|'image_id'
op|','
name|'key'
op|')'
op|','
nl|'\n'
string|"'image-meta-key-put-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'image-meta-key-put-resp'"
op|','
nl|'\n'
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ImagesSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ImagesSampleXmlTest'
op|'('
name|'ImagesSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|LimitsSampleJsonTest
dedent|''
name|'class'
name|'LimitsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|member|test_limits_get
indent|'    '
name|'def'
name|'test_limits_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'limits'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'limit-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|LimitsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'LimitsSampleXmlTest'
op|'('
name|'LimitsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersActionsJsonTest
dedent|''
name|'class'
name|'ServersActionsJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|member|_test_server_action
indent|'    '
name|'def'
name|'_test_server_action'
op|'('
name|'self'
op|','
name|'uuid'
op|','
name|'action'
op|','
nl|'\n'
name|'subs'
op|'='
op|'{'
op|'}'
op|','
name|'resp_tpl'
op|'='
name|'None'
op|','
name|'code'
op|'='
number|'202'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'.'
name|'update'
op|'('
op|'{'
string|"'action'"
op|':'
name|'action'
op|'}'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-action-%s'"
op|'%'
name|'action'
op|'.'
name|'lower'
op|'('
op|')'
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
name|'code'
op|')'
newline|'\n'
name|'if'
name|'resp_tpl'
op|':'
newline|'\n'
indent|'            '
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
name|'resp_tpl'
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|'""'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_password
dedent|''
dedent|''
name|'def'
name|'test_server_password'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"changePassword"'
op|','
nl|'\n'
op|'{'
string|'"password"'
op|':'
string|'"foo"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_reboot
dedent|''
name|'def'
name|'test_server_reboot'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"reboot"'
op|','
nl|'\n'
op|'{'
string|'"type"'
op|':'
string|'"HARD"'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"reboot"'
op|','
nl|'\n'
op|'{'
string|'"type"'
op|':'
string|'"SOFT"'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_rebuild
dedent|''
name|'def'
name|'test_server_rebuild'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'image'
op|'='
name|'self'
op|'.'
name|'api'
op|'.'
name|'get_images'
op|'('
op|')'
op|'['
number|'0'
op|']'
op|'['
string|"'id'"
op|']'
newline|'\n'
name|'subs'
op|'='
op|'{'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'uuid'"
op|':'
name|'image'
op|','
nl|'\n'
string|"'name'"
op|':'
string|"'foobar'"
op|','
nl|'\n'
string|"'pass'"
op|':'
string|"'seekr3t'"
op|','
nl|'\n'
string|"'ip'"
op|':'
string|"'1.2.3.4'"
op|','
nl|'\n'
string|"'ip6'"
op|':'
string|"'fe80::100'"
op|','
nl|'\n'
string|"'hostid'"
op|':'
string|"'[a-f0-9]+'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'rebuild'"
op|','
name|'subs'
op|','
nl|'\n'
string|"'server-action-rebuild-resp'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_resize
dedent|''
name|'def'
name|'test_server_resize'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'FLAGS'
op|'.'
name|'allow_resize_to_same_host'
op|'='
name|'True'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"resize"'
op|','
nl|'\n'
op|'{'
string|'"id"'
op|':'
number|'2'
op|','
nl|'\n'
string|'"host"'
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|'}'
op|')'
newline|'\n'
name|'return'
name|'uuid'
newline|'\n'
nl|'\n'
DECL|member|test_server_revert_resize
dedent|''
name|'def'
name|'test_server_revert_resize'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'test_server_resize'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"revertResize"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_confirm_resize
dedent|''
name|'def'
name|'test_server_confirm_resize'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'test_server_resize'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|'"confirmResize"'
op|','
name|'code'
op|'='
number|'204'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_create_image
dedent|''
name|'def'
name|'test_server_create_image'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'createImage'"
op|','
nl|'\n'
op|'{'
string|"'name'"
op|':'
string|"'foo-image'"
op|','
nl|'\n'
string|"'meta_var'"
op|':'
string|"'myvar'"
op|','
nl|'\n'
string|"'meta_val'"
op|':'
string|"'foobar'"
op|'}'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersActionsXmlTest
dedent|''
dedent|''
name|'class'
name|'ServersActionsXmlTest'
op|'('
name|'ServersActionsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersActionsAllJsonTest
dedent|''
name|'class'
name|'ServersActionsAllJsonTest'
op|'('
name|'ServersActionsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServersActionsAllXmlTest
dedent|''
name|'class'
name|'ServersActionsAllXmlTest'
op|'('
name|'ServersActionsXmlTest'
op|')'
op|':'
newline|'\n'
DECL|variable|all_extensions
indent|'    '
name|'all_extensions'
op|'='
name|'True'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerStartStopJsonTest
dedent|''
name|'class'
name|'ServerStartStopJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".server_start_stop.Server_start_stop"'
newline|'\n'
nl|'\n'
DECL|member|_test_server_action
name|'def'
name|'_test_server_action'
op|'('
name|'self'
op|','
name|'uuid'
op|','
name|'action'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server_start_stop'"
op|','
nl|'\n'
op|'{'
string|"'action'"
op|':'
name|'action'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'read'
op|'('
op|')'
op|','
string|'""'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_start
dedent|''
name|'def'
name|'test_server_start'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'os-stop'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'os-start'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_stop
dedent|''
name|'def'
name|'test_server_stop'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_test_server_action'
op|'('
name|'uuid'
op|','
string|"'os-stop'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerStartStopXmlTest
dedent|''
dedent|''
name|'class'
name|'ServerStartStopXmlTest'
op|'('
name|'ServerStartStopJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UserDataJsonTest
dedent|''
name|'class'
name|'UserDataJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.user_data.User_data"'
newline|'\n'
nl|'\n'
DECL|member|test_user_data_post
name|'def'
name|'test_user_data_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'user_data_contents'
op|'='
string|'\'#!/bin/bash\\n/bin/su\\necho "I am in you!"\\n\''
newline|'\n'
name|'user_data'
op|'='
name|'base64'
op|'.'
name|'b64encode'
op|'('
name|'user_data_contents'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'user_data'"
op|':'
name|'user_data'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'userdata-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'userdata-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UserDataXmlTest
dedent|''
dedent|''
name|'class'
name|'UserDataXmlTest'
op|'('
name|'UserDataJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsExtraDataJsonTest
dedent|''
name|'class'
name|'FlavorsExtraDataJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|"'nova.api.openstack.compute.contrib.flavorextradata.'"
nl|'\n'
string|"'Flavorextradata'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|_get_flags
name|'def'
name|'_get_flags'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'f'
op|'='
name|'super'
op|'('
name|'FlavorsExtraDataJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'_get_flags'
op|'('
op|')'
newline|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'='
name|'FLAGS'
op|'.'
name|'osapi_compute_extension'
op|'['
op|':'
op|']'
newline|'\n'
comment|'# Flavorextradata extension also needs Flavormanage to be loaded.'
nl|'\n'
name|'f'
op|'['
string|"'osapi_compute_extension'"
op|']'
op|'.'
name|'append'
op|'('
nl|'\n'
string|"'nova.api.openstack.compute.contrib.flavormanage.Flavormanage'"
op|')'
newline|'\n'
name|'return'
name|'f'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_extra_data_get
dedent|''
name|'def'
name|'test_flavors_extra_data_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/1'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-extra-data-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_extra_data_list
dedent|''
name|'def'
name|'test_flavors_extra_data_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'flavors/detail'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-extra-data-list-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_flavors_extra_data_post
dedent|''
name|'def'
name|'test_flavors_extra_data_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'flavors'"
op|','
nl|'\n'
string|"'flavors-extra-data-post-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'flavors-extra-data-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FlavorsExtraDataXmlTest
dedent|''
dedent|''
name|'class'
name|'FlavorsExtraDataXmlTest'
op|'('
name|'FlavorsExtraDataJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SecurityGroupsSampleJsonTest
dedent|''
name|'class'
name|'SecurityGroupsSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".security_groups.Security_groups"'
newline|'\n'
nl|'\n'
DECL|member|test_security_group_create
name|'def'
name|'test_security_group_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'name'
op|'='
name|'self'
op|'.'
name|'ctype'
op|'+'
string|"'-test'"
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'group_name'"
op|':'
name|'name'
op|','
nl|'\n'
string|'"description"'
op|':'
string|'"description"'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-security-groups'"
op|','
nl|'\n'
string|"'security-group-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-groups-create-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_groups_list
dedent|''
name|'def'
name|'test_security_groups_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of security groups get list request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-security-groups'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-groups-list-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_groups_get
dedent|''
name|'def'
name|'test_security_groups_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of security groups get request"""'
newline|'\n'
name|'security_group_id'
op|'='
string|"'1'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-security-groups/%s'"
op|'%'
name|'security_group_id'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'security-groups-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_security_groups_list_server
dedent|''
name|'def'
name|'test_security_groups_list_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of security groups for a specific server."""'
newline|'\n'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/os-security-groups'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-security-groups-list-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SecurityGroupsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'SecurityGroupsSampleXmlTest'
op|'('
name|'SecurityGroupsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SchedulerHintsJsonTest
dedent|''
name|'class'
name|'SchedulerHintsJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.scheduler_hints."'
nl|'\n'
string|'"Scheduler_hints"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_scheduler_hints_post
name|'def'
name|'test_scheduler_hints_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of scheduler hint post request"""'
newline|'\n'
name|'hints'
op|'='
op|'{'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'image_near'"
op|':'
name|'str'
op|'('
name|'uuid'
op|'.'
name|'uuid4'
op|'('
op|')'
op|')'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'scheduler-hints-post-req'"
op|','
nl|'\n'
name|'hints'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'scheduler-hints-post-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SchedulerHintsXmlTest
dedent|''
dedent|''
name|'class'
name|'SchedulerHintsXmlTest'
op|'('
name|'SchedulerHintsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ConsoleOutputSampleJsonTest
dedent|''
name|'class'
name|'ConsoleOutputSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".console_output.Console_output"'
newline|'\n'
nl|'\n'
DECL|member|test_get_console_output
name|'def'
name|'test_get_console_output'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'console-output-post-req'"
op|','
nl|'\n'
op|'{'
string|"'action'"
op|':'
string|"'os-getConsoleOutput'"
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'console-output-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ConsoleOutputSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'ConsoleOutputSampleXmlTest'
op|'('
name|'ConsoleOutputSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'        '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedServerAttributesJsonTest
dedent|''
name|'class'
name|'ExtendedServerAttributesJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
string|'".extended_server_attributes"'
op|'+'
DECL|variable|extension_name
string|'".Extended_server_attributes"'
newline|'\n'
nl|'\n'
DECL|member|test_extended_server_attrs_get
name|'def'
name|'test_extended_server_attrs_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'instance_name'"
op|']'
op|'='
string|"'instance-\\d{8}'"
newline|'\n'
name|'subs'
op|'['
string|"'hypervisor_hostname'"
op|']'
op|'='
string|"r'[\\w\\.\\-]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'extended-server-attrs-get'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_extended_server_attrs_list
dedent|''
name|'def'
name|'test_extended_server_attrs_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/detail'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'instance_name'"
op|']'
op|'='
string|"'instance-\\d{8}'"
newline|'\n'
name|'subs'
op|'['
string|"'hypervisor_hostname'"
op|']'
op|'='
string|"r'[\\w\\.\\-]+'"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'extended-server-attrs-list'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ExtendedServerAttributesXmlTest
dedent|''
dedent|''
name|'class'
name|'ExtendedServerAttributesXmlTest'
op|'('
name|'ExtendedServerAttributesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FloatingIpsJsonTest
dedent|''
name|'class'
name|'FloatingIpsJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib."'
DECL|variable|extension_name
string|'"floating_ips.Floating_ips"'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FloatingIpsJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'pool'
op|'='
name|'FLAGS'
op|'.'
name|'default_floating_pool'
newline|'\n'
name|'interface'
op|'='
name|'FLAGS'
op|'.'
name|'public_interface'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'ip_pool'
op|'='
op|'['
nl|'\n'
op|'{'
nl|'\n'
string|"'address'"
op|':'
string|'"10.10.10.1"'
op|','
nl|'\n'
string|"'pool'"
op|':'
name|'pool'
op|','
nl|'\n'
string|"'interface'"
op|':'
name|'interface'
nl|'\n'
op|'}'
op|','
nl|'\n'
op|'{'
nl|'\n'
string|"'address'"
op|':'
string|'"10.10.10.2"'
op|','
nl|'\n'
string|"'pool'"
op|':'
name|'pool'
op|','
nl|'\n'
string|"'interface'"
op|':'
name|'interface'
nl|'\n'
op|'}'
op|','
nl|'\n'
op|'{'
nl|'\n'
string|"'address'"
op|':'
string|'"10.10.10.3"'
op|','
nl|'\n'
string|"'pool'"
op|':'
name|'pool'
op|','
nl|'\n'
string|"'interface'"
op|':'
name|'interface'
nl|'\n'
op|'}'
op|','
nl|'\n'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'db'
op|'.'
name|'floating_ip_bulk_create'
op|'('
nl|'\n'
name|'context'
op|'.'
name|'get_admin_context'
op|'('
op|')'
op|','
name|'self'
op|'.'
name|'ip_pool'
op|')'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'compute'
op|'.'
name|'db'
op|'.'
name|'floating_ip_bulk_destroy'
op|'('
nl|'\n'
name|'context'
op|'.'
name|'get_admin_context'
op|'('
op|')'
op|','
name|'self'
op|'.'
name|'ip_pool'
op|')'
newline|'\n'
name|'super'
op|'('
name|'FloatingIpsJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'tearDown'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_list_empty
dedent|''
name|'def'
name|'test_floating_ips_list_empty'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ips'"
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-list-empty-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_list
dedent|''
name|'def'
name|'test_floating_ips_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-floating-ips'"
op|','
nl|'\n'
string|"'floating-ips-create-nopool-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-floating-ips'"
op|','
nl|'\n'
string|"'floating-ips-create-nopool-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ips'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-list-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_create_nopool
dedent|''
name|'def'
name|'test_floating_ips_create_nopool'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-floating-ips'"
op|','
nl|'\n'
string|"'floating-ips-create-nopool-req'"
op|','
nl|'\n'
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-create-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_create
dedent|''
name|'def'
name|'test_floating_ips_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-floating-ips'"
op|','
nl|'\n'
string|"'floating-ips-create-req'"
op|','
nl|'\n'
op|'{'
string|'"pool"'
op|':'
name|'FLAGS'
op|'.'
name|'default_floating_pool'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-create-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_get
dedent|''
name|'def'
name|'test_floating_ips_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_floating_ips_create'
op|'('
op|')'
newline|'\n'
comment|'# NOTE(sdague): the first floating ip will always have 1 as an id,'
nl|'\n'
comment|'# but it would be better if we could get this from the create'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-floating-ips/%d'"
op|'%'
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'floating-ips-create-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_floating_ips_delete
dedent|''
name|'def'
name|'test_floating_ips_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_floating_ips_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_delete'
op|'('
string|"'os-floating-ips/%d'"
op|'%'
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FloatingIpsXmlTest
dedent|''
dedent|''
name|'class'
name|'FloatingIpsXmlTest'
op|'('
name|'FloatingIpsJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|KeyPairsSampleJsonTest
dedent|''
name|'class'
name|'KeyPairsSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.keypairs.Keypairs"'
newline|'\n'
nl|'\n'
DECL|member|test_keypairs_post
name|'def'
name|'test_keypairs_post'
op|'('
name|'self'
op|','
name|'public_key'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of key pairs post request"""'
newline|'\n'
name|'key_name'
op|'='
string|"'keypair-'"
op|'+'
name|'str'
op|'('
name|'uuid'
op|'.'
name|'uuid4'
op|'('
op|')'
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-keypairs'"
op|','
string|"'keypairs-post-req'"
op|','
nl|'\n'
op|'{'
string|"'keypair_name'"
op|':'
name|'key_name'
op|'}'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'keypair_name'"
op|']'
op|'='
string|"'(%s)'"
op|'%'
name|'key_name'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'keypairs-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
comment|'# NOTE(maurosr): return the key_name is necessary cause the'
nl|'\n'
comment|'# verification returns the label of the last compared information in'
nl|'\n'
comment|'# the response, not necessarily the key name.'
nl|'\n'
name|'return'
name|'key_name'
newline|'\n'
nl|'\n'
DECL|member|test_keypairs_import_key_post
dedent|''
name|'def'
name|'test_keypairs_import_key_post'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of key pairs post to import user\'s key"""'
newline|'\n'
name|'key_name'
op|'='
string|"'keypair-'"
op|'+'
name|'str'
op|'('
name|'uuid'
op|'.'
name|'uuid4'
op|'('
op|')'
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'keypair_name'"
op|':'
name|'key_name'
op|','
nl|'\n'
string|"'public_key'"
op|':'
string|'"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQDx8nkQv/zgGg"'
nl|'\n'
string|'"B4rMYmIf+6A4l6Rr+o/6lHBQdW5aYd44bd8JttDCE/F/pNRr0l"'
nl|'\n'
string|'"RE+PiqSPO8nDPHw0010JeMH9gYgnnFlyY3/OcJ02RhIPyyxYpv"'
nl|'\n'
string|'"9FhY+2YiUkpwFOcLImyrxEsYXpD/0d3ac30bNH6Sw9JD9UZHYc"'
nl|'\n'
string|'"pSxsIbECHw== Generated by Nova"'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-keypairs'"
op|','
string|"'keypairs-import-post-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'keypair_name'"
op|']'
op|'='
string|"'(%s)'"
op|'%'
name|'key_name'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'keypairs-import-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_keypairs_get
dedent|''
name|'def'
name|'test_keypairs_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample of key pairs get request"""'
newline|'\n'
name|'key_name'
op|'='
name|'self'
op|'.'
name|'test_keypairs_post'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-keypairs'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'keypair_name'"
op|']'
op|'='
string|"'(%s)'"
op|'%'
name|'key_name'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'keypairs-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|KeyPairsSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'KeyPairsSampleXmlTest'
op|'('
name|'KeyPairsSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|RescueJsonTest
dedent|''
name|'class'
name|'RescueJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".rescue.Rescue"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_rescue
name|'def'
name|'_rescue'
op|'('
name|'self'
op|','
name|'uuid'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'req_subs'
op|'='
op|'{'
nl|'\n'
string|"'password'"
op|':'
string|"'MySecretPass'"
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-rescue-req'"
op|','
name|'req_subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-rescue'"
op|','
name|'req_subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_unrescue
dedent|''
name|'def'
name|'_unrescue'
op|'('
name|'self'
op|','
name|'uuid'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'uuid'
op|','
nl|'\n'
string|"'server-unrescue-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_rescue
dedent|''
name|'def'
name|'test_server_rescue'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_rescue'
op|'('
name|'uuid'
op|')'
newline|'\n'
nl|'\n'
comment|"# Do a server get to make sure that the 'RESCUE' state is set"
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'status'"
op|']'
op|'='
string|"'RESCUE'"
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp-rescue'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_unrescue
dedent|''
name|'def'
name|'test_server_unrescue'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_rescue'
op|'('
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_unrescue'
op|'('
name|'uuid'
op|')'
newline|'\n'
nl|'\n'
comment|"# Do a server get to make sure that the 'ACTIVE' state is back"
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'hostid'"
op|']'
op|'='
string|"'[a-f0-9]+'"
newline|'\n'
name|'subs'
op|'['
string|"'id'"
op|']'
op|'='
name|'uuid'
newline|'\n'
name|'subs'
op|'['
string|"'status'"
op|']'
op|'='
string|"'ACTIVE'"
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-get-resp-unrescue'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|RescueXmlTest
dedent|''
dedent|''
name|'class'
name|'RescueXmlTest'
op|'('
name|'RescueJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualInterfacesJsonTest
dedent|''
name|'class'
name|'VirtualInterfacesJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib"'
nl|'\n'
string|'".virtual_interfaces.Virtual_interfaces"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_vifs_list
name|'def'
name|'test_vifs_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/os-virtual-interfaces'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
nl|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'mac_addr'"
op|']'
op|'='
string|"'(?:[a-f0-9]{2}:){5}[a-f0-9]{2}'"
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'vifs-list-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualInterfacesXmlTest
dedent|''
dedent|''
name|'class'
name|'VirtualInterfacesXmlTest'
op|'('
name|'VirtualInterfacesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CloudPipeSampleJsonTest
dedent|''
name|'class'
name|'CloudPipeSampleJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib.cloudpipe.Cloudpipe"'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'CloudPipeSampleJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|get_user_data
name|'def'
name|'get_user_data'
op|'('
name|'self'
op|','
name|'project_id'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Stub method to generate user data for cloudpipe tests"""'
newline|'\n'
name|'return'
string|'"VVNFUiBEQVRB\\n"'
newline|'\n'
nl|'\n'
DECL|function|network_api_get
dedent|''
name|'def'
name|'network_api_get'
op|'('
name|'self'
op|','
name|'context'
op|','
name|'network_uuid'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Stub to get a valid network and its information"""'
newline|'\n'
name|'return'
op|'{'
string|"'vpn_public_address'"
op|':'
string|"'127.0.0.1'"
op|','
nl|'\n'
string|"'vpn_public_port'"
op|':'
number|'22'
op|'}'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'CloudPipe'
op|','
string|"'get_encoded_zip'"
op|','
name|'get_user_data'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'NetworkManager'
op|','
string|'"get_network"'
op|','
name|'network_api_get'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_cloud_pipe_create
dedent|''
name|'def'
name|'test_cloud_pipe_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples of cloud pipe extension creation"""'
newline|'\n'
name|'FLAGS'
op|'.'
name|'vpn_image_id'
op|'='
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
newline|'\n'
name|'project'
op|'='
op|'{'
string|"'project_id'"
op|':'
string|"'cloudpipe-'"
op|'+'
name|'str'
op|'('
name|'uuid'
op|'.'
name|'uuid4'
op|'('
op|')'
op|')'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-cloudpipe'"
op|','
string|"'cloud-pipe-create-req'"
op|','
nl|'\n'
name|'project'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'project'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'FLAGS'
op|'.'
name|'vpn_image_id'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'cloud-pipe-create-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
name|'return'
name|'project'
newline|'\n'
nl|'\n'
DECL|member|test_cloud_pipe_list
dedent|''
name|'def'
name|'test_cloud_pipe_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples of cloud pipe extension get request"""'
newline|'\n'
name|'project'
op|'='
name|'self'
op|'.'
name|'test_cloud_pipe_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-cloudpipe'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'project'
op|')'
newline|'\n'
name|'subs'
op|'['
string|"'image_id'"
op|']'
op|'='
name|'FLAGS'
op|'.'
name|'vpn_image_id'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'cloud-pipe-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CloudPipeSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'CloudPipeSampleXmlTest'
op|'('
name|'CloudPipeSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AggregatesSampleJsonTest
dedent|''
name|'class'
name|'AggregatesSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'extension_name'
op|'='
string|'"nova.api.openstack.compute.contrib"'
op|'+'
DECL|variable|extension_name
string|'".aggregates.Aggregates"'
newline|'\n'
nl|'\n'
DECL|member|test_aggregate_create
name|'def'
name|'test_aggregate_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|'"aggregate_id"'
op|':'
string|"'(?P<id>\\d+)'"
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-aggregates'"
op|','
string|"'aggregate-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregate-post-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_list_aggregates
dedent|''
name|'def'
name|'test_list_aggregates'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_aggregate_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-aggregates'"
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregates-list-get-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_aggregate_get
dedent|''
name|'def'
name|'test_aggregate_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'agg_id'
op|'='
name|'self'
op|'.'
name|'test_aggregate_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-aggregates/%s'"
op|'%'
name|'agg_id'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregates-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_add_metadata
dedent|''
name|'def'
name|'test_add_metadata'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'agg_id'
op|'='
name|'self'
op|'.'
name|'test_aggregate_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-aggregates/%s/action'"
op|'%'
name|'agg_id'
op|','
nl|'\n'
string|"'aggregate-metadata-post-req'"
op|','
nl|'\n'
op|'{'
string|"'action'"
op|':'
string|"'set_metadata'"
op|'}'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregates-metadata-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_add_host
dedent|''
name|'def'
name|'test_add_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'aggregate_id'
op|'='
name|'self'
op|'.'
name|'test_aggregate_create'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|'"host_name"'
op|':'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-aggregates/%s/action'"
op|'%'
name|'aggregate_id'
op|','
nl|'\n'
string|"'aggregate-add-host-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregates-add-host-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_remove_host
dedent|''
name|'def'
name|'test_remove_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'test_add_host'
op|'('
op|')'
newline|'\n'
name|'subs'
op|'='
op|'{'
nl|'\n'
string|'"host_name"'
op|':'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-aggregates/1/action'"
op|','
nl|'\n'
string|"'aggregate-remove-host-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregates-remove-host-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_update_aggregate
dedent|''
name|'def'
name|'test_update_aggregate'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'aggregate_id'
op|'='
name|'self'
op|'.'
name|'test_aggregate_create'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_put'
op|'('
string|"'os-aggregates/%s'"
op|'%'
name|'aggregate_id'
op|','
nl|'\n'
string|"'aggregate-update-post-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'aggregate-update-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AggregatesSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'AggregatesSampleXmlTest'
op|'('
name|'AggregatesSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CertificatesSamplesJsonTest
dedent|''
name|'class'
name|'CertificatesSamplesJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.certificates."'
nl|'\n'
string|'"Certificates"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'CertificatesSamplesJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_create_certificates
dedent|''
name|'def'
name|'test_create_certificates'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'os-certificates'"
op|','
nl|'\n'
string|"'certificate-create-req'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'certificate-create-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_root_certificate
dedent|''
name|'def'
name|'test_get_root_certificate'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-certificates/root'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'certificate-get-root-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CertificatesSamplesXmlTest
dedent|''
dedent|''
name|'class'
name|'CertificatesSamplesXmlTest'
op|'('
name|'CertificatesSamplesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UsedLimitsSamplesJsonTest
dedent|''
name|'class'
name|'UsedLimitsSamplesJsonTest'
op|'('
name|'ApiSampleTestBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.used_limits."'
nl|'\n'
string|'"Used_limits"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_used_limits
name|'def'
name|'test_get_used_limits'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample to used limits"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'limits'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'usedlimits-get-resp'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UsedLimitsSamplesXmlTest
dedent|''
dedent|''
name|'class'
name|'UsedLimitsSamplesXmlTest'
op|'('
name|'UsedLimitsSamplesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|MultipleCreateJsonTest
dedent|''
name|'class'
name|'MultipleCreateJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.multiple_create."'
nl|'\n'
string|'"Multiple_create"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_multiple_create
name|'def'
name|'test_multiple_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'min_count'"
op|':'
string|'"2"'
op|','
nl|'\n'
string|"'max_count'"
op|':'
string|'"3"'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'multiple-create-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'multiple-create-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_multiple_create_without_reservation_id
dedent|''
name|'def'
name|'test_multiple_create_without_reservation_id'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|"'min_count'"
op|':'
string|'"2"'
op|','
nl|'\n'
string|"'max_count'"
op|':'
string|'"3"'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'multiple-create-no-resv-post-req'"
op|','
nl|'\n'
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'multiple-create-no-resv-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|MultipleCreateXmlTest
dedent|''
dedent|''
name|'class'
name|'MultipleCreateXmlTest'
op|'('
name|'MultipleCreateJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SimpleTenantUsageSampleJsonTest
dedent|''
name|'class'
name|'SimpleTenantUsageSampleJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.simple_tenant_usage."'
nl|'\n'
string|'"Simple_tenant_usage"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""setUp method for simple tenant usage"""'
newline|'\n'
name|'super'
op|'('
name|'SimpleTenantUsageSampleJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'timeutils'
op|'.'
name|'set_time_override'
op|'('
name|'timeutils'
op|'.'
name|'utcnow'
op|'('
op|')'
op|'+'
nl|'\n'
name|'datetime'
op|'.'
name|'timedelta'
op|'('
name|'hours'
op|'='
number|'1'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'query'
op|'='
op|'{'
nl|'\n'
string|"'start'"
op|':'
name|'str'
op|'('
name|'timeutils'
op|'.'
name|'utcnow'
op|'('
op|')'
op|'-'
name|'datetime'
op|'.'
name|'timedelta'
op|'('
name|'hours'
op|'='
number|'1'
op|')'
op|')'
op|','
nl|'\n'
string|"'end'"
op|':'
name|'str'
op|'('
name|'timeutils'
op|'.'
name|'utcnow'
op|'('
op|')'
op|')'
nl|'\n'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""tearDown method for simple tenant usage"""'
newline|'\n'
name|'super'
op|'('
name|'SimpleTenantUsageSampleJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'tearDown'
op|'('
op|')'
newline|'\n'
name|'timeutils'
op|'.'
name|'clear_time_override'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_tenants_usage
dedent|''
name|'def'
name|'test_get_tenants_usage'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample to get all tenants usage request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-simple-tenant-usage?%s'"
op|'%'
op|'('
nl|'\n'
name|'urllib'
op|'.'
name|'urlencode'
op|'('
name|'self'
op|'.'
name|'query'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'simple-tenant-usage-get'"
op|','
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_tenant_usage_details
dedent|''
name|'def'
name|'test_get_tenant_usage_details'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api sample to get specific tenant usage request"""'
newline|'\n'
name|'tenant_id'
op|'='
string|"'openstack'"
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'os-simple-tenant-usage/%s?%s'"
op|'%'
op|'('
name|'tenant_id'
op|','
nl|'\n'
name|'urllib'
op|'.'
name|'urlencode'
op|'('
name|'self'
op|'.'
name|'query'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'simple-tenant-usage-get-specific'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SimpleTenantUsageSampleXmlTest
dedent|''
dedent|''
name|'class'
name|'SimpleTenantUsageSampleXmlTest'
op|'('
name|'SimpleTenantUsageSampleJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerDiagnosticsSamplesJsonTest
dedent|''
name|'class'
name|'ServerDiagnosticsSamplesJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.server_diagnostics."'
nl|'\n'
string|'"Server_diagnostics"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_server_diagnostics_get
name|'def'
name|'test_server_diagnostics_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_get'
op|'('
string|"'servers/%s/diagnostics'"
op|'%'
name|'uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'200'
op|')'
newline|'\n'
name|'subs'
op|'='
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'server-diagnostics-get-resp'"
op|','
name|'subs'
op|','
nl|'\n'
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ServerDiagnosticsSamplesXmlTest
dedent|''
dedent|''
name|'class'
name|'ServerDiagnosticsSamplesXmlTest'
op|'('
name|'ServerDiagnosticsSamplesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AvailabilityZoneJsonTest
dedent|''
name|'class'
name|'AvailabilityZoneJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.availability_zone."'
nl|'\n'
string|'"Availability_zone"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_create_availability_zone
name|'def'
name|'test_create_availability_zone'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'subs'
op|'='
op|'{'
nl|'\n'
string|"'image_id'"
op|':'
name|'fake'
op|'.'
name|'get_valid_image_id'
op|'('
op|')'
op|','
nl|'\n'
string|"'host'"
op|':'
name|'self'
op|'.'
name|'_get_host'
op|'('
op|')'
op|','
nl|'\n'
string|'"availability_zone"'
op|':'
string|'"nova"'
nl|'\n'
op|'}'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers'"
op|','
string|"'availability-zone-post-req'"
op|','
name|'subs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
name|'subs'
op|'.'
name|'update'
op|'('
name|'self'
op|'.'
name|'_get_regexes'
op|'('
op|')'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'_verify_response'
op|'('
string|"'availability-zone-post-resp'"
op|','
nl|'\n'
name|'subs'
op|','
name|'response'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AvailabilityZoneXmlTest
dedent|''
dedent|''
name|'class'
name|'AvailabilityZoneXmlTest'
op|'('
name|'AvailabilityZoneJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|'"xml"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AdminActionsSamplesJsonTest
dedent|''
name|'class'
name|'AdminActionsSamplesJsonTest'
op|'('
name|'ServersSampleBase'
op|')'
op|':'
newline|'\n'
DECL|variable|extension_name
indent|'    '
name|'extension_name'
op|'='
op|'('
string|'"nova.api.openstack.compute.contrib.admin_actions."'
nl|'\n'
string|'"Admin_actions"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""setUp Method for AdminActions api samples extension\n        This method creates the server that will be used in each tests"""'
newline|'\n'
name|'super'
op|'('
name|'AdminActionsSamplesJsonTest'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'uuid'
op|'='
name|'self'
op|'.'
name|'_post_server'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_pause
dedent|''
name|'def'
name|'test_post_pause'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to pause server request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-pause'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_unpause
dedent|''
name|'def'
name|'test_post_unpause'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to unpause server request"""'
newline|'\n'
name|'self'
op|'.'
name|'test_post_pause'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-unpause'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_suspend
dedent|''
name|'def'
name|'test_post_suspend'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to suspend server request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-suspend'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_resume
dedent|''
name|'def'
name|'test_post_resume'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to server resume request"""'
newline|'\n'
name|'self'
op|'.'
name|'test_post_suspend'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-resume'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_migrate
dedent|''
name|'def'
name|'test_post_migrate'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to migrate server request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-migrate'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_reset_network
dedent|''
name|'def'
name|'test_post_reset_network'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to reset server network request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-reset-network'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_inject_network_info
dedent|''
name|'def'
name|'test_post_inject_network_info'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to inject network info request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-inject-network-info'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_lock_server
dedent|''
name|'def'
name|'test_post_lock_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to lock server request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-lock-server'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_unlock_server
dedent|''
name|'def'
name|'test_post_unlock_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to unlock server request"""'
newline|'\n'
name|'self'
op|'.'
name|'test_post_lock_server'
op|'('
op|')'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-unlock-server'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_backup_server
dedent|''
name|'def'
name|'test_post_backup_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to backup server request"""'
newline|'\n'
DECL|function|image_details
name|'def'
name|'image_details'
op|'('
name|'self'
op|','
name|'context'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""This stub is specifically used on the backup action."""'
newline|'\n'
comment|"# NOTE(maurosr): I've added this simple stub cause backup action"
nl|'\n'
comment|'# was trapped in infinite loop during fetch image phase since the'
nl|'\n'
comment|'# fake Image Service always returns the same set of images'
nl|'\n'
name|'return'
name|'None'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'fake'
op|'.'
name|'_FakeImageService'
op|','
string|"'detail'"
op|','
name|'image_details'
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-backup-server'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_live_migrate_server
dedent|''
name|'def'
name|'test_post_live_migrate_server'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Get api samples to server live migrate request"""'
newline|'\n'
DECL|function|fake_live_migration_src_check
name|'def'
name|'fake_live_migration_src_check'
op|'('
name|'self'
op|','
name|'context'
op|','
name|'instance_ref'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Skip live migration scheduler checks"""'
newline|'\n'
name|'return'
newline|'\n'
nl|'\n'
DECL|function|fake_live_migration_dest_check
dedent|''
name|'def'
name|'fake_live_migration_dest_check'
op|'('
name|'self'
op|','
name|'context'
op|','
name|'instance_ref'
op|','
name|'dest'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Skip live migration scheduler checks"""'
newline|'\n'
name|'return'
newline|'\n'
nl|'\n'
DECL|function|fake_live_migration_common
dedent|''
name|'def'
name|'fake_live_migration_common'
op|'('
name|'self'
op|','
name|'context'
op|','
name|'instance_ref'
op|','
name|'dest'
op|')'
op|':'
newline|'\n'
indent|'            '
string|'"""Skip live migration scheduler checks"""'
newline|'\n'
name|'return'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'driver'
op|'.'
name|'Scheduler'
op|','
string|"'_live_migration_src_check'"
op|','
nl|'\n'
name|'fake_live_migration_src_check'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'driver'
op|'.'
name|'Scheduler'
op|','
string|"'_live_migration_dest_check'"
op|','
nl|'\n'
name|'fake_live_migration_dest_check'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'driver'
op|'.'
name|'Scheduler'
op|','
string|"'_live_migration_common_check'"
op|','
nl|'\n'
name|'fake_live_migration_common'
op|')'
newline|'\n'
nl|'\n'
DECL|function|fake_get_compute
name|'def'
name|'fake_get_compute'
op|'('
name|'context'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'service'
op|'='
name|'dict'
op|'('
name|'host'
op|'='
name|'host'
op|','
nl|'\n'
name|'binary'
op|'='
string|"'nova-compute'"
op|','
nl|'\n'
name|'topic'
op|'='
string|"'compute'"
op|','
nl|'\n'
name|'report_count'
op|'='
number|'1'
op|','
nl|'\n'
name|'updated_at'
op|'='
string|"'foo'"
op|','
nl|'\n'
name|'hypervisor_type'
op|'='
string|"'bar'"
op|','
nl|'\n'
name|'hypervisor_version'
op|'='
string|"'1'"
op|','
nl|'\n'
name|'disabled'
op|'='
name|'False'
op|')'
newline|'\n'
name|'return'
op|'['
op|'{'
string|"'compute_node'"
op|':'
op|'['
name|'service'
op|']'
op|'}'
op|']'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'db'
op|','
string|'"service_get_all_compute_by_host"'
op|','
name|'fake_get_compute'
op|')'
newline|'\n'
nl|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-live-migrate'"
op|','
nl|'\n'
op|'{'
string|"'hostname'"
op|':'
name|'self'
op|'.'
name|'compute'
op|'.'
name|'host'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_post_reset_state
dedent|''
name|'def'
name|'test_post_reset_state'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""get api samples to server reset state request"""'
newline|'\n'
name|'response'
op|'='
name|'self'
op|'.'
name|'_do_post'
op|'('
string|"'servers/%s/action'"
op|'%'
name|'self'
op|'.'
name|'uuid'
op|','
nl|'\n'
string|"'admin-actions-reset-server-state'"
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'response'
op|'.'
name|'status'
op|','
number|'202'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|AdminActionsSamplesXmlTest
dedent|''
dedent|''
name|'class'
name|'AdminActionsSamplesXmlTest'
op|'('
name|'AdminActionsSamplesJsonTest'
op|')'
op|':'
newline|'\n'
DECL|variable|ctype
indent|'    '
name|'ctype'
op|'='
string|"'xml'"
newline|'\n'
dedent|''
endmarker|''
end_unit
