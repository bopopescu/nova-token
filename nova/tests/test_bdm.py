begin_unit
comment|'# vim: tabstop=4 shiftwidth=4 softtabstop=4'
nl|'\n'
nl|'\n'
comment|'# Copyright 2011 Isaku Yamahata'
nl|'\n'
comment|'# All Rights Reserved.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
string|'"""\nTests for Block Device Mapping Code.\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'nova'
op|'.'
name|'api'
op|'.'
name|'ec2'
name|'import'
name|'cloud'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'api'
op|'.'
name|'ec2'
name|'import'
name|'ec2utils'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'test'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'tests'
name|'import'
name|'matchers'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|BlockDeviceMappingEc2CloudTestCase
name|'class'
name|'BlockDeviceMappingEc2CloudTestCase'
op|'('
name|'test'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Test Case for Block Device Mapping."""'
newline|'\n'
nl|'\n'
DECL|member|fake_ec2_vol_id_to_uuid
name|'def'
name|'fake_ec2_vol_id_to_uuid'
op|'('
name|'obj'
op|','
name|'ec2_id'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'ec2_id'
op|'=='
string|"'vol-87654321'"
op|':'
newline|'\n'
indent|'            '
name|'return'
string|"'22222222-3333-4444-5555-666666666666'"
newline|'\n'
dedent|''
name|'elif'
name|'ec2_id'
op|'=='
string|"'vol-98765432'"
op|':'
newline|'\n'
indent|'            '
name|'return'
string|"'77777777-8888-9999-0000-aaaaaaaaaaaa'"
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'return'
string|"'OhNoooo'"
newline|'\n'
nl|'\n'
DECL|member|fake_ec2_snap_id_to_uuid
dedent|''
dedent|''
name|'def'
name|'fake_ec2_snap_id_to_uuid'
op|'('
name|'obj'
op|','
name|'ec2_id'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'ec2_id'
op|'=='
string|"'snap-12345678'"
op|':'
newline|'\n'
indent|'            '
name|'return'
string|"'00000000-1111-2222-3333-444444444444'"
newline|'\n'
dedent|''
name|'elif'
name|'ec2_id'
op|'=='
string|"'snap-23456789'"
op|':'
newline|'\n'
indent|'            '
name|'return'
string|"'11111111-2222-3333-4444-555555555555'"
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'return'
string|"'OhNoooo'"
newline|'\n'
nl|'\n'
DECL|member|_assertApply
dedent|''
dedent|''
name|'def'
name|'_assertApply'
op|'('
name|'self'
op|','
name|'action'
op|','
name|'bdm_list'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'bdm'
op|','
name|'expected_result'
name|'in'
name|'bdm_list'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertThat'
op|'('
name|'action'
op|'('
name|'bdm'
op|')'
op|','
name|'matchers'
op|'.'
name|'DictMatches'
op|'('
name|'expected_result'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_parse_block_device_mapping
dedent|''
dedent|''
name|'def'
name|'test_parse_block_device_mapping'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'ec2utils'
op|','
nl|'\n'
string|"'ec2_vol_id_to_uuid'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'fake_ec2_vol_id_to_uuid'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'ec2utils'
op|','
nl|'\n'
string|"'ec2_snap_id_to_uuid'"
op|','
nl|'\n'
name|'self'
op|'.'
name|'fake_ec2_snap_id_to_uuid'
op|')'
newline|'\n'
name|'bdm_list'
op|'='
op|'['
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake0'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshot_id'"
op|':'
string|"'snap-12345678'"
op|','
nl|'\n'
string|"'volume_size'"
op|':'
number|'1'
op|'}'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake0'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
string|"'00000000-1111-2222-3333-444444444444'"
op|','
nl|'\n'
string|"'volume_size'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'True'
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake1'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshot_id'"
op|':'
string|"'snap-23456789'"
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'False'
op|'}'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake1'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
string|"'11111111-2222-3333-4444-555555555555'"
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'False'
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake2'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshot_id'"
op|':'
string|"'vol-87654321'"
op|','
nl|'\n'
string|"'volume_size'"
op|':'
number|'2'
op|'}'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake2'"
op|','
nl|'\n'
string|"'volume_id'"
op|':'
string|"'22222222-3333-4444-5555-666666666666'"
op|','
nl|'\n'
string|"'volume_size'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'True'
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake3'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshot_id'"
op|':'
string|"'vol-98765432'"
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'False'
op|'}'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake3'"
op|','
nl|'\n'
string|"'volume_id'"
op|':'
string|"'77777777-8888-9999-0000-aaaaaaaaaaaa'"
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'False'
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake4'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'no_device'"
op|':'
name|'True'
op|'}'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake4'"
op|','
nl|'\n'
string|"'no_device'"
op|':'
name|'True'
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake5'"
op|','
nl|'\n'
string|"'virtual_name'"
op|':'
string|"'ephemeral0'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake5'"
op|','
nl|'\n'
string|"'virtual_name'"
op|':'
string|"'ephemeral0'"
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake6'"
op|','
nl|'\n'
string|"'virtual_name'"
op|':'
string|"'swap'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake6'"
op|','
nl|'\n'
string|"'virtual_name'"
op|':'
string|"'swap'"
op|'}'
op|')'
op|','
nl|'\n'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'_assertApply'
op|'('
name|'cloud'
op|'.'
name|'_parse_block_device_mapping'
op|','
name|'bdm_list'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_format_block_device_mapping
dedent|''
name|'def'
name|'test_format_block_device_mapping'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'bdm_list'
op|'='
op|'['
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake0'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0x12345678'
op|','
nl|'\n'
string|"'volume_size'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'True'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/fake0'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-12345678'"
op|','
nl|'\n'
string|"'volumeSize'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'deleteOnTermination'"
op|':'
name|'True'
op|'}'
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake1'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0x23456789'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/fake1'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-23456789'"
op|'}'
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake2'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0x23456789'
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'False'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/fake2'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-23456789'"
op|','
nl|'\n'
string|"'deleteOnTermination'"
op|':'
name|'False'
op|'}'
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake3'"
op|','
nl|'\n'
string|"'volume_id'"
op|':'
number|'0x12345678'
op|','
nl|'\n'
string|"'volume_size'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'True'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/fake3'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'vol-12345678'"
op|','
nl|'\n'
string|"'volumeSize'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'deleteOnTermination'"
op|':'
name|'True'
op|'}'
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake4'"
op|','
nl|'\n'
string|"'volume_id'"
op|':'
number|'0x23456789'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/fake4'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'vol-23456789'"
op|'}'
op|'}'
op|')'
op|','
nl|'\n'
nl|'\n'
op|'('
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/fake5'"
op|','
nl|'\n'
string|"'volume_id'"
op|':'
number|'0x23456789'
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'False'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/fake5'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'vol-23456789'"
op|','
nl|'\n'
string|"'deleteOnTermination'"
op|':'
name|'False'
op|'}'
op|'}'
op|')'
op|','
nl|'\n'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'_assertApply'
op|'('
name|'cloud'
op|'.'
name|'_format_block_device_mapping'
op|','
name|'bdm_list'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_format_mapping
dedent|''
name|'def'
name|'test_format_mapping'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'properties'
op|'='
op|'{'
nl|'\n'
string|"'mappings'"
op|':'
op|'['
nl|'\n'
op|'{'
string|"'virtual'"
op|':'
string|"'ami'"
op|','
nl|'\n'
string|"'device'"
op|':'
string|"'sda1'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'virtual'"
op|':'
string|"'root'"
op|','
nl|'\n'
string|"'device'"
op|':'
string|"'/dev/sda1'"
op|'}'
op|','
nl|'\n'
nl|'\n'
op|'{'
string|"'virtual'"
op|':'
string|"'swap'"
op|','
nl|'\n'
string|"'device'"
op|':'
string|"'sdb1'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'virtual'"
op|':'
string|"'swap'"
op|','
nl|'\n'
string|"'device'"
op|':'
string|"'sdb2'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'virtual'"
op|':'
string|"'swap'"
op|','
nl|'\n'
string|"'device'"
op|':'
string|"'sdb3'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'virtual'"
op|':'
string|"'swap'"
op|','
nl|'\n'
string|"'device'"
op|':'
string|"'sdb4'"
op|'}'
op|','
nl|'\n'
nl|'\n'
op|'{'
string|"'virtual'"
op|':'
string|"'ephemeral0'"
op|','
nl|'\n'
string|"'device'"
op|':'
string|"'sdc1'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'virtual'"
op|':'
string|"'ephemeral1'"
op|','
nl|'\n'
string|"'device'"
op|':'
string|"'sdc2'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'virtual'"
op|':'
string|"'ephemeral2'"
op|','
nl|'\n'
string|"'device'"
op|':'
string|"'sdc3'"
op|'}'
op|','
nl|'\n'
op|']'
op|','
nl|'\n'
nl|'\n'
string|"'block_device_mapping'"
op|':'
op|'['
nl|'\n'
comment|'# root'
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sda1'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0x12345678'
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'False'
op|'}'
op|','
nl|'\n'
nl|'\n'
nl|'\n'
comment|'# overwrite swap'
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sdb2'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0x23456789'
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'False'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sdb3'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0x3456789A'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sdb4'"
op|','
nl|'\n'
string|"'no_device'"
op|':'
name|'True'
op|'}'
op|','
nl|'\n'
nl|'\n'
comment|'# overwrite ephemeral'
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sdc2'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0x3456789A'
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'False'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sdc3'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0x456789AB'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sdc4'"
op|','
nl|'\n'
string|"'no_device'"
op|':'
name|'True'
op|'}'
op|','
nl|'\n'
nl|'\n'
comment|'# volume'
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sdd1'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0x87654321'
op|','
nl|'\n'
string|"'delete_on_termination'"
op|':'
name|'False'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sdd2'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0x98765432'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sdd3'"
op|','
nl|'\n'
string|"'snapshot_id'"
op|':'
number|'0xA9875463'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'device_name'"
op|':'
string|"'/dev/sdd4'"
op|','
nl|'\n'
string|"'no_device'"
op|':'
name|'True'
op|'}'
op|']'
op|'}'
newline|'\n'
nl|'\n'
name|'expected_result'
op|'='
op|'{'
nl|'\n'
string|"'blockDeviceMapping'"
op|':'
op|'['
nl|'\n'
comment|'# root'
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/sda1'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-12345678'"
op|','
nl|'\n'
string|"'deleteOnTermination'"
op|':'
name|'False'
op|'}'
op|'}'
op|','
nl|'\n'
nl|'\n'
comment|'# swap'
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/sdb1'"
op|','
nl|'\n'
string|"'virtualName'"
op|':'
string|"'swap'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/sdb2'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-23456789'"
op|','
nl|'\n'
string|"'deleteOnTermination'"
op|':'
name|'False'
op|'}'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/sdb3'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-3456789a'"
op|'}'
op|'}'
op|','
nl|'\n'
nl|'\n'
comment|'# ephemeral'
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/sdc1'"
op|','
nl|'\n'
string|"'virtualName'"
op|':'
string|"'ephemeral0'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/sdc2'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-3456789a'"
op|','
nl|'\n'
string|"'deleteOnTermination'"
op|':'
name|'False'
op|'}'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/sdc3'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-456789ab'"
op|'}'
op|'}'
op|','
nl|'\n'
nl|'\n'
comment|'# volume'
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/sdd1'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-87654321'"
op|','
nl|'\n'
string|"'deleteOnTermination'"
op|':'
name|'False'
op|'}'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/sdd2'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-98765432'"
op|'}'
op|'}'
op|','
nl|'\n'
op|'{'
string|"'deviceName'"
op|':'
string|"'/dev/sdd3'"
op|','
nl|'\n'
string|"'ebs'"
op|':'
op|'{'
string|"'snapshotId'"
op|':'
string|"'snap-a9875463'"
op|'}'
op|'}'
op|']'
op|'}'
newline|'\n'
nl|'\n'
name|'result'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'cloud'
op|'.'
name|'_format_mappings'
op|'('
name|'properties'
op|','
name|'result'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|'['
string|"'blockDeviceMapping'"
op|']'
op|'.'
name|'sort'
op|'('
op|')'
op|','
nl|'\n'
name|'expected_result'
op|'['
string|"'blockDeviceMapping'"
op|']'
op|'.'
name|'sort'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
