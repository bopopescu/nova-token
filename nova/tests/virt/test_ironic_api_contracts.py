begin_unit
comment|'# Copyright 2014 Hewlett-Packard Development Company, L.P.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
name|'import'
name|'inspect'
newline|'\n'
nl|'\n'
name|'from'
name|'nova'
op|'.'
name|'scheduler'
name|'import'
name|'filters'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'scheduler'
name|'import'
name|'host_manager'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'test'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'virt'
name|'import'
name|'driver'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|IronicAPIContractsTestCase
name|'class'
name|'IronicAPIContractsTestCase'
op|'('
name|'test'
op|'.'
name|'NoDBTestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|_check_method
indent|'    '
name|'def'
name|'_check_method'
op|'('
name|'self'
op|','
name|'method'
op|','
name|'str_version'
op|','
name|'expected_args'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'spec'
op|'='
name|'inspect'
op|'.'
name|'getargspec'
op|'('
name|'method'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'expected_args'
op|','
name|'spec'
op|'.'
name|'args'
op|','
nl|'\n'
string|'"%s() violates Ironic contract"'
op|'%'
name|'str_version'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_HostState_signatures
dedent|''
name|'def'
name|'test_HostState_signatures'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'host_manager'
op|'.'
name|'HostState'
op|'.'
name|'__init__'
op|','
nl|'\n'
string|'"HostState.__init__"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'host'"
op|','
string|"'node'"
op|','
string|"'compute'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_HostManager_signatures
dedent|''
name|'def'
name|'test_HostManager_signatures'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'host_manager'
op|'.'
name|'HostManager'
op|'.'
name|'__init__'
op|','
nl|'\n'
string|'"HostManager.__init__"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_BaseHostFilter_signatures
dedent|''
name|'def'
name|'test_BaseHostFilter_signatures'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'filters'
op|'.'
name|'BaseHostFilter'
op|'.'
name|'host_passes'
op|','
nl|'\n'
string|'"BaseHostFilter.host_passes"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'host_state'"
op|','
string|"'filter_properties'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_ComputeDriver_signatures
dedent|''
name|'def'
name|'test_ComputeDriver_signatures'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'__init__'
op|','
nl|'\n'
string|'"ComputeDriver.__init__"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'virtapi'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'init_host'
op|','
nl|'\n'
string|'"ComputeDriver.init_host"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'host'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'get_info'
op|','
nl|'\n'
string|'"ComputeDriver.get_info"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'instance'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'instance_exists'
op|','
nl|'\n'
string|'"ComputeDriver.instance_exists"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'instance'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'list_instances'
op|','
nl|'\n'
string|'"ComputeDriver.list_instances"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'list_instance_uuids'
op|','
nl|'\n'
string|'"ComputeDriver.list_instance_uuids"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'node_is_available'
op|','
nl|'\n'
string|'"ComputeDriver.node_is_available"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'nodename'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'get_available_nodes'
op|','
nl|'\n'
string|'"ComputeDriver.get_available_nodes"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'refresh'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'get_info'
op|','
nl|'\n'
string|'"ComputeDriver.get_info"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'instance'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'macs_for_instance'
op|','
nl|'\n'
string|'"ComputeDriver.macs_for_instance"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'instance'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'spawn'
op|','
nl|'\n'
string|'"ComputeDriver.spawn"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'context'"
op|','
string|"'instance'"
op|','
string|"'image_meta'"
op|','
nl|'\n'
string|"'injected_files'"
op|','
string|"'admin_password'"
op|','
string|"'network_info'"
op|','
nl|'\n'
string|"'block_device_info'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'destroy'
op|','
nl|'\n'
string|'"ComputeDriver.destroy"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'context'"
op|','
string|"'instance'"
op|','
string|"'network_info'"
op|','
nl|'\n'
string|"'block_device_info'"
op|','
string|"'destroy_disks'"
op|','
nl|'\n'
string|"'migrate_data'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'reboot'
op|','
nl|'\n'
string|'"ComputeDriver.reboot"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'context'"
op|','
string|"'instance'"
op|','
string|"'network_info'"
op|','
nl|'\n'
string|"'reboot_type'"
op|','
string|"'block_device_info'"
op|','
nl|'\n'
string|"'bad_volumes_callback'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'power_off'
op|','
nl|'\n'
string|'"ComputeDriver.power_off"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'instance'"
op|','
string|"'timeout'"
op|','
string|"'retry_interval'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'power_on'
op|','
nl|'\n'
string|'"ComputeDriver.power_on"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'context'"
op|','
string|"'instance'"
op|','
string|"'network_info'"
op|','
nl|'\n'
string|"'block_device_info'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'get_host_stats'
op|','
nl|'\n'
string|'"ComputeDriver.get_host_stats"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'refresh'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'manage_image_cache'
op|','
nl|'\n'
string|'"ComputeDriver.manage_image_cache"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'context'"
op|','
string|"'all_instances'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'get_console_output'
op|','
nl|'\n'
string|'"ComputeDriver.get_console_output"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'context'"
op|','
string|"'instance'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'refresh_security_group_rules'
op|','
nl|'\n'
string|'"ComputeDriver.refresh_security_group_rules"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'security_group_id'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'refresh_security_group_members'
op|','
nl|'\n'
string|'"ComputeDriver.refresh_security_group_members"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'security_group_id'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'refresh_provider_fw_rules'
op|','
nl|'\n'
string|'"ComputeDriver.refresh_provider_fw_rules"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
nl|'\n'
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'refresh_instance_security_rules'
op|','
nl|'\n'
string|'"ComputeDriver.refresh_instance_security_rules"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'instance'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
nl|'\n'
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'ensure_filtering_rules_for_instance'
op|','
nl|'\n'
string|'"ComputeDriver.ensure_filtering_rules_for_instance"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'instance'"
op|','
string|"'network_info'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'unfilter_instance'
op|','
nl|'\n'
string|'"ComputeDriver.unfilter_instance"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'instance'"
op|','
string|"'network_info'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'plug_vifs'
op|','
nl|'\n'
string|'"ComputeDriver.plug_vifs"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'instance'"
op|','
string|"'network_info'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'unplug_vifs'
op|','
nl|'\n'
string|'"ComputeDriver.unplug_vifs"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'instance'"
op|','
string|"'network_info'"
op|']'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_check_method'
op|'('
name|'driver'
op|'.'
name|'ComputeDriver'
op|'.'
name|'rebuild'
op|','
nl|'\n'
string|'"ComputeDriver.rebuild"'
op|','
nl|'\n'
op|'['
string|"'self'"
op|','
string|"'context'"
op|','
string|"'instance'"
op|','
string|"'image_meta'"
op|','
nl|'\n'
string|"'injected_files'"
op|','
string|"'admin_password'"
op|','
string|"'bdms'"
op|','
nl|'\n'
string|"'detach_block_devices'"
op|','
string|"'attach_block_devices'"
op|','
nl|'\n'
string|"'network_info'"
op|','
string|"'recreate'"
op|','
string|"'block_device_info'"
op|','
nl|'\n'
string|"'preserve_ephemeral'"
op|']'
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
