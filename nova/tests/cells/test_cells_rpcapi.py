begin_unit
comment|'# Copyright (c) 2012 Rackspace Hosting'
nl|'\n'
comment|'# All Rights Reserved.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
string|'"""\nTests For Cells RPCAPI\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'oslo'
op|'.'
name|'config'
name|'import'
name|'cfg'
newline|'\n'
nl|'\n'
name|'from'
name|'nova'
op|'.'
name|'cells'
name|'import'
name|'rpcapi'
name|'as'
name|'cells_rpcapi'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'exception'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'rpc'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'test'
newline|'\n'
nl|'\n'
DECL|variable|CONF
name|'CONF'
op|'='
name|'cfg'
op|'.'
name|'CONF'
newline|'\n'
name|'CONF'
op|'.'
name|'import_opt'
op|'('
string|"'topic'"
op|','
string|"'nova.cells.opts'"
op|','
name|'group'
op|'='
string|"'cells'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CellsAPITestCase
name|'class'
name|'CellsAPITestCase'
op|'('
name|'test'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Test case for cells.api interfaces."""'
newline|'\n'
nl|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'CellsAPITestCase'
op|','
name|'self'
op|')'
op|'.'
name|'setUp'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'fake_topic'
op|'='
string|"'fake_topic'"
newline|'\n'
name|'self'
op|'.'
name|'fake_context'
op|'='
string|"'fake_context'"
newline|'\n'
name|'self'
op|'.'
name|'flags'
op|'('
name|'topic'
op|'='
name|'self'
op|'.'
name|'fake_topic'
op|','
name|'enable'
op|'='
name|'True'
op|','
name|'group'
op|'='
string|"'cells'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'='
name|'cells_rpcapi'
op|'.'
name|'CellsAPI'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_stub_rpc_method
dedent|''
name|'def'
name|'_stub_rpc_method'
op|'('
name|'self'
op|','
name|'rpc_method'
op|','
name|'result'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
op|'{'
op|'}'
newline|'\n'
nl|'\n'
DECL|function|fake_rpc_method
name|'def'
name|'fake_rpc_method'
op|'('
name|'ctxt'
op|','
name|'topic'
op|','
name|'msg'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'call_info'
op|'['
string|"'context'"
op|']'
op|'='
name|'ctxt'
newline|'\n'
name|'call_info'
op|'['
string|"'topic'"
op|']'
op|'='
name|'topic'
newline|'\n'
name|'call_info'
op|'['
string|"'msg'"
op|']'
op|'='
name|'msg'
newline|'\n'
name|'return'
name|'result'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'stubs'
op|'.'
name|'Set'
op|'('
name|'rpc'
op|','
name|'rpc_method'
op|','
name|'fake_rpc_method'
op|')'
newline|'\n'
name|'return'
name|'call_info'
newline|'\n'
nl|'\n'
DECL|member|_check_result
dedent|''
name|'def'
name|'_check_result'
op|'('
name|'self'
op|','
name|'call_info'
op|','
name|'method'
op|','
name|'args'
op|','
name|'version'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'version'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'version'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'BASE_RPC_API_VERSION'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
name|'call_info'
op|'['
string|"'context'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'self'
op|'.'
name|'fake_topic'
op|','
name|'call_info'
op|'['
string|"'topic'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'method'
op|','
name|'call_info'
op|'['
string|"'msg'"
op|']'
op|'['
string|"'method'"
op|']'
op|')'
newline|'\n'
name|'msg_version'
op|'='
name|'call_info'
op|'['
string|"'msg'"
op|']'
op|'['
string|"'version'"
op|']'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'isinstance'
op|'('
name|'msg_version'
op|','
name|'basestring'
op|')'
op|','
nl|'\n'
string|'"Message version %s is not a string"'
op|'%'
name|'msg_version'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'version'
op|','
name|'call_info'
op|'['
string|"'msg'"
op|']'
op|'['
string|"'version'"
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'args'
op|','
name|'call_info'
op|'['
string|"'msg'"
op|']'
op|'['
string|"'args'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_cast_compute_api_method
dedent|''
name|'def'
name|'test_cast_compute_api_method'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_cell_name'
op|'='
string|"'fake_cell_name'"
newline|'\n'
name|'fake_method'
op|'='
string|"'fake_method'"
newline|'\n'
name|'fake_method_args'
op|'='
op|'('
number|'1'
op|','
number|'2'
op|')'
newline|'\n'
name|'fake_method_kwargs'
op|'='
op|'{'
string|"'kwarg1'"
op|':'
number|'10'
op|','
string|"'kwarg2'"
op|':'
number|'20'
op|'}'
newline|'\n'
nl|'\n'
name|'expected_method_info'
op|'='
op|'{'
string|"'method'"
op|':'
name|'fake_method'
op|','
nl|'\n'
string|"'method_args'"
op|':'
name|'fake_method_args'
op|','
nl|'\n'
string|"'method_kwargs'"
op|':'
name|'fake_method_kwargs'
op|'}'
newline|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'method_info'"
op|':'
name|'expected_method_info'
op|','
nl|'\n'
string|"'cell_name'"
op|':'
name|'fake_cell_name'
op|','
nl|'\n'
string|"'call'"
op|':'
name|'False'
op|'}'
newline|'\n'
nl|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'cast_compute_api_method'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'fake_cell_name'
op|','
name|'fake_method'
op|','
nl|'\n'
op|'*'
name|'fake_method_args'
op|','
op|'**'
name|'fake_method_kwargs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'run_compute_api_method'"
op|','
nl|'\n'
name|'expected_args'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_call_compute_api_method
dedent|''
name|'def'
name|'test_call_compute_api_method'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_cell_name'
op|'='
string|"'fake_cell_name'"
newline|'\n'
name|'fake_method'
op|'='
string|"'fake_method'"
newline|'\n'
name|'fake_method_args'
op|'='
op|'('
number|'1'
op|','
number|'2'
op|')'
newline|'\n'
name|'fake_method_kwargs'
op|'='
op|'{'
string|"'kwarg1'"
op|':'
number|'10'
op|','
string|"'kwarg2'"
op|':'
number|'20'
op|'}'
newline|'\n'
name|'fake_response'
op|'='
string|"'fake_response'"
newline|'\n'
nl|'\n'
name|'expected_method_info'
op|'='
op|'{'
string|"'method'"
op|':'
name|'fake_method'
op|','
nl|'\n'
string|"'method_args'"
op|':'
name|'fake_method_args'
op|','
nl|'\n'
string|"'method_kwargs'"
op|':'
name|'fake_method_kwargs'
op|'}'
newline|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'method_info'"
op|':'
name|'expected_method_info'
op|','
nl|'\n'
string|"'cell_name'"
op|':'
name|'fake_cell_name'
op|','
nl|'\n'
string|"'call'"
op|':'
name|'True'
op|'}'
newline|'\n'
nl|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
name|'fake_response'
op|')'
newline|'\n'
nl|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'call_compute_api_method'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'fake_cell_name'
op|','
name|'fake_method'
op|','
nl|'\n'
op|'*'
name|'fake_method_args'
op|','
op|'**'
name|'fake_method_kwargs'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'run_compute_api_method'"
op|','
nl|'\n'
name|'expected_args'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'fake_response'
op|','
name|'result'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_schedule_run_instance
dedent|''
name|'def'
name|'test_schedule_run_instance'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'schedule_run_instance'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'arg1'
op|'='
number|'1'
op|','
name|'arg2'
op|'='
number|'2'
op|','
name|'arg3'
op|'='
number|'3'
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'host_sched_kwargs'"
op|':'
op|'{'
string|"'arg1'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'arg2'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'arg3'"
op|':'
number|'3'
op|'}'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'schedule_run_instance'"
op|','
nl|'\n'
name|'expected_args'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_build_instances
dedent|''
name|'def'
name|'test_build_instances'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'build_instances'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'instances'
op|'='
op|'['
string|"'1'"
op|','
string|"'2'"
op|']'
op|','
nl|'\n'
name|'image'
op|'='
op|'{'
string|"'fake'"
op|':'
string|"'image'"
op|'}'
op|','
name|'arg1'
op|'='
number|'1'
op|','
name|'arg2'
op|'='
number|'2'
op|','
name|'arg3'
op|'='
number|'3'
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'build_inst_kwargs'"
op|':'
op|'{'
string|"'instances'"
op|':'
op|'['
string|"'1'"
op|','
string|"'2'"
op|']'
op|','
nl|'\n'
string|"'image'"
op|':'
op|'{'
string|"'fake'"
op|':'
string|"'image'"
op|'}'
op|','
nl|'\n'
string|"'arg1'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'arg2'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'arg3'"
op|':'
number|'3'
op|'}'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'build_instances'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.8'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_capacities
dedent|''
name|'def'
name|'test_get_capacities'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'capacity_info'
op|'='
op|'{'
string|'"capacity"'
op|':'
string|'"info"'
op|'}'
newline|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
nl|'\n'
name|'result'
op|'='
name|'capacity_info'
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'get_capacities'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'cell_name'
op|'='
string|'"name"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'get_capacities'"
op|','
nl|'\n'
op|'{'
string|"'cell_name'"
op|':'
string|"'name'"
op|'}'
op|','
name|'version'
op|'='
string|"'1.9'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'capacity_info'
op|','
name|'result'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_instance_update_at_top
dedent|''
name|'def'
name|'test_instance_update_at_top'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_info_cache'
op|'='
op|'{'
string|"'id'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'instance'"
op|':'
string|"'fake_instance'"
op|','
nl|'\n'
string|"'other'"
op|':'
string|"'moo'"
op|'}'
newline|'\n'
name|'fake_sys_metadata'
op|'='
op|'['
op|'{'
string|"'id'"
op|':'
number|'1'
op|','
nl|'\n'
string|"'key'"
op|':'
string|"'key1'"
op|','
nl|'\n'
string|"'value'"
op|':'
string|"'value1'"
op|'}'
op|','
nl|'\n'
op|'{'
string|"'id'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'key'"
op|':'
string|"'key2'"
op|','
nl|'\n'
string|"'value'"
op|':'
string|"'value2'"
op|'}'
op|']'
newline|'\n'
name|'fake_instance'
op|'='
op|'{'
string|"'id'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'security_groups'"
op|':'
string|"'fake'"
op|','
nl|'\n'
string|"'instance_type'"
op|':'
string|"'fake'"
op|','
nl|'\n'
string|"'volumes'"
op|':'
string|"'fake'"
op|','
nl|'\n'
string|"'cell_name'"
op|':'
string|"'fake'"
op|','
nl|'\n'
string|"'name'"
op|':'
string|"'fake'"
op|','
nl|'\n'
string|"'metadata'"
op|':'
string|"'fake'"
op|','
nl|'\n'
string|"'info_cache'"
op|':'
name|'fake_info_cache'
op|','
nl|'\n'
string|"'system_metadata'"
op|':'
name|'fake_sys_metadata'
op|','
nl|'\n'
string|"'other'"
op|':'
string|"'meow'"
op|'}'
newline|'\n'
nl|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'instance_update_at_top'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'fake_instance'
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'instance'"
op|':'
name|'fake_instance'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'instance_update_at_top'"
op|','
nl|'\n'
name|'expected_args'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_instance_destroy_at_top
dedent|''
name|'def'
name|'test_instance_destroy_at_top'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_instance'
op|'='
op|'{'
string|"'uuid'"
op|':'
string|"'fake-uuid'"
op|'}'
newline|'\n'
nl|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'instance_destroy_at_top'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'fake_instance'
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'instance'"
op|':'
name|'fake_instance'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'instance_destroy_at_top'"
op|','
nl|'\n'
name|'expected_args'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_instance_delete_everywhere
dedent|''
name|'def'
name|'test_instance_delete_everywhere'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_instance'
op|'='
op|'{'
string|"'uuid'"
op|':'
string|"'fake-uuid'"
op|'}'
newline|'\n'
nl|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'instance_delete_everywhere'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'fake_instance'
op|','
nl|'\n'
string|"'fake-type'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'instance'"
op|':'
name|'fake_instance'
op|','
nl|'\n'
string|"'delete_type'"
op|':'
string|"'fake-type'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'instance_delete_everywhere'"
op|','
nl|'\n'
name|'expected_args'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_instance_fault_create_at_top
dedent|''
name|'def'
name|'test_instance_fault_create_at_top'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_instance_fault'
op|'='
op|'{'
string|"'id'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'other'"
op|':'
string|"'meow'"
op|'}'
newline|'\n'
nl|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'instance_fault_create_at_top'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'fake_instance_fault'
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'instance_fault'"
op|':'
name|'fake_instance_fault'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'instance_fault_create_at_top'"
op|','
nl|'\n'
name|'expected_args'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_bw_usage_update_at_top
dedent|''
name|'def'
name|'test_bw_usage_update_at_top'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'update_args'
op|'='
op|'('
string|"'fake_uuid'"
op|','
string|"'fake_mac'"
op|','
string|"'fake_start_period'"
op|','
nl|'\n'
string|"'fake_bw_in'"
op|','
string|"'fake_bw_out'"
op|','
string|"'fake_ctr_in'"
op|','
nl|'\n'
string|"'fake_ctr_out'"
op|')'
newline|'\n'
name|'update_kwargs'
op|'='
op|'{'
string|"'last_refreshed'"
op|':'
string|"'fake_refreshed'"
op|'}'
newline|'\n'
nl|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'bw_usage_update_at_top'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
op|'*'
name|'update_args'
op|','
op|'**'
name|'update_kwargs'
op|')'
newline|'\n'
nl|'\n'
name|'bw_update_info'
op|'='
op|'{'
string|"'uuid'"
op|':'
string|"'fake_uuid'"
op|','
nl|'\n'
string|"'mac'"
op|':'
string|"'fake_mac'"
op|','
nl|'\n'
string|"'start_period'"
op|':'
string|"'fake_start_period'"
op|','
nl|'\n'
string|"'bw_in'"
op|':'
string|"'fake_bw_in'"
op|','
nl|'\n'
string|"'bw_out'"
op|':'
string|"'fake_bw_out'"
op|','
nl|'\n'
string|"'last_ctr_in'"
op|':'
string|"'fake_ctr_in'"
op|','
nl|'\n'
string|"'last_ctr_out'"
op|':'
string|"'fake_ctr_out'"
op|','
nl|'\n'
string|"'last_refreshed'"
op|':'
string|"'fake_refreshed'"
op|'}'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'bw_update_info'"
op|':'
name|'bw_update_info'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'bw_usage_update_at_top'"
op|','
nl|'\n'
name|'expected_args'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_cell_info_for_neighbors
dedent|''
name|'def'
name|'test_get_cell_info_for_neighbors'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'get_cell_info_for_neighbors'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'get_cell_info_for_neighbors'"
op|','
op|'{'
op|'}'
op|','
nl|'\n'
name|'version'
op|'='
string|"'1.1'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_sync_instances
dedent|''
name|'def'
name|'test_sync_instances'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'sync_instances'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'project_id'
op|'='
string|"'fake_project'"
op|','
name|'updated_since'
op|'='
string|"'fake_time'"
op|','
nl|'\n'
name|'deleted'
op|'='
name|'True'
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'project_id'"
op|':'
string|"'fake_project'"
op|','
nl|'\n'
string|"'updated_since'"
op|':'
string|"'fake_time'"
op|','
nl|'\n'
string|"'deleted'"
op|':'
name|'True'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'sync_instances'"
op|','
name|'expected_args'
op|','
nl|'\n'
name|'version'
op|'='
string|"'1.1'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_service_get_all
dedent|''
name|'def'
name|'test_service_get_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'fake_filters'
op|'='
op|'{'
string|"'key1'"
op|':'
string|"'val1'"
op|','
string|"'key2'"
op|':'
string|"'val2'"
op|'}'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'service_get_all'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'filters'
op|'='
name|'fake_filters'
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'filters'"
op|':'
name|'fake_filters'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'service_get_all'"
op|','
name|'expected_args'
op|','
nl|'\n'
name|'version'
op|'='
string|"'1.2'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_service_get_by_compute_host
dedent|''
name|'def'
name|'test_service_get_by_compute_host'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'service_get_by_compute_host'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'host_name'
op|'='
string|"'fake-host-name'"
op|')'
newline|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'host_name'"
op|':'
string|"'fake-host-name'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'service_get_by_compute_host'"
op|','
nl|'\n'
name|'expected_args'
op|','
nl|'\n'
name|'version'
op|'='
string|"'1.2'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_service_update
dedent|''
name|'def'
name|'test_service_update'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'service_update'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'host_name'
op|'='
string|"'fake-host-name'"
op|','
nl|'\n'
name|'binary'
op|'='
string|"'nova-api'"
op|','
name|'params_to_update'
op|'='
op|'{'
string|"'disabled'"
op|':'
name|'True'
op|'}'
op|')'
newline|'\n'
name|'expected_args'
op|'='
op|'{'
nl|'\n'
string|"'host_name'"
op|':'
string|"'fake-host-name'"
op|','
nl|'\n'
string|"'binary'"
op|':'
string|"'nova-api'"
op|','
nl|'\n'
string|"'params_to_update'"
op|':'
op|'{'
string|"'disabled'"
op|':'
name|'True'
op|'}'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'service_update'"
op|','
nl|'\n'
name|'expected_args'
op|','
nl|'\n'
name|'version'
op|'='
string|"'1.7'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_proxy_rpc_to_manager
dedent|''
name|'def'
name|'test_proxy_rpc_to_manager'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'proxy_rpc_to_manager'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'rpc_message'
op|'='
string|"'fake-msg'"
op|','
nl|'\n'
name|'topic'
op|'='
string|"'fake-topic'"
op|','
name|'call'
op|'='
name|'True'
op|','
name|'timeout'
op|'='
op|'-'
number|'1'
op|')'
newline|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'rpc_message'"
op|':'
string|"'fake-msg'"
op|','
nl|'\n'
string|"'topic'"
op|':'
string|"'fake-topic'"
op|','
nl|'\n'
string|"'call'"
op|':'
name|'True'
op|','
nl|'\n'
string|"'timeout'"
op|':'
op|'-'
number|'1'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'proxy_rpc_to_manager'"
op|','
nl|'\n'
name|'expected_args'
op|','
nl|'\n'
name|'version'
op|'='
string|"'1.2'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_task_log_get_all
dedent|''
name|'def'
name|'test_task_log_get_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'task_log_get_all'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'task_name'
op|'='
string|"'fake_name'"
op|','
nl|'\n'
name|'period_beginning'
op|'='
string|"'fake_begin'"
op|','
nl|'\n'
name|'period_ending'
op|'='
string|"'fake_end'"
op|','
nl|'\n'
name|'host'
op|'='
string|"'fake_host'"
op|','
nl|'\n'
name|'state'
op|'='
string|"'fake_state'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'task_name'"
op|':'
string|"'fake_name'"
op|','
nl|'\n'
string|"'period_beginning'"
op|':'
string|"'fake_begin'"
op|','
nl|'\n'
string|"'period_ending'"
op|':'
string|"'fake_end'"
op|','
nl|'\n'
string|"'host'"
op|':'
string|"'fake_host'"
op|','
nl|'\n'
string|"'state'"
op|':'
string|"'fake_state'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'task_log_get_all'"
op|','
name|'expected_args'
op|','
nl|'\n'
name|'version'
op|'='
string|"'1.3'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_compute_node_get_all
dedent|''
name|'def'
name|'test_compute_node_get_all'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'compute_node_get_all'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'hypervisor_match'
op|'='
string|"'fake-match'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'hypervisor_match'"
op|':'
string|"'fake-match'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'compute_node_get_all'"
op|','
name|'expected_args'
op|','
nl|'\n'
name|'version'
op|'='
string|"'1.4'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_compute_node_stats
dedent|''
name|'def'
name|'test_compute_node_stats'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'compute_node_stats'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|')'
newline|'\n'
name|'expected_args'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'compute_node_stats'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.4'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_compute_node_get
dedent|''
name|'def'
name|'test_compute_node_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'compute_node_get'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
string|"'fake_compute_id'"
op|')'
newline|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'compute_id'"
op|':'
string|"'fake_compute_id'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'compute_node_get'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.4'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_actions_get
dedent|''
name|'def'
name|'test_actions_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_instance'
op|'='
op|'{'
string|"'uuid'"
op|':'
string|"'fake-uuid'"
op|','
string|"'cell_name'"
op|':'
string|"'region!child'"
op|'}'
newline|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'actions_get'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'fake_instance'
op|')'
newline|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'cell_name'"
op|':'
string|"'region!child'"
op|','
nl|'\n'
string|"'instance_uuid'"
op|':'
name|'fake_instance'
op|'['
string|"'uuid'"
op|']'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'actions_get'"
op|','
name|'expected_args'
op|','
nl|'\n'
name|'version'
op|'='
string|"'1.5'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_actions_get_no_cell
dedent|''
name|'def'
name|'test_actions_get_no_cell'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_instance'
op|'='
op|'{'
string|"'uuid'"
op|':'
string|"'fake-uuid'"
op|','
string|"'cell_name'"
op|':'
name|'None'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'exception'
op|'.'
name|'InstanceUnknownCell'
op|','
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'actions_get'
op|','
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'fake_instance'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_action_get_by_request_id
dedent|''
name|'def'
name|'test_action_get_by_request_id'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_instance'
op|'='
op|'{'
string|"'uuid'"
op|':'
string|"'fake-uuid'"
op|','
string|"'cell_name'"
op|':'
string|"'region!child'"
op|'}'
newline|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'action_get_by_request_id'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'fake_instance'
op|','
nl|'\n'
string|"'req-fake'"
op|')'
newline|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'cell_name'"
op|':'
string|"'region!child'"
op|','
nl|'\n'
string|"'instance_uuid'"
op|':'
name|'fake_instance'
op|'['
string|"'uuid'"
op|']'
op|','
nl|'\n'
string|"'request_id'"
op|':'
string|"'req-fake'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'action_get_by_request_id'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.5'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_action_get_by_request_id_no_cell
dedent|''
name|'def'
name|'test_action_get_by_request_id_no_cell'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_instance'
op|'='
op|'{'
string|"'uuid'"
op|':'
string|"'fake-uuid'"
op|','
string|"'cell_name'"
op|':'
name|'None'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'exception'
op|'.'
name|'InstanceUnknownCell'
op|','
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'action_get_by_request_id'
op|','
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'fake_instance'
op|','
string|"'req-fake'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_action_events_get
dedent|''
name|'def'
name|'test_action_events_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_instance'
op|'='
op|'{'
string|"'uuid'"
op|':'
string|"'fake-uuid'"
op|','
string|"'cell_name'"
op|':'
string|"'region!child'"
op|'}'
newline|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'action_events_get'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
name|'fake_instance'
op|','
nl|'\n'
string|"'fake-action'"
op|')'
newline|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'cell_name'"
op|':'
string|"'region!child'"
op|','
nl|'\n'
string|"'action_id'"
op|':'
string|"'fake-action'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'action_events_get'"
op|','
name|'expected_args'
op|','
nl|'\n'
name|'version'
op|'='
string|"'1.5'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_action_events_get_no_cell
dedent|''
name|'def'
name|'test_action_events_get_no_cell'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_instance'
op|'='
op|'{'
string|"'uuid'"
op|':'
string|"'fake-uuid'"
op|','
string|"'cell_name'"
op|':'
name|'None'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'exception'
op|'.'
name|'InstanceUnknownCell'
op|','
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'action_events_get'
op|','
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'fake_instance'
op|','
string|"'fake-action'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_consoleauth_delete_tokens
dedent|''
name|'def'
name|'test_consoleauth_delete_tokens'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'consoleauth_delete_tokens'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
string|"'fake-uuid'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'instance_uuid'"
op|':'
string|"'fake-uuid'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'consoleauth_delete_tokens'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.6'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_validate_console_port
dedent|''
name|'def'
name|'test_validate_console_port'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'validate_console_port'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
string|"'fake-uuid'"
op|','
string|"'fake-port'"
op|','
string|"'fake-type'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'instance_uuid'"
op|':'
string|"'fake-uuid'"
op|','
nl|'\n'
string|"'console_port'"
op|':'
string|"'fake-port'"
op|','
nl|'\n'
string|"'console_type'"
op|':'
string|"'fake-type'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'validate_console_port'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.6'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_bdm_update_or_create_at_top
dedent|''
name|'def'
name|'test_bdm_update_or_create_at_top'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fake_bdm'
op|'='
op|'{'
string|"'id'"
op|':'
number|'2'
op|','
string|"'other'"
op|':'
string|"'meow'"
op|'}'
newline|'\n'
nl|'\n'
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'bdm_update_or_create_at_top'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
name|'fake_bdm'
op|','
name|'create'
op|'='
string|"'fake-create'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'bdm'"
op|':'
name|'fake_bdm'
op|','
string|"'create'"
op|':'
string|"'fake-create'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'bdm_update_or_create_at_top'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.10'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_bdm_destroy_at_top
dedent|''
name|'def'
name|'test_bdm_destroy_at_top'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'bdm_destroy_at_top'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
string|"'fake-uuid'"
op|','
nl|'\n'
name|'device_name'
op|'='
string|"'fake-device'"
op|','
nl|'\n'
name|'volume_id'
op|'='
string|"'fake-vol'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'instance_uuid'"
op|':'
string|"'fake-uuid'"
op|','
nl|'\n'
string|"'device_name'"
op|':'
string|"'fake-device'"
op|','
nl|'\n'
string|"'volume_id'"
op|':'
string|"'fake-vol'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'bdm_destroy_at_top'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.10'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get_migrations
dedent|''
name|'def'
name|'test_get_migrations'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
name|'None'
op|')'
newline|'\n'
name|'filters'
op|'='
op|'{'
string|"'cell_name'"
op|':'
string|"'ChildCell'"
op|','
string|"'status'"
op|':'
string|"'confirmed'"
op|'}'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'get_migrations'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
name|'filters'
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'filters'"
op|':'
name|'filters'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'get_migrations'"
op|','
name|'expected_args'
op|','
nl|'\n'
name|'version'
op|'='
string|'"1.11"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_start_instance
dedent|''
name|'def'
name|'test_start_instance'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'start_instance'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
string|"'fake-instance'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'instance'"
op|':'
string|"'fake-instance'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'start_instance'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.12'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_stop_instance_cast
dedent|''
name|'def'
name|'test_stop_instance_cast'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'cast'"
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'stop_instance'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
string|"'fake-instance'"
op|','
name|'do_cast'
op|'='
name|'True'
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'instance'"
op|':'
string|"'fake-instance'"
op|','
nl|'\n'
string|"'do_cast'"
op|':'
name|'True'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'stop_instance'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.12'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_stop_instance_call
dedent|''
name|'def'
name|'test_stop_instance_call'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'stop_instance'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'fake_context'
op|','
string|"'fake-instance'"
op|','
name|'do_cast'
op|'='
name|'False'
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'instance'"
op|':'
string|"'fake-instance'"
op|','
nl|'\n'
string|"'do_cast'"
op|':'
name|'False'
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'stop_instance'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.12'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_cell_create
dedent|''
name|'def'
name|'test_cell_create'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'cell_create'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
string|"'values'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'values'"
op|':'
string|"'values'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'cell_create'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.13'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_cell_update
dedent|''
name|'def'
name|'test_cell_update'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'cell_update'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
string|"'cell_name'"
op|','
string|"'values'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'cell_name'"
op|':'
string|"'cell_name'"
op|','
nl|'\n'
string|"'values'"
op|':'
string|"'values'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'cell_update'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.13'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_cell_delete
dedent|''
name|'def'
name|'test_cell_delete'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'cell_delete'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
string|"'cell_name'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'cell_name'"
op|':'
string|"'cell_name'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'cell_delete'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.13'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_cell_get
dedent|''
name|'def'
name|'test_cell_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'call_info'
op|'='
name|'self'
op|'.'
name|'_stub_rpc_method'
op|'('
string|"'call'"
op|','
string|"'fake_response'"
op|')'
newline|'\n'
nl|'\n'
name|'result'
op|'='
name|'self'
op|'.'
name|'cells_rpcapi'
op|'.'
name|'cell_get'
op|'('
name|'self'
op|'.'
name|'fake_context'
op|','
nl|'\n'
string|"'cell_name'"
op|')'
newline|'\n'
nl|'\n'
name|'expected_args'
op|'='
op|'{'
string|"'cell_name'"
op|':'
string|"'cell_name'"
op|'}'
newline|'\n'
name|'self'
op|'.'
name|'_check_result'
op|'('
name|'call_info'
op|','
string|"'cell_get'"
op|','
nl|'\n'
name|'expected_args'
op|','
name|'version'
op|'='
string|"'1.13'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'result'
op|','
string|"'fake_response'"
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
