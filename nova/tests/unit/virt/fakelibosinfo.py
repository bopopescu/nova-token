begin_unit
comment|'# Copyright 2016 Red Hat, Inc'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'# not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'# a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#   http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'# License for the specific language governing permissions and limitations'
nl|'\n'
comment|'# under the License.'
nl|'\n'
nl|'\n'
nl|'\n'
DECL|function|match_item
name|'def'
name|'match_item'
op|'('
name|'obj'
op|','
name|'fltr'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'key'
op|','
name|'val'
op|'='
name|'list'
op|'('
name|'fltr'
op|'.'
name|'_filter'
op|'.'
name|'items'
op|'('
op|')'
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'if'
name|'key'
op|'=='
string|"'class'"
op|':'
newline|'\n'
indent|'        '
name|'key'
op|'='
string|"'_class'"
newline|'\n'
dedent|''
name|'elif'
name|'key'
op|'=='
string|"'short-id'"
op|':'
newline|'\n'
indent|'        '
name|'key'
op|'='
string|"'short_id'"
newline|'\n'
dedent|''
name|'return'
name|'getattr'
op|'('
name|'obj'
op|','
name|'key'
op|','
name|'None'
op|')'
op|'=='
name|'val'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Loader
dedent|''
name|'class'
name|'Loader'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|process_default_path
indent|'    '
name|'def'
name|'process_default_path'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'pass'
newline|'\n'
nl|'\n'
DECL|member|get_db
dedent|''
name|'def'
name|'get_db'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'Db'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Db
dedent|''
dedent|''
name|'class'
name|'Db'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Generate test devices'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'devs'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'oslist'
op|'='
name|'None'
newline|'\n'
nl|'\n'
name|'net'
op|'='
name|'Device'
op|'('
op|')'
newline|'\n'
name|'net'
op|'.'
name|'_class'
op|'='
string|"'net'"
newline|'\n'
name|'net'
op|'.'
name|'name'
op|'='
string|"'virtio-net'"
newline|'\n'
name|'self'
op|'.'
name|'devs'
op|'.'
name|'append'
op|'('
name|'net'
op|')'
newline|'\n'
nl|'\n'
name|'net'
op|'='
name|'Device'
op|'('
op|')'
newline|'\n'
name|'net'
op|'.'
name|'_class'
op|'='
string|"'block'"
newline|'\n'
name|'net'
op|'.'
name|'name'
op|'='
string|"'virtio-block'"
newline|'\n'
name|'self'
op|'.'
name|'devs'
op|'.'
name|'append'
op|'('
name|'net'
op|')'
newline|'\n'
nl|'\n'
name|'devlist'
op|'='
name|'DeviceList'
op|'('
op|')'
newline|'\n'
name|'devlist'
op|'.'
name|'devices'
op|'='
name|'self'
op|'.'
name|'devs'
newline|'\n'
nl|'\n'
name|'fedora'
op|'='
name|'Os'
op|'('
op|')'
newline|'\n'
name|'fedora'
op|'.'
name|'name'
op|'='
string|"'Fedora 22'"
newline|'\n'
name|'fedora'
op|'.'
name|'id'
op|'='
string|"'http://fedoraproject.org/fedora/22'"
newline|'\n'
name|'fedora'
op|'.'
name|'short_id'
op|'='
string|"'fedora22'"
newline|'\n'
name|'fedora'
op|'.'
name|'dev_list'
op|'='
name|'devlist'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'oslist'
op|'='
name|'OsList'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'oslist'
op|'.'
name|'os_list'
op|'='
op|'['
name|'fedora'
op|']'
newline|'\n'
nl|'\n'
DECL|member|get_os_list
dedent|''
name|'def'
name|'get_os_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'oslist'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Filter
dedent|''
dedent|''
name|'class'
name|'Filter'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_filter'
op|'='
op|'{'
op|'}'
newline|'\n'
nl|'\n'
dedent|''
op|'@'
name|'classmethod'
newline|'\n'
DECL|member|new
name|'def'
name|'new'
op|'('
name|'cls'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'cls'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|add_constraint
dedent|''
name|'def'
name|'add_constraint'
op|'('
name|'self'
op|','
name|'flt_key'
op|','
name|'val'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_filter'
op|'['
name|'flt_key'
op|']'
op|'='
name|'val'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|OsList
dedent|''
dedent|''
name|'class'
name|'OsList'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'os_list'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
DECL|member|new_filtered
dedent|''
name|'def'
name|'new_filtered'
op|'('
name|'self'
op|','
name|'fltr'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'new_list'
op|'='
name|'OsList'
op|'('
op|')'
newline|'\n'
name|'new_list'
op|'.'
name|'os_list'
op|'='
op|'['
name|'os'
name|'for'
name|'os'
name|'in'
name|'self'
op|'.'
name|'os_list'
name|'if'
name|'match_item'
op|'('
name|'os'
op|','
name|'fltr'
op|')'
op|']'
newline|'\n'
name|'return'
name|'new_list'
newline|'\n'
nl|'\n'
DECL|member|get_length
dedent|''
name|'def'
name|'get_length'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'len'
op|'('
name|'self'
op|'.'
name|'os_list'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_nth
dedent|''
name|'def'
name|'get_nth'
op|'('
name|'self'
op|','
name|'index'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'os_list'
op|'['
name|'index'
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Os
dedent|''
dedent|''
name|'class'
name|'Os'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'name'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'short_id'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'id'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'dev_list'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|get_all_devices
dedent|''
name|'def'
name|'get_all_devices'
op|'('
name|'self'
op|','
name|'fltr'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'new_list'
op|'='
name|'DeviceList'
op|'('
op|')'
newline|'\n'
name|'new_list'
op|'.'
name|'devices'
op|'='
op|'['
name|'dev'
name|'for'
name|'dev'
name|'in'
name|'self'
op|'.'
name|'dev_list'
op|'.'
name|'devices'
nl|'\n'
name|'if'
name|'match_item'
op|'('
name|'dev'
op|','
name|'fltr'
op|')'
op|']'
newline|'\n'
name|'return'
name|'new_list'
newline|'\n'
nl|'\n'
DECL|member|get_name
dedent|''
name|'def'
name|'get_name'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'name'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|DeviceList
dedent|''
dedent|''
name|'class'
name|'DeviceList'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'devices'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
DECL|member|get_length
dedent|''
name|'def'
name|'get_length'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'len'
op|'('
name|'self'
op|'.'
name|'devices'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_nth
dedent|''
name|'def'
name|'get_nth'
op|'('
name|'self'
op|','
name|'index'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'devices'
op|'['
name|'index'
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Device
dedent|''
dedent|''
name|'class'
name|'Device'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'name'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'_class'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|member|get_name
dedent|''
name|'def'
name|'get_name'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'name'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
