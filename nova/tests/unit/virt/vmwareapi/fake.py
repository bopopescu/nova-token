begin_unit
comment|'# Copyright (c) 2013 Hewlett-Packard Development Company, L.P.'
nl|'\n'
comment|'# Copyright (c) 2012 VMware, Inc.'
nl|'\n'
comment|'# Copyright (c) 2011 Citrix Systems, Inc.'
nl|'\n'
comment|'# Copyright 2011 OpenStack Foundation'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
string|'"""\nA fake VMware VI API implementation.\n"""'
newline|'\n'
nl|'\n'
name|'import'
name|'collections'
newline|'\n'
nl|'\n'
name|'from'
name|'oslo_log'
name|'import'
name|'log'
name|'as'
name|'logging'
newline|'\n'
name|'from'
name|'oslo_serialization'
name|'import'
name|'jsonutils'
newline|'\n'
name|'from'
name|'oslo_utils'
name|'import'
name|'units'
newline|'\n'
name|'from'
name|'oslo_utils'
name|'import'
name|'uuidutils'
newline|'\n'
name|'from'
name|'oslo_vmware'
name|'import'
name|'exceptions'
name|'as'
name|'vexc'
newline|'\n'
name|'from'
name|'oslo_vmware'
op|'.'
name|'objects'
name|'import'
name|'datastore'
name|'as'
name|'ds_obj'
newline|'\n'
name|'import'
name|'six'
newline|'\n'
nl|'\n'
name|'from'
name|'nova'
name|'import'
name|'exception'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'virt'
op|'.'
name|'vmwareapi'
name|'import'
name|'constants'
newline|'\n'
nl|'\n'
DECL|variable|_CLASSES
name|'_CLASSES'
op|'='
op|'['
string|"'Datacenter'"
op|','
string|"'Datastore'"
op|','
string|"'ResourcePool'"
op|','
string|"'VirtualMachine'"
op|','
nl|'\n'
string|"'Network'"
op|','
string|"'HostSystem'"
op|','
string|"'HostNetworkSystem'"
op|','
string|"'Task'"
op|','
string|"'session'"
op|','
nl|'\n'
string|"'files'"
op|','
string|"'ClusterComputeResource'"
op|','
string|"'HostStorageSystem'"
op|']'
newline|'\n'
nl|'\n'
DECL|variable|_FAKE_FILE_SIZE
name|'_FAKE_FILE_SIZE'
op|'='
number|'1024'
newline|'\n'
DECL|variable|_FAKE_VCENTER_UUID
name|'_FAKE_VCENTER_UUID'
op|'='
string|"'497c514c-ef5e-4e7f-8d93-ec921993b93a'"
newline|'\n'
nl|'\n'
DECL|variable|_db_content
name|'_db_content'
op|'='
op|'{'
op|'}'
newline|'\n'
DECL|variable|_array_types
name|'_array_types'
op|'='
op|'{'
op|'}'
newline|'\n'
DECL|variable|_vim_map
name|'_vim_map'
op|'='
op|'{'
op|'}'
newline|'\n'
nl|'\n'
DECL|variable|LOG
name|'LOG'
op|'='
name|'logging'
op|'.'
name|'getLogger'
op|'('
name|'__name__'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|reset
name|'def'
name|'reset'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Resets the db contents."""'
newline|'\n'
name|'cleanup'
op|'('
op|')'
newline|'\n'
name|'create_network'
op|'('
op|')'
newline|'\n'
name|'create_host_network_system'
op|'('
op|')'
newline|'\n'
name|'create_host_storage_system'
op|'('
op|')'
newline|'\n'
name|'ds_ref1'
op|'='
name|'create_datastore'
op|'('
string|"'ds1'"
op|','
number|'1024'
op|','
number|'500'
op|')'
newline|'\n'
name|'create_host'
op|'('
name|'ds_ref'
op|'='
name|'ds_ref1'
op|')'
newline|'\n'
name|'ds_ref2'
op|'='
name|'create_datastore'
op|'('
string|"'ds2'"
op|','
number|'1024'
op|','
number|'500'
op|')'
newline|'\n'
name|'create_host'
op|'('
name|'ds_ref'
op|'='
name|'ds_ref2'
op|')'
newline|'\n'
name|'create_datacenter'
op|'('
string|"'dc1'"
op|','
name|'ds_ref1'
op|')'
newline|'\n'
name|'create_datacenter'
op|'('
string|"'dc2'"
op|','
name|'ds_ref2'
op|')'
newline|'\n'
name|'create_res_pool'
op|'('
op|')'
newline|'\n'
name|'create_cluster'
op|'('
string|"'test_cluster'"
op|','
name|'ds_ref1'
op|')'
newline|'\n'
name|'create_cluster'
op|'('
string|"'test_cluster2'"
op|','
name|'ds_ref2'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|cleanup
dedent|''
name|'def'
name|'cleanup'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Clear the db contents."""'
newline|'\n'
name|'for'
name|'c'
name|'in'
name|'_CLASSES'
op|':'
newline|'\n'
comment|'# We fake the datastore by keeping the file references as a list of'
nl|'\n'
comment|'# names in the db'
nl|'\n'
indent|'        '
name|'if'
name|'c'
op|'=='
string|"'files'"
op|':'
newline|'\n'
indent|'            '
name|'_db_content'
op|'['
name|'c'
op|']'
op|'='
op|'['
op|']'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'_db_content'
op|'['
name|'c'
op|']'
op|'='
op|'{'
op|'}'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_create_object
dedent|''
dedent|''
dedent|''
name|'def'
name|'_create_object'
op|'('
name|'table'
op|','
name|'table_obj'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Create an object in the db."""'
newline|'\n'
name|'_db_content'
op|'.'
name|'setdefault'
op|'('
name|'table'
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
name|'_db_content'
op|'['
name|'table'
op|']'
op|'['
name|'table_obj'
op|'.'
name|'obj'
op|']'
op|'='
name|'table_obj'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_get_object
dedent|''
name|'def'
name|'_get_object'
op|'('
name|'obj_ref'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Get object for the give reference."""'
newline|'\n'
name|'return'
name|'_db_content'
op|'['
name|'obj_ref'
op|'.'
name|'type'
op|']'
op|'['
name|'obj_ref'
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_get_objects
dedent|''
name|'def'
name|'_get_objects'
op|'('
name|'obj_type'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Get objects of the type."""'
newline|'\n'
name|'lst_objs'
op|'='
name|'FakeRetrieveResult'
op|'('
op|')'
newline|'\n'
name|'for'
name|'key'
name|'in'
name|'_db_content'
op|'['
name|'obj_type'
op|']'
op|':'
newline|'\n'
indent|'        '
name|'lst_objs'
op|'.'
name|'add_object'
op|'('
name|'_db_content'
op|'['
name|'obj_type'
op|']'
op|'['
name|'key'
op|']'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'lst_objs'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_convert_to_array_of_mor
dedent|''
name|'def'
name|'_convert_to_array_of_mor'
op|'('
name|'mors'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Wraps the given array into a DataObject."""'
newline|'\n'
name|'array_of_mors'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'array_of_mors'
op|'.'
name|'ManagedObjectReference'
op|'='
name|'mors'
newline|'\n'
name|'return'
name|'array_of_mors'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_convert_to_array_of_opt_val
dedent|''
name|'def'
name|'_convert_to_array_of_opt_val'
op|'('
name|'optvals'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Wraps the given array into a DataObject."""'
newline|'\n'
name|'array_of_optv'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'array_of_optv'
op|'.'
name|'OptionValue'
op|'='
name|'optvals'
newline|'\n'
name|'return'
name|'array_of_optv'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_create_array_of_type
dedent|''
name|'def'
name|'_create_array_of_type'
op|'('
name|'t'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Returns an array to contain objects of type t."""'
newline|'\n'
name|'if'
name|'t'
name|'in'
name|'_array_types'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'_array_types'
op|'['
name|'t'
op|']'
op|'('
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'array_type_name'
op|'='
string|"'ArrayOf%s'"
op|'%'
name|'t'
newline|'\n'
name|'array_type'
op|'='
name|'type'
op|'('
name|'array_type_name'
op|','
op|'('
name|'DataObject'
op|','
op|')'
op|','
op|'{'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|function|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'array_type'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
name|'array_type_name'
op|')'
newline|'\n'
name|'setattr'
op|'('
name|'self'
op|','
name|'t'
op|','
op|'['
op|']'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'setattr'
op|'('
name|'array_type'
op|','
string|"'__init__'"
op|','
name|'__init__'
op|')'
newline|'\n'
nl|'\n'
name|'_array_types'
op|'['
name|'t'
op|']'
op|'='
name|'array_type'
newline|'\n'
name|'return'
name|'array_type'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeRetrieveResult
dedent|''
name|'class'
name|'FakeRetrieveResult'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Object to retrieve a ObjectContent list."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'token'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'objects'
op|'='
op|'['
op|']'
newline|'\n'
name|'if'
name|'token'
name|'is'
name|'not'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'token'
op|'='
name|'token'
newline|'\n'
nl|'\n'
DECL|member|add_object
dedent|''
dedent|''
name|'def'
name|'add_object'
op|'('
name|'self'
op|','
name|'object'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'objects'
op|'.'
name|'append'
op|'('
name|'object'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|MissingProperty
dedent|''
dedent|''
name|'class'
name|'MissingProperty'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Missing object in ObjectContent\'s missing set."""'
newline|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'path'
op|'='
string|"'fake-path'"
op|','
name|'message'
op|'='
string|"'fake_message'"
op|','
nl|'\n'
name|'method_fault'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'path'
op|'='
name|'path'
newline|'\n'
name|'self'
op|'.'
name|'fault'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'fault'
op|'.'
name|'localizedMessage'
op|'='
name|'message'
newline|'\n'
name|'self'
op|'.'
name|'fault'
op|'.'
name|'fault'
op|'='
name|'method_fault'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_get_object_refs
dedent|''
dedent|''
name|'def'
name|'_get_object_refs'
op|'('
name|'obj_type'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Get object References of the type."""'
newline|'\n'
name|'lst_objs'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'key'
name|'in'
name|'_db_content'
op|'['
name|'obj_type'
op|']'
op|':'
newline|'\n'
indent|'        '
name|'lst_objs'
op|'.'
name|'append'
op|'('
name|'key'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'lst_objs'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_update_object
dedent|''
name|'def'
name|'_update_object'
op|'('
name|'table'
op|','
name|'table_obj'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Update objects of the type."""'
newline|'\n'
name|'_db_content'
op|'['
name|'table'
op|']'
op|'['
name|'table_obj'
op|'.'
name|'obj'
op|']'
op|'='
name|'table_obj'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Prop
dedent|''
name|'class'
name|'Prop'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Property Object base class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'name'
op|'='
name|'None'
op|','
name|'val'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'name'
op|'='
name|'name'
newline|'\n'
name|'self'
op|'.'
name|'val'
op|'='
name|'val'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ManagedObjectReference
dedent|''
dedent|''
name|'class'
name|'ManagedObjectReference'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""A managed object reference is a remote identifier."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'name'
op|'='
string|'"ManagedObject"'
op|','
name|'value'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'ManagedObjectReference'
op|','
name|'self'
op|')'
newline|'\n'
comment|'# Managed Object Reference value attributes'
nl|'\n'
comment|'# typically have values like vm-123 or'
nl|'\n'
comment|'# host-232 and not UUID.'
nl|'\n'
name|'self'
op|'.'
name|'value'
op|'='
name|'value'
newline|'\n'
comment|'# Managed Object Reference type'
nl|'\n'
comment|'# attributes hold the name of the type'
nl|'\n'
comment|'# of the vCenter object the value'
nl|'\n'
comment|'# attribute is the identifier for'
nl|'\n'
name|'self'
op|'.'
name|'type'
op|'='
name|'name'
newline|'\n'
name|'self'
op|'.'
name|'_type'
op|'='
name|'name'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ObjectContent
dedent|''
dedent|''
name|'class'
name|'ObjectContent'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""ObjectContent array holds dynamic properties."""'
newline|'\n'
nl|'\n'
comment|'# This class is a *fake* of a class sent back to us by'
nl|'\n'
comment|'# SOAP. It has its own names. These names are decided'
nl|'\n'
comment|'# for us by the API we are *faking* here.'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'obj_ref'
op|','
name|'prop_list'
op|'='
name|'None'
op|','
name|'missing_list'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'obj'
op|'='
name|'obj_ref'
newline|'\n'
nl|'\n'
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'prop_list'
op|','
name|'collections'
op|'.'
name|'Iterable'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'prop_list'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'missing_list'
op|','
name|'collections'
op|'.'
name|'Iterable'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'missing_list'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
comment|'# propSet is the name your Python code will need to'
nl|'\n'
comment|'# use since this is the name that the API will use'
nl|'\n'
dedent|''
name|'if'
name|'prop_list'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'propSet'
op|'='
name|'prop_list'
newline|'\n'
nl|'\n'
comment|'# missingSet is the name your python code will'
nl|'\n'
comment|'# need to use since this is the name that the'
nl|'\n'
comment|'# API we are talking to will use.'
nl|'\n'
dedent|''
name|'if'
name|'missing_list'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'missingSet'
op|'='
name|'missing_list'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ManagedObject
dedent|''
dedent|''
dedent|''
name|'class'
name|'ManagedObject'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Managed Object base class."""'
newline|'\n'
DECL|variable|_counter
name|'_counter'
op|'='
number|'0'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'mo_id_prefix'
op|'='
string|'"obj"'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Sets the obj property which acts as a reference to the object."""'
newline|'\n'
name|'object'
op|'.'
name|'__setattr__'
op|'('
name|'self'
op|','
string|"'mo_id'"
op|','
name|'self'
op|'.'
name|'_generate_moid'
op|'('
name|'mo_id_prefix'
op|')'
op|')'
newline|'\n'
name|'object'
op|'.'
name|'__setattr__'
op|'('
name|'self'
op|','
string|"'propSet'"
op|','
op|'['
op|']'
op|')'
newline|'\n'
name|'object'
op|'.'
name|'__setattr__'
op|'('
name|'self'
op|','
string|"'obj'"
op|','
nl|'\n'
name|'ManagedObjectReference'
op|'('
name|'self'
op|'.'
name|'__class__'
op|'.'
name|'__name__'
op|','
nl|'\n'
name|'self'
op|'.'
name|'mo_id'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|set
dedent|''
name|'def'
name|'set'
op|'('
name|'self'
op|','
name|'attr'
op|','
name|'val'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Sets an attribute value. Not using the __setattr__ directly for we\n        want to set attributes of the type \'a.b.c\' and using this function\n        class we set the same.\n        """'
newline|'\n'
name|'self'
op|'.'
name|'__setattr__'
op|'('
name|'attr'
op|','
name|'val'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get
dedent|''
name|'def'
name|'get'
op|'('
name|'self'
op|','
name|'attr'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Gets an attribute. Used as an intermediary to get nested\n        property like \'a.b.c\' value.\n        """'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'__getattr__'
op|'('
name|'attr'
op|')'
newline|'\n'
nl|'\n'
DECL|member|delete
dedent|''
name|'def'
name|'delete'
op|'('
name|'self'
op|','
name|'attr'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Deletes an attribute."""'
newline|'\n'
name|'self'
op|'.'
name|'propSet'
op|'='
name|'filter'
op|'('
name|'lambda'
name|'elem'
op|':'
name|'elem'
op|'.'
name|'name'
op|'!='
name|'attr'
op|','
name|'self'
op|'.'
name|'propSet'
op|')'
newline|'\n'
nl|'\n'
DECL|member|__setattr__
dedent|''
name|'def'
name|'__setattr__'
op|'('
name|'self'
op|','
name|'attr'
op|','
name|'val'
op|')'
op|':'
newline|'\n'
comment|'# TODO(hartsocks): this is adds unnecessary complexity to the class'
nl|'\n'
indent|'        '
name|'for'
name|'prop'
name|'in'
name|'self'
op|'.'
name|'propSet'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'prop'
op|'.'
name|'name'
op|'=='
name|'attr'
op|':'
newline|'\n'
indent|'                '
name|'prop'
op|'.'
name|'val'
op|'='
name|'val'
newline|'\n'
name|'return'
newline|'\n'
dedent|''
dedent|''
name|'elem'
op|'='
name|'Prop'
op|'('
op|')'
newline|'\n'
name|'elem'
op|'.'
name|'name'
op|'='
name|'attr'
newline|'\n'
name|'elem'
op|'.'
name|'val'
op|'='
name|'val'
newline|'\n'
name|'self'
op|'.'
name|'propSet'
op|'.'
name|'append'
op|'('
name|'elem'
op|')'
newline|'\n'
nl|'\n'
DECL|member|__getattr__
dedent|''
name|'def'
name|'__getattr__'
op|'('
name|'self'
op|','
name|'attr'
op|')'
op|':'
newline|'\n'
comment|'# TODO(hartsocks): remove this'
nl|'\n'
comment|'# in a real ManagedObject you have to iterate the propSet'
nl|'\n'
comment|'# in a real ManagedObject, the propSet is a *set* not a list'
nl|'\n'
indent|'        '
name|'for'
name|'elem'
name|'in'
name|'self'
op|'.'
name|'propSet'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'elem'
op|'.'
name|'name'
op|'=='
name|'attr'
op|':'
newline|'\n'
indent|'                '
name|'return'
name|'elem'
op|'.'
name|'val'
newline|'\n'
dedent|''
dedent|''
name|'msg'
op|'='
string|'"Property %(attr)s not set for the managed object %(name)s"'
newline|'\n'
name|'raise'
name|'exception'
op|'.'
name|'NovaException'
op|'('
name|'msg'
op|'%'
op|'{'
string|"'attr'"
op|':'
name|'attr'
op|','
nl|'\n'
string|"'name'"
op|':'
name|'self'
op|'.'
name|'__class__'
op|'.'
name|'__name__'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_generate_moid
dedent|''
name|'def'
name|'_generate_moid'
op|'('
name|'self'
op|','
name|'prefix'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Generates a new Managed Object ID."""'
newline|'\n'
name|'self'
op|'.'
name|'__class__'
op|'.'
name|'_counter'
op|'+='
number|'1'
newline|'\n'
name|'return'
name|'prefix'
op|'+'
string|'"-"'
op|'+'
name|'str'
op|'('
name|'self'
op|'.'
name|'__class__'
op|'.'
name|'_counter'
op|')'
newline|'\n'
nl|'\n'
DECL|member|__repr__
dedent|''
name|'def'
name|'__repr__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'jsonutils'
op|'.'
name|'dumps'
op|'('
op|'{'
name|'elem'
op|'.'
name|'name'
op|':'
name|'elem'
op|'.'
name|'val'
nl|'\n'
name|'for'
name|'elem'
name|'in'
name|'self'
op|'.'
name|'propSet'
op|'}'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|DataObject
dedent|''
dedent|''
name|'class'
name|'DataObject'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Data object base class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'obj_name'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'obj_name'
op|'='
name|'obj_name'
newline|'\n'
nl|'\n'
DECL|member|__repr__
dedent|''
name|'def'
name|'__repr__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'str'
op|'('
name|'self'
op|'.'
name|'__dict__'
op|')'
newline|'\n'
nl|'\n'
DECL|member|__eq__
dedent|''
name|'def'
name|'__eq__'
op|'('
name|'self'
op|','
name|'other'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'__dict__'
op|'=='
name|'other'
op|'.'
name|'__dict__'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|HostInternetScsiHba
dedent|''
dedent|''
name|'class'
name|'HostInternetScsiHba'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""iSCSI Host Bus Adapter."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'iscsi_name'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'HostInternetScsiHba'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'device'
op|'='
string|"'vmhba33'"
newline|'\n'
name|'self'
op|'.'
name|'key'
op|'='
string|"'key-vmhba33'"
newline|'\n'
name|'self'
op|'.'
name|'iScsiName'
op|'='
name|'iscsi_name'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FileAlreadyExists
dedent|''
dedent|''
name|'class'
name|'FileAlreadyExists'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""File already exists class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FileAlreadyExists'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'__name__'
op|'='
name|'vexc'
op|'.'
name|'FILE_ALREADY_EXISTS'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FileNotFound
dedent|''
dedent|''
name|'class'
name|'FileNotFound'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""File not found class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FileNotFound'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'__name__'
op|'='
name|'vexc'
op|'.'
name|'FILE_NOT_FOUND'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FileFault
dedent|''
dedent|''
name|'class'
name|'FileFault'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""File fault."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FileFault'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'__name__'
op|'='
name|'vexc'
op|'.'
name|'FILE_FAULT'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|CannotDeleteFile
dedent|''
dedent|''
name|'class'
name|'CannotDeleteFile'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Cannot delete file."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'CannotDeleteFile'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'__name__'
op|'='
name|'vexc'
op|'.'
name|'CANNOT_DELETE_FILE'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FileLocked
dedent|''
dedent|''
name|'class'
name|'FileLocked'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""File locked."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FileLocked'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'__name__'
op|'='
name|'vexc'
op|'.'
name|'FILE_LOCKED'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualDisk
dedent|''
dedent|''
name|'class'
name|'VirtualDisk'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Virtual Disk class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'controllerKey'
op|'='
number|'0'
op|','
name|'unitNumber'
op|'='
number|'0'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'VirtualDisk'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'key'
op|'='
number|'0'
newline|'\n'
name|'self'
op|'.'
name|'controllerKey'
op|'='
name|'controllerKey'
newline|'\n'
name|'self'
op|'.'
name|'unitNumber'
op|'='
name|'unitNumber'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualDiskFlatVer2BackingInfo
dedent|''
dedent|''
name|'class'
name|'VirtualDiskFlatVer2BackingInfo'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""VirtualDiskFlatVer2BackingInfo class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'VirtualDiskFlatVer2BackingInfo'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'thinProvisioned'
op|'='
name|'False'
newline|'\n'
name|'self'
op|'.'
name|'eagerlyScrub'
op|'='
name|'False'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualDiskRawDiskMappingVer1BackingInfo
dedent|''
dedent|''
name|'class'
name|'VirtualDiskRawDiskMappingVer1BackingInfo'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""VirtualDiskRawDiskMappingVer1BackingInfo class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'VirtualDiskRawDiskMappingVer1BackingInfo'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'lunUuid'
op|'='
string|'""'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualIDEController
dedent|''
dedent|''
name|'class'
name|'VirtualIDEController'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'key'
op|'='
number|'0'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'key'
op|'='
name|'key'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualLsiLogicController
dedent|''
dedent|''
name|'class'
name|'VirtualLsiLogicController'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""VirtualLsiLogicController class."""'
newline|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'key'
op|'='
number|'0'
op|','
name|'scsiCtlrUnitNumber'
op|'='
number|'0'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'key'
op|'='
name|'key'
newline|'\n'
name|'self'
op|'.'
name|'scsiCtlrUnitNumber'
op|'='
name|'scsiCtlrUnitNumber'
newline|'\n'
name|'self'
op|'.'
name|'device'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualLsiLogicSASController
dedent|''
dedent|''
name|'class'
name|'VirtualLsiLogicSASController'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""VirtualLsiLogicSASController class."""'
newline|'\n'
name|'pass'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualPCNet32
dedent|''
name|'class'
name|'VirtualPCNet32'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""VirtualPCNet32 class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'VirtualPCNet32'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'key'
op|'='
number|'4000'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|OptionValue
dedent|''
dedent|''
name|'class'
name|'OptionValue'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""OptionValue class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'key'
op|'='
name|'None'
op|','
name|'value'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'OptionValue'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'key'
op|'='
name|'key'
newline|'\n'
name|'self'
op|'.'
name|'value'
op|'='
name|'value'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|VirtualMachine
dedent|''
dedent|''
name|'class'
name|'VirtualMachine'
op|'('
name|'ManagedObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Virtual Machine class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'VirtualMachine'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
string|'"vm"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"name"'
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"name"'
op|','
string|"'test-vm'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"runtime.connectionState"'
op|','
nl|'\n'
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"conn_state"'
op|','
string|'"connected"'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.config.guestId"'
op|','
nl|'\n'
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"guest"'
op|','
name|'constants'
op|'.'
name|'DEFAULT_OS_TYPE'
op|')'
op|')'
newline|'\n'
name|'ds_do'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"ds"'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"datastore"'
op|','
name|'_convert_to_array_of_mor'
op|'('
name|'ds_do'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.guest.toolsStatus"'
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"toolsstatus"'
op|','
nl|'\n'
string|'"toolsOk"'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.guest.toolsRunningStatus"'
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
nl|'\n'
string|'"toolsrunningstate"'
op|','
string|'"guestToolsRunning"'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"runtime.powerState"'
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"powerstate"'
op|','
string|'"poweredOn"'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.files.vmPathName"'
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"vmPathName"'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.config.numCpu"'
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"numCpu"'
op|','
number|'1'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.config.memorySizeMB"'
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"mem"'
op|','
number|'1'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.config.instanceUuid"'
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"instanceUuid"'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"version"'
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"version"'
op|')'
op|')'
newline|'\n'
nl|'\n'
name|'devices'
op|'='
name|'_create_array_of_type'
op|'('
string|"'VirtualDevice'"
op|')'
newline|'\n'
name|'devices'
op|'.'
name|'VirtualDevice'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"virtual_device"'
op|','
op|'['
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.hardware.device"'
op|','
name|'devices'
op|')'
newline|'\n'
nl|'\n'
name|'exconfig_do'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"extra_config"'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.extraConfig"'
op|','
nl|'\n'
name|'_convert_to_array_of_opt_val'
op|'('
name|'exconfig_do'
op|')'
op|')'
newline|'\n'
name|'if'
name|'exconfig_do'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'optval'
name|'in'
name|'exconfig_do'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'set'
op|'('
string|'\'config.extraConfig["%s"]\''
op|'%'
name|'optval'
op|'.'
name|'key'
op|','
name|'optval'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'self'
op|'.'
name|'set'
op|'('
string|"'runtime.host'"
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"runtime_host"'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'device'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"virtual_device"'
op|','
op|'['
op|']'
op|')'
newline|'\n'
comment|'# Sample of diagnostics data is below.'
nl|'\n'
name|'config'
op|'='
op|'['
nl|'\n'
op|'('
string|"'template'"
op|','
name|'False'
op|')'
op|','
nl|'\n'
op|'('
string|"'vmPathName'"
op|','
string|"'fake_path'"
op|')'
op|','
nl|'\n'
op|'('
string|"'memorySizeMB'"
op|','
number|'512'
op|')'
op|','
nl|'\n'
op|'('
string|"'cpuReservation'"
op|','
number|'0'
op|')'
op|','
nl|'\n'
op|'('
string|"'memoryReservation'"
op|','
number|'0'
op|')'
op|','
nl|'\n'
op|'('
string|"'numCpu'"
op|','
number|'1'
op|')'
op|','
nl|'\n'
op|'('
string|"'numEthernetCards'"
op|','
number|'1'
op|')'
op|','
nl|'\n'
op|'('
string|"'numVirtualDisks'"
op|','
number|'1'
op|')'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.config"'
op|','
name|'config'
op|')'
newline|'\n'
nl|'\n'
name|'quickStats'
op|'='
op|'['
nl|'\n'
op|'('
string|"'overallCpuUsage'"
op|','
number|'0'
op|')'
op|','
nl|'\n'
op|'('
string|"'overallCpuDemand'"
op|','
number|'0'
op|')'
op|','
nl|'\n'
op|'('
string|"'guestMemoryUsage'"
op|','
number|'0'
op|')'
op|','
nl|'\n'
op|'('
string|"'hostMemoryUsage'"
op|','
number|'141'
op|')'
op|','
nl|'\n'
op|'('
string|"'balloonedMemory'"
op|','
number|'0'
op|')'
op|','
nl|'\n'
op|'('
string|"'consumedOverheadMemory'"
op|','
number|'20'
op|')'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.quickStats"'
op|','
name|'quickStats'
op|')'
newline|'\n'
nl|'\n'
name|'key1'
op|'='
op|'{'
string|"'key'"
op|':'
string|"'cpuid.AES'"
op|'}'
newline|'\n'
name|'key2'
op|'='
op|'{'
string|"'key'"
op|':'
string|"'cpuid.AVX'"
op|'}'
newline|'\n'
name|'runtime'
op|'='
op|'['
nl|'\n'
op|'('
string|"'connectionState'"
op|','
string|"'connected'"
op|')'
op|','
nl|'\n'
op|'('
string|"'powerState'"
op|','
string|"'poweredOn'"
op|')'
op|','
nl|'\n'
op|'('
string|"'toolsInstallerMounted'"
op|','
name|'False'
op|')'
op|','
nl|'\n'
op|'('
string|"'suspendInterval'"
op|','
number|'0'
op|')'
op|','
nl|'\n'
op|'('
string|"'memoryOverhead'"
op|','
number|'21417984'
op|')'
op|','
nl|'\n'
op|'('
string|"'maxCpuUsage'"
op|','
number|'2000'
op|')'
op|','
nl|'\n'
op|'('
string|"'featureRequirement'"
op|','
op|'['
name|'key1'
op|','
name|'key2'
op|']'
op|')'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.runtime"'
op|','
name|'runtime'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_update_extra_config
dedent|''
name|'def'
name|'_update_extra_config'
op|'('
name|'self'
op|','
name|'extra'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'extra_config'
op|'='
name|'self'
op|'.'
name|'get'
op|'('
string|'"config.extraConfig"'
op|')'
newline|'\n'
name|'values'
op|'='
name|'extra_config'
op|'.'
name|'OptionValue'
newline|'\n'
name|'for'
name|'value'
name|'in'
name|'values'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'value'
op|'.'
name|'key'
op|'=='
name|'extra'
op|'.'
name|'key'
op|':'
newline|'\n'
indent|'                '
name|'value'
op|'.'
name|'value'
op|'='
name|'extra'
op|'.'
name|'value'
newline|'\n'
name|'return'
newline|'\n'
dedent|''
dedent|''
name|'kv'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'kv'
op|'.'
name|'key'
op|'='
name|'extra'
op|'.'
name|'key'
newline|'\n'
name|'kv'
op|'.'
name|'value'
op|'='
name|'extra'
op|'.'
name|'value'
newline|'\n'
name|'extra_config'
op|'.'
name|'OptionValue'
op|'.'
name|'append'
op|'('
name|'kv'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.extraConfig"'
op|','
name|'extra_config'
op|')'
newline|'\n'
name|'extra_config'
op|'='
name|'self'
op|'.'
name|'get'
op|'('
string|'"config.extraConfig"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|reconfig
dedent|''
name|'def'
name|'reconfig'
op|'('
name|'self'
op|','
name|'factory'
op|','
name|'val'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Called to reconfigure the VM. Actually customizes the property\n        setting of the Virtual Machine object.\n        """'
newline|'\n'
nl|'\n'
name|'if'
name|'hasattr'
op|'('
name|'val'
op|','
string|"'name'"
op|')'
name|'and'
name|'val'
op|'.'
name|'name'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'set'
op|'('
string|'"name"'
op|','
name|'val'
op|'.'
name|'name'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'hasattr'
op|'('
name|'val'
op|','
string|"'extraConfig'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'extraConfigs'
op|'='
name|'_merge_extraconfig'
op|'('
nl|'\n'
name|'self'
op|'.'
name|'get'
op|'('
string|'"config.extraConfig"'
op|')'
op|'.'
name|'OptionValue'
op|','
nl|'\n'
name|'val'
op|'.'
name|'extraConfig'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'get'
op|'('
string|'"config.extraConfig"'
op|')'
op|'.'
name|'OptionValue'
op|'='
name|'extraConfigs'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'hasattr'
op|'('
name|'val'
op|','
string|"'instanceUuid'"
op|')'
name|'and'
name|'val'
op|'.'
name|'instanceUuid'
name|'is'
name|'not'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'val'
op|'.'
name|'instanceUuid'
op|'=='
string|'""'
op|':'
newline|'\n'
indent|'                '
name|'val'
op|'.'
name|'instanceUuid'
op|'='
name|'uuidutils'
op|'.'
name|'generate_uuid'
op|'('
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.config.instanceUuid"'
op|','
name|'val'
op|'.'
name|'instanceUuid'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'hasattr'
op|'('
name|'val'
op|','
string|"'deviceChange'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'return'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'hasattr'
op|'('
name|'val'
op|','
string|"'extraConfig'"
op|')'
op|':'
newline|'\n'
comment|'# there are 2 cases - new entry or update an existing one'
nl|'\n'
indent|'                '
name|'for'
name|'extra'
name|'in'
name|'val'
op|'.'
name|'extraConfig'
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'_update_extra_config'
op|'('
name|'extra'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'len'
op|'('
name|'val'
op|'.'
name|'deviceChange'
op|')'
op|'<'
number|'2'
op|':'
newline|'\n'
indent|'                '
name|'return'
newline|'\n'
nl|'\n'
comment|'# Case of Reconfig of VM to attach disk'
nl|'\n'
dedent|''
name|'controller_key'
op|'='
name|'val'
op|'.'
name|'deviceChange'
op|'['
number|'0'
op|']'
op|'.'
name|'device'
op|'.'
name|'controllerKey'
newline|'\n'
name|'filename'
op|'='
name|'val'
op|'.'
name|'deviceChange'
op|'['
number|'0'
op|']'
op|'.'
name|'device'
op|'.'
name|'backing'
op|'.'
name|'fileName'
newline|'\n'
nl|'\n'
name|'disk'
op|'='
name|'VirtualDisk'
op|'('
op|')'
newline|'\n'
name|'disk'
op|'.'
name|'controllerKey'
op|'='
name|'controller_key'
newline|'\n'
nl|'\n'
name|'disk_backing'
op|'='
name|'VirtualDiskFlatVer2BackingInfo'
op|'('
op|')'
newline|'\n'
name|'disk_backing'
op|'.'
name|'fileName'
op|'='
name|'filename'
newline|'\n'
name|'disk_backing'
op|'.'
name|'key'
op|'='
op|'-'
number|'101'
newline|'\n'
name|'disk'
op|'.'
name|'backing'
op|'='
name|'disk_backing'
newline|'\n'
name|'disk'
op|'.'
name|'capacityInBytes'
op|'='
number|'1024'
newline|'\n'
name|'disk'
op|'.'
name|'capacityInKB'
op|'='
number|'1'
newline|'\n'
nl|'\n'
name|'controller'
op|'='
name|'VirtualLsiLogicController'
op|'('
op|')'
newline|'\n'
name|'controller'
op|'.'
name|'key'
op|'='
name|'controller_key'
newline|'\n'
nl|'\n'
name|'devices'
op|'='
name|'_create_array_of_type'
op|'('
string|"'VirtualDevice'"
op|')'
newline|'\n'
name|'devices'
op|'.'
name|'VirtualDevice'
op|'='
op|'['
name|'disk'
op|','
name|'controller'
op|','
name|'self'
op|'.'
name|'device'
op|'['
number|'0'
op|']'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.hardware.device"'
op|','
name|'devices'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'AttributeError'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Network
dedent|''
dedent|''
dedent|''
name|'class'
name|'Network'
op|'('
name|'ManagedObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Network class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'Network'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
string|'"network"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.name"'
op|','
string|'"vmnet0"'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ResourcePool
dedent|''
dedent|''
name|'class'
name|'ResourcePool'
op|'('
name|'ManagedObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Resource Pool class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'name'
op|'='
string|'"test_ResPool"'
op|','
name|'value'
op|'='
string|'"resgroup-test"'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'ResourcePool'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
string|'"rp"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"name"'
op|','
name|'name'
op|')'
newline|'\n'
name|'summary'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'runtime'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'config'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'memory'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'cpu'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'memoryAllocation'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'cpuAllocation'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'vm_list'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'memory'
op|'.'
name|'maxUsage'
op|'='
number|'1000'
op|'*'
name|'units'
op|'.'
name|'Mi'
newline|'\n'
name|'memory'
op|'.'
name|'overallUsage'
op|'='
number|'500'
op|'*'
name|'units'
op|'.'
name|'Mi'
newline|'\n'
name|'cpu'
op|'.'
name|'maxUsage'
op|'='
number|'10000'
newline|'\n'
name|'cpu'
op|'.'
name|'overallUsage'
op|'='
number|'1000'
newline|'\n'
name|'runtime'
op|'.'
name|'cpu'
op|'='
name|'cpu'
newline|'\n'
name|'runtime'
op|'.'
name|'memory'
op|'='
name|'memory'
newline|'\n'
name|'summary'
op|'.'
name|'runtime'
op|'='
name|'runtime'
newline|'\n'
name|'cpuAllocation'
op|'.'
name|'limit'
op|'='
number|'10000'
newline|'\n'
name|'memoryAllocation'
op|'.'
name|'limit'
op|'='
number|'1024'
newline|'\n'
name|'memoryAllocation'
op|'.'
name|'reservation'
op|'='
number|'1024'
newline|'\n'
name|'config'
op|'.'
name|'memoryAllocation'
op|'='
name|'memoryAllocation'
newline|'\n'
name|'config'
op|'.'
name|'cpuAllocation'
op|'='
name|'cpuAllocation'
newline|'\n'
name|'vm_list'
op|'.'
name|'ManagedObjectReference'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary"'
op|','
name|'summary'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.runtime.memory"'
op|','
name|'memory'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config"'
op|','
name|'config'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"vm"'
op|','
name|'vm_list'
op|')'
newline|'\n'
name|'parent'
op|'='
name|'ManagedObjectReference'
op|'('
name|'value'
op|'='
name|'value'
op|','
nl|'\n'
name|'name'
op|'='
name|'name'
op|')'
newline|'\n'
name|'owner'
op|'='
name|'ManagedObjectReference'
op|'('
name|'value'
op|'='
name|'value'
op|','
nl|'\n'
name|'name'
op|'='
name|'name'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"parent"'
op|','
name|'parent'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"owner"'
op|','
name|'owner'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|DatastoreHostMount
dedent|''
dedent|''
name|'class'
name|'DatastoreHostMount'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'value'
op|'='
string|"'host-100'"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'DatastoreHostMount'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'host_ref'
op|'='
op|'('
name|'_db_content'
op|'['
string|'"HostSystem"'
op|']'
nl|'\n'
op|'['
name|'_db_content'
op|'['
string|'"HostSystem"'
op|']'
op|'.'
name|'keys'
op|'('
op|')'
op|'['
number|'0'
op|']'
op|']'
op|'.'
name|'obj'
op|')'
newline|'\n'
name|'host_system'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'host_system'
op|'.'
name|'ManagedObjectReference'
op|'='
op|'['
name|'host_ref'
op|']'
newline|'\n'
name|'host_system'
op|'.'
name|'value'
op|'='
name|'value'
newline|'\n'
name|'self'
op|'.'
name|'key'
op|'='
name|'host_system'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ClusterComputeResource
dedent|''
dedent|''
name|'class'
name|'ClusterComputeResource'
op|'('
name|'ManagedObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Cluster class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'name'
op|'='
string|'"test_cluster"'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'ClusterComputeResource'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
string|'"domain"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"name"'
op|','
name|'name'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"host"'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"datastore"'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"resourcePool"'
op|','
name|'None'
op|')'
newline|'\n'
nl|'\n'
name|'summary'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'summary'
op|'.'
name|'numHosts'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'numCpuCores'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'numCpuThreads'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'numEffectiveHosts'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'totalMemory'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'effectiveMemory'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'effectiveCpu'
op|'='
number|'10000'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary"'
op|','
name|'summary'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_add_root_resource_pool
dedent|''
name|'def'
name|'_add_root_resource_pool'
op|'('
name|'self'
op|','
name|'r_pool'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'r_pool'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'set'
op|'('
string|'"resourcePool"'
op|','
name|'r_pool'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_add_host
dedent|''
dedent|''
name|'def'
name|'_add_host'
op|'('
name|'self'
op|','
name|'host_sys'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'host_sys'
op|':'
newline|'\n'
indent|'            '
name|'hosts'
op|'='
name|'self'
op|'.'
name|'get'
op|'('
string|'"host"'
op|')'
newline|'\n'
name|'if'
name|'hosts'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'                '
name|'hosts'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'hosts'
op|'.'
name|'ManagedObjectReference'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"host"'
op|','
name|'hosts'
op|')'
newline|'\n'
dedent|''
name|'hosts'
op|'.'
name|'ManagedObjectReference'
op|'.'
name|'append'
op|'('
name|'host_sys'
op|')'
newline|'\n'
comment|'# Update summary every time a new host is added'
nl|'\n'
name|'self'
op|'.'
name|'_update_summary'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_add_datastore
dedent|''
dedent|''
name|'def'
name|'_add_datastore'
op|'('
name|'self'
op|','
name|'datastore'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'datastore'
op|':'
newline|'\n'
indent|'            '
name|'datastores'
op|'='
name|'self'
op|'.'
name|'get'
op|'('
string|'"datastore"'
op|')'
newline|'\n'
name|'if'
name|'datastores'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'                '
name|'datastores'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'datastores'
op|'.'
name|'ManagedObjectReference'
op|'='
op|'['
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"datastore"'
op|','
name|'datastores'
op|')'
newline|'\n'
dedent|''
name|'datastores'
op|'.'
name|'ManagedObjectReference'
op|'.'
name|'append'
op|'('
name|'datastore'
op|')'
newline|'\n'
nl|'\n'
comment|'# Method to update summary of a cluster upon host addition'
nl|'\n'
DECL|member|_update_summary
dedent|''
dedent|''
name|'def'
name|'_update_summary'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'summary'
op|'='
name|'self'
op|'.'
name|'get'
op|'('
string|'"summary"'
op|')'
newline|'\n'
name|'summary'
op|'.'
name|'numHosts'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'numCpuCores'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'numCpuThreads'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'numEffectiveHosts'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'totalMemory'
op|'='
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'effectiveMemory'
op|'='
number|'0'
newline|'\n'
nl|'\n'
name|'hosts'
op|'='
name|'self'
op|'.'
name|'get'
op|'('
string|'"host"'
op|')'
newline|'\n'
comment|'# Compute the aggregate stats'
nl|'\n'
name|'summary'
op|'.'
name|'numHosts'
op|'='
name|'len'
op|'('
name|'hosts'
op|'.'
name|'ManagedObjectReference'
op|')'
newline|'\n'
name|'for'
name|'host_ref'
name|'in'
name|'hosts'
op|'.'
name|'ManagedObjectReference'
op|':'
newline|'\n'
indent|'            '
name|'host_sys'
op|'='
name|'_get_object'
op|'('
name|'host_ref'
op|')'
newline|'\n'
name|'connected'
op|'='
name|'host_sys'
op|'.'
name|'get'
op|'('
string|'"connected"'
op|')'
newline|'\n'
name|'host_summary'
op|'='
name|'host_sys'
op|'.'
name|'get'
op|'('
string|'"summary"'
op|')'
newline|'\n'
name|'summary'
op|'.'
name|'numCpuCores'
op|'+='
name|'host_summary'
op|'.'
name|'hardware'
op|'.'
name|'numCpuCores'
newline|'\n'
name|'summary'
op|'.'
name|'numCpuThreads'
op|'+='
name|'host_summary'
op|'.'
name|'hardware'
op|'.'
name|'numCpuThreads'
newline|'\n'
name|'summary'
op|'.'
name|'totalMemory'
op|'+='
name|'host_summary'
op|'.'
name|'hardware'
op|'.'
name|'memorySize'
newline|'\n'
name|'free_memory'
op|'='
op|'('
name|'host_summary'
op|'.'
name|'hardware'
op|'.'
name|'memorySize'
op|'/'
name|'units'
op|'.'
name|'Mi'
nl|'\n'
op|'-'
name|'host_summary'
op|'.'
name|'quickStats'
op|'.'
name|'overallMemoryUsage'
op|')'
newline|'\n'
name|'summary'
op|'.'
name|'effectiveMemory'
op|'+='
name|'free_memory'
name|'if'
name|'connected'
name|'else'
number|'0'
newline|'\n'
name|'summary'
op|'.'
name|'numEffectiveHosts'
op|'+='
number|'1'
name|'if'
name|'connected'
name|'else'
number|'0'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary"'
op|','
name|'summary'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Datastore
dedent|''
dedent|''
name|'class'
name|'Datastore'
op|'('
name|'ManagedObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Datastore class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'name'
op|'='
string|'"fake-ds"'
op|','
name|'capacity'
op|'='
number|'1024'
op|','
name|'free'
op|'='
number|'500'
op|','
nl|'\n'
name|'accessible'
op|'='
name|'True'
op|','
name|'maintenance_mode'
op|'='
string|'"normal"'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'Datastore'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
string|'"ds"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.type"'
op|','
string|'"VMFS"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.name"'
op|','
name|'name'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.capacity"'
op|','
name|'capacity'
op|'*'
name|'units'
op|'.'
name|'Gi'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.freeSpace"'
op|','
name|'free'
op|'*'
name|'units'
op|'.'
name|'Gi'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.accessible"'
op|','
name|'accessible'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.maintenanceMode"'
op|','
name|'maintenance_mode'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"browser"'
op|','
string|'""'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|HostNetworkSystem
dedent|''
dedent|''
name|'class'
name|'HostNetworkSystem'
op|'('
name|'ManagedObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""HostNetworkSystem class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'name'
op|'='
string|'"networkSystem"'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'HostNetworkSystem'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
string|'"ns"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"name"'
op|','
name|'name'
op|')'
newline|'\n'
nl|'\n'
name|'pnic_do'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'pnic_do'
op|'.'
name|'device'
op|'='
string|'"vmnic0"'
newline|'\n'
nl|'\n'
name|'net_info_pnic'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'net_info_pnic'
op|'.'
name|'PhysicalNic'
op|'='
op|'['
name|'pnic_do'
op|']'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"networkInfo.pnic"'
op|','
name|'net_info_pnic'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|HostStorageSystem
dedent|''
dedent|''
name|'class'
name|'HostStorageSystem'
op|'('
name|'ManagedObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""HostStorageSystem class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'HostStorageSystem'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
string|'"storageSystem"'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|HostSystem
dedent|''
dedent|''
name|'class'
name|'HostSystem'
op|'('
name|'ManagedObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Host System class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'name'
op|'='
string|'"ha-host"'
op|','
name|'connected'
op|'='
name|'True'
op|','
name|'ds_ref'
op|'='
name|'None'
op|','
nl|'\n'
name|'maintenance_mode'
op|'='
name|'False'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'HostSystem'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
string|'"host"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"name"'
op|','
name|'name'
op|')'
newline|'\n'
name|'if'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"HostNetworkSystem"'
op|','
name|'None'
op|')'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'create_host_network_system'
op|'('
op|')'
newline|'\n'
dedent|''
name|'if'
name|'not'
name|'_get_object_refs'
op|'('
string|"'HostStorageSystem'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'create_host_storage_system'
op|'('
op|')'
newline|'\n'
dedent|''
name|'host_net_key'
op|'='
name|'_db_content'
op|'['
string|'"HostNetworkSystem"'
op|']'
op|'.'
name|'keys'
op|'('
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'host_net_sys'
op|'='
name|'_db_content'
op|'['
string|'"HostNetworkSystem"'
op|']'
op|'['
name|'host_net_key'
op|']'
op|'.'
name|'obj'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"configManager.networkSystem"'
op|','
name|'host_net_sys'
op|')'
newline|'\n'
name|'host_storage_sys_key'
op|'='
name|'_get_object_refs'
op|'('
string|"'HostStorageSystem'"
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"configManager.storageSystem"'
op|','
name|'host_storage_sys_key'
op|')'
newline|'\n'
nl|'\n'
name|'if'
name|'not'
name|'ds_ref'
op|':'
newline|'\n'
indent|'            '
name|'ds_ref'
op|'='
name|'create_datastore'
op|'('
string|"'local-host-%s'"
op|'%'
name|'name'
op|','
number|'500'
op|','
number|'500'
op|')'
newline|'\n'
dedent|''
name|'datastores'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'datastores'
op|'.'
name|'ManagedObjectReference'
op|'='
op|'['
name|'ds_ref'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"datastore"'
op|','
name|'datastores'
op|')'
newline|'\n'
nl|'\n'
name|'summary'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'hardware'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'hardware'
op|'.'
name|'numCpuCores'
op|'='
number|'8'
newline|'\n'
name|'hardware'
op|'.'
name|'numCpuPkgs'
op|'='
number|'2'
newline|'\n'
name|'hardware'
op|'.'
name|'numCpuThreads'
op|'='
number|'16'
newline|'\n'
name|'hardware'
op|'.'
name|'vendor'
op|'='
string|'"Intel"'
newline|'\n'
name|'hardware'
op|'.'
name|'cpuModel'
op|'='
string|'"Intel(R) Xeon(R)"'
newline|'\n'
name|'hardware'
op|'.'
name|'uuid'
op|'='
string|'"host-uuid"'
newline|'\n'
name|'hardware'
op|'.'
name|'memorySize'
op|'='
name|'units'
op|'.'
name|'Gi'
newline|'\n'
name|'summary'
op|'.'
name|'hardware'
op|'='
name|'hardware'
newline|'\n'
nl|'\n'
name|'runtime'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'if'
name|'connected'
op|':'
newline|'\n'
indent|'            '
name|'runtime'
op|'.'
name|'connectionState'
op|'='
string|'"connected"'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'runtime'
op|'.'
name|'connectionState'
op|'='
string|'"disconnected"'
newline|'\n'
nl|'\n'
dedent|''
name|'runtime'
op|'.'
name|'inMaintenanceMode'
op|'='
name|'maintenance_mode'
newline|'\n'
nl|'\n'
name|'summary'
op|'.'
name|'runtime'
op|'='
name|'runtime'
newline|'\n'
nl|'\n'
name|'quickstats'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'quickstats'
op|'.'
name|'overallMemoryUsage'
op|'='
number|'500'
newline|'\n'
name|'summary'
op|'.'
name|'quickStats'
op|'='
name|'quickstats'
newline|'\n'
nl|'\n'
name|'product'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'product'
op|'.'
name|'name'
op|'='
string|'"VMware ESXi"'
newline|'\n'
name|'product'
op|'.'
name|'version'
op|'='
name|'constants'
op|'.'
name|'MIN_VC_VERSION'
newline|'\n'
name|'config'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'config'
op|'.'
name|'product'
op|'='
name|'product'
newline|'\n'
name|'summary'
op|'.'
name|'config'
op|'='
name|'config'
newline|'\n'
nl|'\n'
name|'pnic_do'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'pnic_do'
op|'.'
name|'device'
op|'='
string|'"vmnic0"'
newline|'\n'
name|'net_info_pnic'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'net_info_pnic'
op|'.'
name|'PhysicalNic'
op|'='
op|'['
name|'pnic_do'
op|']'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary"'
op|','
name|'summary'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"capability.maxHostSupportedVcpus"'
op|','
number|'600'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.hardware"'
op|','
name|'hardware'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"summary.runtime"'
op|','
name|'runtime'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.network.pnic"'
op|','
name|'net_info_pnic'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"connected"'
op|','
name|'connected'
op|')'
newline|'\n'
nl|'\n'
name|'if'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"Network"'
op|','
name|'None'
op|')'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'create_network'
op|'('
op|')'
newline|'\n'
dedent|''
name|'net_ref'
op|'='
name|'_db_content'
op|'['
string|'"Network"'
op|']'
op|'['
name|'_db_content'
op|'['
string|'"Network"'
op|']'
op|'.'
name|'keys'
op|'('
op|')'
op|'['
number|'0'
op|']'
op|']'
op|'.'
name|'obj'
newline|'\n'
name|'network_do'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'network_do'
op|'.'
name|'ManagedObjectReference'
op|'='
op|'['
name|'net_ref'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"network"'
op|','
name|'network_do'
op|')'
newline|'\n'
nl|'\n'
name|'vswitch_do'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'vswitch_do'
op|'.'
name|'pnic'
op|'='
op|'['
string|'"vmnic0"'
op|']'
newline|'\n'
name|'vswitch_do'
op|'.'
name|'name'
op|'='
string|'"vSwitch0"'
newline|'\n'
name|'vswitch_do'
op|'.'
name|'portgroup'
op|'='
op|'['
string|'"PortGroup-vmnet0"'
op|']'
newline|'\n'
nl|'\n'
name|'net_swicth'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'net_swicth'
op|'.'
name|'HostVirtualSwitch'
op|'='
op|'['
name|'vswitch_do'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.network.vswitch"'
op|','
name|'net_swicth'
op|')'
newline|'\n'
nl|'\n'
name|'host_pg_do'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'host_pg_do'
op|'.'
name|'key'
op|'='
string|'"PortGroup-vmnet0"'
newline|'\n'
nl|'\n'
name|'pg_spec'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'pg_spec'
op|'.'
name|'vlanId'
op|'='
number|'0'
newline|'\n'
name|'pg_spec'
op|'.'
name|'name'
op|'='
string|'"vmnet0"'
newline|'\n'
nl|'\n'
name|'host_pg_do'
op|'.'
name|'spec'
op|'='
name|'pg_spec'
newline|'\n'
nl|'\n'
name|'host_pg'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'host_pg'
op|'.'
name|'HostPortGroup'
op|'='
op|'['
name|'host_pg_do'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.network.portgroup"'
op|','
name|'host_pg'
op|')'
newline|'\n'
nl|'\n'
name|'config'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'storageDevice'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'iscsi_hba'
op|'='
name|'HostInternetScsiHba'
op|'('
op|')'
newline|'\n'
name|'iscsi_hba'
op|'.'
name|'iScsiName'
op|'='
string|'"iscsi-name"'
newline|'\n'
name|'host_bus_adapter_array'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'host_bus_adapter_array'
op|'.'
name|'HostHostBusAdapter'
op|'='
op|'['
name|'iscsi_hba'
op|']'
newline|'\n'
name|'storageDevice'
op|'.'
name|'hostBusAdapter'
op|'='
name|'host_bus_adapter_array'
newline|'\n'
name|'config'
op|'.'
name|'storageDevice'
op|'='
name|'storageDevice'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.storageDevice.hostBusAdapter"'
op|','
name|'host_bus_adapter_array'
op|')'
newline|'\n'
nl|'\n'
comment|'# Set the same on the storage system managed object'
nl|'\n'
name|'host_storage_sys'
op|'='
name|'_get_object'
op|'('
name|'host_storage_sys_key'
op|')'
newline|'\n'
name|'host_storage_sys'
op|'.'
name|'set'
op|'('
string|"'storageDeviceInfo.hostBusAdapter'"
op|','
nl|'\n'
name|'host_bus_adapter_array'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_add_iscsi_target
dedent|''
name|'def'
name|'_add_iscsi_target'
op|'('
name|'self'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'default_lun'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'default_lun'
op|'.'
name|'scsiLun'
op|'='
string|"'key-vim.host.ScsiDisk-010'"
newline|'\n'
name|'default_lun'
op|'.'
name|'key'
op|'='
string|"'key-vim.host.ScsiDisk-010'"
newline|'\n'
name|'default_lun'
op|'.'
name|'deviceName'
op|'='
string|"'fake-device'"
newline|'\n'
name|'default_lun'
op|'.'
name|'uuid'
op|'='
string|"'fake-uuid'"
newline|'\n'
name|'scsi_lun_array'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'scsi_lun_array'
op|'.'
name|'ScsiLun'
op|'='
op|'['
name|'default_lun'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.storageDevice.scsiLun"'
op|','
name|'scsi_lun_array'
op|')'
newline|'\n'
nl|'\n'
name|'transport'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'transport'
op|'.'
name|'address'
op|'='
op|'['
name|'data'
op|'['
string|"'target_portal'"
op|']'
op|']'
newline|'\n'
name|'transport'
op|'.'
name|'iScsiName'
op|'='
name|'data'
op|'['
string|"'target_iqn'"
op|']'
newline|'\n'
name|'default_target'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'default_target'
op|'.'
name|'lun'
op|'='
op|'['
name|'default_lun'
op|']'
newline|'\n'
name|'default_target'
op|'.'
name|'transport'
op|'='
name|'transport'
newline|'\n'
nl|'\n'
name|'iscsi_adapter'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'iscsi_adapter'
op|'.'
name|'adapter'
op|'='
string|"'key-vmhba33'"
newline|'\n'
name|'iscsi_adapter'
op|'.'
name|'transport'
op|'='
name|'transport'
newline|'\n'
name|'iscsi_adapter'
op|'.'
name|'target'
op|'='
op|'['
name|'default_target'
op|']'
newline|'\n'
name|'iscsi_topology'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'iscsi_topology'
op|'.'
name|'adapter'
op|'='
op|'['
name|'iscsi_adapter'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"config.storageDevice.scsiTopology"'
op|','
name|'iscsi_topology'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_add_port_group
dedent|''
name|'def'
name|'_add_port_group'
op|'('
name|'self'
op|','
name|'spec'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Adds a port group to the host system object in the db."""'
newline|'\n'
name|'pg_name'
op|'='
name|'spec'
op|'.'
name|'name'
newline|'\n'
name|'vswitch_name'
op|'='
name|'spec'
op|'.'
name|'vswitchName'
newline|'\n'
name|'vlanid'
op|'='
name|'spec'
op|'.'
name|'vlanId'
newline|'\n'
nl|'\n'
name|'vswitch_do'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'vswitch_do'
op|'.'
name|'pnic'
op|'='
op|'['
string|'"vmnic0"'
op|']'
newline|'\n'
name|'vswitch_do'
op|'.'
name|'name'
op|'='
name|'vswitch_name'
newline|'\n'
name|'vswitch_do'
op|'.'
name|'portgroup'
op|'='
op|'['
string|'"PortGroup-%s"'
op|'%'
name|'pg_name'
op|']'
newline|'\n'
nl|'\n'
name|'vswitches'
op|'='
name|'self'
op|'.'
name|'get'
op|'('
string|'"config.network.vswitch"'
op|')'
op|'.'
name|'HostVirtualSwitch'
newline|'\n'
name|'vswitches'
op|'.'
name|'append'
op|'('
name|'vswitch_do'
op|')'
newline|'\n'
nl|'\n'
name|'host_pg_do'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'host_pg_do'
op|'.'
name|'key'
op|'='
string|'"PortGroup-%s"'
op|'%'
name|'pg_name'
newline|'\n'
nl|'\n'
name|'pg_spec'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'pg_spec'
op|'.'
name|'vlanId'
op|'='
name|'vlanid'
newline|'\n'
name|'pg_spec'
op|'.'
name|'name'
op|'='
name|'pg_name'
newline|'\n'
nl|'\n'
name|'host_pg_do'
op|'.'
name|'spec'
op|'='
name|'pg_spec'
newline|'\n'
name|'host_pgrps'
op|'='
name|'self'
op|'.'
name|'get'
op|'('
string|'"config.network.portgroup"'
op|')'
op|'.'
name|'HostPortGroup'
newline|'\n'
name|'host_pgrps'
op|'.'
name|'append'
op|'('
name|'host_pg_do'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Datacenter
dedent|''
dedent|''
name|'class'
name|'Datacenter'
op|'('
name|'ManagedObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Datacenter class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'name'
op|'='
string|'"ha-datacenter"'
op|','
name|'ds_ref'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'Datacenter'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
string|'"dc"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"name"'
op|','
name|'name'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"vmFolder"'
op|','
string|'"vm_folder_ref"'
op|')'
newline|'\n'
name|'if'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"Network"'
op|','
name|'None'
op|')'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'create_network'
op|'('
op|')'
newline|'\n'
dedent|''
name|'net_ref'
op|'='
name|'_db_content'
op|'['
string|'"Network"'
op|']'
op|'['
name|'_db_content'
op|'['
string|'"Network"'
op|']'
op|'.'
name|'keys'
op|'('
op|')'
op|'['
number|'0'
op|']'
op|']'
op|'.'
name|'obj'
newline|'\n'
name|'network_do'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'network_do'
op|'.'
name|'ManagedObjectReference'
op|'='
op|'['
name|'net_ref'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"network"'
op|','
name|'network_do'
op|')'
newline|'\n'
name|'if'
name|'ds_ref'
op|':'
newline|'\n'
indent|'            '
name|'datastore'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'datastore'
op|'.'
name|'ManagedObjectReference'
op|'='
op|'['
name|'ds_ref'
op|']'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'datastore'
op|'='
name|'None'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'set'
op|'('
string|'"datastore"'
op|','
name|'datastore'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Task
dedent|''
dedent|''
name|'class'
name|'Task'
op|'('
name|'ManagedObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Task class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'task_name'
op|','
name|'state'
op|'='
string|'"running"'
op|','
name|'result'
op|'='
name|'None'
op|','
nl|'\n'
name|'error_fault'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'Task'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
string|'"Task"'
op|')'
newline|'\n'
name|'info'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'info'
op|'.'
name|'name'
op|'='
name|'task_name'
newline|'\n'
name|'info'
op|'.'
name|'state'
op|'='
name|'state'
newline|'\n'
name|'if'
name|'state'
op|'=='
string|"'error'"
op|':'
newline|'\n'
indent|'            '
name|'error'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'error'
op|'.'
name|'localizedMessage'
op|'='
string|'"Error message"'
newline|'\n'
name|'if'
name|'not'
name|'error_fault'
op|':'
newline|'\n'
indent|'                '
name|'error'
op|'.'
name|'fault'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'error'
op|'.'
name|'fault'
op|'='
name|'error_fault'
newline|'\n'
dedent|''
name|'info'
op|'.'
name|'error'
op|'='
name|'error'
newline|'\n'
dedent|''
name|'info'
op|'.'
name|'result'
op|'='
name|'result'
newline|'\n'
name|'self'
op|'.'
name|'set'
op|'('
string|'"info"'
op|','
name|'info'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|create_host_network_system
dedent|''
dedent|''
name|'def'
name|'create_host_network_system'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'host_net_system'
op|'='
name|'HostNetworkSystem'
op|'('
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|'"HostNetworkSystem"'
op|','
name|'host_net_system'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|create_host_storage_system
dedent|''
name|'def'
name|'create_host_storage_system'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'host_storage_system'
op|'='
name|'HostStorageSystem'
op|'('
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|'"HostStorageSystem"'
op|','
name|'host_storage_system'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|create_host
dedent|''
name|'def'
name|'create_host'
op|'('
name|'ds_ref'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'host_system'
op|'='
name|'HostSystem'
op|'('
name|'ds_ref'
op|'='
name|'ds_ref'
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|"'HostSystem'"
op|','
name|'host_system'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|create_datacenter
dedent|''
name|'def'
name|'create_datacenter'
op|'('
name|'name'
op|','
name|'ds_ref'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'data_center'
op|'='
name|'Datacenter'
op|'('
name|'name'
op|','
name|'ds_ref'
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|"'Datacenter'"
op|','
name|'data_center'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|create_datastore
dedent|''
name|'def'
name|'create_datastore'
op|'('
name|'name'
op|','
name|'capacity'
op|','
name|'free'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'data_store'
op|'='
name|'Datastore'
op|'('
name|'name'
op|','
name|'capacity'
op|','
name|'free'
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|"'Datastore'"
op|','
name|'data_store'
op|')'
newline|'\n'
name|'return'
name|'data_store'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|create_res_pool
dedent|''
name|'def'
name|'create_res_pool'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'res_pool'
op|'='
name|'ResourcePool'
op|'('
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|"'ResourcePool'"
op|','
name|'res_pool'
op|')'
newline|'\n'
name|'return'
name|'res_pool'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|create_network
dedent|''
name|'def'
name|'create_network'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'network'
op|'='
name|'Network'
op|'('
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|"'Network'"
op|','
name|'network'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|create_cluster
dedent|''
name|'def'
name|'create_cluster'
op|'('
name|'name'
op|','
name|'ds_ref'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'cluster'
op|'='
name|'ClusterComputeResource'
op|'('
name|'name'
op|'='
name|'name'
op|')'
newline|'\n'
name|'cluster'
op|'.'
name|'_add_host'
op|'('
name|'_get_object_refs'
op|'('
string|'"HostSystem"'
op|')'
op|'['
number|'0'
op|']'
op|')'
newline|'\n'
name|'cluster'
op|'.'
name|'_add_host'
op|'('
name|'_get_object_refs'
op|'('
string|'"HostSystem"'
op|')'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
name|'cluster'
op|'.'
name|'_add_datastore'
op|'('
name|'ds_ref'
op|')'
newline|'\n'
name|'cluster'
op|'.'
name|'_add_root_resource_pool'
op|'('
name|'create_res_pool'
op|'('
op|')'
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|"'ClusterComputeResource'"
op|','
name|'cluster'
op|')'
newline|'\n'
name|'return'
name|'cluster'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|create_vm
dedent|''
name|'def'
name|'create_vm'
op|'('
name|'uuid'
op|'='
name|'None'
op|','
name|'name'
op|'='
name|'None'
op|','
nl|'\n'
name|'cpus'
op|'='
number|'1'
op|','
name|'memory'
op|'='
number|'128'
op|','
name|'devices'
op|'='
name|'None'
op|','
nl|'\n'
name|'vmPathName'
op|'='
name|'None'
op|','
name|'extraConfig'
op|'='
name|'None'
op|','
nl|'\n'
name|'res_pool_ref'
op|'='
name|'None'
op|','
name|'host_ref'
op|'='
name|'None'
op|','
nl|'\n'
name|'version'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'if'
name|'uuid'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'uuidutils'
op|'.'
name|'generate_uuid'
op|'('
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'name'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'        '
name|'name'
op|'='
name|'uuid'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'devices'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'        '
name|'devices'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'vmPathName'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'        '
name|'vm_path'
op|'='
name|'ds_obj'
op|'.'
name|'DatastorePath'
op|'('
name|'_db_content'
op|'['
string|"'Datastore'"
op|']'
op|'.'
name|'values'
op|'('
op|')'
op|'['
number|'0'
op|']'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'        '
name|'vm_path'
op|'='
name|'ds_obj'
op|'.'
name|'DatastorePath'
op|'.'
name|'parse'
op|'('
name|'vmPathName'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'res_pool_ref'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'        '
name|'res_pool_ref'
op|'='
name|'_db_content'
op|'['
string|"'ResourcePool'"
op|']'
op|'.'
name|'keys'
op|'('
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'host_ref'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'        '
name|'host_ref'
op|'='
name|'_db_content'
op|'['
string|'"HostSystem"'
op|']'
op|'.'
name|'keys'
op|'('
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
nl|'\n'
comment|'# Fill in the default path to the vmx file if we were only given a'
nl|'\n'
comment|"# datastore. Note that if you create a VM with vmPathName '[foo]', when you"
nl|'\n'
comment|"# retrieve vmPathName it will be '[foo] uuid/uuid.vmx'. Hence we use"
nl|'\n'
comment|'# vm_path below for the stored value of vmPathName.'
nl|'\n'
dedent|''
name|'if'
name|'vm_path'
op|'.'
name|'rel_path'
op|'=='
string|"''"
op|':'
newline|'\n'
indent|'        '
name|'vm_path'
op|'='
name|'vm_path'
op|'.'
name|'join'
op|'('
name|'name'
op|','
name|'name'
op|'+'
string|"'.vmx'"
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'for'
name|'key'
op|','
name|'value'
name|'in'
name|'six'
op|'.'
name|'iteritems'
op|'('
name|'_db_content'
op|'['
string|'"Datastore"'
op|']'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'value'
op|'.'
name|'get'
op|'('
string|"'summary.name'"
op|')'
op|'=='
name|'vm_path'
op|'.'
name|'datastore'
op|':'
newline|'\n'
indent|'            '
name|'ds'
op|'='
name|'key'
newline|'\n'
name|'break'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'        '
name|'ds'
op|'='
name|'create_datastore'
op|'('
name|'vm_path'
op|'.'
name|'datastore'
op|','
number|'1024'
op|','
number|'500'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'vm_dict'
op|'='
op|'{'
string|'"name"'
op|':'
name|'name'
op|','
nl|'\n'
string|'"ds"'
op|':'
op|'['
name|'ds'
op|']'
op|','
nl|'\n'
string|'"runtime_host"'
op|':'
name|'host_ref'
op|','
nl|'\n'
string|'"powerstate"'
op|':'
string|'"poweredOff"'
op|','
nl|'\n'
string|'"vmPathName"'
op|':'
name|'str'
op|'('
name|'vm_path'
op|')'
op|','
nl|'\n'
string|'"numCpu"'
op|':'
name|'cpus'
op|','
nl|'\n'
string|'"mem"'
op|':'
name|'memory'
op|','
nl|'\n'
string|'"extra_config"'
op|':'
name|'extraConfig'
op|','
nl|'\n'
string|'"virtual_device"'
op|':'
name|'devices'
op|','
nl|'\n'
string|'"instanceUuid"'
op|':'
name|'uuid'
op|','
nl|'\n'
string|'"version"'
op|':'
name|'version'
op|'}'
newline|'\n'
name|'vm'
op|'='
name|'VirtualMachine'
op|'('
op|'**'
name|'vm_dict'
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|'"VirtualMachine"'
op|','
name|'vm'
op|')'
newline|'\n'
nl|'\n'
name|'res_pool'
op|'='
name|'_get_object'
op|'('
name|'res_pool_ref'
op|')'
newline|'\n'
name|'res_pool'
op|'.'
name|'vm'
op|'.'
name|'ManagedObjectReference'
op|'.'
name|'append'
op|'('
name|'vm'
op|'.'
name|'obj'
op|')'
newline|'\n'
nl|'\n'
name|'return'
name|'vm'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|create_task
dedent|''
name|'def'
name|'create_task'
op|'('
name|'task_name'
op|','
name|'state'
op|'='
string|'"running"'
op|','
name|'result'
op|'='
name|'None'
op|','
name|'error_fault'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'task'
op|'='
name|'Task'
op|'('
name|'task_name'
op|','
name|'state'
op|','
name|'result'
op|','
name|'error_fault'
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|'"Task"'
op|','
name|'task'
op|')'
newline|'\n'
name|'return'
name|'task'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_add_file
dedent|''
name|'def'
name|'_add_file'
op|'('
name|'file_path'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Adds a file reference to the  db."""'
newline|'\n'
name|'_db_content'
op|'['
string|'"files"'
op|']'
op|'.'
name|'append'
op|'('
name|'file_path'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_remove_file
dedent|''
name|'def'
name|'_remove_file'
op|'('
name|'file_path'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Removes a file reference from the db."""'
newline|'\n'
comment|'# Check if the remove is for a single file object or for a folder'
nl|'\n'
name|'if'
name|'file_path'
op|'.'
name|'find'
op|'('
string|'".vmdk"'
op|')'
op|'!='
op|'-'
number|'1'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'file_path'
name|'not'
name|'in'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"files"'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'vexc'
op|'.'
name|'FileNotFoundException'
op|'('
name|'file_path'
op|')'
newline|'\n'
dedent|''
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"files"'
op|')'
op|'.'
name|'remove'
op|'('
name|'file_path'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
comment|'# Removes the files in the folder and the folder too from the db'
nl|'\n'
indent|'        '
name|'to_delete'
op|'='
name|'set'
op|'('
op|')'
newline|'\n'
name|'for'
name|'file'
name|'in'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"files"'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'file'
op|'.'
name|'find'
op|'('
name|'file_path'
op|')'
op|'!='
op|'-'
number|'1'
op|':'
newline|'\n'
indent|'                '
name|'to_delete'
op|'.'
name|'add'
op|'('
name|'file'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'for'
name|'file'
name|'in'
name|'to_delete'
op|':'
newline|'\n'
indent|'            '
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"files"'
op|')'
op|'.'
name|'remove'
op|'('
name|'file'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|fake_plug_vifs
dedent|''
dedent|''
dedent|''
name|'def'
name|'fake_plug_vifs'
op|'('
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Fakes plugging vifs."""'
newline|'\n'
name|'pass'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|fake_get_network
dedent|''
name|'def'
name|'fake_get_network'
op|'('
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Fake get network."""'
newline|'\n'
name|'return'
op|'{'
string|"'type'"
op|':'
string|"'fake'"
op|'}'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|assertPathExists
dedent|''
name|'def'
name|'assertPathExists'
op|'('
name|'test'
op|','
name|'path'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'test'
op|'.'
name|'assertIn'
op|'('
name|'path'
op|','
name|'_db_content'
op|'.'
name|'get'
op|'('
string|"'files'"
op|')'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|assertPathNotExists
dedent|''
name|'def'
name|'assertPathNotExists'
op|'('
name|'test'
op|','
name|'path'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'test'
op|'.'
name|'assertNotIn'
op|'('
name|'path'
op|','
name|'_db_content'
op|'.'
name|'get'
op|'('
string|"'files'"
op|')'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|get_file
dedent|''
name|'def'
name|'get_file'
op|'('
name|'file_path'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Check if file exists in the db."""'
newline|'\n'
name|'return'
name|'file_path'
name|'in'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"files"'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|fake_upload_image
dedent|''
name|'def'
name|'fake_upload_image'
op|'('
name|'context'
op|','
name|'image'
op|','
name|'instance'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Fakes the upload of an image."""'
newline|'\n'
name|'pass'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|fake_fetch_image
dedent|''
name|'def'
name|'fake_fetch_image'
op|'('
name|'context'
op|','
name|'instance'
op|','
name|'host'
op|','
name|'port'
op|','
name|'dc_name'
op|','
name|'ds_name'
op|','
nl|'\n'
name|'file_path'
op|','
name|'cookies'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Fakes the fetch of an image."""'
newline|'\n'
name|'ds_file_path'
op|'='
string|'"["'
op|'+'
name|'ds_name'
op|'+'
string|'"] "'
op|'+'
name|'file_path'
newline|'\n'
name|'_add_file'
op|'('
name|'ds_file_path'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_get_vm_mdo
dedent|''
name|'def'
name|'_get_vm_mdo'
op|'('
name|'vm_ref'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Gets the Virtual Machine with the ref from the db."""'
newline|'\n'
name|'if'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"VirtualMachine"'
op|','
name|'None'
op|')'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'exception'
op|'.'
name|'NotFound'
op|'('
string|'"There is no VM registered"'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'vm_ref'
name|'not'
name|'in'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"VirtualMachine"'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'raise'
name|'exception'
op|'.'
name|'NotFound'
op|'('
string|'"Virtual Machine with ref %s is not "'
nl|'\n'
string|'"there"'
op|'%'
name|'vm_ref'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"VirtualMachine"'
op|')'
op|'['
name|'vm_ref'
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_merge_extraconfig
dedent|''
name|'def'
name|'_merge_extraconfig'
op|'('
name|'existing'
op|','
name|'changes'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Imposes the changes in extraConfig over the existing extraConfig."""'
newline|'\n'
name|'existing'
op|'='
name|'existing'
name|'or'
op|'['
op|']'
newline|'\n'
name|'if'
op|'('
name|'changes'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'c'
name|'in'
name|'changes'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'len'
op|'('
op|'['
name|'x'
name|'for'
name|'x'
name|'in'
name|'existing'
name|'if'
name|'x'
op|'.'
name|'key'
op|'=='
name|'c'
op|'.'
name|'key'
op|']'
op|')'
op|'>'
number|'0'
op|':'
newline|'\n'
indent|'                '
name|'extraConf'
op|'='
op|'['
name|'x'
name|'for'
name|'x'
name|'in'
name|'existing'
name|'if'
name|'x'
op|'.'
name|'key'
op|'=='
name|'c'
op|'.'
name|'key'
op|']'
op|'['
number|'0'
op|']'
newline|'\n'
name|'extraConf'
op|'.'
name|'value'
op|'='
name|'c'
op|'.'
name|'value'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'existing'
op|'.'
name|'append'
op|'('
name|'c'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'return'
name|'existing'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeFactory
dedent|''
name|'class'
name|'FakeFactory'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Fake factory class for the suds client."""'
newline|'\n'
nl|'\n'
DECL|member|create
name|'def'
name|'create'
op|'('
name|'self'
op|','
name|'obj_name'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Creates a namespace object."""'
newline|'\n'
name|'return'
name|'DataObject'
op|'('
name|'obj_name'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeService
dedent|''
dedent|''
name|'class'
name|'FakeService'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Fake service class."""'
newline|'\n'
nl|'\n'
DECL|member|Logout
name|'def'
name|'Logout'
op|'('
name|'self'
op|','
name|'session_manager'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'pass'
newline|'\n'
nl|'\n'
DECL|member|FindExtension
dedent|''
name|'def'
name|'FindExtension'
op|'('
name|'self'
op|','
name|'extension_manager'
op|','
name|'key'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'['
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeClient
dedent|''
dedent|''
name|'class'
name|'FakeClient'
op|'('
name|'DataObject'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Fake client class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Creates a namespace object."""'
newline|'\n'
name|'self'
op|'.'
name|'service'
op|'='
name|'FakeService'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeSession
dedent|''
dedent|''
name|'class'
name|'FakeSession'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Fake Session Class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'vim'
op|'='
name|'FakeVim'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_call_method
dedent|''
name|'def'
name|'_call_method'
op|'('
name|'self'
op|','
name|'module'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'raise'
name|'NotImplementedError'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_wait_for_task
dedent|''
name|'def'
name|'_wait_for_task'
op|'('
name|'self'
op|','
name|'task_ref'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'raise'
name|'NotImplementedError'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeObjectRetrievalSession
dedent|''
dedent|''
name|'class'
name|'FakeObjectRetrievalSession'
op|'('
name|'FakeSession'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""A session for faking object retrieval tasks.\n\n    _call_method() returns a given set of objects\n    sequentially, regardless of the method called.\n    """'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
op|'*'
name|'ret'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FakeObjectRetrievalSession'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'ret'
op|'='
name|'ret'
newline|'\n'
name|'self'
op|'.'
name|'ind'
op|'='
number|'0'
newline|'\n'
nl|'\n'
DECL|member|_call_method
dedent|''
name|'def'
name|'_call_method'
op|'('
name|'self'
op|','
name|'module'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
op|'('
name|'method'
op|'=='
string|"'continue_retrieval'"
name|'or'
nl|'\n'
name|'method'
op|'=='
string|"'cancel_retrieval'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
newline|'\n'
comment|'# return fake objects in a circular manner'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'ind'
op|'='
op|'('
name|'self'
op|'.'
name|'ind'
op|'+'
number|'1'
op|')'
op|'%'
name|'len'
op|'('
name|'self'
op|'.'
name|'ret'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'ret'
op|'['
name|'self'
op|'.'
name|'ind'
op|'-'
number|'1'
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|get_fake_vim_object
dedent|''
dedent|''
name|'def'
name|'get_fake_vim_object'
op|'('
name|'vmware_api_session'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'key'
op|'='
name|'vmware_api_session'
op|'.'
name|'__repr__'
op|'('
op|')'
newline|'\n'
name|'if'
name|'key'
name|'not'
name|'in'
name|'_vim_map'
op|':'
newline|'\n'
indent|'        '
name|'_vim_map'
op|'['
name|'key'
op|']'
op|'='
name|'FakeVim'
op|'('
op|')'
newline|'\n'
dedent|''
name|'return'
name|'_vim_map'
op|'['
name|'key'
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FakeVim
dedent|''
name|'class'
name|'FakeVim'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Fake VIM Class."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'protocol'
op|'='
string|'"https"'
op|','
name|'host'
op|'='
string|'"localhost"'
op|','
name|'trace'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Initializes the suds client object, sets the service content\n        contents and the cookies for the session.\n        """'
newline|'\n'
name|'self'
op|'.'
name|'_session'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'client'
op|'='
name|'FakeClient'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'client'
op|'.'
name|'factory'
op|'='
name|'FakeFactory'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'transport'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'transport'
op|'.'
name|'cookiejar'
op|'='
string|'"Fake-CookieJar"'
newline|'\n'
name|'options'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'options'
op|'.'
name|'transport'
op|'='
name|'transport'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'client'
op|'.'
name|'options'
op|'='
name|'options'
newline|'\n'
nl|'\n'
name|'service_content'
op|'='
name|'self'
op|'.'
name|'client'
op|'.'
name|'factory'
op|'.'
name|'create'
op|'('
string|"'ns0:ServiceContent'"
op|')'
newline|'\n'
name|'service_content'
op|'.'
name|'propertyCollector'
op|'='
string|'"PropCollector"'
newline|'\n'
name|'service_content'
op|'.'
name|'virtualDiskManager'
op|'='
string|'"VirtualDiskManager"'
newline|'\n'
name|'service_content'
op|'.'
name|'fileManager'
op|'='
string|'"FileManager"'
newline|'\n'
name|'service_content'
op|'.'
name|'rootFolder'
op|'='
string|'"RootFolder"'
newline|'\n'
name|'service_content'
op|'.'
name|'sessionManager'
op|'='
string|'"SessionManager"'
newline|'\n'
name|'service_content'
op|'.'
name|'extensionManager'
op|'='
string|'"ExtensionManager"'
newline|'\n'
name|'service_content'
op|'.'
name|'searchIndex'
op|'='
string|'"SearchIndex"'
newline|'\n'
nl|'\n'
name|'about_info'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'about_info'
op|'.'
name|'name'
op|'='
string|'"VMware vCenter Server"'
newline|'\n'
name|'about_info'
op|'.'
name|'version'
op|'='
string|'"5.1.0"'
newline|'\n'
name|'about_info'
op|'.'
name|'instanceUuid'
op|'='
name|'_FAKE_VCENTER_UUID'
newline|'\n'
nl|'\n'
name|'service_content'
op|'.'
name|'about'
op|'='
name|'about_info'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'_service_content'
op|'='
name|'service_content'
newline|'\n'
nl|'\n'
dedent|''
op|'@'
name|'property'
newline|'\n'
DECL|member|service_content
name|'def'
name|'service_content'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_service_content'
newline|'\n'
nl|'\n'
DECL|member|__repr__
dedent|''
name|'def'
name|'__repr__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|'"Fake VIM Object"'
newline|'\n'
nl|'\n'
DECL|member|__str__
dedent|''
name|'def'
name|'__str__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|'"Fake VIM Object"'
newline|'\n'
nl|'\n'
DECL|member|_login
dedent|''
name|'def'
name|'_login'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Logs in and sets the session object in the db."""'
newline|'\n'
name|'self'
op|'.'
name|'_session'
op|'='
name|'uuidutils'
op|'.'
name|'generate_uuid'
op|'('
op|')'
newline|'\n'
name|'session'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'session'
op|'.'
name|'key'
op|'='
name|'self'
op|'.'
name|'_session'
newline|'\n'
name|'session'
op|'.'
name|'userName'
op|'='
string|"'sessionUserName'"
newline|'\n'
name|'_db_content'
op|'['
string|"'session'"
op|']'
op|'['
name|'self'
op|'.'
name|'_session'
op|']'
op|'='
name|'session'
newline|'\n'
name|'return'
name|'session'
newline|'\n'
nl|'\n'
DECL|member|_terminate_session
dedent|''
name|'def'
name|'_terminate_session'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Terminates a session."""'
newline|'\n'
name|'s'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"sessionId"'
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'if'
name|'s'
name|'not'
name|'in'
name|'_db_content'
op|'['
string|"'session'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'return'
newline|'\n'
dedent|''
name|'del'
name|'_db_content'
op|'['
string|"'session'"
op|']'
op|'['
name|'s'
op|']'
newline|'\n'
nl|'\n'
DECL|member|_check_session
dedent|''
name|'def'
name|'_check_session'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Checks if the session is active."""'
newline|'\n'
name|'if'
op|'('
name|'self'
op|'.'
name|'_session'
name|'is'
name|'None'
name|'or'
name|'self'
op|'.'
name|'_session'
name|'not'
name|'in'
nl|'\n'
name|'_db_content'
op|'['
string|"'session'"
op|']'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'LOG'
op|'.'
name|'debug'
op|'('
string|'"Session is faulty"'
op|')'
newline|'\n'
name|'raise'
name|'vexc'
op|'.'
name|'VimFaultException'
op|'('
op|'['
name|'vexc'
op|'.'
name|'NOT_AUTHENTICATED'
op|']'
op|','
nl|'\n'
string|'"Session Invalid"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_session_is_active
dedent|''
dedent|''
name|'def'
name|'_session_is_active'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_check_session'
op|'('
op|')'
newline|'\n'
name|'return'
name|'True'
newline|'\n'
dedent|''
name|'except'
name|'Exception'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'False'
newline|'\n'
nl|'\n'
DECL|member|_create_vm
dedent|''
dedent|''
name|'def'
name|'_create_vm'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Creates and registers a VM object with the Host System."""'
newline|'\n'
name|'config_spec'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"config"'
op|')'
newline|'\n'
nl|'\n'
name|'if'
name|'config_spec'
op|'.'
name|'guestId'
name|'not'
name|'in'
name|'constants'
op|'.'
name|'VALID_OS_TYPES'
op|':'
newline|'\n'
indent|'            '
name|'ex'
op|'='
name|'vexc'
op|'.'
name|'VMwareDriverException'
op|'('
string|"'A specified parameter was '"
nl|'\n'
string|"'not correct.'"
op|')'
newline|'\n'
name|'return'
name|'create_task'
op|'('
name|'method'
op|','
string|'"error"'
op|','
name|'error_fault'
op|'='
name|'ex'
op|')'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
dedent|''
name|'pool'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|"'pool'"
op|')'
newline|'\n'
name|'version'
op|'='
name|'getattr'
op|'('
name|'config_spec'
op|','
string|"'version'"
op|','
name|'None'
op|')'
newline|'\n'
name|'devices'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'device_change'
name|'in'
name|'config_spec'
op|'.'
name|'deviceChange'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'device_change'
op|'.'
name|'operation'
op|'=='
string|"'add'"
op|':'
newline|'\n'
indent|'                '
name|'devices'
op|'.'
name|'append'
op|'('
name|'device_change'
op|'.'
name|'device'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'vm_ref'
op|'='
name|'create_vm'
op|'('
name|'config_spec'
op|'.'
name|'instanceUuid'
op|','
name|'config_spec'
op|'.'
name|'name'
op|','
nl|'\n'
name|'config_spec'
op|'.'
name|'numCPUs'
op|','
name|'config_spec'
op|'.'
name|'memoryMB'
op|','
nl|'\n'
name|'devices'
op|','
name|'config_spec'
op|'.'
name|'files'
op|'.'
name|'vmPathName'
op|','
nl|'\n'
name|'config_spec'
op|'.'
name|'extraConfig'
op|','
name|'pool'
op|','
nl|'\n'
name|'version'
op|'='
name|'version'
op|')'
newline|'\n'
nl|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|','
name|'result'
op|'='
name|'vm_ref'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_reconfig_vm
dedent|''
name|'def'
name|'_reconfig_vm'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Reconfigures a VM and sets the properties supplied."""'
newline|'\n'
name|'vm_ref'
op|'='
name|'args'
op|'['
number|'0'
op|']'
newline|'\n'
name|'vm_mdo'
op|'='
name|'_get_vm_mdo'
op|'('
name|'vm_ref'
op|')'
newline|'\n'
name|'vm_mdo'
op|'.'
name|'reconfig'
op|'('
name|'self'
op|'.'
name|'client'
op|'.'
name|'factory'
op|','
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"spec"'
op|')'
op|')'
newline|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_create_copy_disk
dedent|''
name|'def'
name|'_create_copy_disk'
op|'('
name|'self'
op|','
name|'method'
op|','
name|'vmdk_file_path'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Creates/copies a vmdk file object in the datastore."""'
newline|'\n'
comment|'# We need to add/create both .vmdk and .-flat.vmdk files'
nl|'\n'
name|'flat_vmdk_file_path'
op|'='
name|'vmdk_file_path'
op|'.'
name|'replace'
op|'('
string|'".vmdk"'
op|','
string|'"-flat.vmdk"'
op|')'
newline|'\n'
name|'_add_file'
op|'('
name|'vmdk_file_path'
op|')'
newline|'\n'
name|'_add_file'
op|'('
name|'flat_vmdk_file_path'
op|')'
newline|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_extend_disk
dedent|''
name|'def'
name|'_extend_disk'
op|'('
name|'self'
op|','
name|'method'
op|','
name|'size'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Extend disk size when create an instance."""'
newline|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_snapshot_vm
dedent|''
name|'def'
name|'_snapshot_vm'
op|'('
name|'self'
op|','
name|'method'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Snapshots a VM. Here we do nothing for faking sake."""'
newline|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_find_all_by_uuid
dedent|''
name|'def'
name|'_find_all_by_uuid'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'uuid'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|"'uuid'"
op|')'
newline|'\n'
name|'vm_refs'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'vm_ref'
name|'in'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"VirtualMachine"'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'vm'
op|'='
name|'_get_object'
op|'('
name|'vm_ref'
op|')'
newline|'\n'
name|'vm_uuid'
op|'='
name|'vm'
op|'.'
name|'get'
op|'('
string|'"summary.config.instanceUuid"'
op|')'
newline|'\n'
name|'if'
name|'vm_uuid'
op|'=='
name|'uuid'
op|':'
newline|'\n'
indent|'                '
name|'vm_refs'
op|'.'
name|'append'
op|'('
name|'vm_ref'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'return'
name|'vm_refs'
newline|'\n'
nl|'\n'
DECL|member|_delete_snapshot
dedent|''
name|'def'
name|'_delete_snapshot'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Deletes a VM snapshot. Here we do nothing for faking sake."""'
newline|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_delete_file
dedent|''
name|'def'
name|'_delete_file'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Deletes a file from the datastore."""'
newline|'\n'
name|'_remove_file'
op|'('
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"name"'
op|')'
op|')'
newline|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_just_return
dedent|''
name|'def'
name|'_just_return'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Fakes a return."""'
newline|'\n'
name|'return'
newline|'\n'
nl|'\n'
DECL|member|_just_return_task
dedent|''
name|'def'
name|'_just_return_task'
op|'('
name|'self'
op|','
name|'method'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Fakes a task return."""'
newline|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_clone_vm
dedent|''
name|'def'
name|'_clone_vm'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Fakes a VM clone."""'
newline|'\n'
string|'"""Creates and registers a VM object with the Host System."""'
newline|'\n'
name|'source_vmref'
op|'='
name|'args'
op|'['
number|'0'
op|']'
newline|'\n'
name|'source_vm_mdo'
op|'='
name|'_get_vm_mdo'
op|'('
name|'source_vmref'
op|')'
newline|'\n'
name|'clone_spec'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"spec"'
op|')'
newline|'\n'
name|'vm_dict'
op|'='
op|'{'
nl|'\n'
string|'"name"'
op|':'
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"name"'
op|')'
op|','
nl|'\n'
string|'"ds"'
op|':'
name|'source_vm_mdo'
op|'.'
name|'get'
op|'('
string|'"datastore"'
op|')'
op|','
nl|'\n'
string|'"runtime_host"'
op|':'
name|'source_vm_mdo'
op|'.'
name|'get'
op|'('
string|'"runtime.host"'
op|')'
op|','
nl|'\n'
string|'"powerstate"'
op|':'
name|'source_vm_mdo'
op|'.'
name|'get'
op|'('
string|'"runtime.powerState"'
op|')'
op|','
nl|'\n'
string|'"vmPathName"'
op|':'
name|'source_vm_mdo'
op|'.'
name|'get'
op|'('
string|'"config.files.vmPathName"'
op|')'
op|','
nl|'\n'
string|'"numCpu"'
op|':'
name|'source_vm_mdo'
op|'.'
name|'get'
op|'('
string|'"summary.config.numCpu"'
op|')'
op|','
nl|'\n'
string|'"mem"'
op|':'
name|'source_vm_mdo'
op|'.'
name|'get'
op|'('
string|'"summary.config.memorySizeMB"'
op|')'
op|','
nl|'\n'
string|'"extra_config"'
op|':'
name|'source_vm_mdo'
op|'.'
name|'get'
op|'('
string|'"config.extraConfig"'
op|')'
op|'.'
name|'OptionValue'
op|','
nl|'\n'
string|'"virtual_device"'
op|':'
nl|'\n'
name|'source_vm_mdo'
op|'.'
name|'get'
op|'('
string|'"config.hardware.device"'
op|')'
op|'.'
name|'VirtualDevice'
op|','
nl|'\n'
string|'"instanceUuid"'
op|':'
name|'source_vm_mdo'
op|'.'
name|'get'
op|'('
string|'"summary.config.instanceUuid"'
op|')'
op|'}'
newline|'\n'
nl|'\n'
name|'if'
name|'hasattr'
op|'('
name|'clone_spec'
op|','
string|"'config'"
op|')'
op|':'
newline|'\n'
comment|'# Impose the config changes specified in the config property'
nl|'\n'
indent|'            '
name|'if'
op|'('
name|'hasattr'
op|'('
name|'clone_spec'
op|'.'
name|'config'
op|','
string|"'instanceUuid'"
op|')'
name|'and'
nl|'\n'
name|'clone_spec'
op|'.'
name|'config'
op|'.'
name|'instanceUuid'
name|'is'
name|'not'
name|'None'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'vm_dict'
op|'['
string|'"instanceUuid"'
op|']'
op|'='
name|'clone_spec'
op|'.'
name|'config'
op|'.'
name|'instanceUuid'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'hasattr'
op|'('
name|'clone_spec'
op|'.'
name|'config'
op|','
string|"'extraConfig'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'extraConfigs'
op|'='
name|'_merge_extraconfig'
op|'('
name|'vm_dict'
op|'['
string|'"extra_config"'
op|']'
op|','
nl|'\n'
name|'clone_spec'
op|'.'
name|'config'
op|'.'
name|'extraConfig'
op|')'
newline|'\n'
name|'vm_dict'
op|'['
string|'"extra_config"'
op|']'
op|'='
name|'extraConfigs'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'virtual_machine'
op|'='
name|'VirtualMachine'
op|'('
op|'**'
name|'vm_dict'
op|')'
newline|'\n'
name|'_create_object'
op|'('
string|'"VirtualMachine"'
op|','
name|'virtual_machine'
op|')'
newline|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_unregister_vm
dedent|''
name|'def'
name|'_unregister_vm'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Unregisters a VM from the Host System."""'
newline|'\n'
name|'vm_ref'
op|'='
name|'args'
op|'['
number|'0'
op|']'
newline|'\n'
name|'_get_vm_mdo'
op|'('
name|'vm_ref'
op|')'
newline|'\n'
name|'del'
name|'_db_content'
op|'['
string|'"VirtualMachine"'
op|']'
op|'['
name|'vm_ref'
op|']'
newline|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_search_ds
dedent|''
name|'def'
name|'_search_ds'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Searches the datastore for a file."""'
newline|'\n'
comment|'# TODO(garyk): add support for spec parameter'
nl|'\n'
name|'ds_path'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"datastorePath"'
op|')'
newline|'\n'
name|'matched_files'
op|'='
name|'set'
op|'('
op|')'
newline|'\n'
comment|'# Check if we are searching for a file or a directory'
nl|'\n'
name|'directory'
op|'='
name|'False'
newline|'\n'
name|'dname'
op|'='
string|"'%s/'"
op|'%'
name|'ds_path'
newline|'\n'
name|'for'
name|'file'
name|'in'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"files"'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'file'
op|'=='
name|'dname'
op|':'
newline|'\n'
indent|'                '
name|'directory'
op|'='
name|'True'
newline|'\n'
name|'break'
newline|'\n'
comment|'# A directory search implies that we must return all'
nl|'\n'
comment|'# subdirectories'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'directory'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'file'
name|'in'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"files"'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'file'
op|'.'
name|'find'
op|'('
name|'ds_path'
op|')'
op|'!='
op|'-'
number|'1'
op|':'
newline|'\n'
indent|'                    '
name|'if'
name|'not'
name|'file'
op|'.'
name|'endswith'
op|'('
name|'ds_path'
op|')'
op|':'
newline|'\n'
indent|'                        '
name|'path'
op|'='
name|'file'
op|'.'
name|'replace'
op|'('
name|'dname'
op|','
string|"''"
op|','
number|'1'
op|')'
op|'.'
name|'split'
op|'('
string|"'/'"
op|')'
newline|'\n'
name|'if'
name|'path'
op|':'
newline|'\n'
indent|'                            '
name|'matched_files'
op|'.'
name|'add'
op|'('
name|'path'
op|'['
number|'0'
op|']'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
dedent|''
name|'if'
name|'not'
name|'matched_files'
op|':'
newline|'\n'
indent|'                '
name|'matched_files'
op|'.'
name|'add'
op|'('
string|"'/'"
op|')'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'file'
name|'in'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"files"'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'file'
op|'.'
name|'find'
op|'('
name|'ds_path'
op|')'
op|'!='
op|'-'
number|'1'
op|':'
newline|'\n'
indent|'                    '
name|'matched_files'
op|'.'
name|'add'
op|'('
name|'ds_path'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'if'
name|'matched_files'
op|':'
newline|'\n'
indent|'            '
name|'result'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'result'
op|'.'
name|'path'
op|'='
name|'ds_path'
newline|'\n'
name|'result'
op|'.'
name|'file'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'file'
name|'in'
name|'matched_files'
op|':'
newline|'\n'
indent|'                '
name|'matched'
op|'='
name|'DataObject'
op|'('
op|')'
newline|'\n'
name|'matched'
op|'.'
name|'path'
op|'='
name|'file'
newline|'\n'
name|'matched'
op|'.'
name|'fileSize'
op|'='
number|'1024'
newline|'\n'
name|'result'
op|'.'
name|'file'
op|'.'
name|'append'
op|'('
name|'matched'
op|')'
newline|'\n'
dedent|''
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|','
name|'result'
op|'='
name|'result'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"error"'
op|','
name|'error_fault'
op|'='
name|'FileNotFound'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_move_file
dedent|''
name|'def'
name|'_move_file'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'source'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|"'sourceName'"
op|')'
newline|'\n'
name|'destination'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|"'destinationName'"
op|')'
newline|'\n'
name|'new_files'
op|'='
op|'['
op|']'
newline|'\n'
name|'if'
name|'source'
op|'!='
name|'destination'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'file'
name|'in'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"files"'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'source'
name|'in'
name|'file'
op|':'
newline|'\n'
indent|'                    '
name|'new_file'
op|'='
name|'file'
op|'.'
name|'replace'
op|'('
name|'source'
op|','
name|'destination'
op|')'
newline|'\n'
name|'new_files'
op|'.'
name|'append'
op|'('
name|'new_file'
op|')'
newline|'\n'
comment|'# if source is not a file then the children will also'
nl|'\n'
comment|'# be deleted'
nl|'\n'
dedent|''
dedent|''
name|'_remove_file'
op|'('
name|'source'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'file'
name|'in'
name|'new_files'
op|':'
newline|'\n'
indent|'            '
name|'_add_file'
op|'('
name|'file'
op|')'
newline|'\n'
dedent|''
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_make_dir
dedent|''
name|'def'
name|'_make_dir'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Creates a directory in the datastore."""'
newline|'\n'
name|'ds_path'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"name"'
op|')'
newline|'\n'
name|'if'
name|'get_file'
op|'('
name|'ds_path'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'vexc'
op|'.'
name|'FileAlreadyExistsException'
op|'('
op|')'
newline|'\n'
dedent|''
name|'_db_content'
op|'['
string|'"files"'
op|']'
op|'.'
name|'append'
op|'('
string|"'%s/'"
op|'%'
name|'ds_path'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_set_power_state
dedent|''
name|'def'
name|'_set_power_state'
op|'('
name|'self'
op|','
name|'method'
op|','
name|'vm_ref'
op|','
name|'pwr_state'
op|'='
string|'"poweredOn"'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Sets power state for the VM."""'
newline|'\n'
name|'if'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"VirtualMachine"'
op|','
name|'None'
op|')'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'exception'
op|'.'
name|'NotFound'
op|'('
string|'"No Virtual Machine has been "'
nl|'\n'
string|'"registered yet"'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'vm_ref'
name|'not'
name|'in'
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"VirtualMachine"'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'exception'
op|'.'
name|'NotFound'
op|'('
string|'"Virtual Machine with ref %s is not "'
nl|'\n'
string|'"there"'
op|'%'
name|'vm_ref'
op|')'
newline|'\n'
dedent|''
name|'vm_mdo'
op|'='
name|'_db_content'
op|'.'
name|'get'
op|'('
string|'"VirtualMachine"'
op|')'
op|'.'
name|'get'
op|'('
name|'vm_ref'
op|')'
newline|'\n'
name|'vm_mdo'
op|'.'
name|'set'
op|'('
string|'"runtime.powerState"'
op|','
name|'pwr_state'
op|')'
newline|'\n'
name|'task_mdo'
op|'='
name|'create_task'
op|'('
name|'method'
op|','
string|'"success"'
op|')'
newline|'\n'
name|'return'
name|'task_mdo'
op|'.'
name|'obj'
newline|'\n'
nl|'\n'
DECL|member|_retrieve_properties_continue
dedent|''
name|'def'
name|'_retrieve_properties_continue'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Continues the retrieve."""'
newline|'\n'
name|'return'
name|'FakeRetrieveResult'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_retrieve_properties_cancel
dedent|''
name|'def'
name|'_retrieve_properties_cancel'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Cancels the retrieve."""'
newline|'\n'
name|'return'
name|'None'
newline|'\n'
nl|'\n'
DECL|member|_retrieve_properties
dedent|''
name|'def'
name|'_retrieve_properties'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Retrieves properties based on the type."""'
newline|'\n'
name|'spec_set'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"specSet"'
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'spec_type'
op|'='
name|'spec_set'
op|'.'
name|'propSet'
op|'['
number|'0'
op|']'
op|'.'
name|'type'
newline|'\n'
name|'properties'
op|'='
name|'spec_set'
op|'.'
name|'propSet'
op|'['
number|'0'
op|']'
op|'.'
name|'pathSet'
newline|'\n'
name|'if'
name|'not'
name|'isinstance'
op|'('
name|'properties'
op|','
name|'list'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'properties'
op|'='
name|'properties'
op|'.'
name|'split'
op|'('
op|')'
newline|'\n'
dedent|''
name|'objs'
op|'='
name|'spec_set'
op|'.'
name|'objectSet'
newline|'\n'
name|'lst_ret_objs'
op|'='
name|'FakeRetrieveResult'
op|'('
op|')'
newline|'\n'
name|'for'
name|'obj'
name|'in'
name|'objs'
op|':'
newline|'\n'
indent|'            '
name|'try'
op|':'
newline|'\n'
indent|'                '
name|'obj_ref'
op|'='
name|'obj'
op|'.'
name|'obj'
newline|'\n'
name|'if'
name|'obj_ref'
op|'=='
string|'"RootFolder"'
op|':'
newline|'\n'
comment|'# This means that we are retrieving props for all managed'
nl|'\n'
comment|"# data objects of the specified 'type' in the entire"
nl|'\n'
comment|'# inventory. This gets invoked by vim_util.get_objects.'
nl|'\n'
indent|'                    '
name|'mdo_refs'
op|'='
name|'_db_content'
op|'['
name|'spec_type'
op|']'
newline|'\n'
dedent|''
name|'elif'
name|'obj_ref'
op|'.'
name|'type'
op|'!='
name|'spec_type'
op|':'
newline|'\n'
comment|'# This means that we are retrieving props for the managed'
nl|'\n'
comment|"# data objects in the parent object's 'path' property."
nl|'\n'
comment|'# This gets invoked by vim_util.get_inner_objects'
nl|'\n'
comment|'# eg. obj_ref = <ManagedObjectReference of a cluster>'
nl|'\n'
comment|"#     type = 'DataStore'"
nl|'\n'
comment|"#     path = 'datastore'"
nl|'\n'
comment|'# the above will retrieve all datastores in the given'
nl|'\n'
comment|'# cluster.'
nl|'\n'
indent|'                    '
name|'parent_mdo'
op|'='
name|'_db_content'
op|'['
name|'obj_ref'
op|'.'
name|'type'
op|']'
op|'['
name|'obj_ref'
op|']'
newline|'\n'
name|'path'
op|'='
name|'obj'
op|'.'
name|'selectSet'
op|'['
number|'0'
op|']'
op|'.'
name|'path'
newline|'\n'
name|'mdo_refs'
op|'='
name|'parent_mdo'
op|'.'
name|'get'
op|'('
name|'path'
op|')'
op|'.'
name|'ManagedObjectReference'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
comment|'# This means that we are retrieving props of the given'
nl|'\n'
comment|'# managed data object. This gets invoked by'
nl|'\n'
comment|'# vim_util.get_properties_for_a_collection_of_objects.'
nl|'\n'
indent|'                    '
name|'mdo_refs'
op|'='
op|'['
name|'obj_ref'
op|']'
newline|'\n'
nl|'\n'
dedent|''
name|'for'
name|'mdo_ref'
name|'in'
name|'mdo_refs'
op|':'
newline|'\n'
indent|'                    '
name|'mdo'
op|'='
name|'_db_content'
op|'['
name|'spec_type'
op|']'
op|'['
name|'mdo_ref'
op|']'
newline|'\n'
name|'prop_list'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'prop_name'
name|'in'
name|'properties'
op|':'
newline|'\n'
indent|'                        '
name|'prop'
op|'='
name|'Prop'
op|'('
name|'prop_name'
op|','
name|'mdo'
op|'.'
name|'get'
op|'('
name|'prop_name'
op|')'
op|')'
newline|'\n'
name|'prop_list'
op|'.'
name|'append'
op|'('
name|'prop'
op|')'
newline|'\n'
dedent|''
name|'obj_content'
op|'='
name|'ObjectContent'
op|'('
name|'mdo'
op|'.'
name|'obj'
op|','
name|'prop_list'
op|')'
newline|'\n'
name|'lst_ret_objs'
op|'.'
name|'add_object'
op|'('
name|'obj_content'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'except'
name|'Exception'
op|':'
newline|'\n'
indent|'                '
name|'LOG'
op|'.'
name|'exception'
op|'('
string|'"_retrieve_properties error"'
op|')'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
dedent|''
name|'return'
name|'lst_ret_objs'
newline|'\n'
nl|'\n'
DECL|member|_add_port_group
dedent|''
name|'def'
name|'_add_port_group'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Adds a port group to the host system."""'
newline|'\n'
name|'_host_sk'
op|'='
name|'_db_content'
op|'['
string|'"HostSystem"'
op|']'
op|'.'
name|'keys'
op|'('
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'host_mdo'
op|'='
name|'_db_content'
op|'['
string|'"HostSystem"'
op|']'
op|'['
name|'_host_sk'
op|']'
newline|'\n'
name|'host_mdo'
op|'.'
name|'_add_port_group'
op|'('
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"portgrp"'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_add_iscsi_send_tgt
dedent|''
name|'def'
name|'_add_iscsi_send_tgt'
op|'('
name|'self'
op|','
name|'method'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Adds a iscsi send target to the hba."""'
newline|'\n'
name|'send_targets'
op|'='
name|'kwargs'
op|'.'
name|'get'
op|'('
string|"'targets'"
op|')'
newline|'\n'
name|'host_storage_sys'
op|'='
name|'_get_objects'
op|'('
string|"'HostStorageSystem'"
op|')'
op|'.'
name|'objects'
op|'['
number|'0'
op|']'
newline|'\n'
name|'iscsi_hba_array'
op|'='
name|'host_storage_sys'
op|'.'
name|'get'
op|'('
string|"'storageDeviceInfo'"
nl|'\n'
string|"'.hostBusAdapter'"
op|')'
newline|'\n'
name|'iscsi_hba'
op|'='
name|'iscsi_hba_array'
op|'.'
name|'HostHostBusAdapter'
op|'['
number|'0'
op|']'
newline|'\n'
name|'if'
name|'hasattr'
op|'('
name|'iscsi_hba'
op|','
string|"'configuredSendTarget'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'iscsi_hba'
op|'.'
name|'configuredSendTarget'
op|'.'
name|'extend'
op|'('
name|'send_targets'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'iscsi_hba'
op|'.'
name|'configuredSendTarget'
op|'='
name|'send_targets'
newline|'\n'
nl|'\n'
DECL|member|__getattr__
dedent|''
dedent|''
name|'def'
name|'__getattr__'
op|'('
name|'self'
op|','
name|'attr_name'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'attr_name'
op|'!='
string|'"Login"'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_check_session'
op|'('
op|')'
newline|'\n'
dedent|''
name|'if'
name|'attr_name'
op|'=='
string|'"Login"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_login'
op|'('
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"SessionIsActive"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_session_is_active'
op|'('
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"TerminateSession"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_terminate_session'
op|'('
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"CreateVM_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_create_vm'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"ReconfigVM_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_reconfig_vm'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"CreateVirtualDisk_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_create_copy_disk'
op|'('
name|'attr_name'
op|','
nl|'\n'
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"name"'
op|')'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"DeleteDatastoreFile_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_delete_file'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"PowerOnVM_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_set_power_state'
op|'('
name|'attr_name'
op|','
nl|'\n'
name|'args'
op|'['
number|'0'
op|']'
op|','
string|'"poweredOn"'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"PowerOffVM_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_set_power_state'
op|'('
name|'attr_name'
op|','
nl|'\n'
name|'args'
op|'['
number|'0'
op|']'
op|','
string|'"poweredOff"'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"RebootGuest"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_just_return'
op|'('
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"ResetVM_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_set_power_state'
op|'('
name|'attr_name'
op|','
nl|'\n'
name|'args'
op|'['
number|'0'
op|']'
op|','
string|'"poweredOn"'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"SuspendVM_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_set_power_state'
op|'('
name|'attr_name'
op|','
nl|'\n'
name|'args'
op|'['
number|'0'
op|']'
op|','
string|'"suspended"'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"CreateSnapshot_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_snapshot_vm'
op|'('
name|'attr_name'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"RemoveSnapshot_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_delete_snapshot'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"CopyVirtualDisk_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_create_copy_disk'
op|'('
name|'attr_name'
op|','
nl|'\n'
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"destName"'
op|')'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"ExtendVirtualDisk_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_extend_disk'
op|'('
name|'attr_name'
op|','
nl|'\n'
name|'kwargs'
op|'.'
name|'get'
op|'('
string|'"size"'
op|')'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"Destroy_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_unregister_vm'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"UnregisterVM"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_unregister_vm'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"CloneVM_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_clone_vm'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"FindAllByUuid"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_find_all_by_uuid'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"SearchDatastore_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_search_ds'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"MoveDatastoreFile_Task"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_move_file'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"MakeDirectory"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_make_dir'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"RetrievePropertiesEx"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_retrieve_properties'
op|'('
nl|'\n'
name|'attr_name'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"ContinueRetrievePropertiesEx"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_retrieve_properties_continue'
op|'('
nl|'\n'
name|'attr_name'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"CancelRetrievePropertiesEx"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_retrieve_properties_cancel'
op|'('
nl|'\n'
name|'attr_name'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"AddPortGroup"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_add_port_group'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
name|'in'
op|'('
string|'"RebootHost_Task"'
op|','
nl|'\n'
string|'"ShutdownHost_Task"'
op|','
nl|'\n'
string|'"PowerUpHostFromStandBy_Task"'
op|','
nl|'\n'
string|'"EnterMaintenanceMode_Task"'
op|','
nl|'\n'
string|'"ExitMaintenanceMode_Task"'
op|','
nl|'\n'
string|'"RescanHba"'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_just_return_task'
op|'('
name|'attr_name'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'attr_name'
op|'=='
string|'"AddInternetScsiSendTargets"'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'lambda'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|':'
name|'self'
op|'.'
name|'_add_iscsi_send_tgt'
op|'('
name|'attr_name'
op|','
nl|'\n'
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
endmarker|''
end_unit
