begin_unit
comment|'# Copyright 2014 Red Hat, Inc.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'# not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'# a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#   http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'# License for the specific language governing permissions and limitations'
nl|'\n'
comment|'# under the License.'
nl|'\n'
nl|'\n'
name|'import'
name|'datetime'
newline|'\n'
nl|'\n'
name|'from'
name|'nova'
name|'import'
name|'objects'
newline|'\n'
name|'from'
name|'nova'
name|'import'
name|'test'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestImageMeta
name|'class'
name|'TestImageMeta'
op|'('
name|'test'
op|'.'
name|'NoDBTestCase'
op|')'
op|':'
newline|'\n'
DECL|member|test_basic_attrs
indent|'    '
name|'def'
name|'test_basic_attrs'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'image'
op|'='
op|'{'
string|"'status'"
op|':'
string|"'active'"
op|','
nl|'\n'
string|"'container_format'"
op|':'
string|"'bare'"
op|','
nl|'\n'
string|"'min_ram'"
op|':'
number|'0'
op|','
nl|'\n'
string|"'updated_at'"
op|':'
string|"'2014-12-12T11:16:36.000000'"
op|','
nl|'\n'
comment|'# Testing string -> int conversion'
nl|'\n'
string|"'min_disk'"
op|':'
string|"'0'"
op|','
nl|'\n'
string|"'owner'"
op|':'
string|"'2d8b9502858c406ebee60f0849486222'"
op|','
nl|'\n'
comment|'# Testing string -> bool conversion'
nl|'\n'
string|"'protected'"
op|':'
string|"'yes'"
op|','
nl|'\n'
string|"'properties'"
op|':'
op|'{'
nl|'\n'
string|"'os_type'"
op|':'
string|"'Linux'"
op|','
nl|'\n'
string|"'hw_video_model'"
op|':'
string|"'vga'"
op|','
nl|'\n'
string|"'hw_video_ram'"
op|':'
string|"'512'"
op|','
nl|'\n'
string|"'hw_qemu_guest_agent'"
op|':'
string|"'yes'"
op|','
nl|'\n'
string|"'hw_scsi_model'"
op|':'
string|"'virtio-scsi'"
op|','
nl|'\n'
op|'}'
op|','
nl|'\n'
string|"'size'"
op|':'
number|'213581824'
op|','
nl|'\n'
string|"'name'"
op|':'
string|"'f16-x86_64-openstack-sda'"
op|','
nl|'\n'
string|"'checksum'"
op|':'
string|"'755122332caeb9f661d5c978adb8b45f'"
op|','
nl|'\n'
string|"'created_at'"
op|':'
string|"'2014-12-10T16:23:14.000000'"
op|','
nl|'\n'
string|"'disk_format'"
op|':'
string|"'qcow2'"
op|','
nl|'\n'
string|"'id'"
op|':'
string|"'c8b1790e-a07d-4971-b137-44f2432936cd'"
nl|'\n'
op|'}'
newline|'\n'
name|'image_meta'
op|'='
name|'objects'
op|'.'
name|'ImageMeta'
op|'.'
name|'from_dict'
op|'('
name|'image'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'active'"
op|','
name|'image_meta'
op|'.'
name|'status'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'bare'"
op|','
name|'image_meta'
op|'.'
name|'container_format'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'0'
op|','
name|'image_meta'
op|'.'
name|'min_ram'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertIsInstance'
op|'('
name|'image_meta'
op|'.'
name|'updated_at'
op|','
name|'datetime'
op|'.'
name|'datetime'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'0'
op|','
name|'image_meta'
op|'.'
name|'min_disk'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'2d8b9502858c406ebee60f0849486222'"
op|','
name|'image_meta'
op|'.'
name|'owner'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'image_meta'
op|'.'
name|'protected'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'213581824'
op|','
name|'image_meta'
op|'.'
name|'size'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'f16-x86_64-openstack-sda'"
op|','
name|'image_meta'
op|'.'
name|'name'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'755122332caeb9f661d5c978adb8b45f'"
op|','
nl|'\n'
name|'image_meta'
op|'.'
name|'checksum'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertIsInstance'
op|'('
name|'image_meta'
op|'.'
name|'created_at'
op|','
name|'datetime'
op|'.'
name|'datetime'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'qcow2'"
op|','
name|'image_meta'
op|'.'
name|'disk_format'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'c8b1790e-a07d-4971-b137-44f2432936cd'"
op|','
name|'image_meta'
op|'.'
name|'id'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertIsInstance'
op|'('
name|'image_meta'
op|'.'
name|'properties'
op|','
name|'objects'
op|'.'
name|'ImageMetaProps'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_no_props
dedent|''
name|'def'
name|'test_no_props'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'image_meta'
op|'='
name|'objects'
op|'.'
name|'ImageMeta'
op|'.'
name|'from_dict'
op|'('
op|'{'
op|'}'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertIsInstance'
op|'('
name|'image_meta'
op|'.'
name|'properties'
op|','
name|'objects'
op|'.'
name|'ImageMetaProps'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|TestImageMetaProps
dedent|''
dedent|''
name|'class'
name|'TestImageMetaProps'
op|'('
name|'test'
op|'.'
name|'NoDBTestCase'
op|')'
op|':'
newline|'\n'
DECL|member|test_normal_props
indent|'    '
name|'def'
name|'test_normal_props'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
string|"'os_type'"
op|':'
string|"'windows'"
op|','
nl|'\n'
string|"'hw_video_model'"
op|':'
string|"'vga'"
op|','
nl|'\n'
string|"'hw_video_ram'"
op|':'
string|"'512'"
op|','
nl|'\n'
string|"'hw_qemu_guest_agent'"
op|':'
string|"'yes'"
op|','
nl|'\n'
comment|'# Fill sane values for the rest here'
nl|'\n'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'windows'"
op|','
name|'virtprops'
op|'.'
name|'os_type'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'vga'"
op|','
name|'virtprops'
op|'.'
name|'hw_video_model'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'512'
op|','
name|'virtprops'
op|'.'
name|'hw_video_ram'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
name|'True'
op|','
name|'virtprops'
op|'.'
name|'hw_qemu_guest_agent'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_default_props
dedent|''
name|'def'
name|'test_default_props'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
nl|'\n'
name|'for'
name|'prop'
name|'in'
name|'virtprops'
op|'.'
name|'fields'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'assertIsNone'
op|'('
name|'virtprops'
op|'.'
name|'get'
op|'('
name|'prop'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_default_prop_value
dedent|''
dedent|''
name|'def'
name|'test_default_prop_value'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|'"hvm"'
op|','
name|'virtprops'
op|'.'
name|'get'
op|'('
string|'"hw_vm_mode"'
op|','
string|'"hvm"'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_non_existant_prop
dedent|''
name|'def'
name|'test_non_existant_prop'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertRaises'
op|'('
name|'AttributeError'
op|','
nl|'\n'
name|'virtprops'
op|'.'
name|'get'
op|','
nl|'\n'
string|'"doesnotexist"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_legacy_compat
dedent|''
name|'def'
name|'test_legacy_compat'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'legacy_props'
op|'='
op|'{'
nl|'\n'
string|"'architecture'"
op|':'
string|"'x86_64'"
op|','
nl|'\n'
string|"'owner_id'"
op|':'
string|"'123'"
op|','
nl|'\n'
string|"'vmware_adaptertype'"
op|':'
string|"'lsiLogic'"
op|','
nl|'\n'
string|"'vmware_disktype'"
op|':'
string|"'preallocated'"
op|','
nl|'\n'
string|"'vmware_image_version'"
op|':'
string|"'2'"
op|','
nl|'\n'
string|"'vmware_ostype'"
op|':'
string|"'rhel3_64Guest'"
op|','
nl|'\n'
string|"'auto_disk_config'"
op|':'
string|"'yes'"
op|','
nl|'\n'
string|"'ipxe_boot'"
op|':'
string|"'yes'"
op|','
nl|'\n'
string|"'xenapi_device_id'"
op|':'
string|"'3'"
op|','
nl|'\n'
string|"'xenapi_image_compression_level'"
op|':'
string|"'2'"
op|','
nl|'\n'
string|"'vmware_linked_clone'"
op|':'
string|"'false'"
op|','
nl|'\n'
string|"'xenapi_use_agent'"
op|':'
string|"'yes'"
op|','
nl|'\n'
string|"'xenapi_skip_agent_inject_ssh'"
op|':'
string|"'no'"
op|','
nl|'\n'
string|"'xenapi_skip_agent_inject_files_at_boot'"
op|':'
string|"'no'"
op|','
nl|'\n'
string|"'cache_in_nova'"
op|':'
string|"'yes'"
op|','
nl|'\n'
string|"'vm_mode'"
op|':'
string|"'hvm'"
op|','
nl|'\n'
string|"'bittorrent'"
op|':'
string|"'yes'"
op|','
nl|'\n'
string|"'mappings'"
op|':'
op|'['
op|']'
op|','
nl|'\n'
string|"'block_device_mapping'"
op|':'
op|'['
op|']'
op|','
nl|'\n'
string|"'bdm_v2'"
op|':'
string|"'yes'"
op|','
nl|'\n'
string|"'root_device_name'"
op|':'
string|"'/dev/vda'"
op|','
nl|'\n'
op|'}'
newline|'\n'
nl|'\n'
name|'image_meta'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'legacy_props'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'x86_64'"
op|','
name|'image_meta'
op|'.'
name|'hw_architecture'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'123'"
op|','
name|'image_meta'
op|'.'
name|'img_owner_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'lsilogic'"
op|','
name|'image_meta'
op|'.'
name|'hw_scsi_model'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'preallocated'"
op|','
name|'image_meta'
op|'.'
name|'hw_disk_type'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'2'
op|','
name|'image_meta'
op|'.'
name|'img_version'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'rhel3_64Guest'"
op|','
name|'image_meta'
op|'.'
name|'os_distro'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'image_meta'
op|'.'
name|'hw_auto_disk_config'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'image_meta'
op|'.'
name|'hw_ipxe_boot'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'3'
op|','
name|'image_meta'
op|'.'
name|'hw_device_id'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'2'
op|','
name|'image_meta'
op|'.'
name|'img_compression_level'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertFalse'
op|'('
name|'image_meta'
op|'.'
name|'img_linked_clone'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'image_meta'
op|'.'
name|'img_use_agent'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertFalse'
op|'('
name|'image_meta'
op|'.'
name|'os_skip_agent_inject_ssh'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertFalse'
op|'('
name|'image_meta'
op|'.'
name|'os_skip_agent_inject_files_at_boot'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'image_meta'
op|'.'
name|'img_cache_in_nova'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'image_meta'
op|'.'
name|'img_bittorrent'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
op|'['
op|']'
op|','
name|'image_meta'
op|'.'
name|'img_mappings'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
op|'['
op|']'
op|','
name|'image_meta'
op|'.'
name|'img_block_device_mapping'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertTrue'
op|'('
name|'image_meta'
op|'.'
name|'img_bdm_v2'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|'"/dev/vda"'
op|','
name|'image_meta'
op|'.'
name|'img_root_device_name'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_duplicate_legacy_and_normal_props
dedent|''
name|'def'
name|'test_duplicate_legacy_and_normal_props'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Both keys are referring to the same object field'
nl|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
string|"'hw_scsi_model'"
op|':'
string|"'virtio-scsi'"
op|','
nl|'\n'
string|"'vmware_adaptertype'"
op|':'
string|"'lsiLogic'"
op|','
nl|'\n'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
comment|'# The normal property always wins vs. the legacy field since'
nl|'\n'
comment|'# _set_attr_from_current_names is called finally'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'virtio-scsi'"
op|','
name|'virtprops'
op|'.'
name|'hw_scsi_model'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_get
dedent|''
name|'def'
name|'test_get'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'('
name|'os_distro'
op|'='
string|"'linux'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
string|"'linux'"
op|','
name|'props'
op|'.'
name|'get'
op|'('
string|"'os_distro'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertIsNone'
op|'('
name|'props'
op|'.'
name|'get'
op|'('
string|"'img_version'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'1'
op|','
name|'props'
op|'.'
name|'get'
op|'('
string|"'img_version'"
op|','
number|'1'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_numa_mem
dedent|''
name|'def'
name|'test_set_numa_mem'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
string|"'hw_numa_nodes'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'hw_numa_mem.0'"
op|':'
string|'"2048"'
op|','
nl|'\n'
string|"'hw_numa_mem.1'"
op|':'
string|'"4096"'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'2'
op|','
name|'virtprops'
op|'.'
name|'hw_numa_nodes'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
op|'['
number|'2048'
op|','
number|'4096'
op|']'
op|','
name|'virtprops'
op|'.'
name|'hw_numa_mem'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_numa_mem_sparse
dedent|''
name|'def'
name|'test_set_numa_mem_sparse'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
string|"'hw_numa_nodes'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'hw_numa_mem.0'"
op|':'
string|'"2048"'
op|','
nl|'\n'
string|"'hw_numa_mem.1'"
op|':'
string|'"1024"'
op|','
nl|'\n'
string|"'hw_numa_mem.3'"
op|':'
string|'"4096"'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'2'
op|','
name|'virtprops'
op|'.'
name|'hw_numa_nodes'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
op|'['
number|'2048'
op|','
number|'1024'
op|']'
op|','
name|'virtprops'
op|'.'
name|'hw_numa_mem'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_numa_mem_no_count
dedent|''
name|'def'
name|'test_set_numa_mem_no_count'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
string|"'hw_numa_mem.0'"
op|':'
string|'"2048"'
op|','
nl|'\n'
string|"'hw_numa_mem.3'"
op|':'
string|'"4096"'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertIsNone'
op|'('
name|'virtprops'
op|'.'
name|'get'
op|'('
string|'"hw_numa_nodes"'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
op|'['
number|'2048'
op|']'
op|','
name|'virtprops'
op|'.'
name|'hw_numa_mem'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_numa_cpus
dedent|''
name|'def'
name|'test_set_numa_cpus'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
string|"'hw_numa_nodes'"
op|':'
number|'2'
op|','
nl|'\n'
string|"'hw_numa_cpus.0'"
op|':'
string|'"0-3"'
op|','
nl|'\n'
string|"'hw_numa_cpus.1'"
op|':'
string|'"4-7"'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'2'
op|','
name|'virtprops'
op|'.'
name|'hw_numa_nodes'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
op|'['
name|'set'
op|'('
op|'['
number|'0'
op|','
number|'1'
op|','
number|'2'
op|','
number|'3'
op|']'
op|')'
op|','
name|'set'
op|'('
op|'['
number|'4'
op|','
number|'5'
op|','
number|'6'
op|','
number|'7'
op|']'
op|')'
op|']'
op|','
nl|'\n'
name|'virtprops'
op|'.'
name|'hw_numa_cpus'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_numa_cpus_sparse
dedent|''
name|'def'
name|'test_set_numa_cpus_sparse'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
string|"'hw_numa_nodes'"
op|':'
number|'4'
op|','
nl|'\n'
string|"'hw_numa_cpus.0'"
op|':'
string|'"0-3"'
op|','
nl|'\n'
string|"'hw_numa_cpus.1'"
op|':'
string|'"4,5"'
op|','
nl|'\n'
string|"'hw_numa_cpus.3'"
op|':'
string|'"6-7"'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
number|'4'
op|','
name|'virtprops'
op|'.'
name|'hw_numa_nodes'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
op|'['
name|'set'
op|'('
op|'['
number|'0'
op|','
number|'1'
op|','
number|'2'
op|','
number|'3'
op|']'
op|')'
op|','
name|'set'
op|'('
op|'['
number|'4'
op|','
number|'5'
op|']'
op|')'
op|']'
op|','
nl|'\n'
name|'virtprops'
op|'.'
name|'hw_numa_cpus'
op|')'
newline|'\n'
nl|'\n'
DECL|member|test_set_numa_cpus_no_count
dedent|''
name|'def'
name|'test_set_numa_cpus_no_count'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'props'
op|'='
op|'{'
string|"'hw_numa_cpus.0'"
op|':'
string|'"0-3"'
op|','
nl|'\n'
string|"'hw_numa_cpus.3'"
op|':'
string|'"4-7"'
op|'}'
newline|'\n'
name|'virtprops'
op|'='
name|'objects'
op|'.'
name|'ImageMetaProps'
op|'.'
name|'from_dict'
op|'('
name|'props'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertIsNone'
op|'('
name|'virtprops'
op|'.'
name|'get'
op|'('
string|'"hw_numa_nodes"'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
op|'['
name|'set'
op|'('
op|'['
number|'0'
op|','
number|'1'
op|','
number|'2'
op|','
number|'3'
op|']'
op|')'
op|']'
op|','
nl|'\n'
name|'virtprops'
op|'.'
name|'hw_numa_cpus'
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
