begin_unit
name|'from'
name|'nova'
op|'.'
name|'endpoint'
op|'.'
name|'rackspace'
op|'.'
name|'controllers'
op|'.'
name|'base'
name|'import'
name|'BaseController'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'endpoint'
name|'import'
name|'images'
newline|'\n'
name|'from'
name|'webob'
name|'import'
name|'exc'
newline|'\n'
nl|'\n'
comment|'#TODO(gundlach): Serialize return values'
nl|'\n'
DECL|class|ImagesController
name|'class'
name|'ImagesController'
op|'('
name|'BaseController'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|variable|_serialization_metadata
indent|'    '
name|'_serialization_metadata'
op|'='
op|'{'
nl|'\n'
string|"'application/xml'"
op|':'
op|'{'
nl|'\n'
string|'"attributes"'
op|':'
op|'{'
nl|'\n'
string|'"image"'
op|':'
op|'['
string|'"id"'
op|','
string|'"name"'
op|','
string|'"updated"'
op|','
string|'"created"'
op|','
string|'"status"'
op|','
nl|'\n'
string|'"serverId"'
op|','
string|'"progress"'
op|']'
nl|'\n'
op|'}'
nl|'\n'
op|'}'
nl|'\n'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|index
name|'def'
name|'index'
op|'('
name|'self'
op|','
name|'req'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'context'
op|'='
name|'req'
op|'.'
name|'environ'
op|'['
string|"'nova.api_request_context'"
op|']'
newline|'\n'
name|'return'
name|'images'
op|'.'
name|'list'
op|'('
name|'context'
op|')'
newline|'\n'
nl|'\n'
DECL|member|show
dedent|''
name|'def'
name|'show'
op|'('
name|'self'
op|','
name|'req'
op|','
name|'id'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'context'
op|'='
name|'req'
op|'.'
name|'environ'
op|'['
string|"'nova.api_request_context'"
op|']'
newline|'\n'
name|'return'
name|'images'
op|'.'
name|'list'
op|'('
name|'context'
op|','
name|'filter_list'
op|'='
op|'['
name|'id'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|delete
dedent|''
name|'def'
name|'delete'
op|'('
name|'self'
op|','
name|'req'
op|','
name|'id'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'context'
op|'='
name|'req'
op|'.'
name|'environ'
op|'['
string|"'nova.api_request_context'"
op|']'
newline|'\n'
comment|"# TODO(gundlach): make sure it's an image they may delete?"
nl|'\n'
name|'return'
name|'images'
op|'.'
name|'deregister'
op|'('
name|'context'
op|','
name|'id'
op|')'
newline|'\n'
nl|'\n'
DECL|member|create
dedent|''
name|'def'
name|'create'
op|'('
name|'self'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
comment|'# TODO(gundlach): no idea how to hook this up.  code below'
nl|'\n'
comment|'# is from servers.py.'
nl|'\n'
indent|'        '
name|'inst'
op|'='
name|'self'
op|'.'
name|'build_server_instance'
op|'('
name|'kwargs'
op|'['
string|"'server'"
op|']'
op|')'
newline|'\n'
name|'rpc'
op|'.'
name|'cast'
op|'('
nl|'\n'
name|'FLAGS'
op|'.'
name|'compute_topic'
op|','
op|'{'
nl|'\n'
string|'"method"'
op|':'
string|'"run_instance"'
op|','
nl|'\n'
string|'"args"'
op|':'
op|'{'
string|'"instance_id"'
op|':'
name|'inst'
op|'.'
name|'instance_id'
op|'}'
op|'}'
op|')'
newline|'\n'
nl|'\n'
DECL|member|update
dedent|''
name|'def'
name|'update'
op|'('
name|'self'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
comment|'# TODO (gundlach): no idea how to hook this up.  code below'
nl|'\n'
comment|'# is from servers.py.'
nl|'\n'
indent|'        '
name|'instance_id'
op|'='
name|'kwargs'
op|'['
string|"'id'"
op|']'
newline|'\n'
name|'instance'
op|'='
name|'compute'
op|'.'
name|'InstanceDirectory'
op|'('
op|')'
op|'.'
name|'get'
op|'('
name|'instance_id'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'instance'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'ServerNotFound'
op|'('
string|'"The requested server was not found"'
op|')'
newline|'\n'
dedent|''
name|'instance'
op|'.'
name|'update'
op|'('
name|'kwargs'
op|'['
string|"'server'"
op|']'
op|')'
newline|'\n'
name|'instance'
op|'.'
name|'save'
op|'('
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
