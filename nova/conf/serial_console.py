begin_unit
comment|'# Copyright 2015 OpenStack Foundation'
nl|'\n'
comment|'# All Rights Reserved.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
name|'from'
name|'oslo_config'
name|'import'
name|'cfg'
newline|'\n'
nl|'\n'
DECL|variable|DEFAULT_PORT_RANGE
name|'DEFAULT_PORT_RANGE'
op|'='
string|"'10000:20000'"
newline|'\n'
nl|'\n'
DECL|variable|serial_opt_group
name|'serial_opt_group'
op|'='
name|'cfg'
op|'.'
name|'OptGroup'
op|'('
string|'"serial_console"'
op|','
nl|'\n'
DECL|variable|title
name|'title'
op|'='
string|'"The serial console feature"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe serial console feature allows you to connect to a guest in case a\ngraphical console like VNC, RDP or SPICE is not available. This is only\nsupported for the libvirt driver."""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|enabled_opt
name|'enabled_opt'
op|'='
name|'cfg'
op|'.'
name|'BoolOpt'
op|'('
string|"'enabled'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'False'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nEnable the serial console feature.\n\nIn order to use this feature, the service ``nova-serialproxy`` needs to run.\nThis service is typically executed on the controller node.\n\nPossible values:\n\n* True: Enables the feature\n* False: Disables the feature\n\nServices which consume this:\n\n* ``nova-compute``\n\nInterdependencies to other options:\n\n* None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|port_range_opt
name|'port_range_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|"'port_range'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'DEFAULT_PORT_RANGE'
op|','
nl|'\n'
DECL|variable|regex
name|'regex'
op|'='
string|'"\\d+:\\d+"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nA range of TCP ports a guest can use for its backend.\n\nEach instance which gets created will use one port out of this range. If the\nrange is not big enough to provide another port for an new instance, this\ninstance won\'t get launched.\n\nPossible values:\n\nEach string which passes the regex ``\\d+:\\d+`` For example ``10000:20000``.\nBe sure that the first port number is lower than the second port number.\n\nServices which consume this:\n\n* ``nova-compute``\n\nInterdependencies to other options:\n\n* None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|base_url_opt
name|'base_url_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|"'base_url'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|"'ws://127.0.0.1:6083/'"
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe URL an end user would use to connect to the ``nova-serialproxy`` service.\n\nThe ``nova-serialproxy`` service is called with this token enriched URL\nand establishes the connection to the proper instance.\n\nPossible values:\n\n* <scheme><IP-address><port-number>\n\nServices which consume this:\n\n* ``nova-compute``\n\nInterdependencies to other options:\n\n* The IP address must be identical to the address to which the\n  ``nova-serialproxy`` service is listening (see option ``serialproxy_host``\n  in this section).\n* The port must be the same as in the option ``serialproxy_port`` of this\n  section.\n* If you choose to use a secured websocket connection, then start this option\n  with ``wss://`` instead of the unsecured ``ws://``. The options ``cert``\n  and ``key`` in the ``[DEFAULT]`` section have to be set for that.\n"""'
op|')'
newline|'\n'
nl|'\n'
comment|'# This config option was never used'
nl|'\n'
DECL|variable|listen_opt
name|'listen_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|"'listen'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|"'127.0.0.1'"
op|','
nl|'\n'
DECL|variable|deprecated_for_removal
name|'deprecated_for_removal'
op|'='
name|'True'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nDEPRECATED: this option has no effect anymore. Please use\n"proxyclient_address" instead. This option is deprecated and will be removed\nin future releases."""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|proxyclient_address_opt
name|'proxyclient_address_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|"'proxyclient_address'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|"'127.0.0.1'"
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe IP address to which proxy clients (like ``nova-serialproxy``) should\nconnect to get the serial console of an instance.\n\nThis is typically the IP address of the host of a ``nova-compute`` service.\n\nPossible values:\n\n* An IP address\n\nServices which consume this:\n\n* ``nova-compute``\n\nInterdependencies to other options:\n\n* None\n"""'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|variable|serialproxy_host_opt
name|'serialproxy_host_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|"'serialproxy_host'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|"'0.0.0.0'"
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe IP address which is used by the ``nova-serialproxy`` service to listen\nfor incoming requests.\n\nThe ``nova-serialproxy`` service listens on this IP address for incoming\nconnection requests to instances which expose serial console.\n\nPossible values:\n\n* An IP address\n\nServices which consume this:\n\n* ``nova-serialproxy``\n\nInterdependencies to other options:\n\n* Ensure that this is the same IP address which is defined in the option\n  ``base_url`` of this section or use ``0.0.0.0`` to listen on all addresses.\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|serialproxy_port_opt
name|'serialproxy_port_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|"'serialproxy_port'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'6083'
op|','
nl|'\n'
DECL|variable|min
name|'min'
op|'='
number|'1'
op|','
nl|'\n'
DECL|variable|max
name|'max'
op|'='
number|'65535'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe port number which is used by the ``nova-serialproxy`` service to listen\nfor incoming requests.\n\nThe ``nova-serialproxy`` service listens on this port number for incoming\nconnection requests to instances which expose serial console.\n\nPossible values:\n\n* A port number\n\nServices which consume this:\n\n* ``nova-serialproxy``\n\nInterdependencies to other options:\n\n* Ensure that this is the same port number which is defined in the option\n  ``base_url`` of this section.\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|ALL_OPTS
name|'ALL_OPTS'
op|'='
op|'['
name|'enabled_opt'
op|','
nl|'\n'
name|'port_range_opt'
op|','
nl|'\n'
name|'base_url_opt'
op|','
nl|'\n'
name|'listen_opt'
op|','
nl|'\n'
name|'proxyclient_address_opt'
op|','
nl|'\n'
name|'serialproxy_host_opt'
op|','
nl|'\n'
name|'serialproxy_port_opt'
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|register_opts
name|'def'
name|'register_opts'
op|'('
name|'conf'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'conf'
op|'.'
name|'register_opts'
op|'('
name|'ALL_OPTS'
op|','
name|'group'
op|'='
name|'serial_opt_group'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|register_cli_opts
dedent|''
name|'def'
name|'register_cli_opts'
op|'('
name|'conf'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'conf'
op|'.'
name|'register_cli_opt'
op|'('
name|'serialproxy_host_opt'
op|','
string|'"serial_console"'
op|')'
newline|'\n'
name|'conf'
op|'.'
name|'register_cli_opt'
op|'('
name|'serialproxy_port_opt'
op|','
string|'"serial_console"'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|list_opts
dedent|''
name|'def'
name|'list_opts'
op|'('
op|')'
op|':'
newline|'\n'
comment|'# Because of bug 1395819 in oslo.config we cannot pass in the OptGroup.'
nl|'\n'
comment|'# As soon as this bug is fixed is oslo.config and Nova uses the'
nl|'\n'
comment|'# version which contains this fix, we can pass in the OptGroup instead'
nl|'\n'
comment|'# of its name. This allows the generation of the group help too.'
nl|'\n'
indent|'    '
name|'return'
op|'('
name|'serial_opt_group'
op|'.'
name|'name'
op|','
name|'ALL_OPTS'
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
