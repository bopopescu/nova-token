begin_unit
comment|'# Copyright 2015 OpenStack Foundation'
nl|'\n'
comment|'# All Rights Reserved.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
name|'from'
name|'oslo_config'
name|'import'
name|'cfg'
newline|'\n'
nl|'\n'
DECL|variable|DEFAULT_GROUP_NAME
name|'DEFAULT_GROUP_NAME'
op|'='
string|'"DEFAULT"'
newline|'\n'
comment|'# The scheduler has options in several groups'
nl|'\n'
DECL|variable|METRICS_GROUP_NAME
name|'METRICS_GROUP_NAME'
op|'='
string|'"metrics"'
newline|'\n'
DECL|variable|TRUSTED_GROUP_NAME
name|'TRUSTED_GROUP_NAME'
op|'='
string|'"trusted_computing"'
newline|'\n'
DECL|variable|UPGRADE_GROUP_NAME
name|'UPGRADE_GROUP_NAME'
op|'='
string|'"upgrade_levels"'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|variable|host_subset_size_opt
name|'host_subset_size_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|'"scheduler_host_subset_size"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'1'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nNew instances will be scheduled on a host chosen randomly from a subset of the\nN best hosts, where N is the value set by this option.  Valid values are 1 or\ngreater. Any value less than one will be treated as 1.\n\nSetting this to a value greater than 1 will reduce the chance that multiple\nscheduler processes handling similar requests will select the same host,\ncreating a potential race condition. By selecting a host randomly from the N\nhosts that best fit the request, the chance of a conflict is reduced. However,\nthe higher you set this value, the less optimal the chosen host may be for a\ngiven request.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|bm_default_filter_opt
name|'bm_default_filter_opt'
op|'='
name|'cfg'
op|'.'
name|'ListOpt'
op|'('
string|'"baremetal_scheduler_default_filters"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
op|'['
nl|'\n'
string|'"RetryFilter"'
op|','
nl|'\n'
string|'"AvailabilityZoneFilter"'
op|','
nl|'\n'
string|'"ComputeFilter"'
op|','
nl|'\n'
string|'"ComputeCapabilitiesFilter"'
op|','
nl|'\n'
string|'"ImagePropertiesFilter"'
op|','
nl|'\n'
string|'"ExactRamFilter"'
op|','
nl|'\n'
string|'"ExactDiskFilter"'
op|','
nl|'\n'
string|'"ExactCoreFilter"'
op|','
nl|'\n'
op|']'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis option specifies the filters used for filtering baremetal hosts. The value\nshould be a list of strings, with each string being the name of a filter class\nto be used. When used, they will be applied in order, so place your most\nrestrictive filters first to make the filtering process more efficient.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    If the \'scheduler_use_baremetal_filters\' option is False, this option has\n    no effect.\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|use_bm_filters_opt
name|'use_bm_filters_opt'
op|'='
name|'cfg'
op|'.'
name|'BoolOpt'
op|'('
string|'"scheduler_use_baremetal_filters"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'False'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nSet this to True to tell the nova scheduler that it should use the filters\nspecified in the \'baremetal_scheduler_default_filters\' option. If you are not\nscheduling baremetal nodes, leave this at the default setting of False.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    If this option is set to True, then the filters specified in the\n    \'baremetal_scheduler_default_filters\' are used instead of the filters\n    specified in \'scheduler_default_filters\'.\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|host_mgr_avail_filt_opt
name|'host_mgr_avail_filt_opt'
op|'='
name|'cfg'
op|'.'
name|'MultiStrOpt'
op|'('
string|'"scheduler_available_filters"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
op|'['
string|'"nova.scheduler.filters.all_filters"'
op|']'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis is an unordered list of the filter classes the Nova scheduler may apply.\nOnly the filters specified in the \'scheduler_default_filters\' option will be\nused, but any filter appearing in that option must also be included in this\nlist.\n\nBy default, this is set to all filters that are included with Nova. If you wish\nto change this, replace this with a list of strings, where each element is the\npath to a filter.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    scheduler_default_filters\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|host_mgr_default_filt_opt
name|'host_mgr_default_filt_opt'
op|'='
name|'cfg'
op|'.'
name|'ListOpt'
op|'('
string|'"scheduler_default_filters"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
op|'['
nl|'\n'
string|'"RetryFilter"'
op|','
nl|'\n'
string|'"AvailabilityZoneFilter"'
op|','
nl|'\n'
string|'"RamFilter"'
op|','
nl|'\n'
string|'"DiskFilter"'
op|','
nl|'\n'
string|'"ComputeFilter"'
op|','
nl|'\n'
string|'"ComputeCapabilitiesFilter"'
op|','
nl|'\n'
string|'"ImagePropertiesFilter"'
op|','
nl|'\n'
string|'"ServerGroupAntiAffinityFilter"'
op|','
nl|'\n'
string|'"ServerGroupAffinityFilter"'
op|','
nl|'\n'
op|']'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis option is the list of filter class names that will be used for filtering\nhosts. The use of \'default\' in the name of this option implies that other\nfilters may sometimes be used, but that is not the case. These filters will be\napplied in the order they are listed, so place your most restrictive filters\nfirst to make the filtering process more efficient.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    All of the filters in this option *must* be present in the\n    \'scheduler_available_filters\' option, or a SchedulerHostFilterNotFound\n    exception will be raised.\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|host_mgr_sched_wgt_cls_opt
name|'host_mgr_sched_wgt_cls_opt'
op|'='
name|'cfg'
op|'.'
name|'ListOpt'
op|'('
string|'"scheduler_weight_classes"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
op|'['
string|'"nova.scheduler.weights.all_weighers"'
op|']'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis is a list of weigher class names. Only hosts which pass the filters are\nweighed. The weight for any host starts at 0, and the weighers order these\nhosts by adding to or subtracting from the weight assigned by the previous\nweigher. Weights may become negative.\n\nAn instance will be scheduled to one of the N most-weighted hosts, where N is\n\'scheduler_host_subset_size\'.\n\nBy default, this is set to all weighers that are included with Nova. If you\nwish to change this, replace this with a list of strings, where each element is\nthe path to a weigher.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|host_mgr_tracks_inst_chg_opt
name|'host_mgr_tracks_inst_chg_opt'
op|'='
name|'cfg'
op|'.'
name|'BoolOpt'
op|'('
string|'"scheduler_tracks_instance_changes"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'True'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe scheduler may need information about the instances on a host in order to\nevaluate its filters and weighers. The most common need for this information is\nfor the (anti-)affinity filters, which need to choose a host based on the\ninstances already running on a host.\n\nIf the configured filters and weighers do not need this information, disabling\nthis option will improve performance. It may also be disabled when the tracking\noverhead proves too heavy, although this will cause classes requiring host\nusage data to query the database on each request instead.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|rpc_sched_topic_opt
name|'rpc_sched_topic_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|'"scheduler_topic"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|'"scheduler"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis is the message queue topic that the scheduler \'listens\' on. It is used\nwhen the scheduler service is started up to configure the queue, and whenever\nan RPC call to the scheduler is made. There is almost never any reason to ever\nchange this value.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|scheduler_json_config_location_opt
name|'scheduler_json_config_location_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
nl|'\n'
string|'"scheduler_json_config_location"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|'""'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe absolute path to the scheduler configuration JSON file, if any. This file\nlocation is monitored by the scheduler for changes and reloads it if needed. It\nis converted from JSON to a Python data structure, and passed into the\nfiltering and weighing functions of the scheduler, which can use it for dynamic\nconfiguration.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|sched_driver_host_mgr_opt
name|'sched_driver_host_mgr_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|'"scheduler_host_manager"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|'"host_manager"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe scheduler host manager to use, which manages the in-memory picture of the\nhosts that the scheduler uses.\n\nThe option value should be chosen from one of the entrypoints under the\nnamespace \'nova.scheduler.host_manager\' of file \'setup.cfg\'. For example,\n\'host_manager\' is the default setting. Aside from the default, the only other\noption as of the Mitaka release is \'ironic_host_manager\', which should be used\nif you\'re using Ironic to provision bare-metal instances.\n\nThis option also supports a full class path style, for example\n"nova.scheduler.host_manager.HostManager", but note this support is deprecated\nand will be dropped in the N release.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|driver_opt
name|'driver_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|'"scheduler_driver"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|'"filter_scheduler"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe class of the driver used by the scheduler. This should be chosen from one\nof the entrypoints under the namespace \'nova.scheduler.driver\' of file\n\'setup.cfg\'. If nothing is specified in this option, the \'filter_scheduler\' is\nused.\n\nThis option also supports deprecated full Python path to the class to be used.\nFor example, "nova.scheduler.filter_scheduler.FilterScheduler". But note: this\nsupport will be dropped in the N Release.\n\nOther options are:\n\n    * \'caching_scheduler\' which aggressively caches the system state for better\n    individual scheduler performance at the risk of more retries when running\n    multiple schedulers.\n\n    * \'chance_scheduler\' which simply picks a host at random.\n\n    * \'fake_scheduler\' which is used for testing.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|driver_period_opt
name|'driver_period_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|'"scheduler_driver_task_period"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'60'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis value controls how often (in seconds) to run periodic tasks in the\nscheduler. The specific tasks that are run for each period are determined by\nthe particular scheduler being used.\n\nIf this is larger than the nova-service \'service_down_time\' setting, Nova may\nreport the scheduler service as down. This is because the scheduler driver is\nresponsible for sending a heartbeat and it will only do that as often as this\noption allows. As each scheduler can work a little differently than the others,\nbe sure to test this with your selected scheduler.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    ``nova-service service_down_time``\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|isolated_img_opt
name|'isolated_img_opt'
op|'='
name|'cfg'
op|'.'
name|'ListOpt'
op|'('
string|'"isolated_images"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
op|'['
op|']'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nIf there is a need to restrict some images to only run on certain designated\nhosts, list those image UUIDs here.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'IsolatedHostsFilter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    scheduler/isolated_hosts\n    scheduler/restrict_isolated_hosts_to_isolated_images\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|isolated_host_opt
name|'isolated_host_opt'
op|'='
name|'cfg'
op|'.'
name|'ListOpt'
op|'('
string|'"isolated_hosts"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
op|'['
op|']'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nIf there is a need to restrict some images to only run on certain designated\nhosts, list those host names here.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'IsolatedHostsFilter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    scheduler/isolated_images\n    scheduler/restrict_isolated_hosts_to_isolated_images\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|restrict_iso_host_img_opt
name|'restrict_iso_host_img_opt'
op|'='
name|'cfg'
op|'.'
name|'BoolOpt'
op|'('
nl|'\n'
string|'"restrict_isolated_hosts_to_isolated_images"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'True'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis setting determines if the scheduler\'s isolated_hosts filter will allow\nnon-isolated images on a host designated as an isolated host. When set to True\n(the default), non-isolated images will not be allowed to be built on isolated\nhosts. When False, non-isolated images can be built on both isolated and\nnon-isolated hosts alike.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'IsolatedHostsFilter\' filter is enabled. Even\nthen, this option doesn\'t affect the behavior of requests for isolated images,\nwhich will *always* be restricted to isolated hosts.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    scheduler/isolated_images\n    scheduler/isolated_hosts\n"""'
op|')'
newline|'\n'
nl|'\n'
comment|'# This option specifies an option group, so register separately'
nl|'\n'
DECL|variable|rpcapi_cap_opt
name|'rpcapi_cap_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|'"scheduler"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nSets a version cap (limit) for messages sent to scheduler services. In the\nsituation where there were multiple scheduler services running, and they were\nnot being upgraded together, you would set this to the lowest deployed version\nto guarantee that other services never send messages that any of your running\nschedulers cannot understand.\n\nThis is rarely needed in practice as most deployments run a single scheduler.\nIt exists mainly for design compatibility with the other services, such as\ncompute, which are routinely upgraded in a rolling fashion.\n\n* Services that use this:\n\n    ``nova-compute, nova-conductor``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
comment|'# These opts are registered as a separate OptGroup'
nl|'\n'
DECL|variable|trusted_opts
name|'trusted_opts'
op|'='
op|'['
nl|'\n'
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|'"attestation_server"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe host to use as the attestation server.\n\nCloud computing pools can involve thousands of compute nodes located at\ndifferent geographical locations, making it difficult for cloud providers to\nidentify a node\'s trustworthiness. When using the Trusted filter, users can\nrequest that their VMs only be placed on nodes that have been verified by the\nattestation server specified in this option.\n\nThe value is a string, and can be either an IP address or FQDN.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'TrustedFilter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    attestation_server_ca_file\n    attestation_port\n    attestation_api_url\n    attestation_auth_blob\n    attestation_auth_timeout\n    attestation_insecure_ssl\n"""'
op|')'
op|','
nl|'\n'
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|'"attestation_server_ca_file"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe absolute path to the certificate to use for authentication when connecting\nto the attestation server. See the `attestation_server` help text for more\ninformation about host verification.\n\nThe value is a string, and must point to a file that is readable by the\nscheduler.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'TrustedFilter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    attestation_server\n    attestation_port\n    attestation_api_url\n    attestation_auth_blob\n    attestation_auth_timeout\n    attestation_insecure_ssl\n"""'
op|')'
op|','
nl|'\n'
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|'"attestation_port"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|'"8443"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe port to use when connecting to the attestation server. See the\n`attestation_server` help text for more information about host verification.\n\nValid values are strings, not integers, but must be digits only.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'TrustedFilter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    attestation_server\n    attestation_server_ca_file\n    attestation_api_url\n    attestation_auth_blob\n    attestation_auth_timeout\n    attestation_insecure_ssl\n"""'
op|')'
op|','
nl|'\n'
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|'"attestation_api_url"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|'"/OpenAttestationWebServices/V1.0"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe URL on the attestation server to use. See the `attestation_server` help\ntext for more information about host verification.\n\nThis value must be just that path portion of the full URL, as it will be joined\nto the host specified in the attestation_server option.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'TrustedFilter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    attestation_server\n    attestation_server_ca_file\n    attestation_port\n    attestation_auth_blob\n    attestation_auth_timeout\n    attestation_insecure_ssl\n"""'
op|')'
op|','
nl|'\n'
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|'"attestation_auth_blob"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nAttestation servers require a specific blob that is used to authenticate. The\ncontent and format of the blob are determined by the particular attestation\nserver being used. There is no default value; you must supply the value as\nspecified by your attestation service. See the `attestation_server` help text\nfor more information about host verification.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'TrustedFilter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    attestation_server\n    attestation_server_ca_file\n    attestation_port\n    attestation_api_url\n    attestation_auth_timeout\n    attestation_insecure_ssl\n"""'
op|')'
op|','
nl|'\n'
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|'"attestation_auth_timeout"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'60'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis value controls how long a successful attestation is cached. Once this\nperiod has elapsed, a new attestation request will be made. See the\n`attestation_server` help text for more information about host verification.\n\nThe value is in seconds. Valid values must be positive integers for any\ncaching; setting this to zero or a negative value will result in calls to the\nattestation_server for every request, which may impact performance.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'TrustedFilter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    attestation_server\n    attestation_server_ca_file\n    attestation_port\n    attestation_api_url\n    attestation_auth_blob\n    attestation_insecure_ssl\n"""'
op|')'
op|','
nl|'\n'
name|'cfg'
op|'.'
name|'BoolOpt'
op|'('
string|'"attestation_insecure_ssl"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'False'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nWhen set to True, the SSL certificate verification is skipped for the\nattestation service. See the `attestation_server` help text for more\ninformation about host verification.\n\nValid values are True or False. The default is False.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'TrustedFilter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    attestation_server\n    attestation_server_ca_file\n    attestation_port\n    attestation_api_url\n    attestation_auth_blob\n    attestation_auth_timeout\n"""'
op|')'
op|','
nl|'\n'
op|']'
newline|'\n'
nl|'\n'
DECL|variable|max_io_ops_per_host_opt
name|'max_io_ops_per_host_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|'"max_io_ops_per_host"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'8'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis setting caps the number of instances on a host that can be actively\nperforming IO (in a build, resize, snapshot, migrate, rescue, or unshelve task\nstate) before that host becomes ineligible to build new instances.\n\nValid values are positive integers: 1 or greater.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'io_ops_filter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|agg_img_prop_iso_namespace_opt
name|'agg_img_prop_iso_namespace_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
nl|'\n'
string|'"aggregate_image_properties_isolation_namespace"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nImages and hosts can be configured so that certain images can only be scheduled\nto hosts in a particular aggregate. This is done with metadata values set on\nthe host aggregate that are identified by beginning with the value of this\noption. If the host is part of an aggregate with such a metadata key, the image\nin the request spec must have the value of that metadata in its properties in\norder for the scheduler to consider the host as acceptable.\n\nValid values are strings.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'aggregate_image_properties_isolation\' filter is\nenabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    aggregate_image_properties_isolation_separator\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|agg_img_prop_iso_separator_opt
name|'agg_img_prop_iso_separator_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
nl|'\n'
string|'"aggregate_image_properties_isolation_separator"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|'"."'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nWhen using the aggregate_image_properties_isolation filter, the relevant\nmetadata keys are prefixed with the namespace defined in the\naggregate_image_properties_isolation_namespace configuration option plus a\nseparator. This option defines the separator to be used. It defaults to a\nperiod (\'.\').\n\nValid values are strings.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'aggregate_image_properties_isolation\' filter is\nenabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    aggregate_image_properties_isolation_namespace\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|max_instances_per_host_opt
name|'max_instances_per_host_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|'"max_instances_per_host"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'50'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nIf you need to limit the number of instances on any given host, set this option\nto the maximum number of instances you want to allow. The num_instances_filter\nwill reject any host that has at least as many instances as this option\'s\nvalue.\n\nValid values are positive integers; setting it to zero will cause all hosts to\nbe rejected if the num_instances_filter is active.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'num_instances_filter\' filter is enabled.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|ram_weight_mult_opt
name|'ram_weight_mult_opt'
op|'='
name|'cfg'
op|'.'
name|'FloatOpt'
op|'('
string|'"ram_weight_multiplier"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'1.0'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis option determines how hosts with more or less available RAM are weighed. A\npositive value will result in the scheduler preferring hosts with more\navailable RAM, and a negative number will result in the scheduler preferring\nhosts with less available RAM. Another way to look at it is that positive\nvalues for this option will tend to spread instances across many hosts, while\nnegative values will tend to fill up (stack) hosts as much as possible before\nscheduling to a less-used host. The absolute value, whether positive or\nnegative, controls how strong the RAM weigher is relative to other weighers.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'ram\' weigher is enabled.\n\nValid values are numeric, either integer or float.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|disk_weight_mult_opt
name|'disk_weight_mult_opt'
op|'='
name|'cfg'
op|'.'
name|'FloatOpt'
op|'('
string|'"disk_weight_multiplier"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'1.0'
op|','
nl|'\n'
DECL|variable|help
name|'help'
op|'='
string|'"Multiplier used for weighing free disk space. Negative "'
nl|'\n'
string|'"numbers mean to stack vs spread."'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|io_ops_weight_mult_opt
name|'io_ops_weight_mult_opt'
op|'='
name|'cfg'
op|'.'
name|'FloatOpt'
op|'('
string|'"io_ops_weight_multiplier"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
op|'-'
number|'1.0'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis option determines how hosts with differing workloads are weighed. Negative\nvalues, such as the default, will result in the scheduler preferring hosts with\nlighter workloads whereas positive values will prefer hosts with heavier\nworkloads. Another way to look at it is that positive values for this option\nwill tend to schedule instances onto hosts that are already busy, while\nnegative values will tend to distribute the workload across more hosts. The\nabsolute value, whether positive or negative, controls how strong the io_ops\nweigher is relative to other weighers.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect. Also note that this setting\nonly affects scheduling if the \'io_ops\' weigher is enabled.\n\nValid values are numeric, either integer or float.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
comment|'# These opts are registered as a separate OptGroup'
nl|'\n'
DECL|variable|metrics_weight_opts
name|'metrics_weight_opts'
op|'='
op|'['
nl|'\n'
name|'cfg'
op|'.'
name|'FloatOpt'
op|'('
string|'"weight_multiplier"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'1.0'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nWhen using metrics to weight the suitability of a host, you can use this option\nto change how the calculated weight influences the weight assigned to a host as\nfollows:\n\n    * Greater than 1.0: increases the effect of the metric on overall weight.\n\n    * Equal to 1.0: No change to the calculated weight.\n\n    * Less than 1.0, greater than 0: reduces the effect of the metric on\n    overall weight.\n\n    * 0: The metric value is ignored, and the value of the\n    \'weight_of_unavailable\' option is returned instead.\n\n    * Greater than -1.0, less than 0: the effect is reduced and reversed.\n\n    * -1.0: the effect is reversed\n\n    * Less than -1.0: the effect is increased proportionally and reversed.\n\nValid values are numeric, either integer or float.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    weight_of_unavailable\n"""'
op|')'
op|','
nl|'\n'
name|'cfg'
op|'.'
name|'ListOpt'
op|'('
string|'"weight_setting"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
op|'['
op|']'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis setting specifies the metrics to be weighed and the relative ratios for\neach metric. This should be a single string value, consisting of a series of\none or more \'name=ratio\' pairs, separated by commas, where \'name\' is the name\nof the metric to be weighed, and \'ratio\' is the relative weight for that\nmetric.\n\nNote that if the ratio is set to 0, the metric value is ignored, and instead\nthe weight will be set to the value of the \'weight_of_unavailable\' option.\n\nAs an example, let\'s consider the case where this option is set to:\n\n    ``name1=1.0, name2=-1.3``\n\nThe final weight will be:\n\n    ``(name1.value * 1.0) + (name2.value * -1.3)``\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    weight_of_unavailable\n"""'
op|')'
op|','
nl|'\n'
name|'cfg'
op|'.'
name|'BoolOpt'
op|'('
string|'"required"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'True'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis setting determines how any unavailable metrics are treated. If this option\nis set to True, any hosts for which a metric is unavailable will raise an\nexception, so it is recommended to also use the MetricFilter to filter out\nthose hosts before weighing.\n\nWhen this option is False, any metric being unavailable for a host will set the\nhost weight to \'weight_of_unavailable\'.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    weight_of_unavailable\n"""'
op|')'
op|','
nl|'\n'
name|'cfg'
op|'.'
name|'FloatOpt'
op|'('
string|'"weight_of_unavailable"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'float'
op|'('
op|'-'
number|'10000.0'
op|')'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nWhen any of the following conditions are met, this value will be used in place\nof any actual metric value:\n\n    * One of the metrics named in \'weight_setting\' is not available for a host,\n    and the value of \'required\' is False.\n\n    * The ratio specified for a metric in \'weight_setting\' is 0.\n\n    * The \'weight_multiplier\' option is set to 0.\n\nThis option is only used by the FilterScheduler and its subclasses; if you use\na different scheduler, this option has no effect.\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    weight_setting\n    required\n    weight_multiplier\n"""'
op|')'
op|','
nl|'\n'
op|']'
newline|'\n'
nl|'\n'
DECL|variable|scheduler_max_att_opt
name|'scheduler_max_att_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|'"scheduler_max_attempts"'
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'3'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThis is the maximum number of attempts that will be made to schedule an\ninstance before it is assumed that the failures aren\'t due to normal occasional\nrace conflicts, but rather some other problem. When this is reached a\nMaxRetriesExceeded exception is raised, and the instance is set to an error\nstate.\n\nValid values are positive integers (1 or greater).\n\n* Services that use this:\n\n    ``nova-scheduler``\n\n* Related options:\n\n    None\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|soft_affinity_weight_opt
name|'soft_affinity_weight_opt'
op|'='
name|'cfg'
op|'.'
name|'FloatOpt'
op|'('
string|"'soft_affinity_weight_multiplier'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'1.0'
op|','
nl|'\n'
DECL|variable|help
name|'help'
op|'='
string|"'Multiplier used for weighing hosts '"
nl|'\n'
string|"'for group soft-affinity. Only a '"
nl|'\n'
string|"'positive value is meaningful. Negative '"
nl|'\n'
string|"'means that the behavior will change to '"
nl|'\n'
string|"'the opposite, which is soft-anti-affinity.'"
op|')'
newline|'\n'
nl|'\n'
DECL|variable|soft_anti_affinity_weight_opt
name|'soft_anti_affinity_weight_opt'
op|'='
name|'cfg'
op|'.'
name|'FloatOpt'
op|'('
nl|'\n'
string|"'soft_anti_affinity_weight_multiplier'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'1.0'
op|','
nl|'\n'
DECL|variable|help
name|'help'
op|'='
string|"'Multiplier used for weighing hosts '"
nl|'\n'
string|"'for group soft-anti-affinity. Only a '"
nl|'\n'
string|"'positive value is meaningful. Negative '"
nl|'\n'
string|"'means that the behavior will change to '"
nl|'\n'
string|"'the opposite, which is soft-affinity.'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|variable|default_opts
name|'default_opts'
op|'='
op|'['
name|'host_subset_size_opt'
op|','
nl|'\n'
name|'bm_default_filter_opt'
op|','
nl|'\n'
name|'use_bm_filters_opt'
op|','
nl|'\n'
name|'host_mgr_avail_filt_opt'
op|','
nl|'\n'
name|'host_mgr_default_filt_opt'
op|','
nl|'\n'
name|'host_mgr_sched_wgt_cls_opt'
op|','
nl|'\n'
name|'host_mgr_tracks_inst_chg_opt'
op|','
nl|'\n'
name|'rpc_sched_topic_opt'
op|','
nl|'\n'
name|'sched_driver_host_mgr_opt'
op|','
nl|'\n'
name|'driver_opt'
op|','
nl|'\n'
name|'driver_period_opt'
op|','
nl|'\n'
name|'scheduler_json_config_location_opt'
op|','
nl|'\n'
name|'isolated_img_opt'
op|','
nl|'\n'
name|'isolated_host_opt'
op|','
nl|'\n'
name|'restrict_iso_host_img_opt'
op|','
nl|'\n'
name|'max_io_ops_per_host_opt'
op|','
nl|'\n'
name|'agg_img_prop_iso_namespace_opt'
op|','
nl|'\n'
name|'agg_img_prop_iso_separator_opt'
op|','
nl|'\n'
name|'max_instances_per_host_opt'
op|','
nl|'\n'
name|'ram_weight_mult_opt'
op|','
nl|'\n'
name|'disk_weight_mult_opt'
op|','
nl|'\n'
name|'io_ops_weight_mult_opt'
op|','
nl|'\n'
name|'scheduler_max_att_opt'
op|','
nl|'\n'
name|'soft_affinity_weight_opt'
op|','
nl|'\n'
name|'soft_anti_affinity_weight_opt'
op|','
nl|'\n'
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|register_opts
name|'def'
name|'register_opts'
op|'('
name|'conf'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'conf'
op|'.'
name|'register_opts'
op|'('
name|'default_opts'
op|')'
newline|'\n'
name|'conf'
op|'.'
name|'register_opt'
op|'('
name|'rpcapi_cap_opt'
op|','
name|'UPGRADE_GROUP_NAME'
op|')'
newline|'\n'
name|'trust_group'
op|'='
name|'cfg'
op|'.'
name|'OptGroup'
op|'('
name|'name'
op|'='
name|'TRUSTED_GROUP_NAME'
op|','
nl|'\n'
name|'title'
op|'='
string|'"Trust parameters"'
op|')'
newline|'\n'
name|'conf'
op|'.'
name|'register_group'
op|'('
name|'trust_group'
op|')'
newline|'\n'
name|'conf'
op|'.'
name|'register_opts'
op|'('
name|'trusted_opts'
op|','
name|'group'
op|'='
name|'trust_group'
op|')'
newline|'\n'
name|'conf'
op|'.'
name|'register_opts'
op|'('
name|'metrics_weight_opts'
op|','
name|'group'
op|'='
name|'METRICS_GROUP_NAME'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|list_opts
dedent|''
name|'def'
name|'list_opts'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'return'
op|'{'
name|'DEFAULT_GROUP_NAME'
op|':'
name|'default_opts'
op|','
nl|'\n'
name|'UPGRADE_GROUP_NAME'
op|':'
op|'['
name|'rpcapi_cap_opt'
op|']'
op|','
nl|'\n'
name|'TRUSTED_GROUP_NAME'
op|':'
name|'trusted_opts'
op|','
nl|'\n'
name|'METRICS_GROUP_NAME'
op|':'
name|'metrics_weight_opts'
op|','
nl|'\n'
op|'}'
newline|'\n'
dedent|''
endmarker|''
end_unit
