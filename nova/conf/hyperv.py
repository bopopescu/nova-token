begin_unit
comment|'# Copyright (c) 2016 TUBITAK BILGEM'
nl|'\n'
comment|'# All Rights Reserved.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
name|'from'
name|'oslo_config'
name|'import'
name|'cfg'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|variable|hyperv_opt_group
name|'hyperv_opt_group'
op|'='
name|'cfg'
op|'.'
name|'OptGroup'
op|'('
string|'"hyperv"'
op|','
nl|'\n'
DECL|variable|title
name|'title'
op|'='
string|'"The Hyper-V feature"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe hyperv feature allows you to configure\nthe Hyper-V hypervisor driver."""'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|variable|dynamic_memory_ratio_opt
name|'dynamic_memory_ratio_opt'
op|'='
name|'cfg'
op|'.'
name|'FloatOpt'
op|'('
string|"'dynamic_memory_ratio'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'1.0'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nEnables dynamic memory allocation (ballooning) when\nset to a value greater than 1. The value expresses\nthe ratio between the total RAM assigned to an\ninstance and its startup RAM amount. For example a\nratio of 2.0 for an instance with 1024MB of RAM\nimplies 512MB of RAM allocated at startup\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|enable_instance_metrics_collection_opt
name|'enable_instance_metrics_collection_opt'
op|'='
name|'cfg'
op|'.'
name|'BoolOpt'
op|'('
nl|'\n'
string|"'enable_instance_metrics_collection'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'False'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nEnables metrics collections for an instance by using\nHyper-V\'s metric APIs. Collected data can by retrieved\nby other apps and services, e.g.: Ceilometer.\nRequires Hyper-V / Windows Server 2012 and above\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|instances_path_share_opt
name|'instances_path_share_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|"'instances_path_share'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|'""'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe name of a Windows share name mapped to the\n"instances_path" dir and used by the resize feature\nto copy files to the target host. If left blank, an\nadministrative share will be used, looking for the same\n"instances_path" used locally\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|limit_cpu_features_opt
name|'limit_cpu_features_opt'
op|'='
name|'cfg'
op|'.'
name|'BoolOpt'
op|'('
string|"'limit_cpu_features'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'False'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nRequired for live migration among\nhosts with different CPU features\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|mounted_disk_query_retry_count_opt
name|'mounted_disk_query_retry_count_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
nl|'\n'
string|"'mounted_disk_query_retry_count'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'10'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe number of times to retry checking for a disk mounted via iSCSI.\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|mounted_disk_query_retry_interval_opt
name|'mounted_disk_query_retry_interval_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
nl|'\n'
string|"'mounted_disk_query_retry_interval'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'5'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nInterval between checks for a mounted iSCSI disk, in seconds.\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|power_state_check_timeframe_opt
name|'power_state_check_timeframe_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|"'power_state_check_timeframe'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'60'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe timeframe to be checked for instance power state changes.\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|power_state_event_polling_interval_opt
name|'power_state_event_polling_interval_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
nl|'\n'
string|"'power_state_event_polling_interval'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'2'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nInstance power state change event polling frequency.\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|qemu_img_cmd_opt
name|'qemu_img_cmd_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|"'qemu_img_cmd'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|'"qemu-img.exe"'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nPath of qemu-img command which is used to convert\nbetween different image types\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|vswitch_name_opt
name|'vswitch_name_opt'
op|'='
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|"'vswitch_name'"
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nExternal virtual switch Name, if not provided,\nthe first external virtual switch is used\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|wait_soft_reboot_seconds_opt
name|'wait_soft_reboot_seconds_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|"'wait_soft_reboot_seconds'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'60'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nNumber of seconds to wait for instance to shut down after\nsoft reboot request is made. We fall back to hard reboot\nif instance does not shutdown within this window.\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|config_drive_cdrom_opt
name|'config_drive_cdrom_opt'
op|'='
name|'cfg'
op|'.'
name|'BoolOpt'
op|'('
string|"'config_drive_cdrom'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'False'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nAttaches the Config Drive image as a cdrom drive\ninstead of a disk drive\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|config_drive_inject_password_opt
name|'config_drive_inject_password_opt'
op|'='
name|'cfg'
op|'.'
name|'BoolOpt'
op|'('
string|"'config_drive_inject_password'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
name|'False'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nSets the admin password in the config drive image\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|volume_attach_retry_count_opt
name|'volume_attach_retry_count_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|"'volume_attach_retry_count'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'10'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nThe number of times to retry to attach a volume\n"""'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|volume_attach_retry_interval_opt
name|'volume_attach_retry_interval_opt'
op|'='
name|'cfg'
op|'.'
name|'IntOpt'
op|'('
string|"'volume_attach_retry_interval'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
number|'5'
op|','
nl|'\n'
name|'help'
op|'='
string|'"""\nInterval between volume attachment attempts, in seconds\n"""'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|variable|ALL_OPTS
name|'ALL_OPTS'
op|'='
op|'['
name|'dynamic_memory_ratio_opt'
op|','
nl|'\n'
name|'enable_instance_metrics_collection_opt'
op|','
nl|'\n'
name|'instances_path_share_opt'
op|','
nl|'\n'
name|'limit_cpu_features_opt'
op|','
nl|'\n'
name|'mounted_disk_query_retry_count_opt'
op|','
nl|'\n'
name|'mounted_disk_query_retry_interval_opt'
op|','
nl|'\n'
name|'power_state_check_timeframe_opt'
op|','
nl|'\n'
name|'power_state_event_polling_interval_opt'
op|','
nl|'\n'
name|'qemu_img_cmd_opt'
op|','
nl|'\n'
name|'vswitch_name_opt'
op|','
nl|'\n'
name|'wait_soft_reboot_seconds_opt'
op|','
nl|'\n'
name|'config_drive_cdrom_opt'
op|','
nl|'\n'
name|'config_drive_inject_password_opt'
op|','
nl|'\n'
name|'volume_attach_retry_count_opt'
op|','
nl|'\n'
name|'volume_attach_retry_interval_opt'
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|register_opts
name|'def'
name|'register_opts'
op|'('
name|'conf'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'conf'
op|'.'
name|'register_opts'
op|'('
name|'ALL_OPTS'
op|','
name|'group'
op|'='
name|'hyperv_opt_group'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|list_opts
dedent|''
name|'def'
name|'list_opts'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'return'
op|'{'
name|'hyperv_opt_group'
op|':'
name|'ALL_OPTS'
op|'}'
newline|'\n'
dedent|''
endmarker|''
end_unit
