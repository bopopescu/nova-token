begin_unit
comment|'# vim: tabstop=4 shiftwidth=4 softtabstop=4'
nl|'\n'
nl|'\n'
comment|'# Copyright 2012, Red Hat, Inc.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
string|'"""\nClient side of the compute RPC API.\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'oslo'
op|'.'
name|'config'
name|'import'
name|'cfg'
newline|'\n'
nl|'\n'
name|'from'
name|'nova'
name|'import'
name|'exception'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'jsonutils'
newline|'\n'
name|'from'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
name|'import'
name|'rpc'
newline|'\n'
name|'import'
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
op|'.'
name|'rpc'
op|'.'
name|'proxy'
newline|'\n'
nl|'\n'
DECL|variable|rpcapi_opts
name|'rpcapi_opts'
op|'='
op|'['
nl|'\n'
name|'cfg'
op|'.'
name|'StrOpt'
op|'('
string|"'compute_topic'"
op|','
nl|'\n'
DECL|variable|default
name|'default'
op|'='
string|"'compute'"
op|','
nl|'\n'
DECL|variable|help
name|'help'
op|'='
string|"'the topic compute nodes listen on'"
op|')'
op|','
nl|'\n'
op|']'
newline|'\n'
nl|'\n'
DECL|variable|CONF
name|'CONF'
op|'='
name|'cfg'
op|'.'
name|'CONF'
newline|'\n'
name|'CONF'
op|'.'
name|'register_opts'
op|'('
name|'rpcapi_opts'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|_compute_topic
name|'def'
name|'_compute_topic'
op|'('
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'    '
string|"'''Get the topic to use for a message.\n\n    :param topic: the base topic\n    :param ctxt: request context\n    :param host: explicit host to send the message to.\n    :param instance: If an explicit host was not specified, use\n                     instance['host']\n\n    :returns: A topic string\n    '''"
newline|'\n'
name|'if'
name|'not'
name|'host'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'not'
name|'instance'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'exception'
op|'.'
name|'NovaException'
op|'('
name|'_'
op|'('
string|"'No compute host specified'"
op|')'
op|')'
newline|'\n'
dedent|''
name|'host'
op|'='
name|'instance'
op|'['
string|"'host'"
op|']'
newline|'\n'
name|'if'
name|'not'
name|'host'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'exception'
op|'.'
name|'NovaException'
op|'('
name|'_'
op|'('
string|"'Unable to find host for '"
nl|'\n'
string|"'Instance %s'"
op|')'
op|'%'
name|'instance'
op|'['
string|"'uuid'"
op|']'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'return'
name|'rpc'
op|'.'
name|'queue_get_for'
op|'('
name|'ctxt'
op|','
name|'topic'
op|','
name|'host'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ComputeAPI
dedent|''
name|'class'
name|'ComputeAPI'
op|'('
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
op|'.'
name|'rpc'
op|'.'
name|'proxy'
op|'.'
name|'RpcProxy'
op|')'
op|':'
newline|'\n'
indent|'    '
string|"'''Client side of the compute rpc API.\n\n    API version history:\n\n        1.0 - Initial version.\n        1.1 - Adds get_host_uptime()\n        1.2 - Adds check_can_live_migrate_[destination|source]\n        1.3 - Adds change_instance_metadata()\n        1.4 - Remove instance_uuid, add instance argument to reboot_instance()\n        1.5 - Remove instance_uuid, add instance argument to pause_instance(),\n              unpause_instance()\n        1.6 - Remove instance_uuid, add instance argument to suspend_instance()\n        1.7 - Remove instance_uuid, add instance argument to\n              get_console_output()\n        1.8 - Remove instance_uuid, add instance argument to\n              add_fixed_ip_to_instance()\n        1.9 - Remove instance_uuid, add instance argument to attach_volume()\n        1.10 - Remove instance_id, add instance argument to\n               check_can_live_migrate_destination()\n        1.11 - Remove instance_id, add instance argument to\n               check_can_live_migrate_source()\n        1.12 - Remove instance_uuid, add instance argument to confirm_resize()\n        1.13 - Remove instance_uuid, add instance argument to detach_volume()\n        1.14 - Remove instance_uuid, add instance argument to finish_resize()\n        1.15 - Remove instance_uuid, add instance argument to\n               finish_revert_resize()\n        1.16 - Remove instance_uuid, add instance argument to get_diagnostics()\n        1.17 - Remove instance_uuid, add instance argument to get_vnc_console()\n        1.18 - Remove instance_uuid, add instance argument to inject_file()\n        1.19 - Remove instance_uuid, add instance argument to\n               inject_network_info()\n        1.20 - Remove instance_id, add instance argument to\n               post_live_migration_at_destination()\n        1.21 - Remove instance_uuid, add instance argument to\n               power_off_instance() and stop_instance()\n        1.22 - Remove instance_uuid, add instance argument to\n               power_on_instance() and start_instance()\n        1.23 - Remove instance_id, add instance argument to\n               pre_live_migration()\n        1.24 - Remove instance_uuid, add instance argument to\n               rebuild_instance()\n        1.25 - Remove instance_uuid, add instance argument to\n               remove_fixed_ip_from_instance()\n        1.26 - Remove instance_id, add instance argument to\n               remove_volume_connection()\n        1.27 - Remove instance_uuid, add instance argument to\n               rescue_instance()\n        1.28 - Remove instance_uuid, add instance argument to reset_network()\n        1.29 - Remove instance_uuid, add instance argument to resize_instance()\n        1.30 - Remove instance_uuid, add instance argument to resume_instance()\n        1.31 - Remove instance_uuid, add instance argument to revert_resize()\n        1.32 - Remove instance_id, add instance argument to\n               rollback_live_migration_at_destination()\n        1.33 - Remove instance_uuid, add instance argument to\n               set_admin_password()\n        1.34 - Remove instance_uuid, add instance argument to\n               snapshot_instance()\n        1.35 - Remove instance_uuid, add instance argument to\n               unrescue_instance()\n        1.36 - Remove instance_uuid, add instance argument to\n               change_instance_metadata()\n        1.37 - Remove instance_uuid, add instance argument to\n               terminate_instance()\n        1.38 - Changes to prep_resize():\n                - remove instance_uuid, add instance\n                - remove instance_type_id, add instance_type\n                - remove topic, it was unused\n        1.39 - Remove instance_uuid, add instance argument to run_instance()\n        1.40 - Remove instance_id, add instance argument to live_migration()\n        1.41 - Adds refresh_instance_security_rules()\n        1.42 - Add reservations arg to prep_resize(), resize_instance(),\n               finish_resize(), confirm_resize(), revert_resize() and\n               finish_revert_resize()\n        1.43 - Add migrate_data to live_migration()\n        1.44 - Adds reserve_block_device_name()\n\n        2.0 - Remove 1.x backwards compat\n        2.1 - Adds orig_sys_metadata to rebuild_instance()\n        2.2 - Adds slave_info parameter to add_aggregate_host() and\n              remove_aggregate_host()\n        2.3 - Adds volume_id to reserve_block_device_name()\n        2.4 - Add bdms to terminate_instance\n        2.5 - Add block device and network info to reboot_instance\n        2.6 - Remove migration_id, add migration to resize_instance\n        2.7 - Remove migration_id, add migration to confirm_resize\n        2.8 - Remove migration_id, add migration to finish_resize\n        2.9 - Add publish_service_capabilities()\n        2.10 - Adds filter_properties and request_spec to prep_resize()\n        2.11 - Adds soft_delete_instance() and restore_instance()\n        2.12 - Remove migration_id, add migration to revert_resize\n        2.13 - Remove migration_id, add migration to finish_revert_resize\n        2.14 - Remove aggregate_id, add aggregate to add_aggregate_host\n        2.15 - Remove aggregate_id, add aggregate to remove_aggregate_host\n        2.16 - Add instance_type to resize_instance\n        2.17 - Add get_backdoor_port()\n        2.18 - Add bdms to rebuild_instance\n        2.19 - Add node to run_instance\n        2.20 - Add node to prep_resize\n        2.21 - Add migrate_data dict param to pre_live_migration()\n        2.22 - Add recreate, on_shared_storage and host arguments to\n               rebuild_instance()\n        2.23 - Remove network_info from reboot_instance\n        2.24 - Added get_spice_console method\n        2.25 - Add attach_interface() and detach_interface()\n        2.26 - Add validate_console_port to ensure the service connects to\n               vnc on the correct port\n        2.27 - Adds 'reservations' to terminate_instance() and\n               soft_delete_instance()\n        2.28 - Adds check_instance_shared_storage()\n    '''"
newline|'\n'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# NOTE(russellb): This is the default minimum version that the server'
nl|'\n'
comment|'# (manager) side must implement unless otherwise specified using a version'
nl|'\n'
comment|'# argument to self.call()/cast()/etc. here.  It should be left as X.0 where'
nl|'\n'
comment|'# X is the current major API version (1.0, 2.0, ...).  For more information'
nl|'\n'
comment|'# about rpc API versioning, see the docs in'
nl|'\n'
comment|'# openstack/common/rpc/dispatcher.py.'
nl|'\n'
comment|'#'
nl|'\n'
DECL|variable|BASE_RPC_API_VERSION
name|'BASE_RPC_API_VERSION'
op|'='
string|"'2.0'"
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'ComputeAPI'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
nl|'\n'
name|'topic'
op|'='
name|'CONF'
op|'.'
name|'compute_topic'
op|','
nl|'\n'
name|'default_version'
op|'='
name|'self'
op|'.'
name|'BASE_RPC_API_VERSION'
op|')'
newline|'\n'
nl|'\n'
DECL|member|add_aggregate_host
dedent|''
name|'def'
name|'add_aggregate_host'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'aggregate'
op|','
name|'host_param'
op|','
name|'host'
op|','
nl|'\n'
name|'slave_info'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
string|"'''Add aggregate host.\n\n        :param ctxt: request context\n        :param aggregate_id:\n        :param host_param: This value is placed in the message to be the 'host'\n                           parameter for the remote method.\n        :param host: This is the host to send the message to.\n        '''"
newline|'\n'
nl|'\n'
name|'aggregate_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'aggregate'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'add_aggregate_host'"
op|','
nl|'\n'
name|'aggregate'
op|'='
name|'aggregate_p'
op|','
name|'host'
op|'='
name|'host_param'
op|','
nl|'\n'
name|'slave_info'
op|'='
name|'slave_info'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.14'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|add_fixed_ip_to_instance
dedent|''
name|'def'
name|'add_fixed_ip_to_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'network_id'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'add_fixed_ip_to_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'network_id'
op|'='
name|'network_id'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|attach_interface
dedent|''
name|'def'
name|'attach_interface'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'network_id'
op|','
name|'port_id'
op|','
nl|'\n'
name|'requested_ip'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'attach_interface'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'network_id'
op|'='
name|'network_id'
op|','
nl|'\n'
name|'port_id'
op|'='
name|'port_id'
op|','
name|'requested_ip'
op|'='
name|'requested_ip'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.25'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|attach_volume
dedent|''
name|'def'
name|'attach_volume'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'volume_id'
op|','
name|'mountpoint'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'attach_volume'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'volume_id'
op|'='
name|'volume_id'
op|','
nl|'\n'
name|'mountpoint'
op|'='
name|'mountpoint'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|change_instance_metadata
dedent|''
name|'def'
name|'change_instance_metadata'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'diff'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'change_instance_metadata'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'diff'
op|'='
name|'diff'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_can_live_migrate_destination
dedent|''
name|'def'
name|'check_can_live_migrate_destination'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'destination'
op|','
nl|'\n'
name|'block_migration'
op|','
name|'disk_over_commit'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
nl|'\n'
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'check_can_live_migrate_destination'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
nl|'\n'
name|'block_migration'
op|'='
name|'block_migration'
op|','
nl|'\n'
name|'disk_over_commit'
op|'='
name|'disk_over_commit'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
nl|'\n'
name|'ctxt'
op|','
name|'destination'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_can_live_migrate_source
dedent|''
name|'def'
name|'check_can_live_migrate_source'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'dest_check_data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'check_can_live_migrate_source'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
nl|'\n'
name|'dest_check_data'
op|'='
name|'dest_check_data'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
nl|'\n'
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_instance_shared_storage
dedent|''
name|'def'
name|'check_instance_shared_storage'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'check_instance_shared_storage'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
nl|'\n'
name|'data'
op|'='
name|'data'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
nl|'\n'
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.28'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|confirm_resize
dedent|''
name|'def'
name|'confirm_resize'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'migration'
op|','
name|'host'
op|','
nl|'\n'
name|'reservations'
op|'='
name|'None'
op|','
name|'cast'
op|'='
name|'True'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'rpc_method'
op|'='
name|'self'
op|'.'
name|'cast'
name|'if'
name|'cast'
name|'else'
name|'self'
op|'.'
name|'call'
newline|'\n'
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'migration_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'migration'
op|')'
newline|'\n'
name|'return'
name|'rpc_method'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'confirm_resize'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'migration'
op|'='
name|'migration_p'
op|','
nl|'\n'
name|'reservations'
op|'='
name|'reservations'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.7'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|detach_interface
dedent|''
name|'def'
name|'detach_interface'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'port_id'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'detach_interface'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'port_id'
op|'='
name|'port_id'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.25'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|detach_volume
dedent|''
name|'def'
name|'detach_volume'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'volume_id'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'detach_volume'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'volume_id'
op|'='
name|'volume_id'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|finish_resize
dedent|''
name|'def'
name|'finish_resize'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'migration'
op|','
name|'image'
op|','
name|'disk_info'
op|','
nl|'\n'
name|'host'
op|','
name|'reservations'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'migration_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'migration'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'finish_resize'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'migration'
op|'='
name|'migration_p'
op|','
nl|'\n'
name|'image'
op|'='
name|'image'
op|','
name|'disk_info'
op|'='
name|'disk_info'
op|','
name|'reservations'
op|'='
name|'reservations'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.8'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|finish_revert_resize
dedent|''
name|'def'
name|'finish_revert_resize'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'migration'
op|','
name|'host'
op|','
nl|'\n'
name|'reservations'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'migration_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'migration'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'finish_revert_resize'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'migration'
op|'='
name|'migration_p'
op|','
nl|'\n'
name|'reservations'
op|'='
name|'reservations'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.13'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_console_output
dedent|''
name|'def'
name|'get_console_output'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'tail_length'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'get_console_output'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'tail_length'
op|'='
name|'tail_length'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_console_pool_info
dedent|''
name|'def'
name|'get_console_pool_info'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'console_type'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'get_console_pool_info'"
op|','
nl|'\n'
name|'console_type'
op|'='
name|'console_type'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_console_topic
dedent|''
name|'def'
name|'get_console_topic'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'get_console_topic'"
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_diagnostics
dedent|''
name|'def'
name|'get_diagnostics'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'get_diagnostics'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_vnc_console
dedent|''
name|'def'
name|'get_vnc_console'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'console_type'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'get_vnc_console'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'console_type'
op|'='
name|'console_type'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_spice_console
dedent|''
name|'def'
name|'get_spice_console'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'console_type'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'get_spice_console'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'console_type'
op|'='
name|'console_type'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.24'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|validate_console_port
dedent|''
name|'def'
name|'validate_console_port'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'port'
op|','
name|'console_type'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'validate_console_port'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'port'
op|'='
name|'port'
op|','
name|'console_type'
op|'='
name|'console_type'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.26'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|host_maintenance_mode
dedent|''
name|'def'
name|'host_maintenance_mode'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'host_param'
op|','
name|'mode'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
string|"'''Set host maintenance mode\n\n        :param ctxt: request context\n        :param host_param: This value is placed in the message to be the 'host'\n                           parameter for the remote method.\n        :param mode:\n        :param host: This is the host to send the message to.\n        '''"
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'host_maintenance_mode'"
op|','
nl|'\n'
name|'host'
op|'='
name|'host_param'
op|','
name|'mode'
op|'='
name|'mode'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|host_power_action
dedent|''
name|'def'
name|'host_power_action'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'action'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'host_power_action'"
op|','
nl|'\n'
name|'action'
op|'='
name|'action'
op|')'
op|','
name|'topic'
op|')'
newline|'\n'
nl|'\n'
DECL|member|inject_file
dedent|''
name|'def'
name|'inject_file'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'path'
op|','
name|'file_contents'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'inject_file'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'path'
op|'='
name|'path'
op|','
nl|'\n'
name|'file_contents'
op|'='
name|'file_contents'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|inject_network_info
dedent|''
name|'def'
name|'inject_network_info'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'inject_network_info'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|live_migration
dedent|''
name|'def'
name|'live_migration'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'dest'
op|','
name|'block_migration'
op|','
name|'host'
op|','
nl|'\n'
name|'migrate_data'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'live_migration'"
op|','
name|'instance'
op|'='
name|'instance_p'
op|','
nl|'\n'
name|'dest'
op|'='
name|'dest'
op|','
name|'block_migration'
op|'='
name|'block_migration'
op|','
nl|'\n'
name|'migrate_data'
op|'='
name|'migrate_data'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|pause_instance
dedent|''
name|'def'
name|'pause_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'pause_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|post_live_migration_at_destination
dedent|''
name|'def'
name|'post_live_migration_at_destination'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
nl|'\n'
name|'block_migration'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
nl|'\n'
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'post_live_migration_at_destination'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'block_migration'
op|'='
name|'block_migration'
op|')'
op|','
nl|'\n'
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|power_off_instance
dedent|''
name|'def'
name|'power_off_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'power_off_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|power_on_instance
dedent|''
name|'def'
name|'power_on_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'power_on_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|pre_live_migration
dedent|''
name|'def'
name|'pre_live_migration'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'block_migration'
op|','
name|'disk'
op|','
nl|'\n'
name|'host'
op|','
name|'migrate_data'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'pre_live_migration'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
nl|'\n'
name|'block_migration'
op|'='
name|'block_migration'
op|','
nl|'\n'
name|'disk'
op|'='
name|'disk'
op|','
name|'migrate_data'
op|'='
name|'migrate_data'
op|')'
op|','
nl|'\n'
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.21'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|prep_resize
dedent|''
name|'def'
name|'prep_resize'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'image'
op|','
name|'instance'
op|','
name|'instance_type'
op|','
name|'host'
op|','
nl|'\n'
name|'reservations'
op|'='
name|'None'
op|','
name|'request_spec'
op|'='
name|'None'
op|','
nl|'\n'
name|'filter_properties'
op|'='
name|'None'
op|','
name|'node'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'instance_type_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance_type'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'prep_resize'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'instance_type'
op|'='
name|'instance_type_p'
op|','
nl|'\n'
name|'image'
op|'='
name|'image'
op|','
name|'reservations'
op|'='
name|'reservations'
op|','
nl|'\n'
name|'request_spec'
op|'='
name|'request_spec'
op|','
nl|'\n'
name|'filter_properties'
op|'='
name|'filter_properties'
op|','
nl|'\n'
name|'node'
op|'='
name|'node'
op|')'
op|','
nl|'\n'
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.20'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|reboot_instance
dedent|''
name|'def'
name|'reboot_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'block_device_info'
op|','
nl|'\n'
name|'reboot_type'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'reboot_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
nl|'\n'
name|'block_device_info'
op|'='
name|'block_device_info'
op|','
nl|'\n'
name|'reboot_type'
op|'='
name|'reboot_type'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.23'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|rebuild_instance
dedent|''
name|'def'
name|'rebuild_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'new_pass'
op|','
name|'injected_files'
op|','
nl|'\n'
name|'image_ref'
op|','
name|'orig_image_ref'
op|','
name|'orig_sys_metadata'
op|','
name|'bdms'
op|','
nl|'\n'
name|'recreate'
op|'='
name|'False'
op|','
name|'on_shared_storage'
op|'='
name|'False'
op|','
name|'host'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'bdms_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'bdms'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'rebuild_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'new_pass'
op|'='
name|'new_pass'
op|','
nl|'\n'
name|'injected_files'
op|'='
name|'injected_files'
op|','
name|'image_ref'
op|'='
name|'image_ref'
op|','
nl|'\n'
name|'orig_image_ref'
op|'='
name|'orig_image_ref'
op|','
nl|'\n'
name|'orig_sys_metadata'
op|'='
name|'orig_sys_metadata'
op|','
name|'bdms'
op|'='
name|'bdms_p'
op|','
nl|'\n'
name|'recreate'
op|'='
name|'recreate'
op|','
name|'on_shared_storage'
op|'='
name|'on_shared_storage'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.22'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|refresh_provider_fw_rules
dedent|''
name|'def'
name|'refresh_provider_fw_rules'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'refresh_provider_fw_rules'"
op|')'
op|','
nl|'\n'
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|remove_aggregate_host
dedent|''
name|'def'
name|'remove_aggregate_host'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'aggregate'
op|','
name|'host_param'
op|','
name|'host'
op|','
nl|'\n'
name|'slave_info'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
string|"'''Remove aggregate host.\n\n        :param ctxt: request context\n        :param aggregate_id:\n        :param host_param: This value is placed in the message to be the 'host'\n                           parameter for the remote method.\n        :param host: This is the host to send the message to.\n        '''"
newline|'\n'
nl|'\n'
name|'aggregate_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'aggregate'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'remove_aggregate_host'"
op|','
nl|'\n'
name|'aggregate'
op|'='
name|'aggregate_p'
op|','
name|'host'
op|'='
name|'host_param'
op|','
nl|'\n'
name|'slave_info'
op|'='
name|'slave_info'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.15'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|remove_fixed_ip_from_instance
dedent|''
name|'def'
name|'remove_fixed_ip_from_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'address'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'remove_fixed_ip_from_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'address'
op|'='
name|'address'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|remove_volume_connection
dedent|''
name|'def'
name|'remove_volume_connection'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'volume_id'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'remove_volume_connection'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'volume_id'
op|'='
name|'volume_id'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|rescue_instance
dedent|''
name|'def'
name|'rescue_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'rescue_password'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'rescue_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
nl|'\n'
name|'rescue_password'
op|'='
name|'rescue_password'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|reset_network
dedent|''
name|'def'
name|'reset_network'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'reset_network'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|resize_instance
dedent|''
name|'def'
name|'resize_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'migration'
op|','
name|'image'
op|','
name|'instance_type'
op|','
nl|'\n'
name|'reservations'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
newline|'\n'
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'migration_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'migration'
op|')'
newline|'\n'
name|'instance_type_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance_type'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'resize_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'migration'
op|'='
name|'migration_p'
op|','
nl|'\n'
name|'image'
op|'='
name|'image'
op|','
name|'reservations'
op|'='
name|'reservations'
op|','
nl|'\n'
name|'instance_type'
op|'='
name|'instance_type_p'
op|')'
op|','
name|'topic'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.16'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|resume_instance
dedent|''
name|'def'
name|'resume_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'resume_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|revert_resize
dedent|''
name|'def'
name|'revert_resize'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'migration'
op|','
name|'host'
op|','
nl|'\n'
name|'reservations'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'migration_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'migration'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'revert_resize'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'migration'
op|'='
name|'migration_p'
op|','
nl|'\n'
name|'reservations'
op|'='
name|'reservations'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.12'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|rollback_live_migration_at_destination
dedent|''
name|'def'
name|'rollback_live_migration_at_destination'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'rollback_live_migration_at_destination'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|run_instance
dedent|''
name|'def'
name|'run_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'host'
op|','
name|'request_spec'
op|','
nl|'\n'
name|'filter_properties'
op|','
name|'requested_networks'
op|','
nl|'\n'
name|'injected_files'
op|','
name|'admin_password'
op|','
nl|'\n'
name|'is_first_time'
op|','
name|'node'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'run_instance'"
op|','
name|'instance'
op|'='
name|'instance_p'
op|','
nl|'\n'
name|'request_spec'
op|'='
name|'request_spec'
op|','
name|'filter_properties'
op|'='
name|'filter_properties'
op|','
nl|'\n'
name|'requested_networks'
op|'='
name|'requested_networks'
op|','
nl|'\n'
name|'injected_files'
op|'='
name|'injected_files'
op|','
name|'admin_password'
op|'='
name|'admin_password'
op|','
nl|'\n'
name|'is_first_time'
op|'='
name|'is_first_time'
op|','
name|'node'
op|'='
name|'node'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.19'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|set_admin_password
dedent|''
name|'def'
name|'set_admin_password'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'new_pass'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'set_admin_password'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'new_pass'
op|'='
name|'new_pass'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|set_host_enabled
dedent|''
name|'def'
name|'set_host_enabled'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'enabled'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'set_host_enabled'"
op|','
nl|'\n'
name|'enabled'
op|'='
name|'enabled'
op|')'
op|','
name|'topic'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_host_uptime
dedent|''
name|'def'
name|'get_host_uptime'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'get_host_uptime'"
op|')'
op|','
name|'topic'
op|')'
newline|'\n'
nl|'\n'
DECL|member|reserve_block_device_name
dedent|''
name|'def'
name|'reserve_block_device_name'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'device'
op|','
name|'volume_id'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'reserve_block_device_name'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'device'
op|'='
name|'device'
op|','
name|'volume_id'
op|'='
name|'volume_id'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.3'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|snapshot_instance
dedent|''
name|'def'
name|'snapshot_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'image_id'
op|','
name|'image_type'
op|','
nl|'\n'
name|'backup_type'
op|'='
name|'None'
op|','
name|'rotation'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'snapshot_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'image_id'
op|'='
name|'image_id'
op|','
nl|'\n'
name|'image_type'
op|'='
name|'image_type'
op|','
name|'backup_type'
op|'='
name|'backup_type'
op|','
nl|'\n'
name|'rotation'
op|'='
name|'rotation'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|start_instance
dedent|''
name|'def'
name|'start_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'start_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|stop_instance
dedent|''
name|'def'
name|'stop_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'cast'
op|'='
name|'True'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'rpc_method'
op|'='
name|'self'
op|'.'
name|'cast'
name|'if'
name|'cast'
name|'else'
name|'self'
op|'.'
name|'call'
newline|'\n'
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'return'
name|'rpc_method'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'stop_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|suspend_instance
dedent|''
name|'def'
name|'suspend_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'suspend_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|terminate_instance
dedent|''
name|'def'
name|'terminate_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'bdms'
op|','
name|'reservations'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'bdms_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'bdms'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'terminate_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'bdms'
op|'='
name|'bdms_p'
op|','
nl|'\n'
name|'reservations'
op|'='
name|'reservations'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.27'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|unpause_instance
dedent|''
name|'def'
name|'unpause_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'unpause_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|unrescue_instance
dedent|''
name|'def'
name|'unrescue_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'unrescue_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|get_backdoor_port
dedent|''
name|'def'
name|'get_backdoor_port'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'call'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'get_backdoor_port'"
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|publish_service_capabilities
dedent|''
name|'def'
name|'publish_service_capabilities'
op|'('
name|'self'
op|','
name|'ctxt'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'fanout_cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'publish_service_capabilities'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|soft_delete_instance
dedent|''
name|'def'
name|'soft_delete_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|','
name|'reservations'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'soft_delete_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|','
name|'reservations'
op|'='
name|'reservations'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|','
nl|'\n'
name|'version'
op|'='
string|"'2.27'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|restore_instance
dedent|''
name|'def'
name|'restore_instance'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'restore_instance'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'None'
op|','
name|'instance'
op|')'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SecurityGroupAPI
dedent|''
dedent|''
name|'class'
name|'SecurityGroupAPI'
op|'('
name|'nova'
op|'.'
name|'openstack'
op|'.'
name|'common'
op|'.'
name|'rpc'
op|'.'
name|'proxy'
op|'.'
name|'RpcProxy'
op|')'
op|':'
newline|'\n'
indent|'    '
string|"'''Client side of the security group rpc API.\n\n    API version history:\n\n        1.0 - Initial version.\n        1.41 - Adds refresh_instance_security_rules()\n\n        2.0 - Remove 1.x backwards compat\n    '''"
newline|'\n'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# NOTE(russellb): This is the default minimum version that the server'
nl|'\n'
comment|'# (manager) side must implement unless otherwise specified using a version'
nl|'\n'
comment|'# argument to self.call()/cast()/etc. here.  It should be left as X.0 where'
nl|'\n'
comment|'# X is the current major API version (1.0, 2.0, ...).  For more information'
nl|'\n'
comment|'# about rpc API versioning, see the docs in'
nl|'\n'
comment|'# openstack/common/rpc/dispatcher.py.'
nl|'\n'
comment|'#'
nl|'\n'
DECL|variable|BASE_RPC_API_VERSION
name|'BASE_RPC_API_VERSION'
op|'='
string|"'2.0'"
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'SecurityGroupAPI'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
nl|'\n'
name|'topic'
op|'='
name|'CONF'
op|'.'
name|'compute_topic'
op|','
nl|'\n'
name|'default_version'
op|'='
name|'self'
op|'.'
name|'BASE_RPC_API_VERSION'
op|')'
newline|'\n'
nl|'\n'
DECL|member|refresh_security_group_rules
dedent|''
name|'def'
name|'refresh_security_group_rules'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'security_group_id'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'refresh_security_group_rules'"
op|','
nl|'\n'
name|'security_group_id'
op|'='
name|'security_group_id'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|refresh_security_group_members
dedent|''
name|'def'
name|'refresh_security_group_members'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'security_group_id'
op|','
nl|'\n'
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'refresh_security_group_members'"
op|','
nl|'\n'
name|'security_group_id'
op|'='
name|'security_group_id'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'None'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|refresh_instance_security_rules
dedent|''
name|'def'
name|'refresh_instance_security_rules'
op|'('
name|'self'
op|','
name|'ctxt'
op|','
name|'host'
op|','
name|'instance'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'instance_p'
op|'='
name|'jsonutils'
op|'.'
name|'to_primitive'
op|'('
name|'instance'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cast'
op|'('
name|'ctxt'
op|','
name|'self'
op|'.'
name|'make_msg'
op|'('
string|"'refresh_instance_security_rules'"
op|','
nl|'\n'
name|'instance'
op|'='
name|'instance_p'
op|')'
op|','
nl|'\n'
name|'topic'
op|'='
name|'_compute_topic'
op|'('
name|'self'
op|'.'
name|'topic'
op|','
name|'ctxt'
op|','
name|'instance'
op|'['
string|"'host'"
op|']'
op|','
nl|'\n'
name|'instance'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
