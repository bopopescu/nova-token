begin_unit
comment|'#!/usr/bin/env python'
nl|'\n'
comment|'# vim: tabstop=4 shiftwidth=4 softtabstop=4'
nl|'\n'
nl|'\n'
comment|'# Copyright 2011 OpenStack LLC.'
nl|'\n'
comment|'# All Rights Reserved.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Licensed under the Apache License, Version 2.0 (the "License"); you may'
nl|'\n'
comment|'#    not use this file except in compliance with the License. You may obtain'
nl|'\n'
comment|'#    a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#         http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#    Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT'
nl|'\n'
comment|'#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the'
nl|'\n'
comment|'#    License for the specific language governing permissions and limitations'
nl|'\n'
comment|'#    under the License.'
nl|'\n'
nl|'\n'
nl|'\n'
name|'import'
name|'os'
newline|'\n'
name|'import'
name|'subprocess'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|execute_get_output
name|'def'
name|'execute_get_output'
op|'('
op|'*'
name|'command'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Execute and return stdout."""'
newline|'\n'
name|'devnull'
op|'='
name|'open'
op|'('
name|'os'
op|'.'
name|'devnull'
op|','
string|"'w'"
op|')'
newline|'\n'
name|'command'
op|'='
name|'map'
op|'('
name|'str'
op|','
name|'command'
op|')'
newline|'\n'
name|'proc'
op|'='
name|'subprocess'
op|'.'
name|'Popen'
op|'('
name|'command'
op|','
name|'close_fds'
op|'='
name|'True'
op|','
nl|'\n'
name|'stdout'
op|'='
name|'subprocess'
op|'.'
name|'PIPE'
op|','
name|'stderr'
op|'='
name|'devnull'
op|')'
newline|'\n'
name|'devnull'
op|'.'
name|'close'
op|'('
op|')'
newline|'\n'
name|'return'
name|'proc'
op|'.'
name|'stdout'
op|'.'
name|'read'
op|'('
op|')'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|execute
dedent|''
name|'def'
name|'execute'
op|'('
op|'*'
name|'command'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Execute without returning stdout."""'
newline|'\n'
name|'devnull'
op|'='
name|'open'
op|'('
name|'os'
op|'.'
name|'devnull'
op|','
string|"'w'"
op|')'
newline|'\n'
name|'command'
op|'='
name|'map'
op|'('
name|'str'
op|','
name|'command'
op|')'
newline|'\n'
name|'proc'
op|'='
name|'subprocess'
op|'.'
name|'Popen'
op|'('
name|'command'
op|','
name|'close_fds'
op|'='
name|'True'
op|','
nl|'\n'
name|'stdout'
op|'='
name|'subprocess'
op|'.'
name|'PIPE'
op|','
name|'stderr'
op|'='
name|'devnull'
op|')'
newline|'\n'
name|'devnull'
op|'.'
name|'close'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
