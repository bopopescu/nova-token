begin_unit
name|'import'
name|'sys'
newline|'\n'
name|'import'
name|'os'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|run
name|'def'
name|'run'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'base'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'abspath'
op|'('
name|'__file__'
op|')'
op|')'
op|')'
newline|'\n'
comment|'## FIXME: this is kind of crude; if we could create a fake pip'
nl|'\n'
comment|'## module, then exec into it and update pip.__path__ properly, we'
nl|'\n'
comment|"## wouldn't have to update sys.path:"
nl|'\n'
name|'sys'
op|'.'
name|'path'
op|'.'
name|'insert'
op|'('
number|'0'
op|','
name|'base'
op|')'
newline|'\n'
name|'import'
name|'pip'
newline|'\n'
name|'return'
name|'pip'
op|'.'
name|'main'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
DECL|variable|exit
indent|'    '
name|'exit'
op|'='
name|'run'
op|'('
op|')'
newline|'\n'
name|'if'
name|'exit'
op|':'
newline|'\n'
indent|'        '
name|'sys'
op|'.'
name|'exit'
op|'('
name|'exit'
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
