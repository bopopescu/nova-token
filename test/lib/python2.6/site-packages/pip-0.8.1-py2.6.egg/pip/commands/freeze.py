begin_unit
name|'import'
name|'re'
newline|'\n'
name|'import'
name|'sys'
newline|'\n'
name|'import'
name|'pkg_resources'
newline|'\n'
name|'import'
name|'pip'
newline|'\n'
name|'from'
name|'pip'
op|'.'
name|'req'
name|'import'
name|'InstallRequirement'
newline|'\n'
name|'from'
name|'pip'
op|'.'
name|'log'
name|'import'
name|'logger'
newline|'\n'
name|'from'
name|'pip'
op|'.'
name|'basecommand'
name|'import'
name|'Command'
newline|'\n'
name|'from'
name|'pip'
op|'.'
name|'util'
name|'import'
name|'get_installed_distributions'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FreezeCommand
name|'class'
name|'FreezeCommand'
op|'('
name|'Command'
op|')'
op|':'
newline|'\n'
DECL|variable|name
indent|'    '
name|'name'
op|'='
string|"'freeze'"
newline|'\n'
DECL|variable|usage
name|'usage'
op|'='
string|"'%prog [OPTIONS]'"
newline|'\n'
DECL|variable|summary
name|'summary'
op|'='
string|"'Output all currently installed packages (exact versions) to stdout'"
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'super'
op|'('
name|'FreezeCommand'
op|','
name|'self'
op|')'
op|'.'
name|'__init__'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'parser'
op|'.'
name|'add_option'
op|'('
nl|'\n'
string|"'-r'"
op|','
string|"'--requirement'"
op|','
nl|'\n'
name|'dest'
op|'='
string|"'requirement'"
op|','
nl|'\n'
name|'action'
op|'='
string|"'store'"
op|','
nl|'\n'
name|'default'
op|'='
name|'None'
op|','
nl|'\n'
name|'metavar'
op|'='
string|"'FILENAME'"
op|','
nl|'\n'
name|'help'
op|'='
string|"'Use the given requirements file as a hint about how to generate the new frozen requirements'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'parser'
op|'.'
name|'add_option'
op|'('
nl|'\n'
string|"'-f'"
op|','
string|"'--find-links'"
op|','
nl|'\n'
name|'dest'
op|'='
string|"'find_links'"
op|','
nl|'\n'
name|'action'
op|'='
string|"'append'"
op|','
nl|'\n'
name|'default'
op|'='
op|'['
op|']'
op|','
nl|'\n'
name|'metavar'
op|'='
string|"'URL'"
op|','
nl|'\n'
name|'help'
op|'='
string|"'URL for finding packages, which will be added to the frozen requirements file'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'parser'
op|'.'
name|'add_option'
op|'('
nl|'\n'
string|"'-l'"
op|','
string|"'--local'"
op|','
nl|'\n'
name|'dest'
op|'='
string|"'local'"
op|','
nl|'\n'
name|'action'
op|'='
string|"'store_true'"
op|','
nl|'\n'
name|'default'
op|'='
name|'False'
op|','
nl|'\n'
name|'help'
op|'='
string|"'If in a virtualenv, do not report globally-installed packages'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|setup_logging
dedent|''
name|'def'
name|'setup_logging'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'logger'
op|'.'
name|'move_stdout_to_stderr'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|run
dedent|''
name|'def'
name|'run'
op|'('
name|'self'
op|','
name|'options'
op|','
name|'args'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'requirement'
op|'='
name|'options'
op|'.'
name|'requirement'
newline|'\n'
name|'find_links'
op|'='
name|'options'
op|'.'
name|'find_links'
name|'or'
op|'['
op|']'
newline|'\n'
name|'local_only'
op|'='
name|'options'
op|'.'
name|'local'
newline|'\n'
comment|'## FIXME: Obviously this should be settable:'
nl|'\n'
name|'find_tags'
op|'='
name|'False'
newline|'\n'
name|'skip_match'
op|'='
name|'None'
newline|'\n'
nl|'\n'
name|'skip_regex'
op|'='
name|'options'
op|'.'
name|'skip_requirements_regex'
newline|'\n'
name|'if'
name|'skip_regex'
op|':'
newline|'\n'
indent|'            '
name|'skip_match'
op|'='
name|'re'
op|'.'
name|'compile'
op|'('
name|'skip_regex'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'dependency_links'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
name|'f'
op|'='
name|'sys'
op|'.'
name|'stdout'
newline|'\n'
nl|'\n'
name|'for'
name|'dist'
name|'in'
name|'pkg_resources'
op|'.'
name|'working_set'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'dist'
op|'.'
name|'has_metadata'
op|'('
string|"'dependency_links.txt'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'dependency_links'
op|'.'
name|'extend'
op|'('
name|'dist'
op|'.'
name|'get_metadata_lines'
op|'('
string|"'dependency_links.txt'"
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'for'
name|'link'
name|'in'
name|'find_links'
op|':'
newline|'\n'
indent|'            '
name|'if'
string|"'#egg='"
name|'in'
name|'link'
op|':'
newline|'\n'
indent|'                '
name|'dependency_links'
op|'.'
name|'append'
op|'('
name|'link'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'for'
name|'link'
name|'in'
name|'find_links'
op|':'
newline|'\n'
indent|'            '
name|'f'
op|'.'
name|'write'
op|'('
string|"'-f %s\\n'"
op|'%'
name|'link'
op|')'
newline|'\n'
dedent|''
name|'installations'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'for'
name|'dist'
name|'in'
name|'get_installed_distributions'
op|'('
name|'local_only'
op|'='
name|'local_only'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'req'
op|'='
name|'pip'
op|'.'
name|'FrozenRequirement'
op|'.'
name|'from_dist'
op|'('
name|'dist'
op|','
name|'dependency_links'
op|','
name|'find_tags'
op|'='
name|'find_tags'
op|')'
newline|'\n'
name|'installations'
op|'['
name|'req'
op|'.'
name|'name'
op|']'
op|'='
name|'req'
newline|'\n'
dedent|''
name|'if'
name|'requirement'
op|':'
newline|'\n'
indent|'            '
name|'req_f'
op|'='
name|'open'
op|'('
name|'requirement'
op|')'
newline|'\n'
name|'for'
name|'line'
name|'in'
name|'req_f'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'not'
name|'line'
op|'.'
name|'strip'
op|'('
op|')'
name|'or'
name|'line'
op|'.'
name|'strip'
op|'('
op|')'
op|'.'
name|'startswith'
op|'('
string|"'#'"
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'f'
op|'.'
name|'write'
op|'('
name|'line'
op|')'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
name|'if'
name|'skip_match'
name|'and'
name|'skip_match'
op|'.'
name|'search'
op|'('
name|'line'
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'f'
op|'.'
name|'write'
op|'('
name|'line'
op|')'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
name|'elif'
name|'line'
op|'.'
name|'startswith'
op|'('
string|"'-e'"
op|')'
name|'or'
name|'line'
op|'.'
name|'startswith'
op|'('
string|"'--editable'"
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'if'
name|'line'
op|'.'
name|'startswith'
op|'('
string|"'-e'"
op|')'
op|':'
newline|'\n'
indent|'                        '
name|'line'
op|'='
name|'line'
op|'['
number|'2'
op|':'
op|']'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                        '
name|'line'
op|'='
name|'line'
op|'['
name|'len'
op|'('
string|"'--editable'"
op|')'
op|':'
op|']'
op|'.'
name|'strip'
op|'('
op|')'
op|'.'
name|'lstrip'
op|'('
string|"'='"
op|')'
newline|'\n'
dedent|''
name|'line_req'
op|'='
name|'InstallRequirement'
op|'.'
name|'from_editable'
op|'('
name|'line'
op|','
name|'default_vcs'
op|'='
name|'options'
op|'.'
name|'default_vcs'
op|')'
newline|'\n'
dedent|''
name|'elif'
op|'('
name|'line'
op|'.'
name|'startswith'
op|'('
string|"'-r'"
op|')'
name|'or'
name|'line'
op|'.'
name|'startswith'
op|'('
string|"'--requirement'"
op|')'
nl|'\n'
name|'or'
name|'line'
op|'.'
name|'startswith'
op|'('
string|"'-Z'"
op|')'
name|'or'
name|'line'
op|'.'
name|'startswith'
op|'('
string|"'--always-unzip'"
op|')'
nl|'\n'
name|'or'
name|'line'
op|'.'
name|'startswith'
op|'('
string|"'-f'"
op|')'
name|'or'
name|'line'
op|'.'
name|'startswith'
op|'('
string|"'-i'"
op|')'
nl|'\n'
name|'or'
name|'line'
op|'.'
name|'startswith'
op|'('
string|"'--extra-index-url'"
op|')'
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'f'
op|'.'
name|'write'
op|'('
name|'line'
op|')'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'line_req'
op|'='
name|'InstallRequirement'
op|'.'
name|'from_line'
op|'('
name|'line'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'not'
name|'line_req'
op|'.'
name|'name'
op|':'
newline|'\n'
indent|'                    '
name|'logger'
op|'.'
name|'notify'
op|'('
string|'"Skipping line because it\'s not clear what it would install: %s"'
nl|'\n'
op|'%'
name|'line'
op|'.'
name|'strip'
op|'('
op|')'
op|')'
newline|'\n'
name|'logger'
op|'.'
name|'notify'
op|'('
string|'"  (add #egg=PackageName to the URL to avoid this warning)"'
op|')'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
name|'if'
name|'line_req'
op|'.'
name|'name'
name|'not'
name|'in'
name|'installations'
op|':'
newline|'\n'
indent|'                    '
name|'logger'
op|'.'
name|'warn'
op|'('
string|'"Requirement file contains %s, but that package is not installed"'
nl|'\n'
op|'%'
name|'line'
op|'.'
name|'strip'
op|'('
op|')'
op|')'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
name|'f'
op|'.'
name|'write'
op|'('
name|'str'
op|'('
name|'installations'
op|'['
name|'line_req'
op|'.'
name|'name'
op|']'
op|')'
op|')'
newline|'\n'
name|'del'
name|'installations'
op|'['
name|'line_req'
op|'.'
name|'name'
op|']'
newline|'\n'
dedent|''
name|'f'
op|'.'
name|'write'
op|'('
string|"'## The following requirements were added by pip --freeze:\\n'"
op|')'
newline|'\n'
dedent|''
name|'for'
name|'installation'
name|'in'
name|'sorted'
op|'('
name|'installations'
op|'.'
name|'values'
op|'('
op|')'
op|','
name|'key'
op|'='
name|'lambda'
name|'x'
op|':'
name|'x'
op|'.'
name|'name'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'f'
op|'.'
name|'write'
op|'('
name|'str'
op|'('
name|'installation'
op|')'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
dedent|''
dedent|''
name|'FreezeCommand'
op|'('
op|')'
newline|'\n'
endmarker|''
end_unit
