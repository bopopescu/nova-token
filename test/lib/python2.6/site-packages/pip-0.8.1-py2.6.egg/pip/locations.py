begin_unit
string|'"""Locations where we look for configs, install stuff, etc"""'
newline|'\n'
nl|'\n'
name|'import'
name|'sys'
newline|'\n'
name|'import'
name|'os'
newline|'\n'
name|'from'
name|'distutils'
name|'import'
name|'sysconfig'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|running_under_virtualenv
name|'def'
name|'running_under_virtualenv'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""\n    Return True if we\'re running inside a virtualenv, False otherwise.\n\n    """'
newline|'\n'
name|'return'
name|'hasattr'
op|'('
name|'sys'
op|','
string|"'real_prefix'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
name|'if'
name|'running_under_virtualenv'
op|'('
op|')'
op|':'
newline|'\n'
comment|'## FIXME: is build/ a good name?'
nl|'\n'
indent|'    '
name|'build_prefix'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'sys'
op|'.'
name|'prefix'
op|','
string|"'build'"
op|')'
newline|'\n'
name|'src_prefix'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'sys'
op|'.'
name|'prefix'
op|','
string|"'src'"
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
comment|"## FIXME: this isn't a very good default"
nl|'\n'
DECL|variable|build_prefix
indent|'    '
name|'build_prefix'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'os'
op|'.'
name|'getcwd'
op|'('
op|')'
op|','
string|"'build'"
op|')'
newline|'\n'
DECL|variable|src_prefix
name|'src_prefix'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'os'
op|'.'
name|'getcwd'
op|'('
op|')'
op|','
string|"'src'"
op|')'
newline|'\n'
nl|'\n'
comment|"# FIXME doesn't account for venv linked to global site-packages"
nl|'\n'
nl|'\n'
DECL|variable|site_packages
dedent|''
name|'site_packages'
op|'='
name|'sysconfig'
op|'.'
name|'get_python_lib'
op|'('
op|')'
newline|'\n'
DECL|variable|user_dir
name|'user_dir'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'expanduser'
op|'('
string|"'~'"
op|')'
newline|'\n'
name|'if'
name|'sys'
op|'.'
name|'platform'
op|'=='
string|"'win32'"
op|':'
newline|'\n'
DECL|variable|bin_py
indent|'    '
name|'bin_py'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'sys'
op|'.'
name|'prefix'
op|','
string|"'Scripts'"
op|')'
newline|'\n'
comment|"# buildout uses 'bin' on Windows too?"
nl|'\n'
name|'if'
name|'not'
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'bin_py'
op|')'
op|':'
newline|'\n'
DECL|variable|bin_py
indent|'        '
name|'bin_py'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'sys'
op|'.'
name|'prefix'
op|','
string|"'bin'"
op|')'
newline|'\n'
DECL|variable|user_dir
dedent|''
name|'user_dir'
op|'='
name|'os'
op|'.'
name|'environ'
op|'.'
name|'get'
op|'('
string|"'APPDATA'"
op|','
name|'user_dir'
op|')'
comment|'# Use %APPDATA% for roaming'
newline|'\n'
DECL|variable|default_storage_dir
name|'default_storage_dir'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'user_dir'
op|','
string|"'pip'"
op|')'
newline|'\n'
DECL|variable|default_config_file
name|'default_config_file'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'default_storage_dir'
op|','
string|"'pip.ini'"
op|')'
newline|'\n'
DECL|variable|default_log_file
name|'default_log_file'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'default_storage_dir'
op|','
string|"'pip.log'"
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
DECL|variable|bin_py
indent|'    '
name|'bin_py'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'sys'
op|'.'
name|'prefix'
op|','
string|"'bin'"
op|')'
newline|'\n'
DECL|variable|default_storage_dir
name|'default_storage_dir'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'user_dir'
op|','
string|"'.pip'"
op|')'
newline|'\n'
DECL|variable|default_config_file
name|'default_config_file'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'default_storage_dir'
op|','
string|"'pip.conf'"
op|')'
newline|'\n'
DECL|variable|default_log_file
name|'default_log_file'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'default_storage_dir'
op|','
string|"'pip.log'"
op|')'
newline|'\n'
comment|'# Forcing to use /usr/local/bin for standard Mac OS X framework installs'
nl|'\n'
name|'if'
name|'sys'
op|'.'
name|'platform'
op|'['
op|':'
number|'6'
op|']'
op|'=='
string|"'darwin'"
name|'and'
name|'sys'
op|'.'
name|'prefix'
op|'['
op|':'
number|'16'
op|']'
op|'=='
string|"'/System/Library/'"
op|':'
newline|'\n'
DECL|variable|bin_py
indent|'        '
name|'bin_py'
op|'='
string|"'/usr/local/bin'"
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
