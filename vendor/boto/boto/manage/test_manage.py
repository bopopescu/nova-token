begin_unit
name|'from'
name|'boto'
op|'.'
name|'manage'
op|'.'
name|'server'
name|'import'
name|'Server'
newline|'\n'
name|'from'
name|'boto'
op|'.'
name|'manage'
op|'.'
name|'volume'
name|'import'
name|'Volume'
newline|'\n'
name|'import'
name|'time'
newline|'\n'
nl|'\n'
name|'print'
string|"'--> Creating New Volume'"
newline|'\n'
DECL|variable|volume
name|'volume'
op|'='
name|'Volume'
op|'.'
name|'create'
op|'('
op|')'
newline|'\n'
name|'print'
name|'volume'
newline|'\n'
nl|'\n'
name|'print'
string|"'--> Creating New Server'"
newline|'\n'
DECL|variable|server_list
name|'server_list'
op|'='
name|'Server'
op|'.'
name|'create'
op|'('
op|')'
newline|'\n'
DECL|variable|server
name|'server'
op|'='
name|'server_list'
op|'['
number|'0'
op|']'
newline|'\n'
name|'print'
name|'server'
newline|'\n'
nl|'\n'
name|'print'
string|"'----> Waiting for Server to start up'"
newline|'\n'
name|'while'
name|'server'
op|'.'
name|'status'
op|'!='
string|"'running'"
op|':'
newline|'\n'
indent|'    '
name|'print'
string|"'*'"
newline|'\n'
name|'time'
op|'.'
name|'sleep'
op|'('
number|'10'
op|')'
newline|'\n'
dedent|''
name|'print'
string|"'----> Server is running'"
newline|'\n'
nl|'\n'
name|'print'
string|'\'--> Run "df -k" on Server\''
newline|'\n'
DECL|variable|status
name|'status'
op|'='
name|'server'
op|'.'
name|'run'
op|'('
string|"'df -k'"
op|')'
newline|'\n'
name|'print'
name|'status'
op|'['
number|'1'
op|']'
newline|'\n'
nl|'\n'
name|'print'
string|"'--> Now run volume.make_ready to make the volume ready to use on server'"
newline|'\n'
name|'volume'
op|'.'
name|'make_ready'
op|'('
name|'server'
op|')'
newline|'\n'
nl|'\n'
name|'print'
string|'\'--> Run "df -k" on Server\''
newline|'\n'
DECL|variable|status
name|'status'
op|'='
name|'server'
op|'.'
name|'run'
op|'('
string|"'df -k'"
op|')'
newline|'\n'
name|'print'
name|'status'
op|'['
number|'1'
op|']'
newline|'\n'
nl|'\n'
name|'print'
string|'\'--> Do an "ls -al" on the new filesystem\''
newline|'\n'
DECL|variable|status
name|'status'
op|'='
name|'server'
op|'.'
name|'run'
op|'('
string|"'ls -al %s'"
op|'%'
name|'volume'
op|'.'
name|'mount_point'
op|')'
newline|'\n'
name|'print'
name|'status'
op|'['
number|'1'
op|']'
newline|'\n'
nl|'\n'
endmarker|''
end_unit
