begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
name|'import'
name|'warnings'
newline|'\n'
name|'warnings'
op|'.'
name|'warn'
op|'('
nl|'\n'
string|'"Create your own event dispatching mechanism, "'
nl|'\n'
string|'"twisted.python.dispatch will soon be no more."'
op|','
nl|'\n'
name|'DeprecationWarning'
op|','
number|'2'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|EventDispatcher
name|'class'
name|'EventDispatcher'
op|':'
newline|'\n'
indent|'    '
string|'"""\n    A global event dispatcher for events.\n    I\'m used for any events that need to span disparate objects in the client.\n\n    I should only be used when one object needs to signal an object that it\'s\n    not got a direct reference to (unless you really want to pass it through\n    here, in which case I won\'t mind).\n\n    I\'m mainly useful for complex GUIs.\n    """'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'prefix'
op|'='
string|'"event_"'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'prefix'
op|'='
name|'prefix'
newline|'\n'
name|'self'
op|'.'
name|'callbacks'
op|'='
op|'{'
op|'}'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|member|registerHandler
dedent|''
name|'def'
name|'registerHandler'
op|'('
name|'self'
op|','
name|'name'
op|','
name|'meth'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'callbacks'
op|'.'
name|'setdefault'
op|'('
name|'name'
op|','
op|'['
op|']'
op|')'
op|'.'
name|'append'
op|'('
name|'meth'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|member|autoRegister
dedent|''
name|'def'
name|'autoRegister'
op|'('
name|'self'
op|','
name|'obj'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'reflect'
newline|'\n'
name|'d'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'reflect'
op|'.'
name|'accumulateMethods'
op|'('
name|'obj'
op|','
name|'d'
op|','
name|'self'
op|'.'
name|'prefix'
op|')'
newline|'\n'
name|'for'
name|'k'
op|','
name|'v'
name|'in'
name|'d'
op|'.'
name|'items'
op|'('
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'registerHandler'
op|'('
name|'k'
op|','
name|'v'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|member|publishEvent
dedent|''
dedent|''
name|'def'
name|'publishEvent'
op|'('
name|'self'
op|','
name|'name'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'cb'
name|'in'
name|'self'
op|'.'
name|'callbacks'
op|'['
name|'name'
op|']'
op|':'
newline|'\n'
indent|'            '
name|'cb'
op|'('
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
endmarker|''
end_unit
