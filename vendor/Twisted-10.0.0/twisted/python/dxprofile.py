begin_unit
comment|'# Copyright (c) 2001-2007 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
string|'"""\nDEPRECATED since Twisted 8.0.\n\nUtility functions for reporting bytecode frequencies to Skip Montanaro\'s\nstat collector.\n\nThis module requires a version of Python build with DYNAMIC_EXCUTION_PROFILE,\nand optionally DXPAIRS, defined to be useful.\n"""'
newline|'\n'
nl|'\n'
name|'import'
name|'sys'
op|','
name|'types'
op|','
name|'xmlrpclib'
op|','
name|'warnings'
newline|'\n'
nl|'\n'
nl|'\n'
name|'warnings'
op|'.'
name|'warn'
op|'('
string|'"twisted.python.dxprofile is deprecated since Twisted 8.0."'
op|','
nl|'\n'
DECL|variable|category
name|'category'
op|'='
name|'DeprecationWarning'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|rle
name|'def'
name|'rle'
op|'('
name|'iterable'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""\n    Run length encode a list.\n    """'
newline|'\n'
name|'iterable'
op|'='
name|'iter'
op|'('
name|'iterable'
op|')'
newline|'\n'
name|'runlen'
op|'='
number|'1'
newline|'\n'
name|'result'
op|'='
op|'['
op|']'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'        '
name|'previous'
op|'='
name|'iterable'
op|'.'
name|'next'
op|'('
op|')'
newline|'\n'
dedent|''
name|'except'
name|'StopIteration'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'['
op|']'
newline|'\n'
dedent|''
name|'for'
name|'element'
name|'in'
name|'iterable'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'element'
op|'=='
name|'previous'
op|':'
newline|'\n'
indent|'            '
name|'runlen'
op|'='
name|'runlen'
op|'+'
number|'1'
newline|'\n'
name|'continue'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'isinstance'
op|'('
name|'previous'
op|','
op|'('
name|'types'
op|'.'
name|'ListType'
op|','
name|'types'
op|'.'
name|'TupleType'
op|')'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'previous'
op|'='
name|'rle'
op|'('
name|'previous'
op|')'
newline|'\n'
dedent|''
name|'result'
op|'.'
name|'append'
op|'('
op|'['
name|'previous'
op|','
name|'runlen'
op|']'
op|')'
newline|'\n'
dedent|''
name|'previous'
op|'='
name|'element'
newline|'\n'
name|'runlen'
op|'='
number|'1'
newline|'\n'
dedent|''
name|'if'
name|'isinstance'
op|'('
name|'previous'
op|','
op|'('
name|'types'
op|'.'
name|'ListType'
op|','
name|'types'
op|'.'
name|'TupleType'
op|')'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'previous'
op|'='
name|'rle'
op|'('
name|'previous'
op|')'
newline|'\n'
dedent|''
name|'result'
op|'.'
name|'append'
op|'('
op|'['
name|'previous'
op|','
name|'runlen'
op|']'
op|')'
newline|'\n'
name|'return'
name|'result'
newline|'\n'
nl|'\n'
nl|'\n'
nl|'\n'
DECL|function|report
dedent|''
name|'def'
name|'report'
op|'('
name|'email'
op|','
name|'appname'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""\n    Send an RLE encoded version of sys.getdxp() off to our Top Men (tm)\n    for analysis.\n    """'
newline|'\n'
name|'if'
name|'hasattr'
op|'('
name|'sys'
op|','
string|"'getdxp'"
op|')'
name|'and'
name|'appname'
op|':'
newline|'\n'
indent|'        '
name|'dxp'
op|'='
name|'xmlrpclib'
op|'.'
name|'ServerProxy'
op|'('
string|'"http://manatee.mojam.com:7304"'
op|')'
newline|'\n'
name|'dxp'
op|'.'
name|'add_dx_info'
op|'('
name|'appname'
op|','
name|'email'
op|','
name|'sys'
op|'.'
name|'version_info'
op|'['
op|':'
number|'3'
op|']'
op|','
name|'rle'
op|'('
name|'sys'
op|'.'
name|'getdxp'
op|'('
op|')'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
