begin_unit
begin_comment
comment|/* Generated by Pyrex 0.9.4.1 on Sun Oct 15 15:04:09 2006 */
end_comment
begin_define
DECL|macro|PY_SSIZE_T_CLEAN
define|#
directive|define
name|PY_SSIZE_T_CLEAN
end_define
begin_include
include|#
directive|include
file|"Python.h"
end_include
begin_include
include|#
directive|include
file|"structmember.h"
end_include
begin_ifndef
ifndef|#
directive|ifndef
name|PY_LONG_LONG
end_ifndef
begin_define
DECL|macro|PY_LONG_LONG
define|#
directive|define
name|PY_LONG_LONG
value|LONG_LONG
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_if
if|#
directive|if
name|PY_VERSION_HEX
operator|<
literal|0x02050000
end_if
begin_typedef
DECL|typedef|Py_ssize_t
typedef|typedef
name|int
name|Py_ssize_t
typedef|;
end_typedef
begin_define
DECL|macro|PY_SSIZE_T_MAX
define|#
directive|define
name|PY_SSIZE_T_MAX
value|INT_MAX
end_define
begin_define
DECL|macro|PY_SSIZE_T_MIN
define|#
directive|define
name|PY_SSIZE_T_MIN
value|INT_MIN
end_define
begin_define
DECL|macro|PyInt_FromSsize_t
define|#
directive|define
name|PyInt_FromSsize_t
parameter_list|(
name|z
parameter_list|)
value|PyInt_FromLong(z)
end_define
begin_define
DECL|macro|PyInt_AsSsize_t
define|#
directive|define
name|PyInt_AsSsize_t
parameter_list|(
name|o
parameter_list|)
value|PyInt_AsLong(o)
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_ifdef
ifdef|#
directive|ifdef
name|__cplusplus
end_ifdef
begin_define
DECL|macro|__PYX_EXTERN_C
define|#
directive|define
name|__PYX_EXTERN_C
value|extern "C"
end_define
begin_else
else|#
directive|else
end_else
begin_define
DECL|macro|__PYX_EXTERN_C
define|#
directive|define
name|__PYX_EXTERN_C
value|extern
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_function_decl
name|__PYX_EXTERN_C
name|double
name|pow
parameter_list|(
name|double
parameter_list|,
name|double
parameter_list|)
function_decl|;
end_function_decl
begin_include
include|#
directive|include
file|"stdio.h"
end_include
begin_include
include|#
directive|include
file|"errno.h"
end_include
begin_include
include|#
directive|include
file|"string.h"
end_include
begin_include
include|#
directive|include
file|"stdint.h"
end_include
begin_include
include|#
directive|include
file|"sys/epoll.h"
end_include
begin_typedef
DECL|member|s
DECL|member|p
DECL|typedef|__Pyx_CApiTabEntry
typedef|typedef
struct|struct
block|{
specifier|const
name|char
modifier|*
name|s
decl_stmt|;
specifier|const
name|void
modifier|*
modifier|*
name|p
decl_stmt|;
block|}
name|__Pyx_CApiTabEntry
typedef|;
end_typedef
begin_comment
DECL|member|s
DECL|member|p
DECL|typedef|__Pyx_CApiTabEntry
comment|/*proto*/
end_comment
begin_typedef
DECL|member|p
DECL|member|s
DECL|typedef|__Pyx_InternTabEntry
typedef|typedef
struct|struct
block|{
name|PyObject
modifier|*
modifier|*
name|p
decl_stmt|;
name|char
modifier|*
name|s
decl_stmt|;
block|}
name|__Pyx_InternTabEntry
typedef|;
end_typedef
begin_comment
DECL|member|p
DECL|member|s
DECL|typedef|__Pyx_InternTabEntry
comment|/*proto*/
end_comment
begin_typedef
DECL|member|p
DECL|member|s
DECL|member|n
DECL|typedef|__Pyx_StringTabEntry
typedef|typedef
struct|struct
block|{
name|PyObject
modifier|*
modifier|*
name|p
decl_stmt|;
name|char
modifier|*
name|s
decl_stmt|;
name|long
name|n
decl_stmt|;
block|}
name|__Pyx_StringTabEntry
typedef|;
end_typedef
begin_comment
DECL|member|p
DECL|member|s
DECL|member|n
DECL|typedef|__Pyx_StringTabEntry
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__Pyx_UnpackItem
parameter_list|(
name|PyObject
modifier|*
parameter_list|,
name|Py_ssize_t
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_EndUnpack
parameter_list|(
name|PyObject
modifier|*
parameter_list|,
name|Py_ssize_t
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_PrintItem
parameter_list|(
name|PyObject
modifier|*
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_PrintNewline
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|void
name|__Pyx_Raise
parameter_list|(
name|PyObject
modifier|*
name|type
parameter_list|,
name|PyObject
modifier|*
name|value
parameter_list|,
name|PyObject
modifier|*
name|tb
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|void
name|__Pyx_ReRaise
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__Pyx_Import
parameter_list|(
name|PyObject
modifier|*
name|name
parameter_list|,
name|PyObject
modifier|*
name|from_list
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__Pyx_GetExcValue
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_ArgTypeTest
parameter_list|(
name|PyObject
modifier|*
name|obj
parameter_list|,
name|PyTypeObject
modifier|*
name|type
parameter_list|,
name|int
name|none_allowed
parameter_list|,
name|char
modifier|*
name|name
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_TypeTest
parameter_list|(
name|PyObject
modifier|*
name|obj
parameter_list|,
name|PyTypeObject
modifier|*
name|type
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_GetStarArgs
parameter_list|(
name|PyObject
modifier|*
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
modifier|*
name|kwds
parameter_list|,
name|char
modifier|*
name|kwd_list
index|[]
parameter_list|,
name|Py_ssize_t
name|nargs
parameter_list|,
name|PyObject
modifier|*
modifier|*
name|args2
parameter_list|,
name|PyObject
modifier|*
modifier|*
name|kwds2
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|void
name|__Pyx_WriteUnraisable
parameter_list|(
name|char
modifier|*
name|name
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|void
name|__Pyx_AddTraceback
parameter_list|(
name|char
modifier|*
name|funcname
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyTypeObject
modifier|*
name|__Pyx_ImportType
parameter_list|(
name|char
modifier|*
name|module_name
parameter_list|,
name|char
modifier|*
name|class_name
parameter_list|,
name|long
name|size
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_SetVtable
parameter_list|(
name|PyObject
modifier|*
name|dict
parameter_list|,
name|void
modifier|*
name|vtable
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_GetVtable
parameter_list|(
name|PyObject
modifier|*
name|dict
parameter_list|,
name|void
modifier|*
name|vtabptr
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__Pyx_CreateClass
parameter_list|(
name|PyObject
modifier|*
name|bases
parameter_list|,
name|PyObject
modifier|*
name|dict
parameter_list|,
name|PyObject
modifier|*
name|name
parameter_list|,
name|char
modifier|*
name|modname
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_InternStrings
parameter_list|(
name|__Pyx_InternTabEntry
modifier|*
name|t
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_InitStrings
parameter_list|(
name|__Pyx_StringTabEntry
modifier|*
name|t
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_InitCApi
parameter_list|(
name|PyObject
modifier|*
name|module
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_ImportModuleCApi
parameter_list|(
name|__Pyx_CApiTabEntry
modifier|*
name|t
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__Pyx_GetName
parameter_list|(
name|PyObject
modifier|*
name|dict
parameter_list|,
name|PyObject
modifier|*
name|name
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_decl_stmt
DECL|variable|__pyx_m
specifier|static
name|PyObject
modifier|*
name|__pyx_m
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_b
specifier|static
name|PyObject
modifier|*
name|__pyx_b
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_lineno
specifier|static
name|int
name|__pyx_lineno
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_filename
specifier|static
name|char
modifier|*
name|__pyx_filename
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_f
specifier|static
name|char
modifier|*
modifier|*
name|__pyx_f
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_mdoc
specifier|static
name|char
name|__pyx_mdoc
index|[]
init|=
literal|"\nInterface to epoll I/O event notification facility.\n"
decl_stmt|;
end_decl_stmt
begin_comment
comment|/* Declarations from _epoll */
end_comment
begin_struct
DECL|struct|__pyx_obj_6_epoll_epoll
struct|struct
name|__pyx_obj_6_epoll_epoll
block|{
name|PyObject_HEAD
DECL|member|fd
name|int
name|fd
decl_stmt|;
DECL|member|initialized
name|int
name|initialized
decl_stmt|;
block|}
struct|;
end_struct
begin_decl_stmt
DECL|variable|__pyx_ptype_6_epoll_epoll
specifier|static
name|PyTypeObject
modifier|*
name|__pyx_ptype_6_epoll_epoll
init|=
literal|0
decl_stmt|;
end_decl_stmt
begin_comment
comment|/* Implementation of _epoll */
end_comment
begin_decl_stmt
DECL|variable|__pyx_n_CTL_ADD
specifier|static
name|PyObject
modifier|*
name|__pyx_n_CTL_ADD
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_CTL_DEL
specifier|static
name|PyObject
modifier|*
name|__pyx_n_CTL_DEL
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_CTL_MOD
specifier|static
name|PyObject
modifier|*
name|__pyx_n_CTL_MOD
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_IN
specifier|static
name|PyObject
modifier|*
name|__pyx_n_IN
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_OUT
specifier|static
name|PyObject
modifier|*
name|__pyx_n_OUT
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_PRI
specifier|static
name|PyObject
modifier|*
name|__pyx_n_PRI
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_ERR
specifier|static
name|PyObject
modifier|*
name|__pyx_n_ERR
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_HUP
specifier|static
name|PyObject
modifier|*
name|__pyx_n_HUP
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_ET
specifier|static
name|PyObject
modifier|*
name|__pyx_n_ET
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_RDNORM
specifier|static
name|PyObject
modifier|*
name|__pyx_n_RDNORM
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_RDBAND
specifier|static
name|PyObject
modifier|*
name|__pyx_n_RDBAND
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_WRNORM
specifier|static
name|PyObject
modifier|*
name|__pyx_n_WRNORM
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_WRBAND
specifier|static
name|PyObject
modifier|*
name|__pyx_n_WRBAND
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_MSG
specifier|static
name|PyObject
modifier|*
name|__pyx_n_MSG
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_IOError
specifier|static
name|PyObject
modifier|*
name|__pyx_n_IOError
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|int
name|__pyx_f_6_epoll_5epoll___init__
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_6_epoll_5epoll___init__
specifier|static
name|int
name|__pyx_f_6_epoll_5epoll___init__
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|int
name|__pyx_v_size
decl_stmt|;
name|int
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_5
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"size"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"i"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_size
argument_list|)
condition|)
return|return
operator|-
literal|1
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":77 */
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|fd
operator|=
name|epoll_create
argument_list|(
name|__pyx_v_size
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":78 */
name|__pyx_1
operator|=
operator|(
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|fd
operator|==
operator|(
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":79 */
name|__pyx_2
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_IOError
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|79
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|errno
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|79
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyString_FromString
argument_list|(
name|strerror
argument_list|(
name|errno
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|79
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_5
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|79
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|0
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|1
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
name|PyObject_Call
argument_list|(
name|__pyx_2
argument_list|,
name|__pyx_5
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|79
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
name|__Pyx_Raise
argument_list|(
name|__pyx_3
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|79
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":80 */
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|initialized
operator|=
literal|1
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"_epoll.epoll.__init__"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
operator|-
literal|1
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|void
name|__pyx_f_6_epoll_5epoll___dealloc__
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_6_epoll_5epoll___dealloc__
specifier|static
name|void
name|__pyx_f_6_epoll_5epoll___dealloc__
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|)
block|{
name|int
name|__pyx_1
decl_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":83 */
name|__pyx_1
operator|=
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|initialized
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":84 */
name|close
argument_list|(
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|fd
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":85 */
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|initialized
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"_epoll.epoll.__dealloc__"
argument_list|)
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_6_epoll_5epoll_close
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_decl_stmt
DECL|variable|__pyx_doc_6_epoll_5epoll_close
specifier|static
name|char
name|__pyx_doc_6_epoll_5epoll_close
index|[]
init|=
literal|"\n        Close the epoll file descriptor.\n        "
decl_stmt|;
end_decl_stmt
begin_function
DECL|function|__pyx_f_6_epoll_5epoll_close
specifier|static
name|PyObject
modifier|*
name|__pyx_f_6_epoll_5epoll_close
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_5
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|""
argument_list|,
name|__pyx_argnames
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":91 */
name|__pyx_1
operator|=
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|initialized
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":92 */
name|__pyx_1
operator|=
operator|(
name|close
argument_list|(
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|fd
argument_list|)
operator|==
operator|(
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":93 */
name|__pyx_2
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_IOError
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|93
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|errno
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|93
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyString_FromString
argument_list|(
name|strerror
argument_list|(
name|errno
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|93
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_5
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|93
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|0
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|1
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
name|PyObject_Call
argument_list|(
name|__pyx_2
argument_list|,
name|__pyx_5
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|93
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
name|__Pyx_Raise
argument_list|(
name|__pyx_3
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|93
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_L3
label|:
empty_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":94 */
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|initialized
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"_epoll.epoll.close"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_6_epoll_5epoll_fileno
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_decl_stmt
DECL|variable|__pyx_doc_6_epoll_5epoll_fileno
specifier|static
name|char
name|__pyx_doc_6_epoll_5epoll_fileno
index|[]
init|=
literal|"\n        Return the epoll file descriptor number.\n        "
decl_stmt|;
end_decl_stmt
begin_function
DECL|function|__pyx_f_6_epoll_5epoll_fileno
specifier|static
name|PyObject
modifier|*
name|__pyx_f_6_epoll_5epoll_fileno
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_1
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|""
argument_list|,
name|__pyx_argnames
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":100 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|fd
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|100
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_r
operator|=
name|__pyx_1
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"_epoll.epoll.fileno"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_6_epoll_5epoll__control
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_decl_stmt
DECL|variable|__pyx_doc_6_epoll_5epoll__control
specifier|static
name|char
name|__pyx_doc_6_epoll_5epoll__control
index|[]
init|=
literal|"\n        Modify the monitored state of a particular file descriptor.\n        \n        Wrap epoll_ctl(2).\n\n        @type op: C{int}\n        @param op: One of CTL_ADD, CTL_DEL, or CTL_MOD\n\n        @type fd: C{int}\n        @param fd: File descriptor to modify\n\n        @type events: C{int}\n        @param events: A bit set of IN, OUT, PRI, ERR, HUP, and ET.\n\n        @raise IOError: Raised if the underlying epoll_ctl() call fails.\n        "
decl_stmt|;
end_decl_stmt
begin_function
DECL|function|__pyx_f_6_epoll_5epoll__control
specifier|static
name|PyObject
modifier|*
name|__pyx_f_6_epoll_5epoll__control
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|int
name|__pyx_v_op
decl_stmt|;
name|int
name|__pyx_v_fd
decl_stmt|;
name|int
name|__pyx_v_events
decl_stmt|;
name|int
name|__pyx_v_result
decl_stmt|;
name|struct
name|epoll_event
name|__pyx_v_evt
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_5
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"op"
block|,
literal|"fd"
block|,
literal|"events"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"iii"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_op
argument_list|,
operator|&
name|__pyx_v_fd
argument_list|,
operator|&
name|__pyx_v_events
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":121 */
name|__pyx_v_evt
operator|.
name|events
operator|=
name|__pyx_v_events
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":122 */
name|__pyx_v_evt
operator|.
name|data
operator|.
name|fd
operator|=
name|__pyx_v_fd
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":123 */
name|__pyx_v_result
operator|=
name|epoll_ctl
argument_list|(
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|fd
argument_list|,
name|__pyx_v_op
argument_list|,
name|__pyx_v_fd
argument_list|,
operator|(
operator|&
name|__pyx_v_evt
operator|)
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":124 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_result
operator|==
operator|(
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":125 */
name|__pyx_2
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_IOError
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|125
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|errno
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|125
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyString_FromString
argument_list|(
name|strerror
argument_list|(
name|errno
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|125
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_5
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|125
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|0
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|1
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
name|PyObject_Call
argument_list|(
name|__pyx_2
argument_list|,
name|__pyx_5
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|125
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
name|__Pyx_Raise
argument_list|(
name|__pyx_3
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|125
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"_epoll.epoll._control"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_n_append
specifier|static
name|PyObject
modifier|*
name|__pyx_n_append
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_6_epoll_5epoll_wait
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_decl_stmt
DECL|variable|__pyx_doc_6_epoll_5epoll_wait
specifier|static
name|char
name|__pyx_doc_6_epoll_5epoll_wait
index|[]
init|=
literal|"\n        Wait for an I/O event, wrap epoll_wait(2).\n\n        @type maxevents: C{int}\n        @param maxevents: Maximum number of events returned.\n\n        @type timeout: C{int}\n        @param timeout: Maximum time waiting for events. 0 makes it return\n            immediately whereas -1 makes it wait indefinitely.\n        \n        @raise IOError: Raised if the underlying epoll_wait() call fails.\n        "
decl_stmt|;
end_decl_stmt
begin_function
DECL|function|__pyx_f_6_epoll_5epoll_wait
specifier|static
name|PyObject
modifier|*
name|__pyx_f_6_epoll_5epoll_wait
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|unsigned
name|int
name|__pyx_v_maxevents
decl_stmt|;
name|int
name|__pyx_v_timeout
decl_stmt|;
name|struct
name|epoll_event
argument_list|(
operator|*
name|__pyx_v_events
argument_list|)
decl_stmt|;
name|int
name|__pyx_v_result
decl_stmt|;
name|int
name|__pyx_v_nbytes
decl_stmt|;
name|int
name|__pyx_v_fd
decl_stmt|;
name|PyThreadState
argument_list|(
operator|*
name|__pyx_v__save
argument_list|)
expr_stmt|;
name|PyObject
modifier|*
name|__pyx_v_results
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_i
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_5
init|=
literal|0
decl_stmt|;
name|long
name|__pyx_6
decl_stmt|;
name|Py_ssize_t
name|__pyx_7
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"maxevents"
block|,
literal|"timeout"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"Ii"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_maxevents
argument_list|,
operator|&
name|__pyx_v_timeout
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
name|__pyx_v_results
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
name|__pyx_v_i
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":146 */
name|__pyx_v_nbytes
operator|=
operator|(
operator|(
sizeof|sizeof
argument_list|(
expr|struct
name|epoll_event
argument_list|)
operator|)
operator|*
name|__pyx_v_maxevents
operator|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":147 */
name|__pyx_v_events
operator|=
operator|(
operator|(
expr|struct
name|epoll_event
argument_list|(
operator|*
argument_list|)
operator|)
name|malloc
argument_list|(
name|__pyx_v_nbytes
argument_list|)
operator|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":148 */
name|memset
argument_list|(
name|__pyx_v_events
argument_list|,
literal|0
argument_list|,
name|__pyx_v_nbytes
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":149 */
comment|/*try:*/
block|{
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":150 */
name|__pyx_v_fd
operator|=
operator|(
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|fd
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":152 */
name|__pyx_v__save
operator|=
name|PyEval_SaveThread
argument_list|()
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":153 */
name|__pyx_v_result
operator|=
name|epoll_wait
argument_list|(
name|__pyx_v_fd
argument_list|,
name|__pyx_v_events
argument_list|,
name|__pyx_v_maxevents
argument_list|,
name|__pyx_v_timeout
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":154 */
name|PyEval_RestoreThread
argument_list|(
name|__pyx_v__save
argument_list|)
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":156 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_result
operator|==
operator|(
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":157 */
name|__pyx_2
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_IOError
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|157
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|errno
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|157
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_4
operator|=
name|PyString_FromString
argument_list|(
name|strerror
argument_list|(
name|errno
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|157
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_5
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|157
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|0
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|1
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
name|PyObject_Call
argument_list|(
name|__pyx_2
argument_list|,
name|__pyx_5
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|157
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
name|__Pyx_Raise
argument_list|(
name|__pyx_3
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|157
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
goto|goto
name|__pyx_L5
goto|;
block|}
name|__pyx_L5
label|:
empty_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":158 */
name|__pyx_4
operator|=
name|PyList_New
argument_list|(
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|158
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_v_results
argument_list|)
expr_stmt|;
name|__pyx_v_results
operator|=
name|__pyx_4
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":159 */
for|for
control|(
name|__pyx_6
operator|=
literal|0
init|;
name|__pyx_6
operator|<
name|__pyx_v_result
condition|;
operator|++
name|__pyx_6
control|)
block|{
name|__pyx_2
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_6
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|159
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_v_i
argument_list|)
expr_stmt|;
name|__pyx_v_i
operator|=
name|__pyx_2
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":160 */
name|__pyx_5
operator|=
name|PyObject_GetAttr
argument_list|(
name|__pyx_v_results
argument_list|,
name|__pyx_n_append
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|160
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_7
operator|=
name|PyInt_AsSsize_t
argument_list|(
name|__pyx_v_i
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|160
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
operator|(
name|__pyx_v_events
index|[
name|__pyx_7
index|]
operator|)
operator|.
name|data
operator|.
name|fd
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|160
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_7
operator|=
name|PyInt_AsSsize_t
argument_list|(
name|__pyx_v_i
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|160
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_4
operator|=
name|PyInt_FromLong
argument_list|(
operator|(
call|(
name|int
call|)
argument_list|(
name|__pyx_v_events
index|[
name|__pyx_7
index|]
argument_list|)
operator|.
name|events
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|160
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_2
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|160
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_2
argument_list|,
literal|0
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_2
argument_list|,
literal|1
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
name|PyTuple_New
argument_list|(
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|160
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_3
argument_list|,
literal|0
argument_list|,
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
name|PyObject_Call
argument_list|(
name|__pyx_5
argument_list|,
name|__pyx_3
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|160
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_L6
label|:
empty_stmt|;
block|}
name|__pyx_L7
label|:
empty_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":161 */
name|Py_INCREF
argument_list|(
name|__pyx_v_results
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
name|__pyx_v_results
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
block|}
comment|/*finally:*/
block|{
name|int
name|__pyx_why
decl_stmt|;
name|__pyx_why
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L4
goto|;
name|__pyx_L2
label|:
name|__pyx_why
operator|=
literal|3
expr_stmt|;
goto|goto
name|__pyx_L4
goto|;
name|__pyx_L3
label|:
block|{
name|__pyx_why
operator|=
literal|4
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|PyErr_Fetch
argument_list|(
operator|&
name|__pyx_2
argument_list|,
operator|&
name|__pyx_5
argument_list|,
operator|&
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
name|__pyx_lineno
expr_stmt|;
goto|goto
name|__pyx_L4
goto|;
block|}
name|__pyx_L4
label|:
empty_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":163 */
name|free
argument_list|(
name|__pyx_v_events
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|__pyx_why
condition|)
block|{
case|case
literal|3
case|:
goto|goto
name|__pyx_L0
goto|;
case|case
literal|4
case|:
block|{
name|PyErr_Restore
argument_list|(
name|__pyx_2
argument_list|,
name|__pyx_5
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_lineno
operator|=
name|__pyx_1
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
block|}
block|}
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"_epoll.epoll.wait"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_results
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_i
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_intern_tab
specifier|static
name|__Pyx_InternTabEntry
name|__pyx_intern_tab
index|[]
init|=
block|{
block|{
operator|&
name|__pyx_n_CTL_ADD
block|,
literal|"CTL_ADD"
block|}
block|,
block|{
operator|&
name|__pyx_n_CTL_DEL
block|,
literal|"CTL_DEL"
block|}
block|,
block|{
operator|&
name|__pyx_n_CTL_MOD
block|,
literal|"CTL_MOD"
block|}
block|,
block|{
operator|&
name|__pyx_n_ERR
block|,
literal|"ERR"
block|}
block|,
block|{
operator|&
name|__pyx_n_ET
block|,
literal|"ET"
block|}
block|,
block|{
operator|&
name|__pyx_n_HUP
block|,
literal|"HUP"
block|}
block|,
block|{
operator|&
name|__pyx_n_IN
block|,
literal|"IN"
block|}
block|,
block|{
operator|&
name|__pyx_n_IOError
block|,
literal|"IOError"
block|}
block|,
block|{
operator|&
name|__pyx_n_MSG
block|,
literal|"MSG"
block|}
block|,
block|{
operator|&
name|__pyx_n_OUT
block|,
literal|"OUT"
block|}
block|,
block|{
operator|&
name|__pyx_n_PRI
block|,
literal|"PRI"
block|}
block|,
block|{
operator|&
name|__pyx_n_RDBAND
block|,
literal|"RDBAND"
block|}
block|,
block|{
operator|&
name|__pyx_n_RDNORM
block|,
literal|"RDNORM"
block|}
block|,
block|{
operator|&
name|__pyx_n_WRBAND
block|,
literal|"WRBAND"
block|}
block|,
block|{
operator|&
name|__pyx_n_WRNORM
block|,
literal|"WRNORM"
block|}
block|,
block|{
operator|&
name|__pyx_n_append
block|,
literal|"append"
block|}
block|,
block|{
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt
begin_function
DECL|function|__pyx_tp_new_6_epoll_epoll
specifier|static
name|PyObject
modifier|*
name|__pyx_tp_new_6_epoll_epoll
parameter_list|(
name|PyTypeObject
modifier|*
name|t
parameter_list|,
name|PyObject
modifier|*
name|a
parameter_list|,
name|PyObject
modifier|*
name|k
parameter_list|)
block|{
name|PyObject
modifier|*
name|o
init|=
call|(
modifier|*
name|t
operator|->
name|tp_alloc
call|)
argument_list|(
name|t
argument_list|,
literal|0
argument_list|)
decl_stmt|;
name|struct
name|__pyx_obj_6_epoll_epoll
modifier|*
name|p
init|=
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|o
decl_stmt|;
return|return
name|o
return|;
block|}
end_function
begin_function
DECL|function|__pyx_tp_dealloc_6_epoll_epoll
specifier|static
name|void
name|__pyx_tp_dealloc_6_epoll_epoll
parameter_list|(
name|PyObject
modifier|*
name|o
parameter_list|)
block|{
name|struct
name|__pyx_obj_6_epoll_epoll
modifier|*
name|p
init|=
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|o
decl_stmt|;
block|{
name|PyObject
modifier|*
name|etype
decl_stmt|,
modifier|*
name|eval
decl_stmt|,
modifier|*
name|etb
decl_stmt|;
name|PyErr_Fetch
argument_list|(
operator|&
name|etype
argument_list|,
operator|&
name|eval
argument_list|,
operator|&
name|etb
argument_list|)
expr_stmt|;
operator|++
name|o
operator|->
name|ob_refcnt
expr_stmt|;
name|__pyx_f_6_epoll_5epoll___dealloc__
argument_list|(
name|o
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
name|PyErr_WriteUnraisable
argument_list|(
name|o
argument_list|)
expr_stmt|;
operator|--
name|o
operator|->
name|ob_refcnt
expr_stmt|;
name|PyErr_Restore
argument_list|(
name|etype
argument_list|,
name|eval
argument_list|,
name|etb
argument_list|)
expr_stmt|;
block|}
call|(
modifier|*
name|o
operator|->
name|ob_type
operator|->
name|tp_free
call|)
argument_list|(
name|o
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|__pyx_tp_traverse_6_epoll_epoll
specifier|static
name|int
name|__pyx_tp_traverse_6_epoll_epoll
parameter_list|(
name|PyObject
modifier|*
name|o
parameter_list|,
name|visitproc
name|v
parameter_list|,
name|void
modifier|*
name|a
parameter_list|)
block|{
name|int
name|e
decl_stmt|;
name|struct
name|__pyx_obj_6_epoll_epoll
modifier|*
name|p
init|=
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|o
decl_stmt|;
return|return
literal|0
return|;
block|}
end_function
begin_function
DECL|function|__pyx_tp_clear_6_epoll_epoll
specifier|static
name|int
name|__pyx_tp_clear_6_epoll_epoll
parameter_list|(
name|PyObject
modifier|*
name|o
parameter_list|)
block|{
name|struct
name|__pyx_obj_6_epoll_epoll
modifier|*
name|p
init|=
operator|(
expr|struct
name|__pyx_obj_6_epoll_epoll
operator|*
operator|)
name|o
decl_stmt|;
return|return
literal|0
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_methods_6_epoll_epoll
specifier|static
name|struct
name|PyMethodDef
name|__pyx_methods_6_epoll_epoll
index|[]
init|=
block|{
block|{
literal|"close"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_6_epoll_5epoll_close
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
name|__pyx_doc_6_epoll_5epoll_close
block|}
block|,
block|{
literal|"fileno"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_6_epoll_5epoll_fileno
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
name|__pyx_doc_6_epoll_5epoll_fileno
block|}
block|,
block|{
literal|"_control"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_6_epoll_5epoll__control
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
name|__pyx_doc_6_epoll_5epoll__control
block|}
block|,
block|{
literal|"wait"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_6_epoll_5epoll_wait
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
name|__pyx_doc_6_epoll_5epoll_wait
block|}
block|,
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_tp_as_number_epoll
specifier|static
name|PyNumberMethods
name|__pyx_tp_as_number_epoll
init|=
block|{
literal|0
block|,
comment|/*nb_add*/
literal|0
block|,
comment|/*nb_subtract*/
literal|0
block|,
comment|/*nb_multiply*/
literal|0
block|,
comment|/*nb_divide*/
literal|0
block|,
comment|/*nb_remainder*/
literal|0
block|,
comment|/*nb_divmod*/
literal|0
block|,
comment|/*nb_power*/
literal|0
block|,
comment|/*nb_negative*/
literal|0
block|,
comment|/*nb_positive*/
literal|0
block|,
comment|/*nb_absolute*/
literal|0
block|,
comment|/*nb_nonzero*/
literal|0
block|,
comment|/*nb_invert*/
literal|0
block|,
comment|/*nb_lshift*/
literal|0
block|,
comment|/*nb_rshift*/
literal|0
block|,
comment|/*nb_and*/
literal|0
block|,
comment|/*nb_xor*/
literal|0
block|,
comment|/*nb_or*/
literal|0
block|,
comment|/*nb_coerce*/
literal|0
block|,
comment|/*nb_int*/
literal|0
block|,
comment|/*nb_long*/
literal|0
block|,
comment|/*nb_float*/
literal|0
block|,
comment|/*nb_oct*/
literal|0
block|,
comment|/*nb_hex*/
literal|0
block|,
comment|/*nb_inplace_add*/
literal|0
block|,
comment|/*nb_inplace_subtract*/
literal|0
block|,
comment|/*nb_inplace_multiply*/
literal|0
block|,
comment|/*nb_inplace_divide*/
literal|0
block|,
comment|/*nb_inplace_remainder*/
literal|0
block|,
comment|/*nb_inplace_power*/
literal|0
block|,
comment|/*nb_inplace_lshift*/
literal|0
block|,
comment|/*nb_inplace_rshift*/
literal|0
block|,
comment|/*nb_inplace_and*/
literal|0
block|,
comment|/*nb_inplace_xor*/
literal|0
block|,
comment|/*nb_inplace_or*/
literal|0
block|,
comment|/*nb_floor_divide*/
literal|0
block|,
comment|/*nb_true_divide*/
literal|0
block|,
comment|/*nb_inplace_floor_divide*/
literal|0
block|,
comment|/*nb_inplace_true_divide*/
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_tp_as_sequence_epoll
specifier|static
name|PySequenceMethods
name|__pyx_tp_as_sequence_epoll
init|=
block|{
literal|0
block|,
comment|/*sq_length*/
literal|0
block|,
comment|/*sq_concat*/
literal|0
block|,
comment|/*sq_repeat*/
literal|0
block|,
comment|/*sq_item*/
literal|0
block|,
comment|/*sq_slice*/
literal|0
block|,
comment|/*sq_ass_item*/
literal|0
block|,
comment|/*sq_ass_slice*/
literal|0
block|,
comment|/*sq_contains*/
literal|0
block|,
comment|/*sq_inplace_concat*/
literal|0
block|,
comment|/*sq_inplace_repeat*/
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_tp_as_mapping_epoll
specifier|static
name|PyMappingMethods
name|__pyx_tp_as_mapping_epoll
init|=
block|{
literal|0
block|,
comment|/*mp_length*/
literal|0
block|,
comment|/*mp_subscript*/
literal|0
block|,
comment|/*mp_ass_subscript*/
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_tp_as_buffer_epoll
specifier|static
name|PyBufferProcs
name|__pyx_tp_as_buffer_epoll
init|=
block|{
literal|0
block|,
comment|/*bf_getreadbuffer*/
literal|0
block|,
comment|/*bf_getwritebuffer*/
literal|0
block|,
comment|/*bf_getsegcount*/
literal|0
block|,
comment|/*bf_getcharbuffer*/
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_type_6_epoll_epoll
name|PyTypeObject
name|__pyx_type_6_epoll_epoll
init|=
block|{
name|PyObject_HEAD_INIT
argument_list|(
literal|0
argument_list|)
literal|0
block|,
comment|/*ob_size*/
literal|"_epoll.epoll"
block|,
comment|/*tp_name*/
sizeof|sizeof
argument_list|(
expr|struct
name|__pyx_obj_6_epoll_epoll
argument_list|)
block|,
comment|/*tp_basicsize*/
literal|0
block|,
comment|/*tp_itemsize*/
name|__pyx_tp_dealloc_6_epoll_epoll
block|,
comment|/*tp_dealloc*/
literal|0
block|,
comment|/*tp_print*/
literal|0
block|,
comment|/*tp_getattr*/
literal|0
block|,
comment|/*tp_setattr*/
literal|0
block|,
comment|/*tp_compare*/
literal|0
block|,
comment|/*tp_repr*/
operator|&
name|__pyx_tp_as_number_epoll
block|,
comment|/*tp_as_number*/
operator|&
name|__pyx_tp_as_sequence_epoll
block|,
comment|/*tp_as_sequence*/
operator|&
name|__pyx_tp_as_mapping_epoll
block|,
comment|/*tp_as_mapping*/
literal|0
block|,
comment|/*tp_hash*/
literal|0
block|,
comment|/*tp_call*/
literal|0
block|,
comment|/*tp_str*/
literal|0
block|,
comment|/*tp_getattro*/
literal|0
block|,
comment|/*tp_setattro*/
operator|&
name|__pyx_tp_as_buffer_epoll
block|,
comment|/*tp_as_buffer*/
name|Py_TPFLAGS_DEFAULT
operator||
name|Py_TPFLAGS_CHECKTYPES
operator||
name|Py_TPFLAGS_BASETYPE
operator||
name|Py_TPFLAGS_HAVE_GC
block|,
comment|/*tp_flags*/
literal|"\n    Represent a set of file descriptors being monitored for events.\n    "
block|,
comment|/*tp_doc*/
name|__pyx_tp_traverse_6_epoll_epoll
block|,
comment|/*tp_traverse*/
name|__pyx_tp_clear_6_epoll_epoll
block|,
comment|/*tp_clear*/
literal|0
block|,
comment|/*tp_richcompare*/
literal|0
block|,
comment|/*tp_weaklistoffset*/
literal|0
block|,
comment|/*tp_iter*/
literal|0
block|,
comment|/*tp_iternext*/
name|__pyx_methods_6_epoll_epoll
block|,
comment|/*tp_methods*/
literal|0
block|,
comment|/*tp_members*/
literal|0
block|,
comment|/*tp_getset*/
literal|0
block|,
comment|/*tp_base*/
literal|0
block|,
comment|/*tp_dict*/
literal|0
block|,
comment|/*tp_descr_get*/
literal|0
block|,
comment|/*tp_descr_set*/
literal|0
block|,
comment|/*tp_dictoffset*/
name|__pyx_f_6_epoll_5epoll___init__
block|,
comment|/*tp_init*/
literal|0
block|,
comment|/*tp_alloc*/
name|__pyx_tp_new_6_epoll_epoll
block|,
comment|/*tp_new*/
literal|0
block|,
comment|/*tp_free*/
literal|0
block|,
comment|/*tp_is_gc*/
literal|0
block|,
comment|/*tp_bases*/
literal|0
block|,
comment|/*tp_mro*/
literal|0
block|,
comment|/*tp_cache*/
literal|0
block|,
comment|/*tp_subclasses*/
literal|0
block|,
comment|/*tp_weaklist*/
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_methods
specifier|static
name|struct
name|PyMethodDef
name|__pyx_methods
index|[]
init|=
block|{
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|void
name|__pyx_init_filenames
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
name|PyMODINIT_FUNC
name|init_epoll
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|init_epoll
name|PyMODINIT_FUNC
name|init_epoll
parameter_list|(
name|void
parameter_list|)
block|{
name|PyObject
modifier|*
name|__pyx_1
init|=
literal|0
decl_stmt|;
name|__pyx_init_filenames
argument_list|()
expr_stmt|;
name|__pyx_m
operator|=
name|Py_InitModule4
argument_list|(
literal|"_epoll"
argument_list|,
name|__pyx_methods
argument_list|,
name|__pyx_mdoc
argument_list|,
literal|0
argument_list|,
name|PYTHON_API_VERSION
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_m
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|4
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
empty_stmt|;
name|__pyx_b
operator|=
name|PyImport_AddModule
argument_list|(
literal|"__builtin__"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_b
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|4
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
empty_stmt|;
if|if
condition|(
name|PyObject_SetAttrString
argument_list|(
name|__pyx_m
argument_list|,
literal|"__builtins__"
argument_list|,
name|__pyx_b
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|4
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
empty_stmt|;
if|if
condition|(
name|__Pyx_InternStrings
argument_list|(
name|__pyx_intern_tab
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|4
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
empty_stmt|;
if|if
condition|(
name|PyType_Ready
argument_list|(
operator|&
name|__pyx_type_6_epoll_epoll
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|68
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttrString
argument_list|(
name|__pyx_m
argument_list|,
literal|"epoll"
argument_list|,
operator|(
name|PyObject
operator|*
operator|)
operator|&
name|__pyx_type_6_epoll_epoll
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|68
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_ptype_6_epoll_epoll
operator|=
operator|&
name|__pyx_type_6_epoll_epoll
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":165 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLL_CTL_ADD
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|165
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_CTL_ADD
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|165
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":166 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLL_CTL_DEL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|166
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_CTL_DEL
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|166
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":167 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLL_CTL_MOD
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|167
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_CTL_MOD
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|167
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":169 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLIN
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|169
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_IN
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|169
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":170 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLOUT
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|170
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_OUT
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|170
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":171 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLPRI
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|171
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_PRI
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|171
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":172 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLERR
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|172
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_ERR
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|172
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":173 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLHUP
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|173
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_HUP
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|173
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":174 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLET
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|174
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_ET
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|174
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":176 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLRDNORM
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|176
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_RDNORM
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|176
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":177 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLRDBAND
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|177
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_RDBAND
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|177
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":178 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLWRNORM
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|178
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_WRNORM
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|178
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":179 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLWRBAND
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|179
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_WRBAND
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|179
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "/home/exarkun/Projects/Twisted/branches/epollreactor-1953-2/twisted/python/_epoll.pyx":180 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|EPOLLMSG
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|180
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_MSG
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|180
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
return|return;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"_epoll"
argument_list|)
expr_stmt|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_filenames
specifier|static
name|char
modifier|*
name|__pyx_filenames
index|[]
init|=
block|{
literal|"_epoll.pyx"
block|, }
decl_stmt|;
end_decl_stmt
begin_comment
comment|/* Runtime support code */
end_comment
begin_function
DECL|function|__pyx_init_filenames
specifier|static
name|void
name|__pyx_init_filenames
parameter_list|(
name|void
parameter_list|)
block|{
name|__pyx_f
operator|=
name|__pyx_filenames
expr_stmt|;
block|}
end_function
begin_function
DECL|function|__Pyx_GetName
specifier|static
name|PyObject
modifier|*
name|__Pyx_GetName
parameter_list|(
name|PyObject
modifier|*
name|dict
parameter_list|,
name|PyObject
modifier|*
name|name
parameter_list|)
block|{
name|PyObject
modifier|*
name|result
decl_stmt|;
name|result
operator|=
name|PyObject_GetAttr
argument_list|(
name|dict
argument_list|,
name|name
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|result
condition|)
name|PyErr_SetObject
argument_list|(
name|PyExc_NameError
argument_list|,
name|name
argument_list|)
expr_stmt|;
return|return
name|result
return|;
block|}
end_function
begin_function
DECL|function|__Pyx_Raise
specifier|static
name|void
name|__Pyx_Raise
parameter_list|(
name|PyObject
modifier|*
name|type
parameter_list|,
name|PyObject
modifier|*
name|value
parameter_list|,
name|PyObject
modifier|*
name|tb
parameter_list|)
block|{
name|Py_XINCREF
argument_list|(
name|type
argument_list|)
expr_stmt|;
name|Py_XINCREF
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|Py_XINCREF
argument_list|(
name|tb
argument_list|)
expr_stmt|;
comment|/* First, check the traceback argument, replacing None with NULL. */
if|if
condition|(
name|tb
operator|==
name|Py_None
condition|)
block|{
name|Py_DECREF
argument_list|(
name|tb
argument_list|)
expr_stmt|;
name|tb
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|tb
operator|!=
name|NULL
operator|&&
operator|!
name|PyTraceBack_Check
argument_list|(
name|tb
argument_list|)
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"raise: arg 3 must be a traceback or None"
argument_list|)
expr_stmt|;
goto|goto
name|raise_error
goto|;
block|}
comment|/* Next, replace a missing value with None */
if|if
condition|(
name|value
operator|==
name|NULL
condition|)
block|{
name|value
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
comment|/* Next, repeatedly, replace a tuple exception with its first item */
while|while
condition|(
name|PyTuple_Check
argument_list|(
name|type
argument_list|)
operator|&&
name|PyTuple_Size
argument_list|(
name|type
argument_list|)
operator|>
literal|0
condition|)
block|{
name|PyObject
modifier|*
name|tmp
init|=
name|type
decl_stmt|;
name|type
operator|=
name|PyTuple_GET_ITEM
argument_list|(
name|type
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|type
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|tmp
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|PyString_CheckExact
argument_list|(
name|type
argument_list|)
condition|)
block|{
comment|/* Raising builtin string is deprecated but still allowed --          * do nothing.  Raising an instance of a new-style str          * subclass is right out. */
if|if
condition|(
name|PyErr_Warn
argument_list|(
name|PyExc_DeprecationWarning
argument_list|,
literal|"raising a string exception is deprecated"
argument_list|)
condition|)
goto|goto
name|raise_error
goto|;
block|}
elseif|else
if|if
condition|(
name|PyType_Check
argument_list|(
name|type
argument_list|)
operator|||
name|PyClass_Check
argument_list|(
name|type
argument_list|)
condition|)
empty_stmt|;
comment|/* PyErr_NormalizeException(&type,&value,&tb); */
elseif|else
if|if
condition|(
name|PyInstance_Check
argument_list|(
name|type
argument_list|)
condition|)
block|{
comment|/* Raising an instance.  The value should be a dummy. */
if|if
condition|(
name|value
operator|!=
name|Py_None
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"instance exception may not have a separate value"
argument_list|)
expr_stmt|;
goto|goto
name|raise_error
goto|;
block|}
else|else
block|{
comment|/* Normalize to raise<class>,<instance> */
name|Py_DECREF
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|value
operator|=
name|type
expr_stmt|;
name|type
operator|=
operator|(
name|PyObject
operator|*
operator|)
operator|(
operator|(
name|PyInstanceObject
operator|*
operator|)
name|type
operator|)
operator|->
name|in_class
expr_stmt|;
name|Py_INCREF
argument_list|(
name|type
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|PyType_IsSubtype
argument_list|(
name|type
operator|->
name|ob_type
argument_list|,
operator|(
name|PyTypeObject
operator|*
operator|)
name|PyExc_Exception
argument_list|)
condition|)
block|{
comment|/* Raising a new-style object (in Py2.5).            The value should be a dummy. */
if|if
condition|(
name|value
operator|!=
name|Py_None
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"instance exception may not have a separate value"
argument_list|)
expr_stmt|;
goto|goto
name|raise_error
goto|;
block|}
else|else
block|{
comment|/* Normalize to raise<class>,<instance> */
name|Py_DECREF
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|value
operator|=
name|type
expr_stmt|;
name|type
operator|=
operator|(
name|PyObject
operator|*
operator|)
name|type
operator|->
name|ob_type
expr_stmt|;
name|Py_INCREF
argument_list|(
name|type
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
comment|/* Not something you can raise.  You get an exception            anyway, just not what you specified :-) */
name|PyErr_Format
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"exceptions must be classes, instances, or "
literal|"strings (deprecated), not %s"
argument_list|,
name|type
operator|->
name|ob_type
operator|->
name|tp_name
argument_list|)
expr_stmt|;
goto|goto
name|raise_error
goto|;
block|}
name|PyErr_Restore
argument_list|(
name|type
argument_list|,
name|value
argument_list|,
name|tb
argument_list|)
expr_stmt|;
return|return;
name|raise_error
label|:
name|Py_XDECREF
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|type
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|tb
argument_list|)
expr_stmt|;
return|return;
block|}
end_function
begin_function
DECL|function|__Pyx_InternStrings
specifier|static
name|int
name|__Pyx_InternStrings
parameter_list|(
name|__Pyx_InternTabEntry
modifier|*
name|t
parameter_list|)
block|{
while|while
condition|(
name|t
operator|->
name|p
condition|)
block|{
operator|*
name|t
operator|->
name|p
operator|=
name|PyString_InternFromString
argument_list|(
name|t
operator|->
name|s
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|*
name|t
operator|->
name|p
condition|)
return|return
operator|-
literal|1
return|;
operator|++
name|t
expr_stmt|;
block|}
return|return
literal|0
return|;
block|}
end_function
begin_include
include|#
directive|include
file|"compile.h"
end_include
begin_include
include|#
directive|include
file|"frameobject.h"
end_include
begin_include
include|#
directive|include
file|"traceback.h"
end_include
begin_function
DECL|function|__Pyx_AddTraceback
specifier|static
name|void
name|__Pyx_AddTraceback
parameter_list|(
name|char
modifier|*
name|funcname
parameter_list|)
block|{
name|PyObject
modifier|*
name|py_srcfile
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|py_funcname
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|py_globals
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|empty_tuple
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|empty_string
init|=
literal|0
decl_stmt|;
name|PyCodeObject
modifier|*
name|py_code
init|=
literal|0
decl_stmt|;
name|PyFrameObject
modifier|*
name|py_frame
init|=
literal|0
decl_stmt|;
name|py_srcfile
operator|=
name|PyString_FromString
argument_list|(
name|__pyx_filename
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_srcfile
condition|)
goto|goto
name|bad
goto|;
name|py_funcname
operator|=
name|PyString_FromString
argument_list|(
name|funcname
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_funcname
condition|)
goto|goto
name|bad
goto|;
name|py_globals
operator|=
name|PyModule_GetDict
argument_list|(
name|__pyx_m
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_globals
condition|)
goto|goto
name|bad
goto|;
name|empty_tuple
operator|=
name|PyTuple_New
argument_list|(
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|empty_tuple
condition|)
goto|goto
name|bad
goto|;
name|empty_string
operator|=
name|PyString_FromString
argument_list|(
literal|""
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|empty_string
condition|)
goto|goto
name|bad
goto|;
name|py_code
operator|=
name|PyCode_New
argument_list|(
literal|0
argument_list|,
comment|/*int argcount,*/
literal|0
argument_list|,
comment|/*int nlocals,*/
literal|0
argument_list|,
comment|/*int stacksize,*/
literal|0
argument_list|,
comment|/*int flags,*/
name|empty_string
argument_list|,
comment|/*PyObject *code,*/
name|empty_tuple
argument_list|,
comment|/*PyObject *consts,*/
name|empty_tuple
argument_list|,
comment|/*PyObject *names,*/
name|empty_tuple
argument_list|,
comment|/*PyObject *varnames,*/
name|empty_tuple
argument_list|,
comment|/*PyObject *freevars,*/
name|empty_tuple
argument_list|,
comment|/*PyObject *cellvars,*/
name|py_srcfile
argument_list|,
comment|/*PyObject *filename,*/
name|py_funcname
argument_list|,
comment|/*PyObject *name,*/
name|__pyx_lineno
argument_list|,
comment|/*int firstlineno,*/
name|empty_string
comment|/*PyObject *lnotab*/
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_code
condition|)
goto|goto
name|bad
goto|;
name|py_frame
operator|=
name|PyFrame_New
argument_list|(
name|PyThreadState_Get
argument_list|()
argument_list|,
comment|/*PyThreadState *tstate,*/
name|py_code
argument_list|,
comment|/*PyCodeObject *code,*/
name|py_globals
argument_list|,
comment|/*PyObject *globals,*/
literal|0
comment|/*PyObject *locals*/
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_frame
condition|)
goto|goto
name|bad
goto|;
name|py_frame
operator|->
name|f_lineno
operator|=
name|__pyx_lineno
expr_stmt|;
name|PyTraceBack_Here
argument_list|(
name|py_frame
argument_list|)
expr_stmt|;
name|bad
label|:
name|Py_XDECREF
argument_list|(
name|py_srcfile
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|py_funcname
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|empty_tuple
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|empty_string
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|py_code
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|py_frame
argument_list|)
expr_stmt|;
block|}
end_function
end_unit
