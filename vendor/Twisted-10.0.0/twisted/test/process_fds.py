begin_unit
nl|'\n'
string|'"""Write to a handful of file descriptors, to test the childFDs= argument of\nreactor.spawnProcess()\n"""'
newline|'\n'
nl|'\n'
name|'import'
name|'os'
op|','
name|'sys'
newline|'\n'
nl|'\n'
DECL|variable|debug
name|'debug'
op|'='
number|'0'
newline|'\n'
nl|'\n'
name|'if'
name|'debug'
op|':'
name|'stderr'
op|'='
name|'os'
op|'.'
name|'fdopen'
op|'('
number|'2'
op|','
string|'"w"'
op|')'
newline|'\n'
nl|'\n'
name|'if'
name|'debug'
op|':'
name|'print'
op|'>>'
name|'stderr'
op|','
string|'"this is stderr"'
newline|'\n'
nl|'\n'
DECL|variable|abcd
name|'abcd'
op|'='
name|'os'
op|'.'
name|'read'
op|'('
number|'0'
op|','
number|'4'
op|')'
newline|'\n'
name|'if'
name|'debug'
op|':'
name|'print'
op|'>>'
name|'stderr'
op|','
string|'"read(0):"'
op|','
name|'abcd'
newline|'\n'
name|'if'
name|'abcd'
op|'!='
string|'"abcd"'
op|':'
newline|'\n'
indent|'    '
name|'sys'
op|'.'
name|'exit'
op|'('
number|'1'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'debug'
op|':'
name|'print'
op|'>>'
name|'stderr'
op|','
string|'"os.write(1, righto)"'
newline|'\n'
nl|'\n'
name|'os'
op|'.'
name|'write'
op|'('
number|'1'
op|','
string|'"righto"'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|efgh
name|'efgh'
op|'='
name|'os'
op|'.'
name|'read'
op|'('
number|'3'
op|','
number|'4'
op|')'
newline|'\n'
name|'if'
name|'debug'
op|':'
name|'print'
op|'>>'
name|'stderr'
op|','
string|'"read(3):"'
op|','
name|'efgh'
newline|'\n'
name|'if'
name|'efgh'
op|'!='
string|'"efgh"'
op|':'
newline|'\n'
indent|'    '
name|'sys'
op|'.'
name|'exit'
op|'('
number|'2'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'debug'
op|':'
name|'print'
op|'>>'
name|'stderr'
op|','
string|'"os.close(4)"'
newline|'\n'
name|'os'
op|'.'
name|'close'
op|'('
number|'4'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|eof
name|'eof'
op|'='
name|'os'
op|'.'
name|'read'
op|'('
number|'5'
op|','
number|'4'
op|')'
newline|'\n'
name|'if'
name|'debug'
op|':'
name|'print'
op|'>>'
name|'stderr'
op|','
string|'"read(5):"'
op|','
name|'eof'
newline|'\n'
name|'if'
name|'eof'
op|'!='
string|'""'
op|':'
newline|'\n'
indent|'    '
name|'sys'
op|'.'
name|'exit'
op|'('
number|'3'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'debug'
op|':'
name|'print'
op|'>>'
name|'stderr'
op|','
string|'"os.write(1, closed)"'
newline|'\n'
name|'os'
op|'.'
name|'write'
op|'('
number|'1'
op|','
string|'"closed"'
op|')'
newline|'\n'
nl|'\n'
name|'if'
name|'debug'
op|':'
name|'print'
op|'>>'
name|'stderr'
op|','
string|'"sys.exit(0)"'
newline|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
number|'0'
op|')'
newline|'\n'
endmarker|''
end_unit
