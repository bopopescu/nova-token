begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'trial'
name|'import'
name|'unittest'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'roots'
newline|'\n'
name|'import'
name|'types'
newline|'\n'
nl|'\n'
DECL|class|RootsTest
name|'class'
name|'RootsTest'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|testExceptions
indent|'    '
name|'def'
name|'testExceptions'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'request'
op|'='
name|'roots'
op|'.'
name|'Request'
op|'('
op|')'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'request'
op|'.'
name|'write'
op|'('
string|'"blah"'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'NotImplementedError'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'fail'
op|'('
op|')'
newline|'\n'
dedent|''
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'request'
op|'.'
name|'finish'
op|'('
op|')'
newline|'\n'
dedent|''
name|'except'
name|'NotImplementedError'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'fail'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|testCollection
dedent|''
dedent|''
name|'def'
name|'testCollection'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'collection'
op|'='
name|'roots'
op|'.'
name|'Collection'
op|'('
op|')'
newline|'\n'
name|'collection'
op|'.'
name|'putEntity'
op|'('
string|'"x"'
op|','
string|"'test'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'failUnlessEqual'
op|'('
name|'collection'
op|'.'
name|'getStaticEntity'
op|'('
string|'"x"'
op|')'
op|','
nl|'\n'
string|"'test'"
op|')'
newline|'\n'
name|'collection'
op|'.'
name|'delEntity'
op|'('
string|'"x"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'failUnlessEqual'
op|'('
name|'collection'
op|'.'
name|'getStaticEntity'
op|'('
string|"'x'"
op|')'
op|','
nl|'\n'
name|'None'
op|')'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'collection'
op|'.'
name|'storeEntity'
op|'('
string|'"x"'
op|','
name|'None'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'NotImplementedError'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'fail'
op|'('
op|')'
newline|'\n'
dedent|''
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'collection'
op|'.'
name|'removeEntity'
op|'('
string|'"x"'
op|','
name|'None'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'NotImplementedError'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'fail'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|testConstrained
dedent|''
dedent|''
name|'def'
name|'testConstrained'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
DECL|class|const
indent|'        '
name|'class'
name|'const'
op|'('
name|'roots'
op|'.'
name|'Constrained'
op|')'
op|':'
newline|'\n'
DECL|member|nameConstraint
indent|'            '
name|'def'
name|'nameConstraint'
op|'('
name|'self'
op|','
name|'name'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'return'
op|'('
name|'name'
op|'=='
string|"'x'"
op|')'
newline|'\n'
dedent|''
dedent|''
name|'c'
op|'='
name|'const'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'failUnlessEqual'
op|'('
name|'c'
op|'.'
name|'putEntity'
op|'('
string|"'x'"
op|','
string|"'test'"
op|')'
op|','
name|'None'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'failUnlessRaises'
op|'('
name|'roots'
op|'.'
name|'ConstraintViolation'
op|','
nl|'\n'
name|'c'
op|'.'
name|'putEntity'
op|','
string|"'y'"
op|','
string|"'test'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|member|testHomogenous
dedent|''
name|'def'
name|'testHomogenous'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'h'
op|'='
name|'roots'
op|'.'
name|'Homogenous'
op|'('
op|')'
newline|'\n'
name|'h'
op|'.'
name|'entityType'
op|'='
name|'types'
op|'.'
name|'IntType'
newline|'\n'
name|'h'
op|'.'
name|'putEntity'
op|'('
string|"'a'"
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'failUnlessEqual'
op|'('
name|'h'
op|'.'
name|'getStaticEntity'
op|'('
string|"'a'"
op|')'
op|','
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'failUnlessRaises'
op|'('
name|'roots'
op|'.'
name|'ConstraintViolation'
op|','
nl|'\n'
name|'h'
op|'.'
name|'putEntity'
op|','
string|"'x'"
op|','
string|"'y'"
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
