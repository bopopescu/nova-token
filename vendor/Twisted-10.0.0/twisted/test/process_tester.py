begin_unit
string|'"""Test program for processes."""'
newline|'\n'
nl|'\n'
name|'import'
name|'sys'
op|','
name|'os'
newline|'\n'
nl|'\n'
DECL|variable|test_file_match
name|'test_file_match'
op|'='
string|'"process_test.log.*"'
newline|'\n'
DECL|variable|test_file
name|'test_file'
op|'='
string|'"process_test.log.%d"'
op|'%'
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|main
name|'def'
name|'main'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'f'
op|'='
name|'open'
op|'('
name|'test_file'
op|','
string|"'wb'"
op|')'
newline|'\n'
nl|'\n'
comment|'# stage 1'
nl|'\n'
name|'bytes'
op|'='
name|'sys'
op|'.'
name|'stdin'
op|'.'
name|'read'
op|'('
number|'4'
op|')'
newline|'\n'
name|'f'
op|'.'
name|'write'
op|'('
string|'"one: %r\\n"'
op|'%'
name|'bytes'
op|')'
newline|'\n'
comment|'# stage 2'
nl|'\n'
name|'sys'
op|'.'
name|'stdout'
op|'.'
name|'write'
op|'('
name|'bytes'
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'stdout'
op|'.'
name|'flush'
op|'('
op|')'
newline|'\n'
name|'os'
op|'.'
name|'close'
op|'('
name|'sys'
op|'.'
name|'stdout'
op|'.'
name|'fileno'
op|'('
op|')'
op|')'
newline|'\n'
nl|'\n'
comment|'# and a one, and a two, and a...'
nl|'\n'
name|'bytes'
op|'='
name|'sys'
op|'.'
name|'stdin'
op|'.'
name|'read'
op|'('
number|'4'
op|')'
newline|'\n'
name|'f'
op|'.'
name|'write'
op|'('
string|'"two: %r\\n"'
op|'%'
name|'bytes'
op|')'
newline|'\n'
nl|'\n'
comment|'# stage 3'
nl|'\n'
name|'sys'
op|'.'
name|'stderr'
op|'.'
name|'write'
op|'('
name|'bytes'
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'stderr'
op|'.'
name|'flush'
op|'('
op|')'
newline|'\n'
name|'os'
op|'.'
name|'close'
op|'('
name|'sys'
op|'.'
name|'stderr'
op|'.'
name|'fileno'
op|'('
op|')'
op|')'
newline|'\n'
nl|'\n'
comment|'# stage 4'
nl|'\n'
name|'bytes'
op|'='
name|'sys'
op|'.'
name|'stdin'
op|'.'
name|'read'
op|'('
number|'4'
op|')'
newline|'\n'
name|'f'
op|'.'
name|'write'
op|'('
string|'"three: %r\\n"'
op|'%'
name|'bytes'
op|')'
newline|'\n'
nl|'\n'
comment|'# exit with status code 23'
nl|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
number|'23'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'main'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
