begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
string|'"""Rockwell Semiconductor Zodiac Serial Protocol\nCoded from official protocol specs (Order No. GPS-25, 09/24/1996, Revision 11)\n\nMaintainer: Bob Ippolito\n\nThe following Rockwell Zodiac messages are currently understood::\n    EARTHA\\\\r\\\\n (a hack to "turn on" a DeLorme Earthmate)\n    1000 (Geodesic Position Status Output)\n    1002 (Channel Summary)\n    1003 (Visible Satellites)\n    1011 (Receiver ID)\n\nThe following Rockwell Zodiac messages require implementation::\n    None really, the others aren\'t quite so useful and require bidirectional communication w/ the device\n\nOther desired features::\n    - Compatability with the DeLorme Tripmate and other devices with this chipset (?)\n"""'
newline|'\n'
nl|'\n'
name|'import'
name|'struct'
op|','
name|'operator'
op|','
name|'math'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'protocol'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'log'
newline|'\n'
nl|'\n'
DECL|variable|DEBUG
name|'DEBUG'
op|'='
number|'1'
newline|'\n'
nl|'\n'
DECL|class|ZodiacParseError
name|'class'
name|'ZodiacParseError'
op|'('
name|'ValueError'
op|')'
op|':'
newline|'\n'
indent|'  '
name|'pass'
newline|'\n'
nl|'\n'
DECL|class|Zodiac
dedent|''
name|'class'
name|'Zodiac'
op|'('
name|'protocol'
op|'.'
name|'Protocol'
op|')'
op|':'
newline|'\n'
DECL|variable|dispatch
indent|'  '
name|'dispatch'
op|'='
op|'{'
nl|'\n'
comment|'# Output Messages (* means they get sent by the receiver by default periodically)'
nl|'\n'
number|'1000'
op|':'
string|"'fix'"
op|','
comment|'# *Geodesic Position Status Output'
nl|'\n'
number|'1001'
op|':'
string|"'ecef'"
op|','
comment|'# ECEF Position Status Output'
nl|'\n'
number|'1002'
op|':'
string|"'channels'"
op|','
comment|'# *Channel Summary'
nl|'\n'
number|'1003'
op|':'
string|"'satellites'"
op|','
comment|'# *Visible Satellites'
nl|'\n'
number|'1005'
op|':'
string|"'dgps'"
op|','
comment|'# Differential GPS Status'
nl|'\n'
number|'1007'
op|':'
string|"'channelmeas'"
op|','
comment|'# Channel Measurement'
nl|'\n'
number|'1011'
op|':'
string|"'id'"
op|','
comment|'# *Receiver ID'
nl|'\n'
number|'1012'
op|':'
string|"'usersettings'"
op|','
comment|'# User-Settings Output'
nl|'\n'
number|'1100'
op|':'
string|"'testresults'"
op|','
comment|'# Built-In Test Results'
nl|'\n'
number|'1102'
op|':'
string|"'meastimemark'"
op|','
comment|'# Measurement Time Mark'
nl|'\n'
number|'1108'
op|':'
string|"'utctimemark'"
op|','
comment|'# UTC Time Mark Pulse Output'
nl|'\n'
number|'1130'
op|':'
string|"'serial'"
op|','
comment|'# Serial Port Communication Parameters In Use'
nl|'\n'
number|'1135'
op|':'
string|"'eepromupdate'"
op|','
comment|'# EEPROM Update'
nl|'\n'
number|'1136'
op|':'
string|"'eepromstatus'"
op|','
comment|'# EEPROM Status'
nl|'\n'
op|'}'
newline|'\n'
comment|"# these aren't used for anything yet, just sitting here for reference"
nl|'\n'
DECL|variable|messages
name|'messages'
op|'='
op|'{'
nl|'\n'
comment|'# Input Messages'
nl|'\n'
string|"'fix'"
op|':'
number|'1200'
op|','
comment|'# Geodesic Position and Velocity Initialization'
nl|'\n'
string|"'udatum'"
op|':'
number|'1210'
op|','
comment|'# User-Defined Datum Definition'
nl|'\n'
string|"'mdatum'"
op|':'
number|'1211'
op|','
comment|'# Map Datum Select'
nl|'\n'
string|"'smask'"
op|':'
number|'1212'
op|','
comment|'# Satellite Elevation Mask Control'
nl|'\n'
string|"'sselect'"
op|':'
number|'1213'
op|','
comment|'# Satellite Candidate Select'
nl|'\n'
string|"'dgpsc'"
op|':'
number|'1214'
op|','
comment|'# Differential GPS Control'
nl|'\n'
string|"'startc'"
op|':'
number|'1216'
op|','
comment|'# Cold Start Control'
nl|'\n'
string|"'svalid'"
op|':'
number|'1217'
op|','
comment|'# Solution Validity Control'
nl|'\n'
string|"'antenna'"
op|':'
number|'1218'
op|','
comment|'# Antenna Type Select'
nl|'\n'
string|"'altinput'"
op|':'
number|'1219'
op|','
comment|'# User-Entered Altitude Input'
nl|'\n'
string|"'appctl'"
op|':'
number|'1220'
op|','
comment|'# Application Platform Control'
nl|'\n'
string|"'navcfg'"
op|':'
number|'1221'
op|','
comment|'# Nav Configuration'
nl|'\n'
string|"'test'"
op|':'
number|'1300'
op|','
comment|'# Perform Built-In Test Command'
nl|'\n'
string|"'restart'"
op|':'
number|'1303'
op|','
comment|'# Restart Command'
nl|'\n'
string|"'serial'"
op|':'
number|'1330'
op|','
comment|'# Serial Port Communications Parameters'
nl|'\n'
string|"'msgctl'"
op|':'
number|'1331'
op|','
comment|'# Message Protocol Control'
nl|'\n'
string|"'dgpsd'"
op|':'
number|'1351'
op|','
comment|'# Raw DGPS RTCM SC-104 Data'
nl|'\n'
op|'}'
newline|'\n'
DECL|variable|MAX_LENGTH
name|'MAX_LENGTH'
op|'='
number|'296'
newline|'\n'
DECL|variable|allow_earthmate_hack
name|'allow_earthmate_hack'
op|'='
number|'1'
newline|'\n'
DECL|variable|recvd
name|'recvd'
op|'='
string|'""'
newline|'\n'
nl|'\n'
DECL|member|dataReceived
name|'def'
name|'dataReceived'
op|'('
name|'self'
op|','
name|'recd'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'self'
op|'.'
name|'recvd'
op|'='
name|'self'
op|'.'
name|'recvd'
op|'+'
name|'recd'
newline|'\n'
name|'while'
name|'len'
op|'('
name|'self'
op|'.'
name|'recvd'
op|')'
op|'>='
number|'10'
op|':'
newline|'\n'
nl|'\n'
comment|'# hack for DeLorme EarthMate'
nl|'\n'
indent|'      '
name|'if'
name|'self'
op|'.'
name|'recvd'
op|'['
op|':'
number|'8'
op|']'
op|'=='
string|"'EARTHA\\r\\n'"
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'self'
op|'.'
name|'allow_earthmate_hack'
op|':'
newline|'\n'
indent|'          '
name|'self'
op|'.'
name|'allow_earthmate_hack'
op|'='
number|'0'
newline|'\n'
name|'self'
op|'.'
name|'transport'
op|'.'
name|'write'
op|'('
string|"'EARTHA\\r\\n'"
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'recvd'
op|'='
name|'self'
op|'.'
name|'recvd'
op|'['
number|'8'
op|':'
op|']'
newline|'\n'
name|'continue'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'self'
op|'.'
name|'recvd'
op|'['
number|'0'
op|':'
number|'2'
op|']'
op|'!='
string|"'\\xFF\\x81'"
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'DEBUG'
op|':'
newline|'\n'
indent|'          '
name|'raise'
name|'ZodiacParseError'
op|'('
string|"'Invalid Sync %r'"
op|'%'
name|'self'
op|'.'
name|'recvd'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'          '
name|'raise'
name|'ZodiacParseError'
newline|'\n'
dedent|''
dedent|''
name|'sync'
op|','
name|'msg_id'
op|','
name|'length'
op|','
name|'acknak'
op|','
name|'checksum'
op|'='
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<HHHHh'"
op|','
name|'self'
op|'.'
name|'recvd'
op|'['
op|':'
number|'10'
op|']'
op|')'
newline|'\n'
nl|'\n'
comment|'# verify checksum'
nl|'\n'
name|'cksum'
op|'='
op|'-'
op|'('
name|'reduce'
op|'('
name|'operator'
op|'.'
name|'add'
op|','
op|'('
name|'sync'
op|','
name|'msg_id'
op|','
name|'length'
op|','
name|'acknak'
op|')'
op|')'
op|'&'
number|'0xFFFF'
op|')'
newline|'\n'
name|'cksum'
op|','
op|'='
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<h'"
op|','
name|'struct'
op|'.'
name|'pack'
op|'('
string|"'<h'"
op|','
name|'cksum'
op|')'
op|')'
newline|'\n'
name|'if'
name|'cksum'
op|'!='
name|'checksum'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'DEBUG'
op|':'
newline|'\n'
indent|'          '
name|'raise'
name|'ZodiacParseError'
op|'('
string|"'Invalid Header Checksum %r != %r %r'"
op|'%'
op|'('
name|'checksum'
op|','
name|'cksum'
op|','
name|'self'
op|'.'
name|'recvd'
op|'['
op|':'
number|'8'
op|']'
op|')'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'          '
name|'raise'
name|'ZodiacParseError'
newline|'\n'
nl|'\n'
comment|"# length was in words, now it's bytes"
nl|'\n'
dedent|''
dedent|''
name|'length'
op|'='
name|'length'
op|'*'
number|'2'
newline|'\n'
nl|'\n'
comment|'# do we need more data ?'
nl|'\n'
name|'neededBytes'
op|'='
number|'10'
newline|'\n'
name|'if'
name|'length'
op|':'
newline|'\n'
indent|'        '
name|'neededBytes'
op|'+='
name|'length'
op|'+'
number|'2'
newline|'\n'
dedent|''
name|'if'
name|'len'
op|'('
name|'self'
op|'.'
name|'recvd'
op|')'
op|'<'
name|'neededBytes'
op|':'
newline|'\n'
indent|'        '
name|'break'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'neededBytes'
op|'>'
name|'self'
op|'.'
name|'MAX_LENGTH'
op|':'
newline|'\n'
indent|'        '
name|'raise'
name|'ZodiacParseError'
op|'('
string|'"Invalid Header??"'
op|')'
newline|'\n'
nl|'\n'
comment|'# empty messages pass empty strings'
nl|'\n'
dedent|''
name|'message'
op|'='
string|"''"
newline|'\n'
nl|'\n'
comment|'# does this message have data ?'
nl|'\n'
name|'if'
name|'length'
op|':'
newline|'\n'
indent|'        '
name|'message'
op|','
name|'checksum'
op|'='
name|'self'
op|'.'
name|'recvd'
op|'['
number|'10'
op|':'
number|'10'
op|'+'
name|'length'
op|']'
op|','
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<h'"
op|','
name|'self'
op|'.'
name|'recvd'
op|'['
number|'10'
op|'+'
name|'length'
op|':'
name|'neededBytes'
op|']'
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'cksum'
op|'='
number|'0x10000'
op|'-'
op|'('
name|'reduce'
op|'('
name|'operator'
op|'.'
name|'add'
op|','
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<%dH'"
op|'%'
op|'('
name|'length'
op|'/'
number|'2'
op|')'
op|','
name|'message'
op|')'
op|')'
op|'&'
number|'0xFFFF'
op|')'
newline|'\n'
name|'cksum'
op|','
op|'='
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<h'"
op|','
name|'struct'
op|'.'
name|'pack'
op|'('
string|"'<h'"
op|','
name|'cksum'
op|')'
op|')'
newline|'\n'
name|'if'
name|'cksum'
op|'!='
name|'checksum'
op|':'
newline|'\n'
indent|'          '
name|'if'
name|'DEBUG'
op|':'
newline|'\n'
indent|'            '
name|'log'
op|'.'
name|'dmsg'
op|'('
string|"'msg_id = %r length = %r'"
op|'%'
op|'('
name|'msg_id'
op|','
name|'length'
op|')'
op|','
name|'debug'
op|'='
name|'True'
op|')'
newline|'\n'
name|'raise'
name|'ZodiacParseError'
op|'('
string|"'Invalid Data Checksum %r != %r %r'"
op|'%'
op|'('
name|'checksum'
op|','
name|'cksum'
op|','
name|'message'
op|')'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'ZodiacParseError'
newline|'\n'
nl|'\n'
comment|'# discard used buffer, dispatch message'
nl|'\n'
dedent|''
dedent|''
dedent|''
name|'self'
op|'.'
name|'recvd'
op|'='
name|'self'
op|'.'
name|'recvd'
op|'['
name|'neededBytes'
op|':'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'receivedMessage'
op|'('
name|'msg_id'
op|','
name|'message'
op|','
name|'acknak'
op|')'
newline|'\n'
nl|'\n'
DECL|member|receivedMessage
dedent|''
dedent|''
name|'def'
name|'receivedMessage'
op|'('
name|'self'
op|','
name|'msg_id'
op|','
name|'message'
op|','
name|'acknak'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'dispatch'
op|'='
name|'self'
op|'.'
name|'dispatch'
op|'.'
name|'get'
op|'('
name|'msg_id'
op|','
name|'None'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'dispatch'
op|':'
newline|'\n'
indent|'      '
name|'raise'
name|'ZodiacParseError'
op|'('
string|"'Unknown msg_id = %r'"
op|'%'
name|'msg_id'
op|')'
newline|'\n'
dedent|''
name|'handler'
op|'='
name|'getattr'
op|'('
name|'self'
op|','
string|"'handle_%s'"
op|'%'
name|'dispatch'
op|','
name|'None'
op|')'
newline|'\n'
name|'decoder'
op|'='
name|'getattr'
op|'('
name|'self'
op|','
string|"'decode_%s'"
op|'%'
name|'dispatch'
op|','
name|'None'
op|')'
newline|'\n'
name|'if'
name|'not'
op|'('
name|'handler'
name|'and'
name|'decoder'
op|')'
op|':'
newline|'\n'
comment|'# missing handler or decoder'
nl|'\n'
comment|'#if DEBUG:'
nl|'\n'
comment|"#  log.msg('MISSING HANDLER/DECODER PAIR FOR: %r' % (dispatch,), debug=True)"
nl|'\n'
indent|'      '
name|'return'
newline|'\n'
dedent|''
name|'decoded'
op|'='
name|'decoder'
op|'('
name|'message'
op|')'
newline|'\n'
name|'return'
name|'handler'
op|'('
op|'*'
name|'decoded'
op|')'
newline|'\n'
nl|'\n'
DECL|member|decode_fix
dedent|''
name|'def'
name|'decode_fix'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'98'
op|','
string|'"Geodesic Position Status Output should be 55 words total (98 byte message)"'
newline|'\n'
op|'('
name|'ticks'
op|','
name|'msgseq'
op|','
name|'satseq'
op|','
name|'navstatus'
op|','
name|'navtype'
op|','
name|'nmeasure'
op|','
name|'polar'
op|','
name|'gpswk'
op|','
name|'gpses'
op|','
name|'gpsns'
op|','
name|'utcdy'
op|','
name|'utcmo'
op|','
name|'utcyr'
op|','
name|'utchr'
op|','
name|'utcmn'
op|','
name|'utcsc'
op|','
name|'utcns'
op|','
name|'latitude'
op|','
name|'longitude'
op|','
name|'height'
op|','
name|'geoidalsep'
op|','
name|'speed'
op|','
name|'course'
op|','
name|'magvar'
op|','
name|'climb'
op|','
name|'mapdatum'
op|','
name|'exhposerr'
op|','
name|'exvposerr'
op|','
name|'extimeerr'
op|','
name|'exphvelerr'
op|','
name|'clkbias'
op|','
name|'clkbiasdev'
op|','
name|'clkdrift'
op|','
name|'clkdriftdev'
op|')'
op|'='
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<LhhHHHHHLLHHHHHHLlllhLHhhHLLLHllll'"
op|','
name|'message'
op|')'
newline|'\n'
nl|'\n'
comment|"# there's a lot of shit in here.. "
nl|'\n'
comment|"# I'll just snag the important stuff and spit it out like my NMEA decoder"
nl|'\n'
name|'utc'
op|'='
op|'('
name|'utchr'
op|'*'
number|'3600.0'
op|')'
op|'+'
op|'('
name|'utcmn'
op|'*'
number|'60.0'
op|')'
op|'+'
name|'utcsc'
op|'+'
op|'('
name|'float'
op|'('
name|'utcns'
op|')'
op|'*'
number|'0.000000001'
op|')'
newline|'\n'
nl|'\n'
name|'log'
op|'.'
name|'msg'
op|'('
string|"'utchr, utcmn, utcsc, utcns = '"
op|'+'
name|'repr'
op|'('
op|'('
name|'utchr'
op|','
name|'utcmn'
op|','
name|'utcsc'
op|','
name|'utcns'
op|')'
op|')'
op|','
name|'debug'
op|'='
name|'True'
op|')'
newline|'\n'
nl|'\n'
name|'latitude'
op|'='
name|'float'
op|'('
name|'latitude'
op|')'
op|'*'
number|'0.00000180'
op|'/'
name|'math'
op|'.'
name|'pi'
newline|'\n'
name|'longitude'
op|'='
name|'float'
op|'('
name|'longitude'
op|')'
op|'*'
number|'0.00000180'
op|'/'
name|'math'
op|'.'
name|'pi'
newline|'\n'
name|'posfix'
op|'='
name|'not'
op|'('
name|'navstatus'
op|'&'
number|'0x001c'
op|')'
newline|'\n'
name|'satellites'
op|'='
name|'nmeasure'
newline|'\n'
name|'hdop'
op|'='
name|'float'
op|'('
name|'exhposerr'
op|')'
op|'*'
number|'0.01'
newline|'\n'
name|'altitude'
op|'='
name|'float'
op|'('
name|'height'
op|')'
op|'*'
number|'0.01'
op|','
string|"'M'"
newline|'\n'
name|'geoid'
op|'='
name|'float'
op|'('
name|'geoidalsep'
op|')'
op|'*'
number|'0.01'
op|','
string|"'M'"
newline|'\n'
name|'dgps'
op|'='
name|'None'
newline|'\n'
name|'return'
op|'('
nl|'\n'
comment|'# seconds since 00:00 UTC'
nl|'\n'
name|'utc'
op|','
nl|'\n'
comment|'# latitude (degrees)'
nl|'\n'
name|'latitude'
op|','
nl|'\n'
comment|'# longitude (degrees)'
nl|'\n'
name|'longitude'
op|','
nl|'\n'
comment|'# position fix status (invalid = False, valid = True)'
nl|'\n'
name|'posfix'
op|','
nl|'\n'
comment|'# number of satellites [measurements] used for fix 0 <= satellites <= 12 '
nl|'\n'
name|'satellites'
op|','
nl|'\n'
comment|'# horizontal dilution of precision'
nl|'\n'
name|'hdop'
op|','
nl|'\n'
comment|"# (altitude according to WGS-84 ellipsoid, units (always 'M' for meters)) "
nl|'\n'
name|'altitude'
op|','
nl|'\n'
comment|"# (geoid separation according to WGS-84 ellipsoid, units (always 'M' for meters))"
nl|'\n'
name|'geoid'
op|','
nl|'\n'
comment|'# None, for compatability w/ NMEA code'
nl|'\n'
name|'dgps'
op|','
nl|'\n'
op|')'
newline|'\n'
nl|'\n'
DECL|member|decode_id
dedent|''
name|'def'
name|'decode_id'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'106'
op|','
string|'"Receiver ID Message should be 59 words total (106 byte message)"'
newline|'\n'
name|'ticks'
op|','
name|'msgseq'
op|','
name|'channels'
op|','
name|'software_version'
op|','
name|'software_date'
op|','
name|'options_list'
op|','
name|'reserved'
op|'='
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<Lh20s20s20s20s20s'"
op|','
name|'message'
op|')'
newline|'\n'
name|'channels'
op|','
name|'software_version'
op|','
name|'software_date'
op|','
name|'options_list'
op|'='
name|'map'
op|'('
name|'lambda'
name|'s'
op|':'
name|'s'
op|'.'
name|'split'
op|'('
string|"'\\0'"
op|')'
op|'['
number|'0'
op|']'
op|','
op|'('
name|'channels'
op|','
name|'software_version'
op|','
name|'software_date'
op|','
name|'options_list'
op|')'
op|')'
newline|'\n'
name|'software_version'
op|'='
name|'float'
op|'('
name|'software_version'
op|')'
newline|'\n'
name|'channels'
op|'='
name|'int'
op|'('
name|'channels'
op|')'
comment|'# 0-12 .. but ALWAYS 12, so we ignore.'
newline|'\n'
name|'options_list'
op|'='
name|'int'
op|'('
name|'options_list'
op|'['
op|':'
number|'4'
op|']'
op|','
number|'16'
op|')'
comment|'# only two bitflags, others are reserved'
newline|'\n'
name|'minimize_rom'
op|'='
op|'('
name|'options_list'
op|'&'
number|'0x01'
op|')'
op|'>'
number|'0'
newline|'\n'
name|'minimize_ram'
op|'='
op|'('
name|'options_list'
op|'&'
number|'0x02'
op|')'
op|'>'
number|'0'
newline|'\n'
comment|'# (version info), (options info)'
nl|'\n'
name|'return'
op|'('
op|'('
name|'software_version'
op|','
name|'software_date'
op|')'
op|','
op|'('
name|'minimize_rom'
op|','
name|'minimize_ram'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|decode_channels
dedent|''
name|'def'
name|'decode_channels'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'90'
op|','
string|'"Channel Summary Message should be 51 words total (90 byte message)"'
newline|'\n'
name|'ticks'
op|','
name|'msgseq'
op|','
name|'satseq'
op|','
name|'gpswk'
op|','
name|'gpsws'
op|','
name|'gpsns'
op|'='
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<LhhHLL'"
op|','
name|'message'
op|'['
op|':'
number|'18'
op|']'
op|')'
newline|'\n'
name|'channels'
op|'='
op|'['
op|']'
newline|'\n'
name|'message'
op|'='
name|'message'
op|'['
number|'18'
op|':'
op|']'
newline|'\n'
name|'for'
name|'i'
name|'in'
name|'range'
op|'('
number|'12'
op|')'
op|':'
newline|'\n'
indent|'      '
name|'flags'
op|','
name|'prn'
op|','
name|'cno'
op|'='
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<HHH'"
op|','
name|'message'
op|'['
number|'6'
op|'*'
name|'i'
op|':'
number|'6'
op|'*'
op|'('
name|'i'
op|'+'
number|'1'
op|')'
op|']'
op|')'
newline|'\n'
comment|'# measurement used, ephemeris available, measurement valid, dgps corrections available'
nl|'\n'
name|'flags'
op|'='
op|'('
name|'flags'
op|'&'
number|'0x01'
op|','
name|'flags'
op|'&'
number|'0x02'
op|','
name|'flags'
op|'&'
number|'0x04'
op|','
name|'flags'
op|'&'
number|'0x08'
op|')'
newline|'\n'
name|'channels'
op|'.'
name|'append'
op|'('
op|'('
name|'flags'
op|','
name|'prn'
op|','
name|'cno'
op|')'
op|')'
newline|'\n'
comment|'# ((flags, satellite PRN, C/No in dbHz)) for 12 channels'
nl|'\n'
comment|'# satellite message sequence number'
nl|'\n'
comment|'# gps week number, gps seconds in week (??), gps nanoseconds from Epoch'
nl|'\n'
dedent|''
name|'return'
op|'('
name|'tuple'
op|'('
name|'channels'
op|')'
op|','
op|')'
comment|'#, satseq, (gpswk, gpsws, gpsns))'
newline|'\n'
nl|'\n'
DECL|member|decode_satellites
dedent|''
name|'def'
name|'decode_satellites'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'90'
op|','
string|'"Visible Satellites Message should be 51 words total (90 byte message)"'
newline|'\n'
name|'ticks'
op|','
name|'msgseq'
op|','
name|'gdop'
op|','
name|'pdop'
op|','
name|'hdop'
op|','
name|'vdop'
op|','
name|'tdop'
op|','
name|'numsatellites'
op|'='
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<LhhhhhhH'"
op|','
name|'message'
op|'['
op|':'
number|'18'
op|']'
op|')'
newline|'\n'
name|'gdop'
op|','
name|'pdop'
op|','
name|'hdop'
op|','
name|'vdop'
op|','
name|'tdop'
op|'='
name|'map'
op|'('
name|'lambda'
name|'n'
op|':'
name|'float'
op|'('
name|'n'
op|')'
op|'*'
number|'0.01'
op|','
op|'('
name|'gdop'
op|','
name|'pdop'
op|','
name|'hdop'
op|','
name|'vdop'
op|','
name|'tdop'
op|')'
op|')'
newline|'\n'
name|'satellites'
op|'='
op|'['
op|']'
newline|'\n'
name|'message'
op|'='
name|'message'
op|'['
number|'18'
op|':'
op|']'
newline|'\n'
name|'for'
name|'i'
name|'in'
name|'range'
op|'('
name|'numsatellites'
op|')'
op|':'
newline|'\n'
indent|'      '
name|'prn'
op|','
name|'azi'
op|','
name|'elev'
op|'='
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'<Hhh'"
op|','
name|'message'
op|'['
number|'6'
op|'*'
name|'i'
op|':'
number|'6'
op|'*'
op|'('
name|'i'
op|'+'
number|'1'
op|')'
op|']'
op|')'
newline|'\n'
name|'azi'
op|','
name|'elev'
op|'='
name|'map'
op|'('
name|'lambda'
name|'n'
op|':'
op|'('
name|'float'
op|'('
name|'n'
op|')'
op|'*'
number|'0.0180'
op|'/'
name|'math'
op|'.'
name|'pi'
op|')'
op|','
op|'('
name|'azi'
op|','
name|'elev'
op|')'
op|')'
newline|'\n'
name|'satellites'
op|'.'
name|'push'
op|'('
op|'('
name|'prn'
op|','
name|'azi'
op|','
name|'elev'
op|')'
op|')'
newline|'\n'
comment|'# ((PRN [0, 32], azimuth +=[0.0, 180.0] deg, elevation +-[0.0, 90.0] deg)) satellite info (0-12)'
nl|'\n'
comment|'# (geometric, position, horizontal, vertical, time) dilution of precision '
nl|'\n'
dedent|''
name|'return'
op|'('
name|'tuple'
op|'('
name|'satellites'
op|')'
op|','
op|'('
name|'gdop'
op|','
name|'pdop'
op|','
name|'hdop'
op|','
name|'vdop'
op|','
name|'tdop'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|decode_dgps
dedent|''
name|'def'
name|'decode_dgps'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'38'
op|','
string|'"Differential GPS Status Message should be 25 words total (38 byte message)"'
newline|'\n'
name|'raise'
name|'NotImplementedError'
newline|'\n'
nl|'\n'
DECL|member|decode_ecef
dedent|''
name|'def'
name|'decode_ecef'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'96'
op|','
string|'"ECEF Position Status Output Message should be 54 words total (96 byte message)"'
newline|'\n'
name|'raise'
name|'NotImplementedError'
newline|'\n'
nl|'\n'
DECL|member|decode_channelmeas
dedent|''
name|'def'
name|'decode_channelmeas'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'296'
op|','
string|'"Channel Measurement Message should be 154 words total (296 byte message)"'
newline|'\n'
name|'raise'
name|'NotImplementedError'
newline|'\n'
nl|'\n'
DECL|member|decode_usersettings
dedent|''
name|'def'
name|'decode_usersettings'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'32'
op|','
string|'"User-Settings Output Message should be 22 words total (32 byte message)"'
newline|'\n'
name|'raise'
name|'NotImplementedError'
newline|'\n'
nl|'\n'
DECL|member|decode_testresults
dedent|''
name|'def'
name|'decode_testresults'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'28'
op|','
string|'"Built-In Test Results Message should be 20 words total (28 byte message)"'
newline|'\n'
name|'raise'
name|'NotImplementedError'
newline|'\n'
nl|'\n'
DECL|member|decode_meastimemark
dedent|''
name|'def'
name|'decode_meastimemark'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'494'
op|','
string|'"Measurement Time Mark Message should be 253 words total (494 byte message)"'
newline|'\n'
name|'raise'
name|'NotImplementedError'
newline|'\n'
nl|'\n'
DECL|member|decode_utctimemark
dedent|''
name|'def'
name|'decode_utctimemark'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'28'
op|','
string|'"UTC Time Mark Pulse Output Message should be 20 words total (28 byte message)"'
newline|'\n'
name|'raise'
name|'NotImplementedError'
newline|'\n'
nl|'\n'
DECL|member|decode_serial
dedent|''
name|'def'
name|'decode_serial'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'30'
op|','
string|'"Serial Port Communication Paramaters In Use Message should be 21 words total (30 byte message)"'
newline|'\n'
name|'raise'
name|'NotImplementedError'
newline|'\n'
nl|'\n'
DECL|member|decode_eepromupdate
dedent|''
name|'def'
name|'decode_eepromupdate'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'8'
op|','
string|'"EEPROM Update Message should be 10 words total (8 byte message)"'
newline|'\n'
name|'raise'
name|'NotImplementedError'
newline|'\n'
nl|'\n'
DECL|member|decode_eepromstatus
dedent|''
name|'def'
name|'decode_eepromstatus'
op|'('
name|'self'
op|','
name|'message'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'assert'
name|'len'
op|'('
name|'message'
op|')'
op|'=='
number|'24'
op|','
string|'"EEPROM Status Message should be 18 words total (24 byte message)"'
newline|'\n'
name|'raise'
name|'NotImplementedError'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
