begin_unit
string|'"""Post-install GUI to compile to pyc and unpack twisted doco"""'
newline|'\n'
nl|'\n'
name|'from'
name|'__future__'
name|'import'
name|'generators'
newline|'\n'
nl|'\n'
name|'import'
name|'sys'
newline|'\n'
name|'import'
name|'zipfile'
newline|'\n'
name|'import'
name|'py_compile'
newline|'\n'
nl|'\n'
comment|"# we're going to ignore failures to import tkinter and fall back"
nl|'\n'
comment|'# to using the console if the required dll is not found'
nl|'\n'
nl|'\n'
comment|'# Scary kludge to work around tk84.dll bug: '
nl|'\n'
comment|'# https://sourceforge.net/tracker/index.php?func=detail&aid=814654&group_id=5470&atid=105470'
nl|'\n'
comment|'# Without which(): you get a windows missing-dll popup message'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
op|'.'
name|'procutils'
name|'import'
name|'which'
newline|'\n'
DECL|variable|tkdll
name|'tkdll'
op|'='
string|"'tk84.dll'"
newline|'\n'
name|'if'
name|'which'
op|'('
name|'tkdll'
op|')'
name|'or'
name|'which'
op|'('
string|"'DLLs/%s'"
op|'%'
name|'tkdll'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'try'
op|':'
newline|'\n'
indent|'        '
name|'import'
name|'Tkinter'
newline|'\n'
name|'from'
name|'Tkinter'
name|'import'
op|'*'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'tksupport'
newline|'\n'
dedent|''
name|'except'
name|'ImportError'
op|':'
newline|'\n'
indent|'        '
name|'pass'
newline|'\n'
nl|'\n'
comment|'# twisted'
nl|'\n'
dedent|''
dedent|''
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
op|','
name|'defer'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'failure'
op|','
name|'log'
op|','
name|'zipstream'
op|','
name|'util'
op|','
name|'usage'
op|','
name|'log'
newline|'\n'
comment|'# local'
nl|'\n'
name|'import'
name|'os'
op|'.'
name|'path'
newline|'\n'
nl|'\n'
DECL|class|ProgressBar
name|'class'
name|'ProgressBar'
op|':'
newline|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'master'
op|'='
name|'None'
op|','
name|'orientation'
op|'='
string|'"horizontal"'
op|','
nl|'\n'
name|'min'
op|'='
number|'0'
op|','
name|'max'
op|'='
number|'100'
op|','
name|'width'
op|'='
number|'100'
op|','
name|'height'
op|'='
number|'18'
op|','
nl|'\n'
name|'doLabel'
op|'='
number|'1'
op|','
name|'appearance'
op|'='
string|'"sunken"'
op|','
nl|'\n'
name|'fillColor'
op|'='
string|'"blue"'
op|','
name|'background'
op|'='
string|'"gray"'
op|','
nl|'\n'
name|'labelColor'
op|'='
string|'"yellow"'
op|','
name|'labelFont'
op|'='
string|'"Arial"'
op|','
nl|'\n'
name|'labelText'
op|'='
string|'""'
op|','
name|'labelFormat'
op|'='
string|'"%d%%"'
op|','
nl|'\n'
name|'value'
op|'='
number|'0'
op|','
name|'bd'
op|'='
number|'2'
op|')'
op|':'
newline|'\n'
comment|'# preserve various values'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'master'
op|'='
name|'master'
newline|'\n'
name|'self'
op|'.'
name|'orientation'
op|'='
name|'orientation'
newline|'\n'
name|'self'
op|'.'
name|'min'
op|'='
name|'min'
newline|'\n'
name|'self'
op|'.'
name|'max'
op|'='
name|'max'
newline|'\n'
name|'self'
op|'.'
name|'width'
op|'='
name|'width'
newline|'\n'
name|'self'
op|'.'
name|'height'
op|'='
name|'height'
newline|'\n'
name|'self'
op|'.'
name|'doLabel'
op|'='
name|'doLabel'
newline|'\n'
name|'self'
op|'.'
name|'fillColor'
op|'='
name|'fillColor'
newline|'\n'
name|'self'
op|'.'
name|'labelFont'
op|'='
name|'labelFont'
newline|'\n'
name|'self'
op|'.'
name|'labelColor'
op|'='
name|'labelColor'
newline|'\n'
name|'self'
op|'.'
name|'background'
op|'='
name|'background'
newline|'\n'
name|'self'
op|'.'
name|'labelText'
op|'='
name|'labelText'
newline|'\n'
name|'self'
op|'.'
name|'labelFormat'
op|'='
name|'labelFormat'
newline|'\n'
name|'self'
op|'.'
name|'value'
op|'='
name|'value'
newline|'\n'
name|'self'
op|'.'
name|'frame'
op|'='
name|'Frame'
op|'('
name|'master'
op|','
name|'relief'
op|'='
name|'appearance'
op|','
name|'bd'
op|'='
name|'bd'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'canvas'
op|'='
name|'Canvas'
op|'('
name|'self'
op|'.'
name|'frame'
op|','
name|'height'
op|'='
name|'height'
op|','
name|'width'
op|'='
name|'width'
op|','
name|'bd'
op|'='
number|'0'
op|','
nl|'\n'
name|'highlightthickness'
op|'='
number|'0'
op|','
name|'background'
op|'='
name|'background'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'scale'
op|'='
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'create_rectangle'
op|'('
number|'0'
op|','
number|'0'
op|','
name|'width'
op|','
name|'height'
op|','
nl|'\n'
name|'fill'
op|'='
name|'fillColor'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'label'
op|'='
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'create_text'
op|'('
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'winfo_reqwidth'
op|'('
op|')'
op|'/'
number|'2'
op|','
nl|'\n'
name|'height'
op|'/'
number|'2'
op|','
name|'text'
op|'='
name|'labelText'
op|','
nl|'\n'
name|'anchor'
op|'='
string|'"c"'
op|','
name|'fill'
op|'='
name|'labelColor'
op|','
nl|'\n'
name|'font'
op|'='
name|'self'
op|'.'
name|'labelFont'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'update'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'pack'
op|'('
name|'side'
op|'='
string|"'top'"
op|','
name|'fill'
op|'='
string|"'x'"
op|','
name|'expand'
op|'='
string|"'no'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|pack
dedent|''
name|'def'
name|'pack'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'frame'
op|'.'
name|'pack'
op|'('
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
newline|'\n'
nl|'\n'
DECL|member|updateProgress
dedent|''
name|'def'
name|'updateProgress'
op|'('
name|'self'
op|','
name|'newValue'
op|','
name|'newMax'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'newMax'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'max'
op|'='
name|'newMax'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'value'
op|'='
name|'newValue'
newline|'\n'
name|'self'
op|'.'
name|'update'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|update
dedent|''
name|'def'
name|'update'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
comment|'# Trim the values to be between min and max'
nl|'\n'
indent|'        '
name|'value'
op|'='
name|'self'
op|'.'
name|'value'
newline|'\n'
name|'if'
name|'value'
op|'>'
name|'self'
op|'.'
name|'max'
op|':'
newline|'\n'
indent|'            '
name|'value'
op|'='
name|'self'
op|'.'
name|'max'
newline|'\n'
dedent|''
name|'if'
name|'value'
op|'<'
name|'self'
op|'.'
name|'min'
op|':'
newline|'\n'
indent|'            '
name|'value'
op|'='
name|'self'
op|'.'
name|'min'
newline|'\n'
comment|'# Adjust the rectangle'
nl|'\n'
dedent|''
name|'if'
name|'self'
op|'.'
name|'orientation'
op|'=='
string|'"horizontal"'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'coords'
op|'('
name|'self'
op|'.'
name|'scale'
op|','
number|'0'
op|','
number|'0'
op|','
nl|'\n'
name|'float'
op|'('
name|'value'
op|')'
op|'/'
name|'self'
op|'.'
name|'max'
op|'*'
name|'self'
op|'.'
name|'width'
op|','
name|'self'
op|'.'
name|'height'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'coords'
op|'('
name|'self'
op|'.'
name|'scale'
op|','
number|'0'
op|','
nl|'\n'
name|'self'
op|'.'
name|'height'
op|'-'
op|'('
name|'float'
op|'('
name|'value'
op|')'
op|'/'
nl|'\n'
name|'self'
op|'.'
name|'max'
op|'*'
name|'self'
op|'.'
name|'height'
op|')'
op|','
nl|'\n'
name|'self'
op|'.'
name|'width'
op|','
name|'self'
op|'.'
name|'height'
op|')'
newline|'\n'
comment|'# Now update the colors'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'itemconfig'
op|'('
name|'self'
op|'.'
name|'scale'
op|','
name|'fill'
op|'='
name|'self'
op|'.'
name|'fillColor'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'itemconfig'
op|'('
name|'self'
op|'.'
name|'label'
op|','
name|'fill'
op|'='
name|'self'
op|'.'
name|'labelColor'
op|')'
newline|'\n'
comment|'# And update the label'
nl|'\n'
name|'if'
name|'self'
op|'.'
name|'doLabel'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'value'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'value'
op|'>='
number|'0'
op|':'
newline|'\n'
indent|'                    '
name|'pvalue'
op|'='
name|'int'
op|'('
op|'('
name|'float'
op|'('
name|'value'
op|')'
op|'/'
name|'float'
op|'('
name|'self'
op|'.'
name|'max'
op|')'
op|')'
op|'*'
nl|'\n'
number|'100.0'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                    '
name|'pvalue'
op|'='
number|'0'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'itemconfig'
op|'('
name|'self'
op|'.'
name|'label'
op|','
name|'text'
op|'='
name|'self'
op|'.'
name|'labelFormat'
nl|'\n'
op|'%'
name|'pvalue'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'itemconfig'
op|'('
name|'self'
op|'.'
name|'label'
op|','
name|'text'
op|'='
string|"''"
op|')'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'itemconfig'
op|'('
name|'self'
op|'.'
name|'label'
op|','
name|'text'
op|'='
name|'self'
op|'.'
name|'labelFormat'
op|'%'
nl|'\n'
name|'self'
op|'.'
name|'labelText'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'canvas'
op|'.'
name|'update_idletasks'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Progressor
dedent|''
dedent|''
name|'class'
name|'Progressor'
op|':'
newline|'\n'
indent|'    '
string|'"""A base class to make it simple to hook a progress bar up to a process.\n    """'
newline|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'title'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'kwargs'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'title'
op|'='
name|'title'
newline|'\n'
name|'self'
op|'.'
name|'stopping'
op|'='
number|'0'
newline|'\n'
name|'self'
op|'.'
name|'bar'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'iterator'
op|'='
name|'None'
newline|'\n'
name|'self'
op|'.'
name|'remaining'
op|'='
number|'1000'
newline|'\n'
nl|'\n'
DECL|member|setBar
dedent|''
name|'def'
name|'setBar'
op|'('
name|'self'
op|','
name|'bar'
op|','
name|'max'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'bar'
op|'='
name|'bar'
newline|'\n'
name|'bar'
op|'.'
name|'updateProgress'
op|'('
number|'0'
op|','
name|'max'
op|')'
newline|'\n'
name|'return'
name|'self'
newline|'\n'
nl|'\n'
DECL|member|setIterator
dedent|''
name|'def'
name|'setIterator'
op|'('
name|'self'
op|','
name|'iterator'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'iterator'
op|'='
name|'iterator'
newline|'\n'
name|'return'
name|'self'
newline|'\n'
nl|'\n'
DECL|member|updateBar
dedent|''
name|'def'
name|'updateBar'
op|'('
name|'self'
op|','
name|'deferred'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'b'
op|'='
name|'self'
op|'.'
name|'bar'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'b'
op|'.'
name|'updateProgress'
op|'('
name|'b'
op|'.'
name|'max'
op|'-'
name|'self'
op|'.'
name|'remaining'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'TclError'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'stopping'
op|'='
number|'1'
newline|'\n'
dedent|''
name|'except'
op|':'
newline|'\n'
indent|'            '
name|'deferred'
op|'.'
name|'errback'
op|'('
name|'failure'
op|'.'
name|'Failure'
op|'('
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|processAll
dedent|''
dedent|''
name|'def'
name|'processAll'
op|'('
name|'self'
op|','
name|'root'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'assert'
name|'self'
op|'.'
name|'bar'
name|'and'
name|'self'
op|'.'
name|'iterator'
op|','
string|'"must setBar and setIterator"'
newline|'\n'
name|'self'
op|'.'
name|'root'
op|'='
name|'root'
newline|'\n'
name|'root'
op|'.'
name|'title'
op|'('
name|'self'
op|'.'
name|'title'
op|')'
newline|'\n'
name|'d'
op|'='
name|'defer'
op|'.'
name|'Deferred'
op|'('
op|')'
newline|'\n'
name|'d'
op|'.'
name|'addErrback'
op|'('
name|'log'
op|'.'
name|'err'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'callLater'
op|'('
number|'0.1'
op|','
name|'self'
op|'.'
name|'processOne'
op|','
name|'d'
op|')'
newline|'\n'
name|'return'
name|'d'
newline|'\n'
nl|'\n'
DECL|member|processOne
dedent|''
name|'def'
name|'processOne'
op|'('
name|'self'
op|','
name|'deferred'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'self'
op|'.'
name|'stopping'
op|':'
newline|'\n'
indent|'            '
name|'deferred'
op|'.'
name|'callback'
op|'('
name|'self'
op|'.'
name|'root'
op|')'
newline|'\n'
name|'return'
newline|'\n'
nl|'\n'
dedent|''
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'remaining'
op|'='
name|'self'
op|'.'
name|'iterator'
op|'.'
name|'next'
op|'('
op|')'
newline|'\n'
dedent|''
name|'except'
name|'StopIteration'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'stopping'
op|'='
number|'1'
newline|'\n'
dedent|''
name|'except'
op|':'
newline|'\n'
indent|'            '
name|'deferred'
op|'.'
name|'errback'
op|'('
name|'failure'
op|'.'
name|'Failure'
op|'('
op|')'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'self'
op|'.'
name|'remaining'
op|'%'
number|'10'
op|'=='
number|'0'
op|':'
newline|'\n'
indent|'            '
name|'reactor'
op|'.'
name|'callLater'
op|'('
number|'0'
op|','
name|'self'
op|'.'
name|'updateBar'
op|','
name|'deferred'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'self'
op|'.'
name|'remaining'
op|'%'
number|'100'
op|'=='
number|'0'
op|':'
newline|'\n'
indent|'            '
name|'log'
op|'.'
name|'msg'
op|'('
name|'self'
op|'.'
name|'remaining'
op|')'
newline|'\n'
dedent|''
name|'reactor'
op|'.'
name|'callLater'
op|'('
number|'0'
op|','
name|'self'
op|'.'
name|'processOne'
op|','
name|'deferred'
op|')'
newline|'\n'
nl|'\n'
DECL|function|compiler
dedent|''
dedent|''
name|'def'
name|'compiler'
op|'('
name|'path'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""A generator for compiling files to .pyc"""'
newline|'\n'
DECL|function|justlist
name|'def'
name|'justlist'
op|'('
name|'arg'
op|','
name|'directory'
op|','
name|'names'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'pynames'
op|'='
op|'['
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'directory'
op|','
name|'n'
op|')'
name|'for'
name|'n'
name|'in'
name|'names'
nl|'\n'
name|'if'
name|'n'
op|'.'
name|'endswith'
op|'('
string|"'.py'"
op|')'
op|']'
newline|'\n'
name|'arg'
op|'.'
name|'extend'
op|'('
name|'pynames'
op|')'
newline|'\n'
dedent|''
name|'all'
op|'='
op|'['
op|']'
newline|'\n'
name|'os'
op|'.'
name|'path'
op|'.'
name|'walk'
op|'('
name|'path'
op|','
name|'justlist'
op|','
name|'all'
op|')'
newline|'\n'
nl|'\n'
name|'remaining'
op|'='
name|'len'
op|'('
name|'all'
op|')'
newline|'\n'
name|'i'
op|'='
name|'zip'
op|'('
name|'all'
op|','
name|'range'
op|'('
name|'remaining'
op|'-'
number|'1'
op|','
op|'-'
number|'1'
op|','
op|'-'
number|'1'
op|')'
op|')'
newline|'\n'
name|'for'
name|'f'
op|','
name|'remaining'
name|'in'
name|'i'
op|':'
newline|'\n'
indent|'        '
name|'py_compile'
op|'.'
name|'compile'
op|'('
name|'f'
op|')'
newline|'\n'
name|'yield'
name|'remaining'
newline|'\n'
nl|'\n'
DECL|class|TkunzipOptions
dedent|''
dedent|''
name|'class'
name|'TkunzipOptions'
op|'('
name|'usage'
op|'.'
name|'Options'
op|')'
op|':'
newline|'\n'
DECL|variable|optParameters
indent|'    '
name|'optParameters'
op|'='
op|'['
op|'['
string|'"zipfile"'
op|','
string|'"z"'
op|','
string|'""'
op|','
string|'"a zipfile"'
op|']'
op|','
nl|'\n'
op|'['
string|'"ziptargetdir"'
op|','
string|'"t"'
op|','
string|'"."'
op|','
string|'"where to extract zipfile"'
op|']'
op|','
nl|'\n'
op|'['
string|'"compiledir"'
op|','
string|'"c"'
op|','
string|'""'
op|','
string|'"a directory to compile"'
op|']'
op|','
nl|'\n'
op|']'
newline|'\n'
DECL|variable|optFlags
name|'optFlags'
op|'='
op|'['
op|'['
string|'"use-console"'
op|','
string|'"C"'
op|','
string|'"show in the console, not graphically"'
op|']'
op|','
nl|'\n'
op|'['
string|'"shell-exec"'
op|','
string|'"x"'
op|','
string|'"""\\\nspawn a new console to show output (implies -C)"""'
op|']'
op|','
nl|'\n'
op|']'
newline|'\n'
nl|'\n'
DECL|function|countPys
dedent|''
name|'def'
name|'countPys'
op|'('
name|'countl'
op|','
name|'directory'
op|','
name|'names'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'sofar'
op|'='
name|'countl'
op|'['
number|'0'
op|']'
newline|'\n'
name|'sofar'
op|'='
name|'sofar'
op|'+'
name|'len'
op|'('
op|'['
name|'f'
name|'for'
name|'f'
name|'in'
name|'names'
name|'if'
name|'f'
op|'.'
name|'endswith'
op|'('
string|"'.py'"
op|')'
op|']'
op|')'
newline|'\n'
name|'countl'
op|'['
number|'0'
op|']'
op|'='
name|'sofar'
newline|'\n'
name|'return'
name|'sofar'
newline|'\n'
nl|'\n'
DECL|function|countPysRecursive
dedent|''
name|'def'
name|'countPysRecursive'
op|'('
name|'path'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'countl'
op|'='
op|'['
number|'0'
op|']'
newline|'\n'
name|'os'
op|'.'
name|'path'
op|'.'
name|'walk'
op|'('
name|'path'
op|','
name|'countPys'
op|','
name|'countl'
op|')'
newline|'\n'
name|'return'
name|'countl'
op|'['
number|'0'
op|']'
newline|'\n'
nl|'\n'
DECL|function|run
dedent|''
name|'def'
name|'run'
op|'('
name|'argv'
op|'='
name|'sys'
op|'.'
name|'argv'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'log'
op|'.'
name|'startLogging'
op|'('
name|'file'
op|'('
string|"'tkunzip.log'"
op|','
string|"'w'"
op|')'
op|')'
newline|'\n'
name|'opt'
op|'='
name|'TkunzipOptions'
op|'('
op|')'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'        '
name|'opt'
op|'.'
name|'parseOptions'
op|'('
name|'argv'
op|'['
number|'1'
op|':'
op|']'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'usage'
op|'.'
name|'UsageError'
op|','
name|'e'
op|':'
newline|'\n'
indent|'        '
name|'print'
name|'str'
op|'('
name|'opt'
op|')'
newline|'\n'
name|'print'
name|'str'
op|'('
name|'e'
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
number|'1'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'opt'
op|'['
string|"'use-console'"
op|']'
op|':'
newline|'\n'
comment|'# this should come before shell-exec to prevent infinite loop'
nl|'\n'
indent|'        '
name|'return'
name|'doItConsolicious'
op|'('
name|'opt'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'opt'
op|'['
string|"'shell-exec'"
op|']'
name|'or'
name|'not'
string|"'Tkinter'"
name|'in'
name|'sys'
op|'.'
name|'modules'
op|':'
newline|'\n'
indent|'        '
name|'from'
name|'distutils'
name|'import'
name|'sysconfig'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'scripts'
name|'import'
name|'tkunzip'
newline|'\n'
name|'myfile'
op|'='
name|'tkunzip'
op|'.'
name|'__file__'
newline|'\n'
name|'exe'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'sysconfig'
op|'.'
name|'get_config_var'
op|'('
string|"'prefix'"
op|')'
op|','
string|"'python.exe'"
op|')'
newline|'\n'
name|'return'
name|'os'
op|'.'
name|'system'
op|'('
string|"'%s %s --use-console %s'"
op|'%'
op|'('
name|'exe'
op|','
name|'myfile'
op|','
nl|'\n'
string|"' '"
op|'.'
name|'join'
op|'('
name|'argv'
op|'['
number|'1'
op|':'
op|']'
op|')'
op|')'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'doItTkinterly'
op|'('
name|'opt'
op|')'
newline|'\n'
nl|'\n'
DECL|function|doItConsolicious
dedent|''
name|'def'
name|'doItConsolicious'
op|'('
name|'opt'
op|')'
op|':'
newline|'\n'
comment|'# reclaim stdout/stderr from log'
nl|'\n'
indent|'    '
name|'sys'
op|'.'
name|'stdout'
op|'='
name|'sys'
op|'.'
name|'__stdout__'
newline|'\n'
name|'sys'
op|'.'
name|'stderr'
op|'='
name|'sys'
op|'.'
name|'__stderr__'
newline|'\n'
name|'if'
name|'opt'
op|'['
string|"'zipfile'"
op|']'
op|':'
newline|'\n'
indent|'        '
name|'print'
string|"'Unpacking documentation...'"
newline|'\n'
name|'for'
name|'n'
name|'in'
name|'zipstream'
op|'.'
name|'unzipIter'
op|'('
name|'opt'
op|'['
string|"'zipfile'"
op|']'
op|','
name|'opt'
op|'['
string|"'ziptargetdir'"
op|']'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'n'
op|'%'
number|'100'
op|'=='
number|'0'
op|':'
newline|'\n'
indent|'                '
name|'print'
name|'n'
op|','
newline|'\n'
dedent|''
name|'if'
name|'n'
op|'%'
number|'1000'
op|'=='
number|'0'
op|':'
newline|'\n'
indent|'                '
name|'print'
newline|'\n'
dedent|''
dedent|''
name|'print'
string|"'Done unpacking.'"
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'opt'
op|'['
string|"'compiledir'"
op|']'
op|':'
newline|'\n'
indent|'        '
name|'print'
string|"'Compiling to pyc...'"
newline|'\n'
name|'import'
name|'compileall'
newline|'\n'
name|'compileall'
op|'.'
name|'compile_dir'
op|'('
name|'opt'
op|'['
string|'"compiledir"'
op|']'
op|')'
newline|'\n'
name|'print'
string|"'Done compiling.'"
newline|'\n'
nl|'\n'
DECL|function|doItTkinterly
dedent|''
dedent|''
name|'def'
name|'doItTkinterly'
op|'('
name|'opt'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'root'
op|'='
name|'Tkinter'
op|'.'
name|'Tk'
op|'('
op|')'
newline|'\n'
name|'root'
op|'.'
name|'withdraw'
op|'('
op|')'
newline|'\n'
name|'root'
op|'.'
name|'title'
op|'('
string|"'One Moment.'"
op|')'
newline|'\n'
name|'root'
op|'.'
name|'protocol'
op|'('
string|"'WM_DELETE_WINDOW'"
op|','
name|'reactor'
op|'.'
name|'stop'
op|')'
newline|'\n'
name|'tksupport'
op|'.'
name|'install'
op|'('
name|'root'
op|')'
newline|'\n'
nl|'\n'
name|'prog'
op|'='
name|'ProgressBar'
op|'('
name|'root'
op|','
name|'value'
op|'='
number|'0'
op|','
name|'labelColor'
op|'='
string|'"black"'
op|','
name|'width'
op|'='
number|'200'
op|')'
newline|'\n'
name|'prog'
op|'.'
name|'pack'
op|'('
op|')'
newline|'\n'
nl|'\n'
comment|'# callback immediately'
nl|'\n'
name|'d'
op|'='
name|'defer'
op|'.'
name|'succeed'
op|'('
name|'root'
op|')'
op|'.'
name|'addErrback'
op|'('
name|'log'
op|'.'
name|'err'
op|')'
newline|'\n'
nl|'\n'
DECL|function|deiconify
name|'def'
name|'deiconify'
op|'('
name|'root'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'root'
op|'.'
name|'deiconify'
op|'('
op|')'
newline|'\n'
name|'return'
name|'root'
newline|'\n'
nl|'\n'
dedent|''
name|'d'
op|'.'
name|'addCallback'
op|'('
name|'deiconify'
op|')'
newline|'\n'
nl|'\n'
name|'if'
name|'opt'
op|'['
string|"'zipfile'"
op|']'
op|':'
newline|'\n'
indent|'        '
name|'uz'
op|'='
name|'Progressor'
op|'('
string|"'Unpacking documentation...'"
op|')'
newline|'\n'
name|'max'
op|'='
name|'zipstream'
op|'.'
name|'countZipFileChunks'
op|'('
name|'opt'
op|'['
string|"'zipfile'"
op|']'
op|','
number|'4096'
op|')'
newline|'\n'
name|'uz'
op|'.'
name|'setBar'
op|'('
name|'prog'
op|','
name|'max'
op|')'
newline|'\n'
name|'uz'
op|'.'
name|'setIterator'
op|'('
name|'zipstream'
op|'.'
name|'unzipIterChunky'
op|'('
name|'opt'
op|'['
string|"'zipfile'"
op|']'
op|','
nl|'\n'
name|'opt'
op|'['
string|"'ziptargetdir'"
op|']'
op|')'
op|')'
newline|'\n'
name|'d'
op|'.'
name|'addCallback'
op|'('
name|'uz'
op|'.'
name|'processAll'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'opt'
op|'['
string|"'compiledir'"
op|']'
op|':'
newline|'\n'
indent|'        '
name|'comp'
op|'='
name|'Progressor'
op|'('
string|"'Compiling to pyc...'"
op|')'
newline|'\n'
name|'comp'
op|'.'
name|'setBar'
op|'('
name|'prog'
op|','
name|'countPysRecursive'
op|'('
name|'opt'
op|'['
string|"'compiledir'"
op|']'
op|')'
op|')'
newline|'\n'
name|'comp'
op|'.'
name|'setIterator'
op|'('
name|'compiler'
op|'('
name|'opt'
op|'['
string|"'compiledir'"
op|']'
op|')'
op|')'
newline|'\n'
name|'d'
op|'.'
name|'addCallback'
op|'('
name|'comp'
op|'.'
name|'processAll'
op|')'
newline|'\n'
nl|'\n'
DECL|function|stop
dedent|''
name|'def'
name|'stop'
op|'('
name|'ignore'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
name|'root'
op|'.'
name|'destroy'
op|'('
op|')'
newline|'\n'
dedent|''
name|'d'
op|'.'
name|'addCallback'
op|'('
name|'stop'
op|')'
newline|'\n'
nl|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'run'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
