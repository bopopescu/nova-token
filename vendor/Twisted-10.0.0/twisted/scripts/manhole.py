begin_unit
comment|'# Copyright (c) 2001-2009 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
string|'"""\nStart a L{twisted.manhole} client.\n"""'
newline|'\n'
nl|'\n'
name|'import'
name|'sys'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'usage'
newline|'\n'
nl|'\n'
DECL|function|run
name|'def'
name|'run'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'config'
op|'='
name|'MyOptions'
op|'('
op|')'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'        '
name|'config'
op|'.'
name|'parseOptions'
op|'('
op|')'
newline|'\n'
dedent|''
name|'except'
name|'usage'
op|'.'
name|'UsageError'
op|','
name|'e'
op|':'
newline|'\n'
indent|'        '
name|'print'
name|'str'
op|'('
name|'e'
op|')'
newline|'\n'
name|'print'
name|'str'
op|'('
name|'config'
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
number|'1'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'run_gtk2'
op|'('
name|'config'
op|')'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
newline|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|run_gtk2
dedent|''
name|'def'
name|'run_gtk2'
op|'('
name|'config'
op|')'
op|':'
newline|'\n'
comment|'# Put these off until after we parse options, so we know what reactor'
nl|'\n'
comment|'# to load.'
nl|'\n'
indent|'    '
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'gtk2reactor'
newline|'\n'
name|'gtk2reactor'
op|'.'
name|'install'
op|'('
op|')'
newline|'\n'
nl|'\n'
comment|'# Put this off until after we parse options, or else gnome eats them.'
nl|'\n'
name|'sys'
op|'.'
name|'argv'
op|'['
op|':'
op|']'
op|'='
op|'['
string|"'manhole'"
op|']'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'manhole'
op|'.'
name|'ui'
name|'import'
name|'gtk2manhole'
newline|'\n'
nl|'\n'
name|'o'
op|'='
name|'config'
op|'.'
name|'opts'
newline|'\n'
name|'defaults'
op|'='
op|'{'
nl|'\n'
string|"'host'"
op|':'
name|'o'
op|'['
string|"'host'"
op|']'
op|','
nl|'\n'
string|"'port'"
op|':'
name|'o'
op|'['
string|"'port'"
op|']'
op|','
nl|'\n'
string|"'identityName'"
op|':'
name|'o'
op|'['
string|"'user'"
op|']'
op|','
nl|'\n'
string|"'password'"
op|':'
name|'o'
op|'['
string|"'password'"
op|']'
op|','
nl|'\n'
string|"'serviceName'"
op|':'
name|'o'
op|'['
string|"'service'"
op|']'
op|','
nl|'\n'
string|"'perspectiveName'"
op|':'
name|'o'
op|'['
string|"'perspective'"
op|']'
nl|'\n'
op|'}'
newline|'\n'
name|'w'
op|'='
name|'gtk2manhole'
op|'.'
name|'ManholeWindow'
op|'('
op|')'
newline|'\n'
name|'w'
op|'.'
name|'setDefaults'
op|'('
name|'defaults'
op|')'
newline|'\n'
name|'w'
op|'.'
name|'login'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|variable|pbportno
dedent|''
name|'pbportno'
op|'='
number|'8787'
newline|'\n'
nl|'\n'
DECL|class|MyOptions
name|'class'
name|'MyOptions'
op|'('
name|'usage'
op|'.'
name|'Options'
op|')'
op|':'
newline|'\n'
DECL|variable|optParameters
indent|'    '
name|'optParameters'
op|'='
op|'['
op|'('
string|'"user"'
op|','
string|'"u"'
op|','
string|'"guest"'
op|','
string|'"username"'
op|')'
op|','
nl|'\n'
op|'('
string|'"password"'
op|','
string|'"w"'
op|','
string|'"guest"'
op|')'
op|','
nl|'\n'
op|'('
string|'"service"'
op|','
string|'"s"'
op|','
string|'"twisted.manhole"'
op|','
string|'"PB Service"'
op|')'
op|','
nl|'\n'
op|'('
string|'"host"'
op|','
string|'"h"'
op|','
string|'"localhost"'
op|')'
op|','
nl|'\n'
op|'('
string|'"port"'
op|','
string|'"p"'
op|','
name|'str'
op|'('
name|'pbportno'
op|')'
op|')'
op|','
nl|'\n'
op|'('
string|'"perspective"'
op|','
string|'"P"'
op|','
string|'""'
op|','
nl|'\n'
string|'"PB Perspective to ask for "'
nl|'\n'
string|'"(if different than username)"'
op|')'
op|']'
newline|'\n'
DECL|variable|zsh_actions
name|'zsh_actions'
op|'='
op|'{'
string|'"host"'
op|':'
string|'"_hosts"'
op|'}'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'run'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
