begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
string|'"""Test cases for bounce message generation\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'trial'
name|'import'
name|'unittest'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'mail'
name|'import'
name|'bounce'
newline|'\n'
name|'import'
name|'rfc822'
op|','
name|'cStringIO'
newline|'\n'
nl|'\n'
DECL|class|BounceTestCase
name|'class'
name|'BounceTestCase'
op|'('
name|'unittest'
op|'.'
name|'TestCase'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""\n    testcases for bounce message generation\n    """'
newline|'\n'
nl|'\n'
DECL|member|testBounceFormat
name|'def'
name|'testBounceFormat'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from_'
op|','
name|'to'
op|','
name|'s'
op|'='
name|'bounce'
op|'.'
name|'generateBounce'
op|'('
name|'cStringIO'
op|'.'
name|'StringIO'
op|'('
string|"'''\\\nFrom: Moshe Zadka <moshez@example.com>\nTo: nonexistant@example.org\nSubject: test\n\n'''"
op|')'
op|','
string|"'moshez@example.com'"
op|','
string|"'nonexistant@example.org'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'from_'
op|','
string|"''"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'to'
op|','
string|"'moshez@example.com'"
op|')'
newline|'\n'
name|'mess'
op|'='
name|'rfc822'
op|'.'
name|'Message'
op|'('
name|'cStringIO'
op|'.'
name|'StringIO'
op|'('
name|'s'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'mess'
op|'['
string|"'To'"
op|']'
op|','
string|"'moshez@example.com'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'mess'
op|'['
string|"'From'"
op|']'
op|','
string|"'postmaster@example.org'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'assertEquals'
op|'('
name|'mess'
op|'['
string|"'subject'"
op|']'
op|','
string|"'Returned Mail: see transcript for details'"
op|')'
newline|'\n'
nl|'\n'
DECL|function|testBounceMIME
dedent|''
name|'def'
name|'testBounceMIME'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'pass'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
