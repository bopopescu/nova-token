begin_unit
comment|'# -*- Python -*-'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
comment|'#'
nl|'\n'
nl|'\n'
nl|'\n'
DECL|class|AccountManager
name|'class'
name|'AccountManager'
op|':'
newline|'\n'
indent|'    '
string|'"""I am responsible for managing a user\'s accounts.\n\n    That is, remembering what accounts are available, their settings,\n    adding and removal of accounts, etc.\n\n    @ivar accounts: A collection of available accounts.\n    @type accounts: mapping of strings to L{Account<interfaces.IAccount>}s.\n    """'
newline|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'accounts'
op|'='
op|'{'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|getSnapShot
dedent|''
name|'def'
name|'getSnapShot'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""A snapshot of all the accounts and their status.\n\n        @returns: A list of tuples, each of the form\n            (string:accountName, boolean:isOnline,\n            boolean:autoLogin, string:gatewayType)\n        """'
newline|'\n'
name|'data'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'account'
name|'in'
name|'self'
op|'.'
name|'accounts'
op|'.'
name|'values'
op|'('
op|')'
op|':'
newline|'\n'
indent|'            '
name|'data'
op|'.'
name|'append'
op|'('
op|'('
name|'account'
op|'.'
name|'accountName'
op|','
name|'account'
op|'.'
name|'isOnline'
op|'('
op|')'
op|','
nl|'\n'
name|'account'
op|'.'
name|'autoLogin'
op|','
name|'account'
op|'.'
name|'gatewayType'
op|')'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'data'
newline|'\n'
nl|'\n'
DECL|member|isEmpty
dedent|''
name|'def'
name|'isEmpty'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'len'
op|'('
name|'self'
op|'.'
name|'accounts'
op|')'
op|'=='
number|'0'
newline|'\n'
nl|'\n'
DECL|member|getConnectionInfo
dedent|''
name|'def'
name|'getConnectionInfo'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'connectioninfo'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'account'
name|'in'
name|'self'
op|'.'
name|'accounts'
op|'.'
name|'values'
op|'('
op|')'
op|':'
newline|'\n'
indent|'            '
name|'connectioninfo'
op|'.'
name|'append'
op|'('
name|'account'
op|'.'
name|'isOnline'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'connectioninfo'
newline|'\n'
nl|'\n'
DECL|member|addAccount
dedent|''
name|'def'
name|'addAccount'
op|'('
name|'self'
op|','
name|'account'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'accounts'
op|'['
name|'account'
op|'.'
name|'accountName'
op|']'
op|'='
name|'account'
newline|'\n'
nl|'\n'
DECL|member|delAccount
dedent|''
name|'def'
name|'delAccount'
op|'('
name|'self'
op|','
name|'accountName'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'del'
name|'self'
op|'.'
name|'accounts'
op|'['
name|'accountName'
op|']'
newline|'\n'
nl|'\n'
DECL|member|connect
dedent|''
name|'def'
name|'connect'
op|'('
name|'self'
op|','
name|'accountName'
op|','
name|'chatui'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        @returntype: Deferred L{interfaces.IClient}\n        """'
newline|'\n'
name|'return'
name|'self'
op|'.'
name|'accounts'
op|'['
name|'accountName'
op|']'
op|'.'
name|'logOn'
op|'('
name|'chatui'
op|')'
newline|'\n'
nl|'\n'
DECL|member|disconnect
dedent|''
name|'def'
name|'disconnect'
op|'('
name|'self'
op|','
name|'accountName'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'pass'
newline|'\n'
comment|'#self.accounts[accountName].logOff()  - not yet implemented'
nl|'\n'
nl|'\n'
DECL|member|quit
dedent|''
name|'def'
name|'quit'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'pass'
newline|'\n'
comment|'#for account in self.accounts.values():'
nl|'\n'
comment|'#    account.logOff()  - not yet implemented'
nl|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
