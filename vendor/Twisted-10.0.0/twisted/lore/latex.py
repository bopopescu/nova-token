begin_unit
comment|'# Copyright (c) 2001-2009 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
string|'"""\nLaTeX output support for Lore.\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'xml'
op|'.'
name|'dom'
name|'import'
name|'minidom'
name|'as'
name|'dom'
newline|'\n'
name|'import'
name|'os'
op|'.'
name|'path'
op|','
name|'re'
op|','
name|'string'
newline|'\n'
name|'from'
name|'cStringIO'
name|'import'
name|'StringIO'
newline|'\n'
name|'import'
name|'urlparse'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'web'
name|'import'
name|'domhelpers'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'text'
op|','
name|'procutils'
newline|'\n'
nl|'\n'
name|'import'
name|'tree'
newline|'\n'
nl|'\n'
DECL|variable|escapingRE
name|'escapingRE'
op|'='
name|'re'
op|'.'
name|'compile'
op|'('
string|"r'([\\[\\]#$%&_{}^~\\\\])'"
op|')'
newline|'\n'
DECL|variable|lowerUpperRE
name|'lowerUpperRE'
op|'='
name|'re'
op|'.'
name|'compile'
op|'('
string|"r'([a-z])([A-Z])'"
op|')'
newline|'\n'
nl|'\n'
DECL|function|_escapeMatch
name|'def'
name|'_escapeMatch'
op|'('
name|'match'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'c'
op|'='
name|'match'
op|'.'
name|'group'
op|'('
op|')'
newline|'\n'
name|'if'
name|'c'
op|'=='
string|"'\\\\'"
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'$\\\\backslash$'"
newline|'\n'
dedent|''
name|'elif'
name|'c'
op|'=='
string|"'~'"
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'\\\\~{}'"
newline|'\n'
dedent|''
name|'elif'
name|'c'
op|'=='
string|"'^'"
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'\\\\^{}'"
newline|'\n'
dedent|''
name|'elif'
name|'c'
name|'in'
string|"'[]'"
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'{'"
op|'+'
name|'c'
op|'+'
string|"'}'"
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'\\\\'"
op|'+'
name|'c'
newline|'\n'
nl|'\n'
DECL|function|latexEscape
dedent|''
dedent|''
name|'def'
name|'latexEscape'
op|'('
name|'txt'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'txt'
op|'='
name|'escapingRE'
op|'.'
name|'sub'
op|'('
name|'_escapeMatch'
op|','
name|'txt'
op|')'
newline|'\n'
name|'return'
name|'txt'
op|'.'
name|'replace'
op|'('
string|"'\\n'"
op|','
string|"' '"
op|')'
newline|'\n'
nl|'\n'
DECL|variable|entities
dedent|''
name|'entities'
op|'='
op|'{'
string|"'amp'"
op|':'
string|"'\\&'"
op|','
string|"'gt'"
op|':'
string|"'>'"
op|','
string|"'lt'"
op|':'
string|"'<'"
op|','
string|"'quot'"
op|':'
string|'\'"\''
op|','
nl|'\n'
string|"'copy'"
op|':'
string|"'\\\\copyright'"
op|','
string|"'mdash'"
op|':'
string|"'---'"
op|','
string|"'rdquo'"
op|':'
string|"'``'"
op|','
nl|'\n'
string|"'ldquo'"
op|':'
string|'"\'\'"'
op|'}'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|realpath
name|'def'
name|'realpath'
op|'('
name|'path'
op|')'
op|':'
newline|'\n'
comment|'# Normalise path'
nl|'\n'
indent|'    '
name|'cwd'
op|'='
name|'os'
op|'.'
name|'getcwd'
op|'('
op|')'
newline|'\n'
name|'path'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'normpath'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'cwd'
op|','
name|'path'
op|')'
op|')'
newline|'\n'
name|'return'
name|'path'
op|'.'
name|'replace'
op|'('
string|"'\\\\'"
op|','
string|"'/'"
op|')'
comment|'# windows slashes make LaTeX blow up'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|getLatexText
dedent|''
name|'def'
name|'getLatexText'
op|'('
name|'node'
op|','
name|'writer'
op|','
name|'filter'
op|'='
name|'lambda'
name|'x'
op|':'
name|'x'
op|','
name|'entities'
op|'='
name|'entities'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'if'
name|'hasattr'
op|'('
name|'node'
op|','
string|"'eref'"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'writer'
op|'('
name|'entities'
op|'.'
name|'get'
op|'('
name|'node'
op|'.'
name|'eref'
op|','
string|"''"
op|')'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'hasattr'
op|'('
name|'node'
op|','
string|"'data'"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'isinstance'
op|'('
name|'node'
op|'.'
name|'data'
op|','
name|'unicode'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'data'
op|'='
name|'node'
op|'.'
name|'data'
op|'.'
name|'encode'
op|'('
string|"'utf-8'"
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'data'
op|'='
name|'node'
op|'.'
name|'data'
newline|'\n'
dedent|''
name|'return'
name|'writer'
op|'('
name|'filter'
op|'('
name|'data'
op|')'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'child'
name|'in'
name|'node'
op|'.'
name|'childNodes'
op|':'
newline|'\n'
indent|'        '
name|'getLatexText'
op|'('
name|'child'
op|','
name|'writer'
op|','
name|'filter'
op|','
name|'entities'
op|')'
newline|'\n'
nl|'\n'
DECL|class|BaseLatexSpitter
dedent|''
dedent|''
name|'class'
name|'BaseLatexSpitter'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'writer'
op|','
name|'currDir'
op|'='
string|"'.'"
op|','
name|'filename'
op|'='
string|"''"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'writer'
op|'='
name|'writer'
newline|'\n'
name|'self'
op|'.'
name|'currDir'
op|'='
name|'currDir'
newline|'\n'
name|'self'
op|'.'
name|'filename'
op|'='
name|'filename'
newline|'\n'
nl|'\n'
DECL|member|visitNode
dedent|''
name|'def'
name|'visitNode'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'isinstance'
op|'('
name|'node'
op|','
name|'dom'
op|'.'
name|'Comment'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
newline|'\n'
dedent|''
name|'if'
name|'not'
name|'hasattr'
op|'('
name|'node'
op|','
string|"'tagName'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'writeNodeData'
op|'('
name|'node'
op|')'
newline|'\n'
name|'return'
newline|'\n'
dedent|''
name|'getattr'
op|'('
name|'self'
op|','
string|"'visitNode_'"
op|'+'
name|'node'
op|'.'
name|'tagName'
op|','
name|'self'
op|'.'
name|'visitNodeDefault'
op|')'
op|'('
name|'node'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNodeDefault
dedent|''
name|'def'
name|'visitNodeDefault'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'writer'
op|'('
name|'getattr'
op|'('
name|'self'
op|','
string|"'start_'"
op|'+'
name|'node'
op|'.'
name|'tagName'
op|','
string|"''"
op|')'
op|')'
newline|'\n'
name|'for'
name|'child'
name|'in'
name|'node'
op|'.'
name|'childNodes'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'visitNode'
op|'('
name|'child'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'writer'
op|'('
name|'getattr'
op|'('
name|'self'
op|','
string|"'end_'"
op|'+'
name|'node'
op|'.'
name|'tagName'
op|','
string|"''"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_a
dedent|''
name|'def'
name|'visitNode_a'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'class'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'class'"
op|')'
op|'.'
name|'endswith'
op|'('
string|"'listing'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'return'
name|'self'
op|'.'
name|'visitNode_a_listing'
op|'('
name|'node'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'href'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'visitNode_a_href'
op|'('
name|'node'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'name'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'visitNode_a_name'
op|'('
name|'node'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_span
dedent|''
name|'def'
name|'visitNode_span'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'not'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'class'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
dedent|''
name|'node'
op|'.'
name|'tagName'
op|'+='
string|"'_'"
op|'+'
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'class'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'visitNode'
op|'('
name|'node'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|visitNode_div
dedent|''
name|'visitNode_div'
op|'='
name|'visitNode_span'
newline|'\n'
nl|'\n'
DECL|member|visitNode_h1
name|'def'
name|'visitNode_h1'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'pass'
newline|'\n'
nl|'\n'
DECL|member|visitNode_style
dedent|''
name|'def'
name|'visitNode_style'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'pass'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|LatexSpitter
dedent|''
dedent|''
name|'class'
name|'LatexSpitter'
op|'('
name|'BaseLatexSpitter'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|variable|baseLevel
indent|'    '
name|'baseLevel'
op|'='
number|'0'
newline|'\n'
DECL|variable|diaHack
name|'diaHack'
op|'='
name|'bool'
op|'('
name|'procutils'
op|'.'
name|'which'
op|'('
string|'"dia"'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|writeNodeData
name|'def'
name|'writeNodeData'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'buf'
op|'='
name|'StringIO'
op|'('
op|')'
newline|'\n'
name|'getLatexText'
op|'('
name|'node'
op|','
name|'buf'
op|'.'
name|'write'
op|','
name|'latexEscape'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
name|'buf'
op|'.'
name|'getvalue'
op|'('
op|')'
op|'.'
name|'replace'
op|'('
string|"'<'"
op|','
string|"'$<$'"
op|')'
op|'.'
name|'replace'
op|'('
string|"'>'"
op|','
string|"'$>$'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_head
dedent|''
name|'def'
name|'visitNode_head'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'authorNodes'
op|'='
name|'domhelpers'
op|'.'
name|'findElementsWithAttribute'
op|'('
name|'node'
op|','
string|"'rel'"
op|','
string|"'author'"
op|')'
newline|'\n'
name|'authorNodes'
op|'='
op|'['
name|'n'
name|'for'
name|'n'
name|'in'
name|'authorNodes'
name|'if'
name|'n'
op|'.'
name|'tagName'
op|'=='
string|"'link'"
op|']'
newline|'\n'
nl|'\n'
name|'if'
name|'authorNodes'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\author{'"
op|')'
newline|'\n'
name|'authors'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
name|'aNode'
name|'in'
name|'authorNodes'
op|':'
newline|'\n'
indent|'                '
name|'name'
op|'='
name|'aNode'
op|'.'
name|'getAttribute'
op|'('
string|"'title'"
op|')'
newline|'\n'
name|'href'
op|'='
name|'aNode'
op|'.'
name|'getAttribute'
op|'('
string|"'href'"
op|')'
newline|'\n'
name|'if'
name|'href'
op|'.'
name|'startswith'
op|'('
string|"'mailto:'"
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'href'
op|'='
name|'href'
op|'['
number|'7'
op|':'
op|']'
newline|'\n'
dedent|''
name|'if'
name|'href'
op|':'
newline|'\n'
indent|'                    '
name|'if'
name|'name'
op|':'
newline|'\n'
indent|'                        '
name|'name'
op|'+='
string|"' '"
newline|'\n'
dedent|''
name|'name'
op|'+='
string|"'$<$'"
op|'+'
name|'href'
op|'+'
string|"'$>$'"
newline|'\n'
dedent|''
name|'if'
name|'name'
op|':'
newline|'\n'
indent|'                    '
name|'authors'
op|'.'
name|'append'
op|'('
name|'name'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'self'
op|'.'
name|'writer'
op|'('
string|"' \\\\and '"
op|'.'
name|'join'
op|'('
name|'authors'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'}'"
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_pre
dedent|''
name|'def'
name|'visitNode_pre'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\begin{verbatim}\\n'"
op|')'
newline|'\n'
name|'buf'
op|'='
name|'StringIO'
op|'('
op|')'
newline|'\n'
name|'getLatexText'
op|'('
name|'node'
op|','
name|'buf'
op|'.'
name|'write'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
name|'text'
op|'.'
name|'removeLeadingTrailingBlanks'
op|'('
name|'buf'
op|'.'
name|'getvalue'
op|'('
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\end{verbatim}\\n'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_code
dedent|''
name|'def'
name|'visitNode_code'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fout'
op|'='
name|'StringIO'
op|'('
op|')'
newline|'\n'
name|'getLatexText'
op|'('
name|'node'
op|','
name|'fout'
op|'.'
name|'write'
op|','
name|'latexEscape'
op|')'
newline|'\n'
name|'data'
op|'='
name|'lowerUpperRE'
op|'.'
name|'sub'
op|'('
string|"r'\\1\\\\linebreak[1]\\2'"
op|','
name|'fout'
op|'.'
name|'getvalue'
op|'('
op|')'
op|')'
newline|'\n'
name|'data'
op|'='
name|'data'
op|'['
op|':'
number|'1'
op|']'
op|'+'
name|'data'
op|'['
number|'1'
op|':'
op|']'
op|'.'
name|'replace'
op|'('
string|"'.'"
op|','
string|"'.\\\\linebreak[1]'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\texttt{'"
op|'+'
name|'data'
op|'+'
string|"'}'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_img
dedent|''
name|'def'
name|'visitNode_img'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fileName'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'self'
op|'.'
name|'currDir'
op|','
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'src'"
op|')'
op|')'
newline|'\n'
name|'target'
op|','
name|'ext'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'splitext'
op|'('
name|'fileName'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'diaHack'
name|'and'
name|'os'
op|'.'
name|'access'
op|'('
name|'target'
op|'+'
string|"'.dia'"
op|','
name|'os'
op|'.'
name|'R_OK'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'ext'
op|'='
string|"'.dia'"
newline|'\n'
name|'fileName'
op|'='
name|'target'
op|'+'
name|'ext'
newline|'\n'
dedent|''
name|'f'
op|'='
name|'getattr'
op|'('
name|'self'
op|','
string|"'convert_'"
op|'+'
name|'ext'
op|'['
number|'1'
op|':'
op|']'
op|','
name|'None'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'f'
op|':'
newline|'\n'
indent|'            '
name|'return'
newline|'\n'
dedent|''
name|'target'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'self'
op|'.'
name|'currDir'
op|','
name|'os'
op|'.'
name|'path'
op|'.'
name|'basename'
op|'('
name|'target'
op|')'
op|'+'
string|"'.eps'"
op|')'
newline|'\n'
name|'f'
op|'('
name|'fileName'
op|','
name|'target'
op|')'
newline|'\n'
name|'target'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'basename'
op|'('
name|'target'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_write_img'
op|'('
name|'target'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_write_img
dedent|''
name|'def'
name|'_write_img'
op|'('
name|'self'
op|','
name|'target'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Write LaTeX for image."""'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\begin{center}\\\\includegraphics[%%\\n'"
nl|'\n'
string|"'width=1.0\\n'"
nl|'\n'
string|"'\\\\textwidth,height=1.0\\\\textheight,\\nkeepaspectratio]'"
nl|'\n'
string|"'{%s}\\\\end{center}\\n'"
op|'%'
name|'target'
op|')'
newline|'\n'
nl|'\n'
DECL|member|convert_png
dedent|''
name|'def'
name|'convert_png'
op|'('
name|'self'
op|','
name|'src'
op|','
name|'target'
op|')'
op|':'
newline|'\n'
comment|"# XXX there's a *reason* Python comes with the pipes module -"
nl|'\n'
comment|'# someone fix this to use it.'
nl|'\n'
indent|'        '
name|'r'
op|'='
name|'os'
op|'.'
name|'system'
op|'('
string|'\'pngtopnm "%s" | pnmtops -noturn > "%s"\''
op|'%'
op|'('
name|'src'
op|','
name|'target'
op|')'
op|')'
newline|'\n'
name|'if'
name|'r'
op|'!='
number|'0'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'OSError'
op|'('
name|'r'
op|')'
newline|'\n'
nl|'\n'
DECL|member|convert_dia
dedent|''
dedent|''
name|'def'
name|'convert_dia'
op|'('
name|'self'
op|','
name|'src'
op|','
name|'target'
op|')'
op|':'
newline|'\n'
comment|'# EVIL DISGUSTING HACK'
nl|'\n'
indent|'        '
name|'data'
op|'='
name|'os'
op|'.'
name|'popen'
op|'('
string|'"gunzip -dc %s"'
op|'%'
op|'('
name|'src'
op|')'
op|')'
op|'.'
name|'read'
op|'('
op|')'
newline|'\n'
name|'pre'
op|'='
string|'\'<dia:attribute name="scaling">\\n          <dia:real val="1"/>\''
newline|'\n'
name|'post'
op|'='
string|'\'<dia:attribute name="scaling">\\n          <dia:real val="0.5"/>\''
newline|'\n'
name|'f'
op|'='
name|'open'
op|'('
string|"'%s_hacked.dia'"
op|'%'
op|'('
name|'src'
op|')'
op|','
string|"'wb'"
op|')'
newline|'\n'
name|'f'
op|'.'
name|'write'
op|'('
name|'data'
op|'.'
name|'replace'
op|'('
name|'pre'
op|','
name|'post'
op|')'
op|')'
newline|'\n'
name|'f'
op|'.'
name|'close'
op|'('
op|')'
newline|'\n'
name|'os'
op|'.'
name|'system'
op|'('
string|"'gzip %s_hacked.dia'"
op|'%'
op|'('
name|'src'
op|','
op|')'
op|')'
newline|'\n'
name|'os'
op|'.'
name|'system'
op|'('
string|"'mv %s_hacked.dia.gz %s_hacked.dia'"
op|'%'
op|'('
name|'src'
op|','
name|'src'
op|')'
op|')'
newline|'\n'
comment|"# Let's pretend we never saw that."
nl|'\n'
nl|'\n'
comment|"# Silly dia needs an X server, even though it doesn't display anything."
nl|'\n'
comment|'# If this is a problem for you, try using Xvfb.'
nl|'\n'
name|'os'
op|'.'
name|'system'
op|'('
string|'"dia %s_hacked.dia -n -e %s"'
op|'%'
op|'('
name|'src'
op|','
name|'target'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNodeHeader
dedent|''
name|'def'
name|'visitNodeHeader'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'level'
op|'='
op|'('
name|'int'
op|'('
name|'node'
op|'.'
name|'tagName'
op|'['
number|'1'
op|']'
op|')'
op|'-'
number|'2'
op|')'
op|'+'
name|'self'
op|'.'
name|'baseLevel'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\n\\n\\\\'"
op|'+'
name|'level'
op|'*'
string|"'sub'"
op|'+'
string|"'section{'"
op|')'
newline|'\n'
name|'spitter'
op|'='
name|'HeadingLatexSpitter'
op|'('
name|'self'
op|'.'
name|'writer'
op|','
name|'self'
op|'.'
name|'currDir'
op|','
name|'self'
op|'.'
name|'filename'
op|')'
newline|'\n'
name|'spitter'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'}\\n'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_a_listing
dedent|''
name|'def'
name|'visitNode_a_listing'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'fileName'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'self'
op|'.'
name|'currDir'
op|','
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'href'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\begin{verbatim}\\n'"
op|')'
newline|'\n'
name|'lines'
op|'='
name|'map'
op|'('
name|'string'
op|'.'
name|'rstrip'
op|','
name|'open'
op|'('
name|'fileName'
op|')'
op|'.'
name|'readlines'
op|'('
op|')'
op|')'
newline|'\n'
name|'skipLines'
op|'='
name|'int'
op|'('
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'skipLines'"
op|')'
name|'or'
number|'0'
op|')'
newline|'\n'
name|'lines'
op|'='
name|'lines'
op|'['
name|'skipLines'
op|':'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
name|'text'
op|'.'
name|'removeLeadingTrailingBlanks'
op|'('
string|"'\\n'"
op|'.'
name|'join'
op|'('
name|'lines'
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\end{verbatim}'"
op|')'
newline|'\n'
nl|'\n'
comment|'# Write a caption for this source listing'
nl|'\n'
name|'fileName'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'basename'
op|'('
name|'fileName'
op|')'
newline|'\n'
name|'caption'
op|'='
name|'domhelpers'
op|'.'
name|'getNodeText'
op|'('
name|'node'
op|')'
newline|'\n'
name|'if'
name|'caption'
op|'=='
name|'fileName'
op|':'
newline|'\n'
indent|'            '
name|'caption'
op|'='
string|"'Source listing'"
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\parbox[b]{\\linewidth}{\\\\begin{center}%s --- '"
nl|'\n'
string|"'\\\\begin{em}%s\\\\end{em}\\\\end{center}}'"
nl|'\n'
op|'%'
op|'('
name|'latexEscape'
op|'('
name|'caption'
op|')'
op|','
name|'latexEscape'
op|'('
name|'fileName'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_a_href
dedent|''
name|'def'
name|'visitNode_a_href'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'supported_schemes'
op|'='
op|'['
string|"'http'"
op|','
string|"'https'"
op|','
string|"'ftp'"
op|','
string|"'mailto'"
op|']'
newline|'\n'
name|'href'
op|'='
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'href'"
op|')'
newline|'\n'
name|'if'
name|'urlparse'
op|'.'
name|'urlparse'
op|'('
name|'href'
op|')'
op|'['
number|'0'
op|']'
name|'in'
name|'supported_schemes'
op|':'
newline|'\n'
indent|'            '
name|'text'
op|'='
name|'domhelpers'
op|'.'
name|'getNodeText'
op|'('
name|'node'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
name|'if'
name|'text'
op|'!='
name|'href'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\footnote{%s}'"
op|'%'
name|'latexEscape'
op|'('
name|'href'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'path'
op|','
name|'fragid'
op|'='
op|'('
name|'href'
op|'.'
name|'split'
op|'('
string|"'#'"
op|','
number|'1'
op|')'
op|'+'
op|'['
name|'None'
op|']'
op|')'
op|'['
op|':'
number|'2'
op|']'
newline|'\n'
name|'if'
name|'path'
op|'=='
string|"''"
op|':'
newline|'\n'
indent|'                '
name|'path'
op|'='
name|'self'
op|'.'
name|'filename'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'path'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'self'
op|'.'
name|'filename'
op|')'
op|','
name|'path'
op|')'
newline|'\n'
comment|"#if path == '':"
nl|'\n'
comment|'#path = os.path.basename(self.filename)'
nl|'\n'
comment|'#else:'
nl|'\n'
comment|'#    # Hack for linking to man pages from howtos, i.e.'
nl|'\n'
comment|'#    # ../doc/foo-man.html -> foo-man.html'
nl|'\n'
comment|'#    path = os.path.basename(path)'
nl|'\n'
nl|'\n'
dedent|''
name|'path'
op|'='
name|'realpath'
op|'('
name|'path'
op|')'
newline|'\n'
nl|'\n'
name|'if'
name|'fragid'
op|':'
newline|'\n'
indent|'                '
name|'ref'
op|'='
name|'path'
op|'+'
string|"'HASH'"
op|'+'
name|'fragid'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'ref'
op|'='
name|'path'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\textit{'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'}'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\loreref{%s}'"
op|'%'
name|'ref'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_a_name
dedent|''
dedent|''
name|'def'
name|'visitNode_a_name'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\label{%sHASH%s}'"
op|'%'
op|'('
nl|'\n'
name|'realpath'
op|'('
name|'self'
op|'.'
name|'filename'
op|')'
op|','
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'name'"
op|')'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_table
dedent|''
name|'def'
name|'visitNode_table'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'rows'
op|'='
op|'['
op|'['
name|'col'
name|'for'
name|'col'
name|'in'
name|'row'
op|'.'
name|'childNodes'
nl|'\n'
name|'if'
name|'getattr'
op|'('
name|'col'
op|','
string|"'tagName'"
op|','
name|'None'
op|')'
name|'in'
op|'('
string|"'th'"
op|','
string|"'td'"
op|')'
op|']'
nl|'\n'
name|'for'
name|'row'
name|'in'
name|'node'
op|'.'
name|'childNodes'
name|'if'
name|'getattr'
op|'('
name|'row'
op|','
string|"'tagName'"
op|','
name|'None'
op|')'
op|'=='
string|"'tr'"
op|']'
newline|'\n'
name|'numCols'
op|'='
number|'1'
op|'+'
name|'max'
op|'('
op|'['
name|'len'
op|'('
name|'row'
op|')'
name|'for'
name|'row'
name|'in'
name|'rows'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\begin{table}[ht]\\\\begin{center}'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\begin{tabular}{@{}'"
op|'+'
string|"'l'"
op|'*'
name|'numCols'
op|'+'
string|"'@{}}'"
op|')'
newline|'\n'
name|'for'
name|'row'
name|'in'
name|'rows'
op|':'
newline|'\n'
indent|'            '
name|'th'
op|'='
number|'0'
newline|'\n'
name|'for'
name|'col'
name|'in'
name|'row'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'visitNode'
op|'('
name|'col'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'&'"
op|')'
newline|'\n'
name|'if'
name|'col'
op|'.'
name|'tagName'
op|'=='
string|"'th'"
op|':'
newline|'\n'
indent|'                    '
name|'th'
op|'='
number|'1'
newline|'\n'
dedent|''
dedent|''
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\\\\\\\n'"
op|')'
comment|'#\\\\ ends lines'
newline|'\n'
name|'if'
name|'th'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\hline\\n'"
op|')'
newline|'\n'
dedent|''
dedent|''
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\end{tabular}\\n'"
op|')'
newline|'\n'
name|'if'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'title'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\caption{%s}'"
nl|'\n'
op|'%'
name|'latexEscape'
op|'('
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'title'"
op|')'
op|')'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\end{center}\\\\end{table}\\n'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_span_footnote
dedent|''
name|'def'
name|'visitNode_span_footnote'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\footnote{'"
op|')'
newline|'\n'
name|'spitter'
op|'='
name|'FootnoteLatexSpitter'
op|'('
name|'self'
op|'.'
name|'writer'
op|','
name|'self'
op|'.'
name|'currDir'
op|','
name|'self'
op|'.'
name|'filename'
op|')'
newline|'\n'
name|'spitter'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'}'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_span_index
dedent|''
name|'def'
name|'visitNode_span_index'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\index{%s}\\n'"
op|'%'
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'value'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'visitNode_h2'
op|'='
name|'visitNode_h3'
op|'='
name|'visitNode_h4'
op|'='
name|'visitNodeHeader'
newline|'\n'
nl|'\n'
DECL|variable|start_title
name|'start_title'
op|'='
string|"'\\\\title{'"
newline|'\n'
DECL|variable|end_title
name|'end_title'
op|'='
string|"'}\\n'"
newline|'\n'
nl|'\n'
DECL|variable|start_sub
name|'start_sub'
op|'='
string|"'$_{'"
newline|'\n'
DECL|variable|end_sub
name|'end_sub'
op|'='
string|"'}$'"
newline|'\n'
nl|'\n'
DECL|variable|start_sup
name|'start_sup'
op|'='
string|"'$^{'"
newline|'\n'
DECL|variable|end_sup
name|'end_sup'
op|'='
string|"'}$'"
newline|'\n'
nl|'\n'
name|'start_html'
op|'='
string|"'''\\\\documentclass{article}\n    \\\\newcommand{\\\\loreref}[1]{%\n    \\\\ifthenelse{\\\\value{page}=\\\\pageref{#1}}%\n               { (this page)}%\n               { (page \\\\pageref{#1})}%\n    }'''"
newline|'\n'
nl|'\n'
DECL|variable|start_body
name|'start_body'
op|'='
string|"'\\\\begin{document}\\n\\\\maketitle\\n'"
newline|'\n'
DECL|variable|end_body
name|'end_body'
op|'='
string|"'\\\\end{document}'"
newline|'\n'
nl|'\n'
DECL|variable|start_dl
name|'start_dl'
op|'='
string|"'\\\\begin{description}\\n'"
newline|'\n'
DECL|variable|end_dl
name|'end_dl'
op|'='
string|"'\\\\end{description}\\n'"
newline|'\n'
DECL|variable|start_ul
name|'start_ul'
op|'='
string|"'\\\\begin{itemize}\\n'"
newline|'\n'
DECL|variable|end_ul
name|'end_ul'
op|'='
string|"'\\\\end{itemize}\\n'"
newline|'\n'
nl|'\n'
DECL|variable|start_ol
name|'start_ol'
op|'='
string|"'\\\\begin{enumerate}\\n'"
newline|'\n'
DECL|variable|end_ol
name|'end_ol'
op|'='
string|"'\\\\end{enumerate}\\n'"
newline|'\n'
nl|'\n'
DECL|variable|start_li
name|'start_li'
op|'='
string|"'\\\\item '"
newline|'\n'
DECL|variable|end_li
name|'end_li'
op|'='
string|"'\\n'"
newline|'\n'
nl|'\n'
DECL|variable|start_dt
name|'start_dt'
op|'='
string|"'\\\\item['"
newline|'\n'
DECL|variable|end_dt
name|'end_dt'
op|'='
string|"']'"
newline|'\n'
DECL|variable|end_dd
name|'end_dd'
op|'='
string|"'\\n'"
newline|'\n'
nl|'\n'
DECL|variable|start_p
name|'start_p'
op|'='
string|"'\\n\\n'"
newline|'\n'
nl|'\n'
name|'start_strong'
op|'='
name|'start_em'
op|'='
string|"'\\\\begin{em}'"
newline|'\n'
name|'end_strong'
op|'='
name|'end_em'
op|'='
string|"'\\\\end{em}'"
newline|'\n'
nl|'\n'
DECL|variable|start_q
name|'start_q'
op|'='
string|'"``"'
newline|'\n'
DECL|variable|end_q
name|'end_q'
op|'='
string|'"\'\'"'
newline|'\n'
nl|'\n'
DECL|variable|start_div_note
name|'start_div_note'
op|'='
string|"'\\\\begin{quotation}\\\\textbf{Note:}'"
newline|'\n'
DECL|variable|end_div_note
name|'end_div_note'
op|'='
string|"'\\\\end{quotation}'"
newline|'\n'
nl|'\n'
DECL|variable|start_th
name|'start_th'
op|'='
string|"'\\\\textbf{'"
newline|'\n'
DECL|variable|end_th
name|'end_th'
op|'='
string|"'}'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|SectionLatexSpitter
dedent|''
name|'class'
name|'SectionLatexSpitter'
op|'('
name|'LatexSpitter'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|variable|baseLevel
indent|'    '
name|'baseLevel'
op|'='
number|'1'
newline|'\n'
nl|'\n'
DECL|variable|start_title
name|'start_title'
op|'='
string|"'\\\\section{'"
newline|'\n'
nl|'\n'
DECL|member|visitNode_title
name|'def'
name|'visitNode_title'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
comment|"#self.writer('\\\\label{%s}}\\n' % os.path.basename(self.filename))"
nl|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\label{%s}}\\n'"
op|'%'
name|'realpath'
op|'('
name|'self'
op|'.'
name|'filename'
op|')'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'end_title'
op|'='
name|'end_body'
op|'='
name|'start_body'
op|'='
name|'start_html'
op|'='
string|"''"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|ChapterLatexSpitter
dedent|''
name|'class'
name|'ChapterLatexSpitter'
op|'('
name|'SectionLatexSpitter'
op|')'
op|':'
newline|'\n'
DECL|variable|baseLevel
indent|'    '
name|'baseLevel'
op|'='
number|'0'
newline|'\n'
DECL|variable|start_title
name|'start_title'
op|'='
string|"'\\\\chapter{'"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|HeadingLatexSpitter
dedent|''
name|'class'
name|'HeadingLatexSpitter'
op|'('
name|'BaseLatexSpitter'
op|')'
op|':'
newline|'\n'
DECL|variable|start_q
indent|'    '
name|'start_q'
op|'='
string|'"``"'
newline|'\n'
DECL|variable|end_q
name|'end_q'
op|'='
string|'"\'\'"'
newline|'\n'
nl|'\n'
DECL|variable|writeNodeData
name|'writeNodeData'
op|'='
name|'LatexSpitter'
op|'.'
name|'writeNodeData'
op|'.'
name|'im_func'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FootnoteLatexSpitter
dedent|''
name|'class'
name|'FootnoteLatexSpitter'
op|'('
name|'LatexSpitter'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""For multi-paragraph footnotes, this avoids having an empty leading\n    paragraph."""'
newline|'\n'
nl|'\n'
DECL|variable|start_p
name|'start_p'
op|'='
string|"''"
newline|'\n'
nl|'\n'
DECL|member|visitNode_span_footnote
name|'def'
name|'visitNode_span_footnote'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_p
dedent|''
name|'def'
name|'visitNode_p'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'start_p'
op|'='
name|'LatexSpitter'
op|'.'
name|'start_p'
newline|'\n'
nl|'\n'
DECL|class|BookLatexSpitter
dedent|''
dedent|''
name|'class'
name|'BookLatexSpitter'
op|'('
name|'LatexSpitter'
op|')'
op|':'
newline|'\n'
DECL|member|visitNode_body
indent|'    '
name|'def'
name|'visitNode_body'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'tocs'
op|'='
name|'domhelpers'
op|'.'
name|'locateNodes'
op|'('
op|'['
name|'node'
op|']'
op|','
string|"'class'"
op|','
string|"'toc'"
op|')'
newline|'\n'
name|'domhelpers'
op|'.'
name|'clearNode'
op|'('
name|'node'
op|')'
newline|'\n'
name|'if'
name|'len'
op|'('
name|'tocs'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'toc'
op|'='
name|'tocs'
op|'['
number|'0'
op|']'
newline|'\n'
name|'node'
op|'.'
name|'appendChild'
op|'('
name|'toc'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_link
dedent|''
name|'def'
name|'visitNode_link'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'not'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'rel'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
dedent|''
name|'node'
op|'.'
name|'tagName'
op|'+='
string|"'_'"
op|'+'
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'rel'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'visitNode'
op|'('
name|'node'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_link_author
dedent|''
name|'def'
name|'visitNode_link_author'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\author{%s}\\n'"
op|'%'
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'text'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_link_stylesheet
dedent|''
name|'def'
name|'visitNode_link_stylesheet'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'type'"
op|')'
name|'and'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'href'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'type'"
op|')'
op|'=='
string|"'application/x-latex'"
op|':'
newline|'\n'
indent|'                '
name|'packagename'
op|'='
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'href'"
op|')'
newline|'\n'
name|'packagebase'
op|','
name|'ext'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'splitext'
op|'('
name|'packagename'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\usepackage{%s}\\n'"
op|'%'
name|'packagebase'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
dedent|''
name|'start_html'
op|'='
string|"r'''\\documentclass[oneside]{book}\n\\usepackage{graphicx}\n\\usepackage{times,mathptmx}\n'''"
newline|'\n'
nl|'\n'
name|'start_body'
op|'='
string|"r'''\\begin{document}\n\\maketitle\n\\tableofcontents\n'''"
newline|'\n'
nl|'\n'
DECL|variable|start_li
name|'start_li'
op|'='
string|"''"
newline|'\n'
DECL|variable|end_li
name|'end_li'
op|'='
string|"''"
newline|'\n'
DECL|variable|start_ul
name|'start_ul'
op|'='
string|"''"
newline|'\n'
DECL|variable|end_ul
name|'end_ul'
op|'='
string|"''"
newline|'\n'
nl|'\n'
nl|'\n'
DECL|member|visitNode_a
name|'def'
name|'visitNode_a'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'class'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'a_class'
op|'='
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'class'"
op|')'
newline|'\n'
name|'if'
name|'a_class'
op|'.'
name|'endswith'
op|'('
string|"'listing'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'return'
name|'self'
op|'.'
name|'visitNode_a_listing'
op|'('
name|'node'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'return'
name|'getattr'
op|'('
name|'self'
op|','
string|"'visitNode_a_%s'"
op|'%'
name|'a_class'
op|')'
op|'('
name|'node'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'href'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'visitNode_a_href'
op|'('
name|'node'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'name'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'visitNode_a_name'
op|'('
name|'node'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_a_chapter
dedent|''
name|'def'
name|'visitNode_a_chapter'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\chapter{'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'visitNodeDefault'
op|'('
name|'node'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'}\\n'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|visitNode_a_sect
dedent|''
name|'def'
name|'visitNode_a_sect'
op|'('
name|'self'
op|','
name|'node'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'base'
op|','
name|'ext'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'splitext'
op|'('
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'href'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'writer'
op|'('
string|"'\\\\input{%s}\\n'"
op|'%'
name|'base'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
nl|'\n'
DECL|function|processFile
dedent|''
dedent|''
name|'def'
name|'processFile'
op|'('
name|'spitter'
op|','
name|'fin'
op|')'
op|':'
newline|'\n'
comment|'# XXX Use Inversion Of Control Pattern to orthogonalize the parsing API'
nl|'\n'
comment|'# from the Visitor Pattern application. (EnterPrise)'
nl|'\n'
indent|'    '
name|'dom'
op|'='
name|'tree'
op|'.'
name|'parseFileAndReport'
op|'('
name|'fin'
op|'.'
name|'name'
op|','
name|'lambda'
name|'x'
op|':'
name|'fin'
op|')'
op|'.'
name|'documentElement'
newline|'\n'
name|'spitter'
op|'.'
name|'visitNode'
op|'('
name|'dom'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|convertFile
dedent|''
name|'def'
name|'convertFile'
op|'('
name|'filename'
op|','
name|'spitterClass'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'fout'
op|'='
name|'open'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'splitext'
op|'('
name|'filename'
op|')'
op|'['
number|'0'
op|']'
op|'+'
string|'".tex"'
op|','
string|"'w'"
op|')'
newline|'\n'
name|'spitter'
op|'='
name|'spitterClass'
op|'('
name|'fout'
op|'.'
name|'write'
op|','
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'filename'
op|')'
op|','
name|'filename'
op|')'
newline|'\n'
name|'fin'
op|'='
name|'open'
op|'('
name|'filename'
op|')'
newline|'\n'
name|'processFile'
op|'('
name|'spitter'
op|','
name|'fin'
op|')'
newline|'\n'
name|'fin'
op|'.'
name|'close'
op|'('
op|')'
newline|'\n'
name|'fout'
op|'.'
name|'close'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
