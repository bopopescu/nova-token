begin_unit
comment|'# Copyright (c) 2001-2009 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
string|'"""\nChecker for common errors in Lore documents.\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'xml'
op|'.'
name|'dom'
name|'import'
name|'minidom'
name|'as'
name|'dom'
newline|'\n'
name|'import'
name|'parser'
op|','
name|'urlparse'
op|','
name|'os'
op|'.'
name|'path'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'lore'
name|'import'
name|'tree'
op|','
name|'process'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'web'
name|'import'
name|'domhelpers'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'reflect'
newline|'\n'
nl|'\n'
nl|'\n'
comment|'# parser.suite in Python 2.3 raises SyntaxError, <2.3 raises parser.ParserError'
nl|'\n'
DECL|variable|parserErrors
name|'parserErrors'
op|'='
op|'('
name|'SyntaxError'
op|','
name|'parser'
op|'.'
name|'ParserError'
op|')'
newline|'\n'
nl|'\n'
DECL|class|TagChecker
name|'class'
name|'TagChecker'
op|':'
newline|'\n'
nl|'\n'
DECL|member|check
indent|'    '
name|'def'
name|'check'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'hadErrors'
op|'='
number|'0'
newline|'\n'
name|'for'
name|'method'
name|'in'
name|'reflect'
op|'.'
name|'prefixedMethods'
op|'('
name|'self'
op|','
string|"'check_'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'method'
op|'('
name|'dom'
op|','
name|'filename'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'self'
op|'.'
name|'hadErrors'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'process'
op|'.'
name|'ProcessingFailure'
op|'('
string|'"invalid format"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_reportError
dedent|''
dedent|''
name|'def'
name|'_reportError'
op|'('
name|'self'
op|','
name|'filename'
op|','
name|'element'
op|','
name|'error'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'hlint'
op|'='
name|'element'
op|'.'
name|'hasAttribute'
op|'('
string|"'hlint'"
op|')'
name|'and'
name|'element'
op|'.'
name|'getAttribute'
op|'('
string|"'hlint'"
op|')'
newline|'\n'
name|'if'
name|'hlint'
op|'!='
string|"'off'"
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'hadErrors'
op|'='
number|'1'
newline|'\n'
name|'pos'
op|'='
name|'getattr'
op|'('
name|'element'
op|','
string|"'_markpos'"
op|','
name|'None'
op|')'
name|'or'
op|'('
number|'0'
op|','
number|'0'
op|')'
newline|'\n'
name|'print'
string|'"%s:%s:%s: %s"'
op|'%'
op|'('
op|'('
name|'filename'
op|','
op|')'
op|'+'
name|'pos'
op|'+'
op|'('
name|'error'
op|','
op|')'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|DefaultTagChecker
dedent|''
dedent|''
dedent|''
name|'class'
name|'DefaultTagChecker'
op|'('
name|'TagChecker'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'allowedTags'
op|','
name|'allowedClasses'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'allowedTags'
op|'='
name|'allowedTags'
newline|'\n'
name|'self'
op|'.'
name|'allowedClasses'
op|'='
name|'allowedClasses'
newline|'\n'
nl|'\n'
DECL|member|check_disallowedElements
dedent|''
name|'def'
name|'check_disallowedElements'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
DECL|function|m
indent|'        '
name|'def'
name|'m'
op|'('
name|'node'
op|','
name|'self'
op|'='
name|'self'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'not'
name|'self'
op|'.'
name|'allowedTags'
op|'('
name|'node'
op|'.'
name|'tagName'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'element'
name|'in'
name|'domhelpers'
op|'.'
name|'findElements'
op|'('
name|'dom'
op|','
name|'m'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'element'
op|','
nl|'\n'
string|"'unrecommended tag %s'"
op|'%'
name|'element'
op|'.'
name|'tagName'
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_disallowedClasses
dedent|''
dedent|''
name|'def'
name|'check_disallowedClasses'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
DECL|function|matcher
indent|'        '
name|'def'
name|'matcher'
op|'('
name|'element'
op|','
name|'self'
op|'='
name|'self'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'element'
op|'.'
name|'hasAttribute'
op|'('
string|"'class'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'return'
number|'0'
newline|'\n'
dedent|''
name|'checker'
op|'='
name|'self'
op|'.'
name|'allowedClasses'
op|'.'
name|'get'
op|'('
name|'element'
op|'.'
name|'tagName'
op|','
name|'lambda'
name|'x'
op|':'
number|'0'
op|')'
newline|'\n'
name|'return'
name|'not'
name|'checker'
op|'('
name|'element'
op|'.'
name|'getAttribute'
op|'('
string|"'class'"
op|')'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'element'
name|'in'
name|'domhelpers'
op|'.'
name|'findElements'
op|'('
name|'dom'
op|','
name|'matcher'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'element'
op|','
nl|'\n'
string|"'unknown class %s'"
op|'%'
name|'element'
op|'.'
name|'getAttribute'
op|'('
string|"'class'"
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_quote
dedent|''
dedent|''
name|'def'
name|'check_quote'
op|'('
name|'self'
op|','
name|'doc'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
DECL|function|matcher
indent|'        '
name|'def'
name|'matcher'
op|'('
name|'node'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
op|'('
string|'\'"\''
name|'in'
name|'getattr'
op|'('
name|'node'
op|','
string|"'data'"
op|','
string|"''"
op|')'
name|'and'
nl|'\n'
name|'not'
name|'isinstance'
op|'('
name|'node'
op|','
name|'dom'
op|'.'
name|'Comment'
op|')'
name|'and'
nl|'\n'
name|'not'
op|'['
number|'1'
name|'for'
name|'n'
name|'in'
name|'domhelpers'
op|'.'
name|'getParents'
op|'('
name|'node'
op|')'
op|'['
number|'1'
op|':'
op|'-'
number|'1'
op|']'
nl|'\n'
name|'if'
name|'n'
op|'.'
name|'tagName'
name|'in'
op|'('
string|"'pre'"
op|','
string|"'code'"
op|')'
op|']'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'node'
name|'in'
name|'domhelpers'
op|'.'
name|'findNodes'
op|'('
name|'doc'
op|','
name|'matcher'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|'.'
name|'parentNode'
op|','
string|"'contains quote'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_styleattr
dedent|''
dedent|''
name|'def'
name|'check_styleattr'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'node'
name|'in'
name|'domhelpers'
op|'.'
name|'findElementsWithAttribute'
op|'('
name|'dom'
op|','
string|"'style'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
string|"'explicit style'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_align
dedent|''
dedent|''
name|'def'
name|'check_align'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'node'
name|'in'
name|'domhelpers'
op|'.'
name|'findElementsWithAttribute'
op|'('
name|'dom'
op|','
string|"'align'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
string|"'explicit alignment'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_style
dedent|''
dedent|''
name|'def'
name|'check_style'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'node'
name|'in'
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'dom'
op|','
string|"'style'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'domhelpers'
op|'.'
name|'getNodeText'
op|'('
name|'node'
op|')'
op|'!='
string|"''"
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
string|"'hand hacked style'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_title
dedent|''
dedent|''
dedent|''
name|'def'
name|'check_title'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'doc'
op|'='
name|'dom'
op|'.'
name|'documentElement'
newline|'\n'
name|'title'
op|'='
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'dom'
op|','
string|"'title'"
op|')'
newline|'\n'
name|'if'
name|'len'
op|'('
name|'title'
op|')'
op|'!='
number|'1'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'doc'
op|','
string|"'not exactly one title'"
op|')'
newline|'\n'
dedent|''
name|'h1'
op|'='
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'dom'
op|','
string|"'h1'"
op|')'
newline|'\n'
name|'if'
name|'len'
op|'('
name|'h1'
op|')'
op|'!='
number|'1'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'doc'
op|','
string|"'not exactly one h1'"
op|')'
newline|'\n'
dedent|''
name|'if'
name|'domhelpers'
op|'.'
name|'getNodeText'
op|'('
name|'h1'
op|'['
number|'0'
op|']'
op|')'
op|'!='
name|'domhelpers'
op|'.'
name|'getNodeText'
op|'('
name|'title'
op|'['
number|'0'
op|']'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'h1'
op|'['
number|'0'
op|']'
op|','
string|"'title and h1 text differ'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_80_columns
dedent|''
dedent|''
name|'def'
name|'check_80_columns'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'node'
name|'in'
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'dom'
op|','
string|"'pre'"
op|')'
op|':'
newline|'\n'
comment|'# the ps/pdf output is in a font that cuts off at 80 characters,'
nl|'\n'
comment|'# so this is enforced to make sure the interesting parts (which'
nl|'\n'
comment|'# are likely to be on the right-hand edge) stay on the printed'
nl|'\n'
comment|'# page.'
nl|'\n'
indent|'            '
name|'for'
name|'line'
name|'in'
name|'domhelpers'
op|'.'
name|'gatherTextNodes'
op|'('
name|'node'
op|','
number|'1'
op|')'
op|'.'
name|'split'
op|'('
string|"'\\n'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'len'
op|'('
name|'line'
op|'.'
name|'rstrip'
op|'('
op|')'
op|')'
op|'>'
number|'80'
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
nl|'\n'
string|"'text wider than 80 columns in pre'"
op|')'
newline|'\n'
dedent|''
dedent|''
dedent|''
name|'for'
name|'node'
name|'in'
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'dom'
op|','
string|"'a'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'class'"
op|')'
op|'.'
name|'endswith'
op|'('
string|"'listing'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'try'
op|':'
newline|'\n'
indent|'                    '
name|'fn'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'filename'
op|')'
newline|'\n'
name|'fn'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
name|'fn'
op|','
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'href'"
op|')'
op|')'
newline|'\n'
name|'lines'
op|'='
name|'open'
op|'('
name|'fn'
op|','
string|"'r'"
op|')'
op|'.'
name|'readlines'
op|'('
op|')'
newline|'\n'
dedent|''
name|'except'
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
nl|'\n'
string|"'bad listing href: %r'"
op|'%'
nl|'\n'
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'href'"
op|')'
op|')'
newline|'\n'
name|'continue'
newline|'\n'
nl|'\n'
dedent|''
name|'for'
name|'line'
name|'in'
name|'lines'
op|':'
newline|'\n'
indent|'                    '
name|'if'
name|'len'
op|'('
name|'line'
op|'.'
name|'rstrip'
op|'('
op|')'
op|')'
op|'>'
number|'80'
op|':'
newline|'\n'
indent|'                        '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
nl|'\n'
string|"'listing wider than 80 columns'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_pre_py_listing
dedent|''
dedent|''
dedent|''
dedent|''
dedent|''
name|'def'
name|'check_pre_py_listing'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'node'
name|'in'
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'dom'
op|','
string|"'pre'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'class'"
op|')'
op|'=='
string|"'python'"
op|':'
newline|'\n'
indent|'                '
name|'try'
op|':'
newline|'\n'
indent|'                    '
name|'text'
op|'='
name|'domhelpers'
op|'.'
name|'getNodeText'
op|'('
name|'node'
op|')'
newline|'\n'
comment|'# Fix < and >'
nl|'\n'
name|'text'
op|'='
name|'text'
op|'.'
name|'replace'
op|'('
string|"'&gt;'"
op|','
string|"'>'"
op|')'
op|'.'
name|'replace'
op|'('
string|"'&lt;'"
op|','
string|"'<'"
op|')'
newline|'\n'
comment|'# Strip blank lines'
nl|'\n'
name|'lines'
op|'='
name|'filter'
op|'('
name|'None'
op|','
op|'['
name|'l'
op|'.'
name|'rstrip'
op|'('
op|')'
name|'for'
name|'l'
name|'in'
name|'text'
op|'.'
name|'split'
op|'('
string|"'\\n'"
op|')'
op|']'
op|')'
newline|'\n'
comment|'# Strip leading space'
nl|'\n'
name|'while'
name|'not'
op|'['
number|'1'
name|'for'
name|'line'
name|'in'
name|'lines'
name|'if'
name|'line'
op|'['
op|':'
number|'1'
op|']'
name|'not'
name|'in'
op|'('
string|"''"
op|','
string|"' '"
op|')'
op|']'
op|':'
newline|'\n'
indent|'                        '
name|'lines'
op|'='
op|'['
name|'line'
op|'['
number|'1'
op|':'
op|']'
name|'for'
name|'line'
name|'in'
name|'lines'
op|']'
newline|'\n'
dedent|''
name|'text'
op|'='
string|"'\\n'"
op|'.'
name|'join'
op|'('
name|'lines'
op|')'
op|'+'
string|"'\\n'"
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'                        '
name|'parser'
op|'.'
name|'suite'
op|'('
name|'text'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'parserErrors'
op|','
name|'e'
op|':'
newline|'\n'
comment|'# Pretend the "..." idiom is syntactically valid'
nl|'\n'
indent|'                        '
name|'text'
op|'='
name|'text'
op|'.'
name|'replace'
op|'('
string|'"..."'
op|','
string|'"\'...\'"'
op|')'
newline|'\n'
name|'parser'
op|'.'
name|'suite'
op|'('
name|'text'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'except'
name|'parserErrors'
op|','
name|'e'
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
nl|'\n'
string|"'invalid python code:'"
op|'+'
name|'str'
op|'('
name|'e'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_anchor_in_heading
dedent|''
dedent|''
dedent|''
dedent|''
name|'def'
name|'check_anchor_in_heading'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'headingNames'
op|'='
op|'['
string|"'h%d'"
op|'%'
name|'n'
name|'for'
name|'n'
name|'in'
name|'range'
op|'('
number|'1'
op|','
number|'7'
op|')'
op|']'
newline|'\n'
name|'for'
name|'hname'
name|'in'
name|'headingNames'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'node'
name|'in'
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'dom'
op|','
name|'hname'
op|')'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'node'
op|','
string|"'a'"
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
string|"'anchor in heading'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_texturl_matches_href
dedent|''
dedent|''
dedent|''
dedent|''
name|'def'
name|'check_texturl_matches_href'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'node'
name|'in'
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'dom'
op|','
string|"'a'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'node'
op|'.'
name|'hasAttribute'
op|'('
string|"'href'"
op|')'
op|':'
newline|'\n'
indent|'                '
name|'continue'
newline|'\n'
dedent|''
name|'text'
op|'='
name|'domhelpers'
op|'.'
name|'getNodeText'
op|'('
name|'node'
op|')'
newline|'\n'
name|'proto'
op|'='
name|'urlparse'
op|'.'
name|'urlparse'
op|'('
name|'text'
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'if'
name|'proto'
name|'and'
string|"' '"
name|'not'
name|'in'
name|'text'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'text'
op|'!='
name|'node'
op|'.'
name|'getAttribute'
op|'('
string|"'href'"
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
nl|'\n'
string|"'link text does not match href'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|check_lists
dedent|''
dedent|''
dedent|''
dedent|''
name|'def'
name|'check_lists'
op|'('
name|'self'
op|','
name|'dom'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'node'
name|'in'
op|'('
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'dom'
op|','
string|"'ul'"
op|')'
op|'+'
nl|'\n'
name|'domhelpers'
op|'.'
name|'findNodesNamed'
op|'('
name|'dom'
op|','
string|"'ol'"
op|')'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'node'
op|'.'
name|'childNodes'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
string|"'empty list'"
op|')'
newline|'\n'
dedent|''
name|'for'
name|'child'
name|'in'
name|'node'
op|'.'
name|'childNodes'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'child'
op|'.'
name|'nodeName'
op|'!='
string|"'li'"
op|':'
newline|'\n'
indent|'                    '
name|'self'
op|'.'
name|'_reportError'
op|'('
name|'filename'
op|','
name|'node'
op|','
nl|'\n'
string|"'only list items allowed in lists'"
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|list2dict
dedent|''
dedent|''
dedent|''
dedent|''
dedent|''
name|'def'
name|'list2dict'
op|'('
name|'l'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'d'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'for'
name|'el'
name|'in'
name|'l'
op|':'
newline|'\n'
indent|'        '
name|'d'
op|'['
name|'el'
op|']'
op|'='
name|'None'
newline|'\n'
dedent|''
name|'return'
name|'d'
newline|'\n'
nl|'\n'
DECL|variable|classes
dedent|''
name|'classes'
op|'='
name|'list2dict'
op|'('
op|'['
string|"'shell'"
op|','
string|"'API'"
op|','
string|"'python'"
op|','
string|"'py-prototype'"
op|','
string|"'py-filename'"
op|','
nl|'\n'
string|"'py-src-string'"
op|','
string|"'py-signature'"
op|','
string|"'py-src-parameter'"
op|','
nl|'\n'
string|"'py-src-identifier'"
op|','
string|"'py-src-keyword'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|tags
name|'tags'
op|'='
name|'list2dict'
op|'('
op|'['
string|'"html"'
op|','
string|'"title"'
op|','
string|'"head"'
op|','
string|'"body"'
op|','
string|'"h1"'
op|','
string|'"h2"'
op|','
string|'"h3"'
op|','
string|'"ol"'
op|','
string|'"ul"'
op|','
nl|'\n'
string|'"dl"'
op|','
string|'"li"'
op|','
string|'"dt"'
op|','
string|'"dd"'
op|','
string|'"p"'
op|','
string|'"code"'
op|','
string|'"img"'
op|','
string|'"blockquote"'
op|','
string|'"a"'
op|','
nl|'\n'
string|'"cite"'
op|','
string|'"div"'
op|','
string|'"span"'
op|','
string|'"strong"'
op|','
string|'"em"'
op|','
string|'"pre"'
op|','
string|'"q"'
op|','
string|'"table"'
op|','
nl|'\n'
string|'"tr"'
op|','
string|'"td"'
op|','
string|'"th"'
op|','
string|'"style"'
op|','
string|'"sub"'
op|','
string|'"sup"'
op|','
string|'"link"'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|span
name|'span'
op|'='
name|'list2dict'
op|'('
op|'['
string|"'footnote'"
op|','
string|"'manhole-output'"
op|','
string|"'index'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|div
name|'div'
op|'='
name|'list2dict'
op|'('
op|'['
string|"'note'"
op|','
string|"'boxed'"
op|','
string|"'doit'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|a
name|'a'
op|'='
name|'list2dict'
op|'('
op|'['
string|"'listing'"
op|','
string|"'py-listing'"
op|','
string|"'html-listing'"
op|','
string|"'absolute'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|pre
name|'pre'
op|'='
name|'list2dict'
op|'('
op|'['
string|"'python'"
op|','
string|"'shell'"
op|','
string|"'python-interpreter'"
op|','
string|"'elisp'"
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|allowed
name|'allowed'
op|'='
op|'{'
string|"'code'"
op|':'
name|'classes'
op|'.'
name|'has_key'
op|','
string|"'span'"
op|':'
name|'span'
op|'.'
name|'has_key'
op|','
string|"'div'"
op|':'
name|'div'
op|'.'
name|'has_key'
op|','
nl|'\n'
string|"'a'"
op|':'
name|'a'
op|'.'
name|'has_key'
op|','
string|"'pre'"
op|':'
name|'pre'
op|'.'
name|'has_key'
op|','
string|"'ul'"
op|':'
name|'lambda'
name|'x'
op|':'
name|'x'
op|'=='
string|"'toc'"
op|','
nl|'\n'
string|"'ol'"
op|':'
name|'lambda'
name|'x'
op|':'
name|'x'
op|'=='
string|"'toc'"
op|','
string|"'li'"
op|':'
name|'lambda'
name|'x'
op|':'
name|'x'
op|'=='
string|"'ignoretoc'"
op|'}'
newline|'\n'
nl|'\n'
DECL|function|getDefaultChecker
name|'def'
name|'getDefaultChecker'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'return'
name|'DefaultTagChecker'
op|'('
name|'tags'
op|'.'
name|'has_key'
op|','
name|'allowed'
op|')'
newline|'\n'
nl|'\n'
DECL|function|doFile
dedent|''
name|'def'
name|'doFile'
op|'('
name|'file'
op|','
name|'checker'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'doc'
op|'='
name|'tree'
op|'.'
name|'parseFileAndReport'
op|'('
name|'file'
op|')'
newline|'\n'
name|'if'
name|'doc'
op|':'
newline|'\n'
indent|'        '
name|'checker'
op|'.'
name|'check'
op|'('
name|'doc'
op|','
name|'file'
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
