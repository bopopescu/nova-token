begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
DECL|function|setIndexFilename
name|'def'
name|'setIndexFilename'
op|'('
name|'filename'
op|'='
string|"'index.xhtml'"
op|')'
op|':'
newline|'\n'
indent|'    '
name|'global'
name|'indexFilename'
newline|'\n'
name|'indexFilename'
op|'='
name|'filename'
newline|'\n'
nl|'\n'
DECL|function|getIndexFilename
dedent|''
name|'def'
name|'getIndexFilename'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'global'
name|'indexFilename'
newline|'\n'
name|'return'
name|'indexFilename'
newline|'\n'
nl|'\n'
DECL|function|addEntry
dedent|''
name|'def'
name|'addEntry'
op|'('
name|'filename'
op|','
name|'anchor'
op|','
name|'text'
op|','
name|'reference'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'global'
name|'entries'
newline|'\n'
name|'if'
name|'not'
name|'entries'
op|'.'
name|'has_key'
op|'('
name|'text'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'entries'
op|'['
name|'text'
op|']'
op|'='
op|'['
op|']'
newline|'\n'
dedent|''
name|'entries'
op|'['
name|'text'
op|']'
op|'.'
name|'append'
op|'('
op|'('
name|'filename'
op|','
name|'anchor'
op|','
name|'reference'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|function|clearEntries
dedent|''
name|'def'
name|'clearEntries'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'global'
name|'entries'
newline|'\n'
name|'entries'
op|'='
op|'{'
op|'}'
newline|'\n'
nl|'\n'
DECL|function|generateIndex
dedent|''
name|'def'
name|'generateIndex'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'global'
name|'entries'
newline|'\n'
name|'global'
name|'indexFilename'
newline|'\n'
nl|'\n'
name|'if'
name|'not'
name|'indexFilename'
op|':'
newline|'\n'
indent|'        '
name|'return'
newline|'\n'
nl|'\n'
dedent|''
name|'f'
op|'='
name|'open'
op|'('
name|'indexFilename'
op|','
string|"'w'"
op|')'
newline|'\n'
name|'sortedEntries'
op|'='
op|'['
op|'('
name|'e'
op|'.'
name|'lower'
op|'('
op|')'
op|','
name|'e'
op|')'
name|'for'
name|'e'
name|'in'
name|'entries'
op|']'
newline|'\n'
name|'sortedEntries'
op|'.'
name|'sort'
op|'('
op|')'
newline|'\n'
name|'sortedEntries'
op|'='
op|'['
name|'e'
op|'['
number|'1'
op|']'
name|'for'
name|'e'
name|'in'
name|'sortedEntries'
op|']'
newline|'\n'
name|'for'
name|'text'
name|'in'
name|'sortedEntries'
op|':'
newline|'\n'
indent|'        '
name|'refs'
op|'='
op|'['
op|']'
newline|'\n'
name|'f'
op|'.'
name|'write'
op|'('
name|'text'
op|'.'
name|'replace'
op|'('
string|"'!'"
op|','
string|"', '"
op|')'
op|'+'
string|"': '"
op|')'
newline|'\n'
name|'for'
op|'('
name|'file'
op|','
name|'anchor'
op|','
name|'reference'
op|')'
name|'in'
name|'entries'
op|'['
name|'text'
op|']'
op|':'
newline|'\n'
indent|'            '
name|'refs'
op|'.'
name|'append'
op|'('
string|'\'<a href="%s#%s">%s</a>\''
op|'%'
op|'('
name|'file'
op|','
name|'anchor'
op|','
name|'reference'
op|')'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'text'
op|'=='
string|"'infinite recursion'"
op|':'
newline|'\n'
indent|'            '
name|'refs'
op|'.'
name|'append'
op|'('
string|"'<em>See Also:</em> recursion, infinite\\n'"
op|')'
newline|'\n'
dedent|''
name|'if'
name|'text'
op|'=='
string|"'recursion!infinite'"
op|':'
newline|'\n'
indent|'            '
name|'refs'
op|'.'
name|'append'
op|'('
string|"'<em>See Also:</em> infinite recursion\\n'"
op|')'
newline|'\n'
dedent|''
name|'f'
op|'.'
name|'write'
op|'('
string|"'%s<br />\\n'"
op|'%'
string|'", "'
op|'.'
name|'join'
op|'('
name|'refs'
op|')'
op|')'
newline|'\n'
dedent|''
name|'f'
op|'.'
name|'close'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|reset
dedent|''
name|'def'
name|'reset'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'clearEntries'
op|'('
op|')'
newline|'\n'
name|'setIndexFilename'
op|'('
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'reset'
op|'('
op|')'
newline|'\n'
endmarker|''
end_unit
