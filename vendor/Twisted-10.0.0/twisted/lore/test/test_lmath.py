begin_unit
comment|'# Copyright (c) 2009 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
string|'"""\nTests for L{twisted.lore.lmath}.\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'xml'
op|'.'
name|'dom'
op|'.'
name|'minidom'
name|'import'
name|'Element'
op|','
name|'Text'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'trial'
op|'.'
name|'unittest'
name|'import'
name|'TestCase'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
op|'.'
name|'filepath'
name|'import'
name|'FilePath'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'lore'
op|'.'
name|'lmath'
name|'import'
name|'formulaeToImages'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|FormulaeTests
name|'class'
name|'FormulaeTests'
op|'('
name|'TestCase'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""\n    Tests for L{formulaeToImages}.\n    """'
newline|'\n'
DECL|member|test_insertImages
name|'def'
name|'test_insertImages'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""\n        L{formulaeToImages} replaces any elements with the I{latexformula}\n        class with I{img} elements which refer to external images generated\n        based on the latex in the original elements.\n        """'
newline|'\n'
name|'parent'
op|'='
name|'Element'
op|'('
string|"'div'"
op|')'
newline|'\n'
name|'base'
op|'='
name|'FilePath'
op|'('
name|'self'
op|'.'
name|'mktemp'
op|'('
op|')'
op|')'
newline|'\n'
name|'base'
op|'.'
name|'makedirs'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'macros'
op|'='
name|'Element'
op|'('
string|"'span'"
op|')'
newline|'\n'
name|'macros'
op|'.'
name|'setAttribute'
op|'('
string|"'class'"
op|','
string|"'latexmacros'"
op|')'
newline|'\n'
name|'text'
op|'='
name|'Text'
op|'('
op|')'
newline|'\n'
name|'text'
op|'.'
name|'data'
op|'='
string|"'foo'"
newline|'\n'
name|'macros'
op|'.'
name|'appendChild'
op|'('
name|'text'
op|')'
newline|'\n'
name|'parent'
op|'.'
name|'appendChild'
op|'('
name|'macros'
op|')'
newline|'\n'
nl|'\n'
name|'formula'
op|'='
name|'Element'
op|'('
string|"'span'"
op|')'
newline|'\n'
name|'formula'
op|'.'
name|'setAttribute'
op|'('
string|"'class'"
op|','
string|"'latexformula'"
op|')'
newline|'\n'
name|'text'
op|'='
name|'Text'
op|'('
op|')'
newline|'\n'
name|'text'
op|'.'
name|'data'
op|'='
string|"'bar'"
newline|'\n'
name|'formula'
op|'.'
name|'appendChild'
op|'('
name|'text'
op|')'
newline|'\n'
name|'parent'
op|'.'
name|'appendChild'
op|'('
name|'formula'
op|')'
newline|'\n'
nl|'\n'
comment|'# Avoid actually executing the commands to generate images from the'
nl|'\n'
comment|'# latex.  It might be nice to have some assertions about what commands'
nl|'\n'
comment|'# are executed, or perhaps even execute them and make sure an image'
nl|'\n'
comment|'# file is created, but that is a task for another day.'
nl|'\n'
name|'commands'
op|'='
op|'['
op|']'
newline|'\n'
name|'formulaeToImages'
op|'('
name|'parent'
op|','
name|'base'
op|'.'
name|'path'
op|','
name|'_system'
op|'='
name|'commands'
op|'.'
name|'append'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'assertEqual'
op|'('
nl|'\n'
name|'parent'
op|'.'
name|'toxml'
op|'('
op|')'
op|','
nl|'\n'
string|'\'<div><span><br/><img src="latexformula0.png"/><br/></span></div>\''
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
