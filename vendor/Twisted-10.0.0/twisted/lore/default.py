begin_unit
comment|'# Copyright (c) 2001-2009 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
string|'"""\nDefault processing factory plugin.\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'xml'
op|'.'
name|'dom'
name|'import'
name|'minidom'
name|'as'
name|'dom'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'lore'
name|'import'
name|'tree'
op|','
name|'latex'
op|','
name|'lint'
op|','
name|'process'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'web'
name|'import'
name|'sux'
newline|'\n'
nl|'\n'
DECL|variable|htmlDefault
name|'htmlDefault'
op|'='
op|'{'
string|"'template'"
op|':'
string|"'template.tpl'"
op|','
string|"'baseurl'"
op|':'
string|"'%s'"
op|','
string|"'ext'"
op|':'
string|"'.html'"
op|'}'
newline|'\n'
nl|'\n'
DECL|class|ProcessingFunctionFactory
name|'class'
name|'ProcessingFunctionFactory'
op|':'
newline|'\n'
nl|'\n'
DECL|member|getDoFile
indent|'    '
name|'def'
name|'getDoFile'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'tree'
op|'.'
name|'doFile'
newline|'\n'
nl|'\n'
DECL|member|generate_html
dedent|''
name|'def'
name|'generate_html'
op|'('
name|'self'
op|','
name|'options'
op|','
name|'filenameGenerator'
op|'='
name|'tree'
op|'.'
name|'getOutputFileName'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'n'
op|'='
name|'htmlDefault'
op|'.'
name|'copy'
op|'('
op|')'
newline|'\n'
name|'n'
op|'.'
name|'update'
op|'('
name|'options'
op|')'
newline|'\n'
name|'options'
op|'='
name|'n'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'fp'
op|'='
name|'open'
op|'('
name|'options'
op|'['
string|"'template'"
op|']'
op|')'
newline|'\n'
name|'templ'
op|'='
name|'dom'
op|'.'
name|'parse'
op|'('
name|'fp'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'IOError'
op|','
name|'e'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'process'
op|'.'
name|'NoProcessorError'
op|'('
name|'e'
op|'.'
name|'filename'
op|'+'
string|'": "'
op|'+'
name|'e'
op|'.'
name|'strerror'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'sux'
op|'.'
name|'ParseError'
op|','
name|'e'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'process'
op|'.'
name|'NoProcessorError'
op|'('
name|'str'
op|'('
name|'e'
op|')'
op|')'
newline|'\n'
dedent|''
name|'df'
op|'='
name|'lambda'
name|'file'
op|','
name|'linkrel'
op|':'
name|'self'
op|'.'
name|'getDoFile'
op|'('
op|')'
op|'('
name|'file'
op|','
name|'linkrel'
op|','
name|'options'
op|'['
string|"'ext'"
op|']'
op|','
nl|'\n'
name|'options'
op|'['
string|"'baseurl'"
op|']'
op|','
name|'templ'
op|','
name|'options'
op|','
name|'filenameGenerator'
op|')'
newline|'\n'
name|'return'
name|'df'
newline|'\n'
nl|'\n'
DECL|variable|latexSpitters
dedent|''
name|'latexSpitters'
op|'='
op|'{'
name|'None'
op|':'
name|'latex'
op|'.'
name|'LatexSpitter'
op|','
nl|'\n'
string|"'section'"
op|':'
name|'latex'
op|'.'
name|'SectionLatexSpitter'
op|','
nl|'\n'
string|"'chapter'"
op|':'
name|'latex'
op|'.'
name|'ChapterLatexSpitter'
op|','
nl|'\n'
string|"'book'"
op|':'
name|'latex'
op|'.'
name|'BookLatexSpitter'
op|','
nl|'\n'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|generate_latex
name|'def'
name|'generate_latex'
op|'('
name|'self'
op|','
name|'options'
op|','
name|'filenameGenerator'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'spitter'
op|'='
name|'self'
op|'.'
name|'latexSpitters'
op|'['
name|'None'
op|']'
newline|'\n'
name|'for'
op|'('
name|'key'
op|','
name|'value'
op|')'
name|'in'
name|'self'
op|'.'
name|'latexSpitters'
op|'.'
name|'items'
op|'('
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'key'
name|'and'
name|'options'
op|'.'
name|'get'
op|'('
name|'key'
op|')'
op|':'
newline|'\n'
indent|'               '
name|'spitter'
op|'='
name|'value'
newline|'\n'
dedent|''
dedent|''
name|'df'
op|'='
name|'lambda'
name|'file'
op|','
name|'linkrel'
op|':'
name|'latex'
op|'.'
name|'convertFile'
op|'('
name|'file'
op|','
name|'spitter'
op|')'
newline|'\n'
name|'return'
name|'df'
newline|'\n'
nl|'\n'
DECL|member|getLintChecker
dedent|''
name|'def'
name|'getLintChecker'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'lint'
op|'.'
name|'getDefaultChecker'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|generate_lint
dedent|''
name|'def'
name|'generate_lint'
op|'('
name|'self'
op|','
name|'options'
op|','
name|'filenameGenerator'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'checker'
op|'='
name|'self'
op|'.'
name|'getLintChecker'
op|'('
op|')'
newline|'\n'
name|'return'
name|'lambda'
name|'file'
op|','
name|'linkrel'
op|':'
name|'lint'
op|'.'
name|'doFile'
op|'('
name|'file'
op|','
name|'checker'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|factory
dedent|''
dedent|''
name|'factory'
op|'='
name|'ProcessingFunctionFactory'
op|'('
op|')'
newline|'\n'
endmarker|''
end_unit
