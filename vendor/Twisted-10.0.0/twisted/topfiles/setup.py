begin_unit
comment|'#!/usr/bin/env python'
nl|'\n'
comment|'# Copyright (c) 2001-2010 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
string|'"""\nDistutils installer for Twisted.\n"""'
newline|'\n'
nl|'\n'
name|'import'
name|'os'
op|','
name|'sys'
newline|'\n'
nl|'\n'
name|'if'
name|'sys'
op|'.'
name|'version_info'
op|'<'
op|'('
number|'2'
op|','
number|'3'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'print'
op|'>>'
name|'sys'
op|'.'
name|'stderr'
op|','
string|'"You must use at least Python 2.3 for Twisted"'
newline|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
number|'3'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
string|"'twisted'"
op|')'
op|':'
newline|'\n'
indent|'    '
name|'sys'
op|'.'
name|'path'
op|'.'
name|'insert'
op|'('
number|'0'
op|','
string|"'.'"
op|')'
comment|'# eek! need this to import twisted. sorry.'
newline|'\n'
dedent|''
name|'from'
name|'twisted'
name|'import'
name|'copyright'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
op|'.'
name|'dist'
name|'import'
name|'setup'
op|','
name|'ConditionalExtension'
name|'as'
name|'Extension'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
op|'.'
name|'dist'
name|'import'
name|'getPackages'
op|','
name|'getDataFiles'
op|','
name|'getScripts'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
op|'.'
name|'dist'
name|'import'
name|'twisted_subprojects'
newline|'\n'
nl|'\n'
nl|'\n'
nl|'\n'
DECL|variable|extensions
name|'extensions'
op|'='
op|'['
nl|'\n'
name|'Extension'
op|'('
string|'"twisted.protocols._c_urlarg"'
op|','
nl|'\n'
op|'['
string|'"twisted/protocols/_c_urlarg.c"'
op|']'
op|')'
op|','
nl|'\n'
nl|'\n'
name|'Extension'
op|'('
string|'"twisted.test.raiser"'
op|','
nl|'\n'
op|'['
string|'"twisted/test/raiser.c"'
op|']'
op|')'
op|','
nl|'\n'
nl|'\n'
name|'Extension'
op|'('
string|'"twisted.python._epoll"'
op|','
nl|'\n'
op|'['
string|'"twisted/python/_epoll.c"'
op|']'
op|','
nl|'\n'
DECL|variable|condition
name|'condition'
op|'='
name|'lambda'
name|'builder'
op|':'
name|'builder'
op|'.'
name|'_check_header'
op|'('
string|'"sys/epoll.h"'
op|')'
op|')'
op|','
nl|'\n'
nl|'\n'
name|'Extension'
op|'('
string|'"twisted.internet.iocpreactor.iocpsupport"'
op|','
nl|'\n'
op|'['
string|'"twisted/internet/iocpreactor/iocpsupport/iocpsupport.c"'
op|','
nl|'\n'
string|'"twisted/internet/iocpreactor/iocpsupport/winsock_pointers.c"'
op|']'
op|','
nl|'\n'
DECL|variable|libraries
name|'libraries'
op|'='
op|'['
string|'"ws2_32"'
op|']'
op|','
nl|'\n'
name|'condition'
op|'='
name|'lambda'
name|'builder'
op|':'
name|'sys'
op|'.'
name|'platform'
op|'=='
string|'"win32"'
op|')'
op|','
nl|'\n'
nl|'\n'
name|'Extension'
op|'('
string|'"twisted.internet.cfsupport"'
op|','
nl|'\n'
op|'['
string|'"twisted/internet/cfsupport/cfsupport.c"'
op|']'
op|','
nl|'\n'
DECL|variable|extra_compile_args
name|'extra_compile_args'
op|'='
op|'['
string|"'-w'"
op|']'
op|','
nl|'\n'
DECL|variable|extra_link_args
name|'extra_link_args'
op|'='
op|'['
string|"'-framework'"
op|','
string|"'CoreFoundation'"
op|','
nl|'\n'
string|"'-framework'"
op|','
string|"'CoreServices'"
op|','
nl|'\n'
string|"'-framework'"
op|','
string|"'Carbon'"
op|']'
op|','
nl|'\n'
name|'condition'
op|'='
name|'lambda'
name|'builder'
op|':'
name|'sys'
op|'.'
name|'platform'
op|'=='
string|'"darwin"'
op|')'
op|','
nl|'\n'
name|'Extension'
op|'('
string|'"twisted.python._initgroups"'
op|','
nl|'\n'
op|'['
string|'"twisted/python/_initgroups.c"'
op|']'
op|')'
op|','
nl|'\n'
name|'Extension'
op|'('
string|'"twisted.internet._sigchld"'
op|','
nl|'\n'
op|'['
string|'"twisted/internet/_sigchld.c"'
op|']'
op|','
nl|'\n'
name|'condition'
op|'='
name|'lambda'
name|'builder'
op|':'
name|'sys'
op|'.'
name|'platform'
op|'!='
string|'"win32"'
op|')'
op|','
nl|'\n'
op|']'
newline|'\n'
nl|'\n'
comment|'# Figure out which plugins to include: all plugins except subproject ones'
nl|'\n'
DECL|variable|subProjectsPlugins
name|'subProjectsPlugins'
op|'='
op|'['
string|"'twisted_%s.py'"
op|'%'
name|'subProject'
nl|'\n'
name|'for'
name|'subProject'
name|'in'
name|'twisted_subprojects'
op|']'
newline|'\n'
DECL|variable|plugins
name|'plugins'
op|'='
name|'os'
op|'.'
name|'listdir'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'join'
op|'('
nl|'\n'
name|'os'
op|'.'
name|'path'
op|'.'
name|'dirname'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'abspath'
op|'('
name|'copyright'
op|'.'
name|'__file__'
op|')'
op|')'
op|','
string|"'plugins'"
op|')'
op|')'
newline|'\n'
DECL|variable|plugins
name|'plugins'
op|'='
op|'['
name|'plugin'
op|'['
op|':'
op|'-'
number|'3'
op|']'
name|'for'
name|'plugin'
name|'in'
name|'plugins'
name|'if'
name|'plugin'
op|'.'
name|'endswith'
op|'('
string|"'.py'"
op|')'
name|'and'
nl|'\n'
name|'plugin'
name|'not'
name|'in'
name|'subProjectsPlugins'
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
nl|'\n'
DECL|variable|setup_args
name|'setup_args'
op|'='
name|'dict'
op|'('
nl|'\n'
comment|'# metadata'
nl|'\n'
DECL|variable|name
name|'name'
op|'='
string|'"Twisted Core"'
op|','
nl|'\n'
DECL|variable|version
name|'version'
op|'='
name|'copyright'
op|'.'
name|'version'
op|','
nl|'\n'
DECL|variable|description
name|'description'
op|'='
string|'"The core parts of the Twisted networking framework"'
op|','
nl|'\n'
DECL|variable|author
name|'author'
op|'='
string|'"Twisted Matrix Laboratories"'
op|','
nl|'\n'
DECL|variable|author_email
name|'author_email'
op|'='
string|'"twisted-python@twistedmatrix.com"'
op|','
nl|'\n'
DECL|variable|maintainer
name|'maintainer'
op|'='
string|'"Glyph Lefkowitz"'
op|','
nl|'\n'
DECL|variable|url
name|'url'
op|'='
string|'"http://twistedmatrix.com/"'
op|','
nl|'\n'
DECL|variable|license
name|'license'
op|'='
string|'"MIT"'
op|','
nl|'\n'
name|'long_description'
op|'='
string|'"""\\\nThis is the core of Twisted, including:\n * Networking support (twisted.internet)\n * Trial, the unit testing framework (twisted.trial)\n * AMP, the Asynchronous Messaging Protocol (twisted.protocols.amp)\n * Twisted Spread, a remote object system (twisted.spread)\n * Utility code (twisted.python)\n * Basic abstractions that multiple subprojects use\n   (twisted.cred, twisted.application, twisted.plugin)\n * Database connectivity support (twisted.enterprise)\n * A few basic protocols and protocol abstractions (twisted.protocols)\n"""'
op|','
nl|'\n'
nl|'\n'
comment|'# build stuff'
nl|'\n'
DECL|variable|packages
name|'packages'
op|'='
name|'getPackages'
op|'('
string|"'twisted'"
op|','
nl|'\n'
DECL|variable|ignore
name|'ignore'
op|'='
name|'twisted_subprojects'
op|'+'
op|'['
string|"'plugins'"
op|']'
op|')'
op|','
nl|'\n'
DECL|variable|plugins
name|'plugins'
op|'='
name|'plugins'
op|','
nl|'\n'
DECL|variable|data_files
name|'data_files'
op|'='
name|'getDataFiles'
op|'('
string|"'twisted'"
op|','
name|'ignore'
op|'='
name|'twisted_subprojects'
op|')'
op|','
nl|'\n'
DECL|variable|conditionalExtensions
name|'conditionalExtensions'
op|'='
name|'extensions'
op|','
nl|'\n'
DECL|variable|scripts
name|'scripts'
op|'='
name|'getScripts'
op|'('
string|'""'
op|')'
op|','
nl|'\n'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'setup'
op|'('
op|'**'
name|'setup_args'
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
