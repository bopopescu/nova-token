begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
string|'"""Address objects for network connections."""'
newline|'\n'
nl|'\n'
name|'import'
name|'warnings'
op|','
name|'os'
newline|'\n'
name|'from'
name|'zope'
op|'.'
name|'interface'
name|'import'
name|'implements'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
op|'.'
name|'interfaces'
name|'import'
name|'IAddress'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|IPv4Address
name|'class'
name|'IPv4Address'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""\n    Object representing an IPv4 socket endpoint.\n\n    @ivar type: A string describing the type of transport, either \'TCP\' or \'UDP\'.\n    @ivar host: A string containing the dotted-quad IP address.\n    @ivar port: An integer representing the port number.\n    """'
newline|'\n'
nl|'\n'
comment|'# _bwHack is given to old users who think we are a tuple. They expected'
nl|'\n'
comment|'# addr[0] to define the socket type rather than the address family, so'
nl|'\n'
comment|'# the value comes from a different namespace than the new .type value:'
nl|'\n'
nl|'\n'
comment|'#  type = map[_bwHack]'
nl|'\n'
comment|"# map = { 'SSL': 'TCP', 'INET': 'TCP', 'INET_UDP': 'UDP' }"
nl|'\n'
nl|'\n'
name|'implements'
op|'('
name|'IAddress'
op|')'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'type'
op|','
name|'host'
op|','
name|'port'
op|','
name|'_bwHack'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'assert'
name|'type'
name|'in'
op|'('
string|"'TCP'"
op|','
string|"'UDP'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'type'
op|'='
name|'type'
newline|'\n'
name|'self'
op|'.'
name|'host'
op|'='
name|'host'
newline|'\n'
name|'self'
op|'.'
name|'port'
op|'='
name|'port'
newline|'\n'
name|'self'
op|'.'
name|'_bwHack'
op|'='
name|'_bwHack'
newline|'\n'
nl|'\n'
DECL|member|__getitem__
dedent|''
name|'def'
name|'__getitem__'
op|'('
name|'self'
op|','
name|'index'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'warnings'
op|'.'
name|'warn'
op|'('
string|'"IPv4Address.__getitem__ is deprecated.  Use attributes instead."'
op|','
nl|'\n'
name|'category'
op|'='
name|'DeprecationWarning'
op|','
name|'stacklevel'
op|'='
number|'2'
op|')'
newline|'\n'
name|'return'
op|'('
name|'self'
op|'.'
name|'_bwHack'
name|'or'
name|'self'
op|'.'
name|'type'
op|','
name|'self'
op|'.'
name|'host'
op|','
name|'self'
op|'.'
name|'port'
op|')'
op|'.'
name|'__getitem__'
op|'('
name|'index'
op|')'
newline|'\n'
nl|'\n'
DECL|member|__getslice__
dedent|''
name|'def'
name|'__getslice__'
op|'('
name|'self'
op|','
name|'start'
op|','
name|'stop'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'warnings'
op|'.'
name|'warn'
op|'('
string|'"IPv4Address.__getitem__ is deprecated.  Use attributes instead."'
op|','
nl|'\n'
name|'category'
op|'='
name|'DeprecationWarning'
op|','
name|'stacklevel'
op|'='
number|'2'
op|')'
newline|'\n'
name|'return'
op|'('
name|'self'
op|'.'
name|'_bwHack'
name|'or'
name|'self'
op|'.'
name|'type'
op|','
name|'self'
op|'.'
name|'host'
op|','
name|'self'
op|'.'
name|'port'
op|')'
op|'['
name|'start'
op|':'
name|'stop'
op|']'
newline|'\n'
nl|'\n'
DECL|member|__eq__
dedent|''
name|'def'
name|'__eq__'
op|'('
name|'self'
op|','
name|'other'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'isinstance'
op|'('
name|'other'
op|','
name|'tuple'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'tuple'
op|'('
name|'self'
op|')'
op|'=='
name|'other'
newline|'\n'
dedent|''
name|'elif'
name|'isinstance'
op|'('
name|'other'
op|','
name|'IPv4Address'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'a'
op|'='
op|'('
name|'self'
op|'.'
name|'type'
op|','
name|'self'
op|'.'
name|'host'
op|','
name|'self'
op|'.'
name|'port'
op|')'
newline|'\n'
name|'b'
op|'='
op|'('
name|'other'
op|'.'
name|'type'
op|','
name|'other'
op|'.'
name|'host'
op|','
name|'other'
op|'.'
name|'port'
op|')'
newline|'\n'
name|'return'
name|'a'
op|'=='
name|'b'
newline|'\n'
dedent|''
name|'return'
name|'False'
newline|'\n'
nl|'\n'
DECL|member|__str__
dedent|''
name|'def'
name|'__str__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'IPv4Address(%s, %r, %d)'"
op|'%'
op|'('
name|'self'
op|'.'
name|'type'
op|','
name|'self'
op|'.'
name|'host'
op|','
name|'self'
op|'.'
name|'port'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|UNIXAddress
dedent|''
dedent|''
name|'class'
name|'UNIXAddress'
op|'('
name|'object'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""\n    Object representing a UNIX socket endpoint.\n\n    @ivar name: The filename associated with this socket.\n    @type name: C{str}\n    """'
newline|'\n'
nl|'\n'
name|'implements'
op|'('
name|'IAddress'
op|')'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'name'
op|','
name|'_bwHack'
op|'='
string|"'UNIX'"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'name'
op|'='
name|'name'
newline|'\n'
name|'self'
op|'.'
name|'_bwHack'
op|'='
name|'_bwHack'
newline|'\n'
nl|'\n'
DECL|member|__getitem__
dedent|''
name|'def'
name|'__getitem__'
op|'('
name|'self'
op|','
name|'index'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'warnings'
op|'.'
name|'warn'
op|'('
string|'"UNIXAddress.__getitem__ is deprecated.  Use attributes instead."'
op|','
nl|'\n'
name|'category'
op|'='
name|'DeprecationWarning'
op|','
name|'stacklevel'
op|'='
number|'2'
op|')'
newline|'\n'
name|'return'
op|'('
name|'self'
op|'.'
name|'_bwHack'
op|','
name|'self'
op|'.'
name|'name'
op|')'
op|'.'
name|'__getitem__'
op|'('
name|'index'
op|')'
newline|'\n'
nl|'\n'
DECL|member|__getslice__
dedent|''
name|'def'
name|'__getslice__'
op|'('
name|'self'
op|','
name|'start'
op|','
name|'stop'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'warnings'
op|'.'
name|'warn'
op|'('
string|'"UNIXAddress.__getitem__ is deprecated.  Use attributes instead."'
op|','
nl|'\n'
name|'category'
op|'='
name|'DeprecationWarning'
op|','
name|'stacklevel'
op|'='
number|'2'
op|')'
newline|'\n'
name|'return'
op|'('
name|'self'
op|'.'
name|'_bwHack'
op|','
name|'self'
op|'.'
name|'name'
op|')'
op|'['
name|'start'
op|':'
name|'stop'
op|']'
newline|'\n'
nl|'\n'
DECL|member|__eq__
dedent|''
name|'def'
name|'__eq__'
op|'('
name|'self'
op|','
name|'other'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'isinstance'
op|'('
name|'other'
op|','
name|'tuple'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'tuple'
op|'('
name|'self'
op|')'
op|'=='
name|'other'
newline|'\n'
dedent|''
name|'elif'
name|'isinstance'
op|'('
name|'other'
op|','
name|'UNIXAddress'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'try'
op|':'
newline|'\n'
indent|'                '
name|'return'
name|'os'
op|'.'
name|'path'
op|'.'
name|'samefile'
op|'('
name|'self'
op|'.'
name|'name'
op|','
name|'other'
op|'.'
name|'name'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'OSError'
op|':'
newline|'\n'
indent|'                '
name|'pass'
newline|'\n'
dedent|''
dedent|''
name|'return'
name|'False'
newline|'\n'
nl|'\n'
DECL|member|__str__
dedent|''
name|'def'
name|'__str__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|"'UNIXSocket(%r)'"
op|'%'
op|'('
name|'self'
op|'.'
name|'name'
op|','
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
comment|'# These are for buildFactory backwards compatability due to'
nl|'\n'
comment|'# stupidity-induced inconsistency.'
nl|'\n'
nl|'\n'
DECL|class|_ServerFactoryIPv4Address
dedent|''
dedent|''
name|'class'
name|'_ServerFactoryIPv4Address'
op|'('
name|'IPv4Address'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Backwards compatability hack. Just like IPv4Address in practice."""'
newline|'\n'
nl|'\n'
DECL|member|__eq__
name|'def'
name|'__eq__'
op|'('
name|'self'
op|','
name|'other'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'isinstance'
op|'('
name|'other'
op|','
name|'tuple'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'warnings'
op|'.'
name|'warn'
op|'('
string|'"IPv4Address.__getitem__ is deprecated.  Use attributes instead."'
op|','
nl|'\n'
name|'category'
op|'='
name|'DeprecationWarning'
op|','
name|'stacklevel'
op|'='
number|'2'
op|')'
newline|'\n'
name|'return'
op|'('
name|'self'
op|'.'
name|'host'
op|','
name|'self'
op|'.'
name|'port'
op|')'
op|'=='
name|'other'
newline|'\n'
dedent|''
name|'elif'
name|'isinstance'
op|'('
name|'other'
op|','
name|'IPv4Address'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'a'
op|'='
op|'('
name|'self'
op|'.'
name|'type'
op|','
name|'self'
op|'.'
name|'host'
op|','
name|'self'
op|'.'
name|'port'
op|')'
newline|'\n'
name|'b'
op|'='
op|'('
name|'other'
op|'.'
name|'type'
op|','
name|'other'
op|'.'
name|'host'
op|','
name|'other'
op|'.'
name|'port'
op|')'
newline|'\n'
name|'return'
name|'a'
op|'=='
name|'b'
newline|'\n'
dedent|''
name|'return'
name|'False'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
