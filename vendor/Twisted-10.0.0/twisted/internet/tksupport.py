begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
string|'"""\nThis module integrates Tkinter with twisted.internet\'s mainloop.\n\nMaintainer: Itamar Shtull-Trauring\n\nTo use, do::\n\n    | tksupport.install(rootWidget)\n\nand then run your reactor as usual - do *not* call Tk\'s mainloop(),\nuse Twisted\'s regular mechanism for running the event loop.\n\nLikewise, to stop your program you will need to stop Twisted\'s\nevent loop. For example, if you want closing your root widget to\nstop Twisted::\n\n    | root.protocol(\'WM_DELETE_WINDOW\', reactor.stop)\n\n"""'
newline|'\n'
nl|'\n'
comment|'# system imports'
nl|'\n'
name|'import'
name|'Tkinter'
op|','
name|'tkSimpleDialog'
op|','
name|'tkMessageBox'
newline|'\n'
nl|'\n'
comment|'# twisted imports'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'log'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'task'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|variable|_task
name|'_task'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|function|install
name|'def'
name|'install'
op|'('
name|'widget'
op|','
name|'ms'
op|'='
number|'10'
op|','
name|'reactor'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Install a Tkinter.Tk() object into the reactor."""'
newline|'\n'
name|'installTkFunctions'
op|'('
op|')'
newline|'\n'
name|'global'
name|'_task'
newline|'\n'
name|'_task'
op|'='
name|'task'
op|'.'
name|'LoopingCall'
op|'('
name|'widget'
op|'.'
name|'update'
op|')'
newline|'\n'
name|'_task'
op|'.'
name|'start'
op|'('
name|'ms'
op|'/'
number|'1000.0'
op|','
name|'False'
op|')'
newline|'\n'
nl|'\n'
DECL|function|uninstall
dedent|''
name|'def'
name|'uninstall'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Remove the root Tk widget from the reactor.\n\n    Call this before destroy()ing the root widget.\n    """'
newline|'\n'
name|'global'
name|'_task'
newline|'\n'
name|'_task'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
name|'_task'
op|'='
name|'None'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|installTkFunctions
dedent|''
name|'def'
name|'installTkFunctions'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'import'
name|'twisted'
op|'.'
name|'python'
op|'.'
name|'util'
newline|'\n'
name|'twisted'
op|'.'
name|'python'
op|'.'
name|'util'
op|'.'
name|'getPassword'
op|'='
name|'getPassword'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|getPassword
dedent|''
name|'def'
name|'getPassword'
op|'('
name|'prompt'
op|'='
string|"''"
op|','
name|'confirm'
op|'='
number|'0'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'while'
number|'1'
op|':'
newline|'\n'
indent|'        '
name|'try1'
op|'='
name|'tkSimpleDialog'
op|'.'
name|'askstring'
op|'('
string|"'Password Dialog'"
op|','
name|'prompt'
op|','
name|'show'
op|'='
string|"'*'"
op|')'
newline|'\n'
name|'if'
name|'not'
name|'confirm'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'try1'
newline|'\n'
dedent|''
name|'try2'
op|'='
name|'tkSimpleDialog'
op|'.'
name|'askstring'
op|'('
string|"'Password Dialog'"
op|','
string|"'Confirm Password'"
op|','
name|'show'
op|'='
string|"'*'"
op|')'
newline|'\n'
name|'if'
name|'try1'
op|'=='
name|'try2'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'try1'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'tkMessageBox'
op|'.'
name|'showerror'
op|'('
string|"'Password Mismatch'"
op|','
string|"'Passwords did not match, starting over'"
op|')'
newline|'\n'
nl|'\n'
DECL|variable|__all__
dedent|''
dedent|''
dedent|''
name|'__all__'
op|'='
op|'['
string|'"install"'
op|','
string|'"uninstall"'
op|']'
newline|'\n'
endmarker|''
end_unit
