begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
string|'"""\nSerial Port Protocol\n"""'
newline|'\n'
nl|'\n'
comment|'# system imports'
nl|'\n'
name|'import'
name|'os'
op|','
name|'sys'
newline|'\n'
nl|'\n'
comment|'# all of them require pyserial at the moment, so check that first'
nl|'\n'
name|'import'
name|'serial'
newline|'\n'
name|'from'
name|'serial'
name|'import'
name|'PARITY_NONE'
op|','
name|'PARITY_EVEN'
op|','
name|'PARITY_ODD'
newline|'\n'
name|'from'
name|'serial'
name|'import'
name|'STOPBITS_ONE'
op|','
name|'STOPBITS_TWO'
newline|'\n'
name|'from'
name|'serial'
name|'import'
name|'FIVEBITS'
op|','
name|'SIXBITS'
op|','
name|'SEVENBITS'
op|','
name|'EIGHTBITS'
newline|'\n'
nl|'\n'
comment|'# common code for serial ports'
nl|'\n'
DECL|class|BaseSerialPort
name|'class'
name|'BaseSerialPort'
op|':'
newline|'\n'
DECL|member|setBaudRate
indent|'    '
name|'def'
name|'setBaudRate'
op|'('
name|'self'
op|','
name|'baudrate'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'hasattr'
op|'('
name|'self'
op|'.'
name|'_serial'
op|','
string|'"setBaudrate"'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'setBaudrate'
op|'('
name|'baudrate'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'setBaudRate'
op|'('
name|'baudrate'
op|')'
newline|'\n'
nl|'\n'
DECL|member|inWaiting
dedent|''
dedent|''
name|'def'
name|'inWaiting'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'inWaiting'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|flushInput
dedent|''
name|'def'
name|'flushInput'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'flushInput'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|flushOutput
dedent|''
name|'def'
name|'flushOutput'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'flushOutput'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|sendBreak
dedent|''
name|'def'
name|'sendBreak'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'sendBreak'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|getDSR
dedent|''
name|'def'
name|'getDSR'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'getDSR'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|getCD
dedent|''
name|'def'
name|'getCD'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'getCD'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|getRI
dedent|''
name|'def'
name|'getRI'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'getRI'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|getCTS
dedent|''
name|'def'
name|'getCTS'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'getCTS'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|setDTR
dedent|''
name|'def'
name|'setDTR'
op|'('
name|'self'
op|','
name|'on'
op|'='
number|'1'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'setDTR'
op|'('
name|'on'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setRTS
dedent|''
name|'def'
name|'setRTS'
op|'('
name|'self'
op|','
name|'on'
op|'='
number|'1'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_serial'
op|'.'
name|'setRTS'
op|'('
name|'on'
op|')'
newline|'\n'
nl|'\n'
DECL|class|SerialPort
dedent|''
dedent|''
name|'class'
name|'SerialPort'
op|'('
name|'BaseSerialPort'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'pass'
newline|'\n'
nl|'\n'
comment|'# replace SerialPort with appropriate serial port'
nl|'\n'
dedent|''
name|'if'
name|'os'
op|'.'
name|'name'
op|'=='
string|"'posix'"
op|':'
newline|'\n'
indent|'    '
name|'from'
name|'twisted'
op|'.'
name|'internet'
op|'.'
name|'_posixserialport'
name|'import'
name|'SerialPort'
newline|'\n'
dedent|''
name|'elif'
name|'os'
op|'.'
name|'name'
op|'=='
string|"'java'"
op|':'
newline|'\n'
indent|'    '
name|'from'
name|'twisted'
op|'.'
name|'internet'
op|'.'
name|'_javaserialport'
name|'import'
name|'SerialPort'
newline|'\n'
dedent|''
name|'elif'
name|'sys'
op|'.'
name|'platform'
op|'=='
string|"'win32'"
op|':'
newline|'\n'
indent|'    '
name|'from'
name|'twisted'
op|'.'
name|'internet'
op|'.'
name|'_win32serialport'
name|'import'
name|'SerialPort'
newline|'\n'
dedent|''
endmarker|''
end_unit
