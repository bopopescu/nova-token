begin_unit
begin_comment
comment|/* Generated by Pyrex 0.9.6.4 on Tue Mar 18 10:18:51 2008 */
end_comment
begin_define
DECL|macro|PY_SSIZE_T_CLEAN
define|#
directive|define
name|PY_SSIZE_T_CLEAN
end_define
begin_include
include|#
directive|include
file|"Python.h"
end_include
begin_include
include|#
directive|include
file|"structmember.h"
end_include
begin_ifndef
ifndef|#
directive|ifndef
name|PY_LONG_LONG
end_ifndef
begin_define
DECL|macro|PY_LONG_LONG
define|#
directive|define
name|PY_LONG_LONG
value|LONG_LONG
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_if
if|#
directive|if
name|PY_VERSION_HEX
operator|<
literal|0x02050000
end_if
begin_typedef
DECL|typedef|Py_ssize_t
typedef|typedef
name|int
name|Py_ssize_t
typedef|;
end_typedef
begin_define
DECL|macro|PY_SSIZE_T_MAX
define|#
directive|define
name|PY_SSIZE_T_MAX
value|INT_MAX
end_define
begin_define
DECL|macro|PY_SSIZE_T_MIN
define|#
directive|define
name|PY_SSIZE_T_MIN
value|INT_MIN
end_define
begin_define
DECL|macro|PyInt_FromSsize_t
define|#
directive|define
name|PyInt_FromSsize_t
parameter_list|(
name|z
parameter_list|)
value|PyInt_FromLong(z)
end_define
begin_define
DECL|macro|PyInt_AsSsize_t
define|#
directive|define
name|PyInt_AsSsize_t
parameter_list|(
name|o
parameter_list|)
value|PyInt_AsLong(o)
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_ifndef
ifndef|#
directive|ifndef
name|WIN32
end_ifndef
begin_ifndef
ifndef|#
directive|ifndef
name|__stdcall
end_ifndef
begin_define
DECL|macro|__stdcall
define|#
directive|define
name|__stdcall
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_ifndef
ifndef|#
directive|ifndef
name|__cdecl
end_ifndef
begin_define
DECL|macro|__cdecl
define|#
directive|define
name|__cdecl
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_endif
endif|#
directive|endif
end_endif
begin_ifdef
ifdef|#
directive|ifdef
name|__cplusplus
end_ifdef
begin_define
DECL|macro|__PYX_EXTERN_C
define|#
directive|define
name|__PYX_EXTERN_C
value|extern "C"
end_define
begin_else
else|#
directive|else
end_else
begin_define
DECL|macro|__PYX_EXTERN_C
define|#
directive|define
name|__PYX_EXTERN_C
value|extern
end_define
begin_endif
endif|#
directive|endif
end_endif
begin_include
include|#
directive|include
file|<math.h>
end_include
begin_include
include|#
directive|include
file|"io.h"
end_include
begin_include
include|#
directive|include
file|"errno.h"
end_include
begin_include
include|#
directive|include
file|"winsock2.h"
end_include
begin_include
include|#
directive|include
file|"windows.h"
end_include
begin_include
include|#
directive|include
file|"python.h"
end_include
begin_include
include|#
directive|include
file|"string.h"
end_include
begin_include
include|#
directive|include
file|"winsock_pointers.h"
end_include
begin_typedef
DECL|member|p
DECL|member|s
DECL|typedef|__Pyx_InternTabEntry
typedef|typedef
struct|struct
block|{
name|PyObject
modifier|*
modifier|*
name|p
decl_stmt|;
name|char
modifier|*
name|s
decl_stmt|;
block|}
name|__Pyx_InternTabEntry
typedef|;
end_typedef
begin_comment
DECL|member|p
DECL|member|s
DECL|typedef|__Pyx_InternTabEntry
comment|/*proto*/
end_comment
begin_typedef
DECL|member|p
DECL|member|s
DECL|member|n
DECL|typedef|__Pyx_StringTabEntry
typedef|typedef
struct|struct
block|{
name|PyObject
modifier|*
modifier|*
name|p
decl_stmt|;
name|char
modifier|*
name|s
decl_stmt|;
name|long
name|n
decl_stmt|;
block|}
name|__Pyx_StringTabEntry
typedef|;
end_typedef
begin_comment
DECL|member|p
DECL|member|s
DECL|member|n
DECL|typedef|__Pyx_StringTabEntry
comment|/*proto*/
end_comment
begin_decl_stmt
DECL|variable|__pyx_m
specifier|static
name|PyObject
modifier|*
name|__pyx_m
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_b
specifier|static
name|PyObject
modifier|*
name|__pyx_b
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_lineno
specifier|static
name|int
name|__pyx_lineno
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_filename
specifier|static
name|char
modifier|*
name|__pyx_filename
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_f
specifier|static
name|char
modifier|*
modifier|*
name|__pyx_f
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__Pyx_CreateClass
parameter_list|(
name|PyObject
modifier|*
name|bases
parameter_list|,
name|PyObject
modifier|*
name|dict
parameter_list|,
name|PyObject
modifier|*
name|name
parameter_list|,
name|char
modifier|*
name|modname
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_GetStarArgs
parameter_list|(
name|PyObject
modifier|*
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
modifier|*
name|kwds
parameter_list|,
name|char
modifier|*
name|kwd_list
index|[]
parameter_list|,
name|Py_ssize_t
name|nargs
parameter_list|,
name|PyObject
modifier|*
modifier|*
name|args2
parameter_list|,
name|PyObject
modifier|*
modifier|*
name|kwds2
parameter_list|,
name|char
name|rqd_kwds
index|[]
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__Pyx_Import
parameter_list|(
name|PyObject
modifier|*
name|name
parameter_list|,
name|PyObject
modifier|*
name|from_list
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__Pyx_GetName
parameter_list|(
name|PyObject
modifier|*
name|dict
parameter_list|,
name|PyObject
modifier|*
name|name
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|void
name|__Pyx_Raise
parameter_list|(
name|PyObject
modifier|*
name|type
parameter_list|,
name|PyObject
modifier|*
name|value
parameter_list|,
name|PyObject
modifier|*
name|tb
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__Pyx_UnpackItem
parameter_list|(
name|PyObject
modifier|*
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_EndUnpack
parameter_list|(
name|PyObject
modifier|*
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_InternStrings
parameter_list|(
name|__Pyx_InternTabEntry
modifier|*
name|t
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__Pyx_InitStrings
parameter_list|(
name|__Pyx_StringTabEntry
modifier|*
name|t
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|void
name|__Pyx_AddTraceback
parameter_list|(
name|char
modifier|*
name|funcname
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_comment
comment|/* Declarations from iocpsupport */
end_comment
begin_typedef
DECL|typedef|__pyx_t_11iocpsupport_size_t
typedef|typedef
name|int
name|__pyx_t_11iocpsupport_size_t
typedef|;
end_typedef
begin_typedef
DECL|typedef|__pyx_t_11iocpsupport_HANDLE
typedef|typedef
name|unsigned
name|long
name|__pyx_t_11iocpsupport_HANDLE
typedef|;
end_typedef
begin_typedef
DECL|typedef|__pyx_t_11iocpsupport_SOCKET
typedef|typedef
name|unsigned
name|long
name|__pyx_t_11iocpsupport_SOCKET
typedef|;
end_typedef
begin_typedef
DECL|typedef|__pyx_t_11iocpsupport_DWORD
typedef|typedef
name|unsigned
name|long
name|__pyx_t_11iocpsupport_DWORD
typedef|;
end_typedef
begin_typedef
DECL|typedef|__pyx_t_11iocpsupport_ULONG_PTR
typedef|typedef
name|unsigned
name|long
name|__pyx_t_11iocpsupport_ULONG_PTR
typedef|;
end_typedef
begin_typedef
DECL|typedef|__pyx_t_11iocpsupport_BOOL
typedef|typedef
name|int
name|__pyx_t_11iocpsupport_BOOL
typedef|;
end_typedef
begin_struct
DECL|struct|__pyx_t_11iocpsupport_myOVERLAPPED
struct|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
block|{
DECL|member|ov
name|OVERLAPPED
name|ov
decl_stmt|;
DECL|member|obj
name|struct
name|PyObject
modifier|*
name|obj
decl_stmt|;
block|}
struct|;
end_struct
begin_struct
DECL|struct|__pyx_obj_11iocpsupport_CompletionPort
struct|struct
name|__pyx_obj_11iocpsupport_CompletionPort
block|{
name|PyObject_HEAD
DECL|member|port
name|__pyx_t_11iocpsupport_HANDLE
name|port
decl_stmt|;
block|}
struct|;
end_struct
begin_decl_stmt
DECL|variable|__pyx_ptype_11iocpsupport_CompletionPort
specifier|static
name|PyTypeObject
modifier|*
name|__pyx_ptype_11iocpsupport_CompletionPort
init|=
literal|0
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_k2
specifier|static
name|long
name|__pyx_k2
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_k5
specifier|static
name|unsigned
name|long
name|__pyx_k5
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_k6
specifier|static
name|unsigned
name|long
name|__pyx_k6
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_k7
specifier|static
name|unsigned
name|long
name|__pyx_k7
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_f_11iocpsupport_makeOV
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|void
name|__pyx_f_11iocpsupport_raise_error
parameter_list|(
name|int
parameter_list|,
name|PyObject
modifier|*
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport__makesockaddr
parameter_list|(
name|struct
name|sockaddr
modifier|*
parameter_list|,
name|int
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_fillinetaddr
parameter_list|(
name|struct
name|sockaddr_in
modifier|*
parameter_list|,
name|PyObject
modifier|*
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
specifier|static
name|int
name|__pyx_f_11iocpsupport_getAddrFamily
parameter_list|(
name|__pyx_t_11iocpsupport_SOCKET
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_comment
comment|/* Implementation of iocpsupport */
end_comment
begin_decl_stmt
DECL|variable|__pyx_k4
specifier|static
name|char
name|__pyx_k4
index|[]
init|=
literal|"Failed to initialize Winsock function vectors"
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_Event
specifier|static
name|PyObject
modifier|*
name|__pyx_n_Event
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n___init__
specifier|static
name|PyObject
modifier|*
name|__pyx_n___init__
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_socket
specifier|static
name|PyObject
modifier|*
name|__pyx_n_socket
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_ValueError
specifier|static
name|PyObject
modifier|*
name|__pyx_n_ValueError
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_have_connectex
specifier|static
name|PyObject
modifier|*
name|__pyx_n_have_connectex
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_k4p
specifier|static
name|PyObject
modifier|*
name|__pyx_k4p
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_MemoryError
specifier|static
name|PyObject
modifier|*
name|__pyx_n_MemoryError
decl_stmt|;
end_decl_stmt
begin_function
DECL|function|__pyx_f_11iocpsupport_makeOV
specifier|static
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_f_11iocpsupport_makeOV
parameter_list|(
name|void
parameter_list|)
block|{
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_v_res
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_r
decl_stmt|;
name|void
modifier|*
name|__pyx_1
decl_stmt|;
name|int
name|__pyx_2
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":110 */
name|__pyx_1
operator|=
name|PyMem_Malloc
argument_list|(
operator|(
sizeof|sizeof
argument_list|(
expr|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
argument_list|)
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
operator|==
name|NULL
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|110
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_v_res
operator|=
operator|(
operator|(
expr|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
operator|*
operator|)
name|__pyx_1
operator|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":111 */
name|__pyx_2
operator|=
operator|(
operator|!
operator|(
name|__pyx_v_res
operator|!=
literal|0
operator|)
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_2
condition|)
block|{
name|__pyx_3
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_MemoryError
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|112
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__Pyx_Raise
argument_list|(
name|__pyx_3
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|112
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":113 */
name|memset
argument_list|(
name|__pyx_v_res
argument_list|,
literal|0
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
expr|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
argument_list|)
operator|)
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":114 */
name|__pyx_r
operator|=
name|__pyx_v_res
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.makeOV"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
name|NULL
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_n_WindowsError
specifier|static
name|PyObject
modifier|*
name|__pyx_n_WindowsError
decl_stmt|;
end_decl_stmt
begin_function
DECL|function|__pyx_f_11iocpsupport_raise_error
specifier|static
name|void
name|__pyx_f_11iocpsupport_raise_error
parameter_list|(
name|int
name|__pyx_v_err
parameter_list|,
name|PyObject
modifier|*
name|__pyx_v_message
parameter_list|)
block|{
name|int
name|__pyx_1
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_message
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":117 */
name|__pyx_1
operator|=
operator|(
operator|!
name|__pyx_v_err
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_v_err
operator|=
name|GetLastError
argument_list|()
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":119 */
name|__pyx_2
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_WindowsError
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|119
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_err
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|119
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|119
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_INCREF
argument_list|(
name|__pyx_v_message
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_4
argument_list|,
literal|0
argument_list|,
name|__pyx_v_message
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_4
argument_list|,
literal|1
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
name|PyObject_CallObject
argument_list|(
name|__pyx_2
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|119
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__Pyx_Raise
argument_list|(
name|__pyx_3
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|119
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.raise_error"
argument_list|)
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_message
argument_list|)
expr_stmt|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_n_callback
specifier|static
name|PyObject
modifier|*
name|__pyx_n_callback
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_owner
specifier|static
name|PyObject
modifier|*
name|__pyx_n_owner
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_False
specifier|static
name|PyObject
modifier|*
name|__pyx_n_False
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_ignore
specifier|static
name|PyObject
modifier|*
name|__pyx_n_ignore
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_n_items
specifier|static
name|PyObject
modifier|*
name|__pyx_n_items
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_5Event___init__
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_decl_stmt
DECL|variable|__pyx_mdef_11iocpsupport_5Event___init__
specifier|static
name|PyMethodDef
name|__pyx_mdef_11iocpsupport_5Event___init__
init|=
block|{
literal|"__init__"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_5Event___init__
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
decl_stmt|;
end_decl_stmt
begin_function
DECL|function|__pyx_f_11iocpsupport_5Event___init__
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_5Event___init__
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|PyObject
modifier|*
name|__pyx_v_self
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_callback
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_owner
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_kw
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_k
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_v
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_1
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|int
name|__pyx_4
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"self"
block|,
literal|"callback"
block|,
literal|"owner"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
name|__Pyx_GetStarArgs
argument_list|(
operator|&
name|__pyx_args
argument_list|,
operator|&
name|__pyx_kwds
argument_list|,
name|__pyx_argnames
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
operator|&
name|__pyx_v_kw
argument_list|,
literal|0
argument_list|)
operator|<
literal|0
condition|)
return|return
literal|0
return|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"OOO"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_self
argument_list|,
operator|&
name|__pyx_v_callback
argument_list|,
operator|&
name|__pyx_v_owner
argument_list|)
condition|)
block|{
name|Py_XDECREF
argument_list|(
name|__pyx_args
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_kwds
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_v_kw
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_callback
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_owner
argument_list|)
expr_stmt|;
name|__pyx_v_k
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
name|__pyx_v_v
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":123 */
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_v_self
argument_list|,
name|__pyx_n_callback
argument_list|,
name|__pyx_v_callback
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|123
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":124 */
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_v_self
argument_list|,
name|__pyx_n_owner
argument_list|,
name|__pyx_v_owner
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|124
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":125 */
name|__pyx_1
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_False
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|125
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_v_self
argument_list|,
name|__pyx_n_ignore
argument_list|,
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|125
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":126 */
name|__pyx_1
operator|=
name|PyObject_GetAttr
argument_list|(
name|__pyx_v_kw
argument_list|,
name|__pyx_n_items
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|126
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_2
operator|=
name|PyObject_CallObject
argument_list|(
name|__pyx_1
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|126
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
name|__pyx_1
operator|=
name|PyObject_GetIter
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|126
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
for|for
control|(
init|;
condition|;
control|)
block|{
name|__pyx_2
operator|=
name|PyIter_Next
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|126
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
break|break;
block|}
name|__pyx_3
operator|=
name|PyObject_GetIter
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|126
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|__pyx_2
operator|=
name|__Pyx_UnpackItem
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|126
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_v_k
argument_list|)
expr_stmt|;
name|__pyx_v_k
operator|=
name|__pyx_2
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|__pyx_2
operator|=
name|__Pyx_UnpackItem
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|126
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_v_v
argument_list|)
expr_stmt|;
name|__pyx_v_v
operator|=
name|__pyx_2
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|__Pyx_EndUnpack
argument_list|(
name|__pyx_3
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|126
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
name|PyObject_SetAttr
argument_list|(
name|__pyx_v_self
argument_list|,
name|__pyx_v_k
argument_list|,
name|__pyx_v_v
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_4
operator|==
operator|-
literal|1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|127
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.Event.__init__"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_v_kw
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_k
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_v
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_callback
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_owner
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_args
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_kwds
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_n_CreateIoCompletionPort
specifier|static
name|PyObject
modifier|*
name|__pyx_n_CreateIoCompletionPort
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|int
name|__pyx_f_11iocpsupport_14CompletionPort___init__
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_14CompletionPort___init__
specifier|static
name|int
name|__pyx_f_11iocpsupport_14CompletionPort___init__
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|__pyx_t_11iocpsupport_HANDLE
name|__pyx_v_res
decl_stmt|;
name|int
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|""
argument_list|,
name|__pyx_argnames
argument_list|)
condition|)
return|return
operator|-
literal|1
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":133 */
name|__pyx_v_res
operator|=
name|CreateIoCompletionPort
argument_list|(
name|INVALID_HANDLE_VALUE
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":134 */
name|__pyx_1
operator|=
operator|(
operator|!
name|__pyx_v_res
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_f_11iocpsupport_raise_error
argument_list|(
literal|0
argument_list|,
name|__pyx_n_CreateIoCompletionPort
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|135
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":136 */
operator|(
operator|(
expr|struct
name|__pyx_obj_11iocpsupport_CompletionPort
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|port
operator|=
name|__pyx_v_res
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.CompletionPort.__init__"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
operator|-
literal|1
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_14CompletionPort_addHandle
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_14CompletionPort_addHandle
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_14CompletionPort_addHandle
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|long
name|__pyx_v_handle
decl_stmt|;
name|long
name|__pyx_v_key
decl_stmt|;
name|__pyx_t_11iocpsupport_HANDLE
name|__pyx_v_res
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"handle"
block|,
literal|"key"
block|,
literal|0
block|}
decl_stmt|;
name|__pyx_v_key
operator|=
name|__pyx_k2
expr_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"l|l"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_handle
argument_list|,
operator|&
name|__pyx_v_key
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":140 */
name|__pyx_v_res
operator|=
name|CreateIoCompletionPort
argument_list|(
name|__pyx_v_handle
argument_list|,
operator|(
operator|(
expr|struct
name|__pyx_obj_11iocpsupport_CompletionPort
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|port
argument_list|,
name|__pyx_v_key
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":141 */
name|__pyx_1
operator|=
operator|(
operator|!
name|__pyx_v_res
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_f_11iocpsupport_raise_error
argument_list|(
literal|0
argument_list|,
name|__pyx_n_CreateIoCompletionPort
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|142
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.CompletionPort.addHandle"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_14CompletionPort_getEvent
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_14CompletionPort_getEvent
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_14CompletionPort_getEvent
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|long
name|__pyx_v_timeout
decl_stmt|;
name|struct
name|PyThreadState
modifier|*
name|__pyx_v__save
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_bytes
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_key
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_rc
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_v_ov
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_obj
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_5
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"timeout"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"l"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_timeout
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
name|__pyx_v_obj
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":149 */
name|__pyx_v__save
operator|=
name|PyEval_SaveThread
argument_list|()
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":150 */
name|__pyx_v_rc
operator|=
name|GetQueuedCompletionStatus
argument_list|(
operator|(
operator|(
expr|struct
name|__pyx_obj_11iocpsupport_CompletionPort
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|port
argument_list|,
operator|(
operator|&
name|__pyx_v_bytes
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_key
operator|)
argument_list|,
operator|(
operator|(
name|OVERLAPPED
operator|*
operator|*
operator|)
operator|(
operator|&
name|__pyx_v_ov
operator|)
operator|)
argument_list|,
name|__pyx_v_timeout
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":151 */
name|PyEval_RestoreThread
argument_list|(
name|__pyx_v__save
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":153 */
name|__pyx_1
operator|=
operator|(
operator|!
name|__pyx_v_rc
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_v_rc
operator|=
name|GetLastError
argument_list|()
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
block|}
comment|/*else*/
block|{
name|__pyx_v_rc
operator|=
literal|0
expr_stmt|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":158 */
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
name|__pyx_v_obj
operator|=
name|Py_None
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":159 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_ov
operator|!=
literal|0
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":160 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_ov
operator|->
name|obj
operator|!=
literal|0
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":161 */
name|__pyx_2
operator|=
operator|(
name|PyObject
operator|*
operator|)
name|__pyx_v_ov
operator|->
name|obj
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
name|__pyx_v_obj
operator|=
name|__pyx_2
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":162 */
name|Py_DECREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L4
goto|;
block|}
name|__pyx_L4
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":163 */
name|PyMem_Free
argument_list|(
name|__pyx_v_ov
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_L3
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":165 */
name|__pyx_2
operator|=
name|PyLong_FromUnsignedLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|165
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_3
operator|=
name|PyLong_FromUnsignedLong
argument_list|(
name|__pyx_v_bytes
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|165
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyLong_FromUnsignedLong
argument_list|(
name|__pyx_v_key
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|165
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_5
operator|=
name|PyTuple_New
argument_list|(
literal|4
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|165
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|0
argument_list|,
name|__pyx_2
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|1
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|2
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|3
argument_list|,
name|__pyx_v_obj
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_r
operator|=
name|__pyx_5
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.CompletionPort.getEvent"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_n_PostQueuedCompletionStatus
specifier|static
name|PyObject
modifier|*
name|__pyx_n_PostQueuedCompletionStatus
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_14CompletionPort_postEvent
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_14CompletionPort_postEvent
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_14CompletionPort_postEvent
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|unsigned
name|long
name|__pyx_v_bytes
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_key
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_obj
init|=
literal|0
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_v_ov
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_rc
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_2
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"bytes"
block|,
literal|"key"
block|,
literal|"obj"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"kkO"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_bytes
argument_list|,
operator|&
name|__pyx_v_key
argument_list|,
operator|&
name|__pyx_v_obj
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":171 */
name|__pyx_1
operator|=
name|__pyx_v_obj
operator|!=
name|Py_None
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":172 */
name|__pyx_2
operator|=
name|__pyx_f_11iocpsupport_makeOV
argument_list|()
expr_stmt|;
if|if
condition|(
name|__pyx_2
operator|==
name|NULL
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|172
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_v_ov
operator|=
name|__pyx_2
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":173 */
name|Py_INCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":174 */
name|__pyx_v_ov
operator|->
name|obj
operator|=
operator|(
operator|(
expr|struct
name|PyObject
operator|*
operator|)
name|__pyx_v_obj
operator|)
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
block|}
comment|/*else*/
block|{
name|__pyx_v_ov
operator|=
name|NULL
expr_stmt|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":178 */
name|__pyx_v_rc
operator|=
name|PostQueuedCompletionStatus
argument_list|(
operator|(
operator|(
expr|struct
name|__pyx_obj_11iocpsupport_CompletionPort
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|port
argument_list|,
name|__pyx_v_bytes
argument_list|,
name|__pyx_v_key
argument_list|,
operator|(
operator|(
name|OVERLAPPED
operator|*
operator|)
name|__pyx_v_ov
operator|)
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":179 */
name|__pyx_1
operator|=
operator|(
operator|!
name|__pyx_v_rc
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_f_11iocpsupport_raise_error
argument_list|(
literal|0
argument_list|,
name|__pyx_n_PostQueuedCompletionStatus
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|180
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_L3
label|:
empty_stmt|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.CompletionPort.postEvent"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_14CompletionPort___del__
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_14CompletionPort___del__
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_14CompletionPort___del__
parameter_list|(
name|PyObject
modifier|*
name|__pyx_v_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|""
argument_list|,
name|__pyx_argnames
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
name|CloseHandle
argument_list|(
operator|(
operator|(
expr|struct
name|__pyx_obj_11iocpsupport_CompletionPort
operator|*
operator|)
name|__pyx_v_self
operator|)
operator|->
name|port
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_self
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_makesockaddr
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_makesockaddr
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_makesockaddr
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|PyObject
modifier|*
name|__pyx_v_buff
init|=
literal|0
decl_stmt|;
name|void
modifier|*
name|__pyx_v_mem_buffer
decl_stmt|;
name|int
name|__pyx_v_size
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"buff"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"O"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_buff
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_buff
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":189 */
name|__pyx_1
operator|=
name|PyObject_AsReadBuffer
argument_list|(
name|__pyx_v_buff
argument_list|,
operator|(
operator|&
name|__pyx_v_mem_buffer
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_size
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
operator|==
operator|(
operator|-
literal|1
operator|)
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|189
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":191 */
name|__pyx_2
operator|=
name|__pyx_f_11iocpsupport__makesockaddr
argument_list|(
operator|(
operator|(
expr|struct
name|sockaddr
operator|*
operator|)
name|__pyx_v_mem_buffer
operator|)
argument_list|,
name|__pyx_v_size
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|191
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_r
operator|=
name|__pyx_2
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.makesockaddr"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_buff
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function
DECL|function|__pyx_f_11iocpsupport__makesockaddr
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport__makesockaddr
parameter_list|(
name|struct
name|sockaddr
modifier|*
name|__pyx_v_addr
parameter_list|,
name|int
name|__pyx_v_len
parameter_list|)
block|{
name|struct
name|sockaddr_in
modifier|*
name|__pyx_v_sin
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":195 */
name|__pyx_1
operator|=
operator|(
operator|!
name|__pyx_v_len
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":197 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_addr
operator|->
name|sa_family
operator|==
name|AF_INET
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":198 */
name|__pyx_v_sin
operator|=
operator|(
operator|(
expr|struct
name|sockaddr_in
operator|*
operator|)
name|__pyx_v_addr
operator|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":199 */
name|__pyx_2
operator|=
name|PyString_FromString
argument_list|(
name|inet_ntoa
argument_list|(
name|__pyx_v_sin
operator|->
name|sin_addr
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|199
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|ntohs
argument_list|(
name|__pyx_v_sin
operator|->
name|sin_port
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|199
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|199
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_4
argument_list|,
literal|0
argument_list|,
name|__pyx_2
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_4
argument_list|,
literal|1
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_r
operator|=
name|__pyx_4
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
goto|goto
name|__pyx_L3
goto|;
block|}
comment|/*else*/
block|{
name|__pyx_2
operator|=
name|PyString_FromStringAndSize
argument_list|(
name|__pyx_v_addr
operator|->
name|sa_data
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|__pyx_v_addr
operator|->
name|sa_data
argument_list|)
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|201
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_r
operator|=
name|__pyx_2
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
block|}
name|__pyx_L3
label|:
empty_stmt|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport._makesockaddr"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_k11p
specifier|static
name|PyObject
modifier|*
name|__pyx_k11p
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_k11
specifier|static
name|char
name|__pyx_k11
index|[]
init|=
literal|"invalid IP address"
decl_stmt|;
end_decl_stmt
begin_function
DECL|function|__pyx_f_11iocpsupport_fillinetaddr
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_fillinetaddr
parameter_list|(
name|struct
name|sockaddr_in
modifier|*
name|__pyx_v_dest
parameter_list|,
name|PyObject
modifier|*
name|__pyx_v_addr
parameter_list|)
block|{
name|short
name|__pyx_v_port
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_res
decl_stmt|;
name|char
modifier|*
name|__pyx_v_hoststr
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_host
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_1
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|short
name|__pyx_3
decl_stmt|;
name|char
modifier|*
name|__pyx_4
decl_stmt|;
name|int
name|__pyx_5
decl_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_addr
argument_list|)
expr_stmt|;
name|__pyx_v_host
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":207 */
name|__pyx_1
operator|=
name|PyObject_GetIter
argument_list|(
name|__pyx_v_addr
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|207
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_2
operator|=
name|__Pyx_UnpackItem
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|207
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_v_host
argument_list|)
expr_stmt|;
name|__pyx_v_host
operator|=
name|__pyx_2
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|__pyx_2
operator|=
name|__Pyx_UnpackItem
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|207
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_3
operator|=
name|PyInt_AsLong
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|207
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|__pyx_v_port
operator|=
name|__pyx_3
expr_stmt|;
if|if
condition|(
name|__Pyx_EndUnpack
argument_list|(
name|__pyx_1
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|207
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":209 */
name|__pyx_4
operator|=
name|PyString_AsString
argument_list|(
name|__pyx_v_host
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_4
operator|==
name|NULL
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|209
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_v_hoststr
operator|=
name|__pyx_4
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":210 */
name|__pyx_v_res
operator|=
name|inet_addr
argument_list|(
name|__pyx_v_hoststr
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":211 */
name|__pyx_5
operator|=
operator|(
name|__pyx_v_res
operator|==
name|INADDR_ANY
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_5
condition|)
block|{
name|__pyx_2
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_ValueError
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|212
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__Pyx_Raise
argument_list|(
name|__pyx_2
argument_list|,
name|__pyx_k11p
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|212
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":213 */
name|__pyx_v_dest
operator|->
name|sin_addr
operator|.
name|s_addr
operator|=
name|__pyx_v_res
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":215 */
name|__pyx_v_dest
operator|->
name|sin_port
operator|=
name|htons
argument_list|(
name|__pyx_v_port
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.fillinetaddr"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_host
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_addr
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_AllocateReadBuffer
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_AllocateReadBuffer
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_AllocateReadBuffer
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|int
name|__pyx_v_size
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_1
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"size"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"i"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_size
argument_list|)
condition|)
return|return
literal|0
return|;
name|__pyx_1
operator|=
name|PyBuffer_New
argument_list|(
name|__pyx_v_size
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|218
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_r
operator|=
name|__pyx_1
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.AllocateReadBuffer"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_n_getsockopt
specifier|static
name|PyObject
modifier|*
name|__pyx_n_getsockopt
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_maxAddrLen
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_maxAddrLen
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_maxAddrLen
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|long
name|__pyx_v_s
decl_stmt|;
name|WSAPROTOCOL_INFO
name|__pyx_v_wsa_pi
decl_stmt|;
name|int
name|__pyx_v_size
decl_stmt|;
name|int
name|__pyx_v_rc
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"s"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"l"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_s
argument_list|)
condition|)
return|return
literal|0
return|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":224 */
name|__pyx_v_size
operator|=
operator|(
sizeof|sizeof
argument_list|(
name|__pyx_v_wsa_pi
argument_list|)
operator|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":225 */
name|__pyx_v_rc
operator|=
name|getsockopt
argument_list|(
name|__pyx_v_s
argument_list|,
name|SOL_SOCKET
argument_list|,
name|SO_PROTOCOL_INFO
argument_list|,
operator|(
operator|(
name|char
operator|*
operator|)
operator|(
operator|&
name|__pyx_v_wsa_pi
operator|)
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_size
operator|)
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":226 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_rc
operator|==
name|SOCKET_ERROR
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_f_11iocpsupport_raise_error
argument_list|(
name|WSAGetLastError
argument_list|()
argument_list|,
name|__pyx_n_getsockopt
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|227
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":228 */
name|__pyx_2
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_wsa_pi
operator|.
name|iMaxSockAddr
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|228
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_r
operator|=
name|__pyx_2
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.maxAddrLen"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function
DECL|function|__pyx_f_11iocpsupport_getAddrFamily
specifier|static
name|int
name|__pyx_f_11iocpsupport_getAddrFamily
parameter_list|(
name|__pyx_t_11iocpsupport_SOCKET
name|__pyx_v_s
parameter_list|)
block|{
name|WSAPROTOCOL_INFO
name|__pyx_v_wsa_pi
decl_stmt|;
name|int
name|__pyx_v_size
decl_stmt|;
name|int
name|__pyx_v_rc
decl_stmt|;
name|int
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":234 */
name|__pyx_v_size
operator|=
operator|(
sizeof|sizeof
argument_list|(
name|__pyx_v_wsa_pi
argument_list|)
operator|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":235 */
name|__pyx_v_rc
operator|=
name|getsockopt
argument_list|(
name|__pyx_v_s
argument_list|,
name|SOL_SOCKET
argument_list|,
name|SO_PROTOCOL_INFO
argument_list|,
operator|(
operator|(
name|char
operator|*
operator|)
operator|(
operator|&
name|__pyx_v_wsa_pi
operator|)
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_size
operator|)
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":236 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_rc
operator|==
name|SOCKET_ERROR
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_f_11iocpsupport_raise_error
argument_list|(
name|WSAGetLastError
argument_list|()
argument_list|,
name|__pyx_n_getsockopt
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|237
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":238 */
name|__pyx_r
operator|=
name|__pyx_v_wsa_pi
operator|.
name|iAddressFamily
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.getAddrFamily"
argument_list|)
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_accept
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_accept
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_accept
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|long
name|__pyx_v_listening
decl_stmt|;
name|long
name|__pyx_v_accepting
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_buff
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_obj
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_bytes
decl_stmt|;
name|int
name|__pyx_v_size
decl_stmt|;
name|int
name|__pyx_v_rc
decl_stmt|;
name|void
modifier|*
name|__pyx_v_mem_buffer
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_v_ov
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_2
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"listening"
block|,
literal|"accepting"
block|,
literal|"buff"
block|,
literal|"obj"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"llOO"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_listening
argument_list|,
operator|&
name|__pyx_v_accepting
argument_list|,
operator|&
name|__pyx_v_buff
argument_list|,
operator|&
name|__pyx_v_obj
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_buff
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":11 */
name|__pyx_1
operator|=
name|PyObject_AsWriteBuffer
argument_list|(
name|__pyx_v_buff
argument_list|,
operator|(
operator|&
name|__pyx_v_mem_buffer
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_size
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
operator|==
operator|(
operator|-
literal|1
operator|)
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|1
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|11
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":13 */
name|__pyx_2
operator|=
name|__pyx_f_11iocpsupport_makeOV
argument_list|()
expr_stmt|;
if|if
condition|(
name|__pyx_2
operator|==
name|NULL
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|1
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|13
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_v_ov
operator|=
name|__pyx_2
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":14 */
name|__pyx_1
operator|=
name|__pyx_v_obj
operator|!=
name|Py_None
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_v_ov
operator|->
name|obj
operator|=
operator|(
operator|(
expr|struct
name|PyObject
operator|*
operator|)
name|__pyx_v_obj
operator|)
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":17 */
name|__pyx_v_rc
operator|=
name|lpAcceptEx
argument_list|(
name|__pyx_v_listening
argument_list|,
name|__pyx_v_accepting
argument_list|,
name|__pyx_v_mem_buffer
argument_list|,
literal|0
argument_list|,
operator|(
name|__pyx_v_size
operator|/
literal|2
operator|)
argument_list|,
operator|(
name|__pyx_v_size
operator|/
literal|2
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_bytes
operator|)
argument_list|,
operator|(
operator|(
name|OVERLAPPED
operator|*
operator|)
name|__pyx_v_ov
operator|)
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":19 */
name|__pyx_1
operator|=
operator|(
operator|!
name|__pyx_v_rc
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":20 */
name|__pyx_v_rc
operator|=
name|WSAGetLastError
argument_list|()
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":21 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_rc
operator|!=
name|ERROR_IO_PENDING
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|1
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|22
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_r
operator|=
name|__pyx_3
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
goto|goto
name|__pyx_L4
goto|;
block|}
name|__pyx_L4
label|:
empty_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_L3
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":25 */
name|Py_XINCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":26 */
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|1
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|26
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_r
operator|=
name|__pyx_3
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.accept"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_buff
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_get_accept_addrs
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_get_accept_addrs
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_get_accept_addrs
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|long
name|__pyx_v_s
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_buff
init|=
literal|0
decl_stmt|;
name|int
name|__pyx_v_size
decl_stmt|;
name|int
name|__pyx_v_locallen
decl_stmt|;
name|int
name|__pyx_v_remotelen
decl_stmt|;
name|void
modifier|*
name|__pyx_v_mem_buffer
decl_stmt|;
name|struct
name|sockaddr
modifier|*
name|__pyx_v_localaddr
decl_stmt|;
name|struct
name|sockaddr
modifier|*
name|__pyx_v_remoteaddr
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_5
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"s"
block|,
literal|"buff"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"lO"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_s
argument_list|,
operator|&
name|__pyx_v_buff
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_buff
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":34 */
name|__pyx_1
operator|=
name|PyObject_AsReadBuffer
argument_list|(
name|__pyx_v_buff
argument_list|,
operator|(
operator|&
name|__pyx_v_mem_buffer
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_size
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
operator|==
operator|(
operator|-
literal|1
operator|)
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|1
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|34
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":36 */
name|lpGetAcceptExSockaddrs
argument_list|(
name|__pyx_v_mem_buffer
argument_list|,
literal|0
argument_list|,
operator|(
name|__pyx_v_size
operator|/
literal|2
operator|)
argument_list|,
operator|(
name|__pyx_v_size
operator|/
literal|2
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_localaddr
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_locallen
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_remoteaddr
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_remotelen
operator|)
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\acceptex.pxi":37 */
name|__pyx_2
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_remoteaddr
operator|->
name|sa_family
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|1
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|37
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_3
operator|=
name|__pyx_f_11iocpsupport__makesockaddr
argument_list|(
name|__pyx_v_localaddr
argument_list|,
name|__pyx_v_locallen
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|1
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|37
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|__pyx_f_11iocpsupport__makesockaddr
argument_list|(
name|__pyx_v_remoteaddr
argument_list|,
name|__pyx_v_remotelen
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|1
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|37
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_5
operator|=
name|PyTuple_New
argument_list|(
literal|3
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|1
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|37
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|0
argument_list|,
name|__pyx_2
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|1
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|2
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_r
operator|=
name|__pyx_5
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.get_accept_addrs"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_buff
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_k14p
specifier|static
name|PyObject
modifier|*
name|__pyx_k14p
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_k15p
specifier|static
name|PyObject
modifier|*
name|__pyx_k15p
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_k14
specifier|static
name|char
name|__pyx_k14
index|[]
init|=
literal|"ConnectEx is not available on this system"
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_k15
specifier|static
name|char
name|__pyx_k15
index|[]
init|=
literal|"unsupported address family"
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_connect
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_connect
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_connect
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|long
name|__pyx_v_s
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_addr
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_obj
init|=
literal|0
decl_stmt|;
name|int
name|__pyx_v_family
decl_stmt|;
name|int
name|__pyx_v_rc
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_v_ov
decl_stmt|;
name|struct
name|sockaddr
name|__pyx_v_name
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_1
init|=
literal|0
decl_stmt|;
name|int
name|__pyx_2
decl_stmt|;
name|int
name|__pyx_3
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_4
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"s"
block|,
literal|"addr"
block|,
literal|"obj"
block|,
literal|0
block|}
decl_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"lOO"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_s
argument_list|,
operator|&
name|__pyx_v_addr
argument_list|,
operator|&
name|__pyx_v_obj
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_addr
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":10 */
name|__pyx_1
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_have_connectex
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|10
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_2
operator|=
name|PyObject_IsTrue
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_2
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|10
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
name|__pyx_3
operator|=
operator|(
operator|!
name|__pyx_2
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_3
condition|)
block|{
name|__pyx_1
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_ValueError
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|11
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__Pyx_Raise
argument_list|(
name|__pyx_1
argument_list|,
name|__pyx_k14p
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|11
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":13 */
name|__pyx_2
operator|=
name|__pyx_f_11iocpsupport_getAddrFamily
argument_list|(
name|__pyx_v_s
argument_list|)
expr_stmt|;
if|if
condition|(
name|PyErr_Occurred
argument_list|()
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|13
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_v_family
operator|=
name|__pyx_2
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":14 */
name|__pyx_3
operator|=
operator|(
name|__pyx_v_family
operator|==
name|AF_INET
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_3
condition|)
block|{
name|__pyx_1
operator|=
name|__pyx_f_11iocpsupport_fillinetaddr
argument_list|(
operator|(
operator|(
expr|struct
name|sockaddr_in
operator|*
operator|)
operator|(
operator|&
name|__pyx_v_name
operator|)
operator|)
argument_list|,
name|__pyx_v_addr
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|15
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
comment|/*else*/
block|{
name|__pyx_1
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_ValueError
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|17
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__Pyx_Raise
argument_list|(
name|__pyx_1
argument_list|,
name|__pyx_k15p
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|17
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
block|}
name|__pyx_L3
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":18 */
name|__pyx_v_name
operator|.
name|sa_family
operator|=
name|__pyx_v_family
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":20 */
name|__pyx_4
operator|=
name|__pyx_f_11iocpsupport_makeOV
argument_list|()
expr_stmt|;
if|if
condition|(
name|__pyx_4
operator|==
name|NULL
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|20
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_v_ov
operator|=
name|__pyx_4
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":21 */
name|__pyx_2
operator|=
name|__pyx_v_obj
operator|!=
name|Py_None
expr_stmt|;
if|if
condition|(
name|__pyx_2
condition|)
block|{
name|__pyx_v_ov
operator|->
name|obj
operator|=
operator|(
operator|(
expr|struct
name|PyObject
operator|*
operator|)
name|__pyx_v_obj
operator|)
expr_stmt|;
goto|goto
name|__pyx_L4
goto|;
block|}
name|__pyx_L4
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":24 */
name|__pyx_v_rc
operator|=
name|lpConnectEx
argument_list|(
name|__pyx_v_s
argument_list|,
operator|(
operator|&
name|__pyx_v_name
operator|)
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|__pyx_v_name
argument_list|)
operator|)
argument_list|,
name|NULL
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|(
operator|(
name|OVERLAPPED
operator|*
operator|)
name|__pyx_v_ov
operator|)
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":26 */
name|__pyx_3
operator|=
operator|(
operator|!
name|__pyx_v_rc
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_3
condition|)
block|{
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":27 */
name|__pyx_v_rc
operator|=
name|WSAGetLastError
argument_list|()
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":28 */
name|__pyx_2
operator|=
operator|(
name|__pyx_v_rc
operator|!=
name|ERROR_IO_PENDING
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_2
condition|)
block|{
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|29
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_r
operator|=
name|__pyx_1
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
goto|goto
name|__pyx_L6
goto|;
block|}
name|__pyx_L6
label|:
empty_stmt|;
goto|goto
name|__pyx_L5
goto|;
block|}
name|__pyx_L5
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":32 */
name|Py_XINCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\connectex.pxi":33 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|2
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|33
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_r
operator|=
name|__pyx_1
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.connect"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_addr
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_k16
specifier|static
name|char
name|__pyx_k16
index|[]
init|=
literal|"second argument needs to be a list"
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_recv
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_recv
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_recv
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|long
name|__pyx_v_s
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_bufflist
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_obj
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_flags
decl_stmt|;
name|int
name|__pyx_v_rc
decl_stmt|;
name|int
name|__pyx_v_buffcount
decl_stmt|;
name|int
name|__pyx_v_i
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_v_ov
decl_stmt|;
name|WSABUF
modifier|*
name|__pyx_v_ws_buf
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_bytes
decl_stmt|;
name|struct
name|PyObject
modifier|*
modifier|*
name|__pyx_v_buffers
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_1
init|=
literal|0
decl_stmt|;
name|void
modifier|*
name|__pyx_2
decl_stmt|;
name|int
name|__pyx_3
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_4
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_5
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_6
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"s"
block|,
literal|"bufflist"
block|,
literal|"obj"
block|,
literal|"flags"
block|,
literal|0
block|}
decl_stmt|;
name|__pyx_v_flags
operator|=
name|__pyx_k5
expr_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"lOO|k"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_s
argument_list|,
operator|&
name|__pyx_v_bufflist
argument_list|,
operator|&
name|__pyx_v_obj
argument_list|,
operator|&
name|__pyx_v_flags
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_bufflist
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":12 */
name|__pyx_1
operator|=
name|PySequence_Fast
argument_list|(
name|__pyx_v_bufflist
argument_list|,
name|__pyx_k16
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|12
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_v_bufflist
argument_list|)
expr_stmt|;
name|__pyx_v_bufflist
operator|=
name|__pyx_1
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":13 */
name|__pyx_v_buffcount
operator|=
name|PySequence_Fast_GET_SIZE
argument_list|(
name|__pyx_v_bufflist
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":14 */
name|__pyx_v_buffers
operator|=
name|PySequence_Fast_ITEMS
argument_list|(
name|__pyx_v_bufflist
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":16 */
name|__pyx_2
operator|=
name|PyMem_Malloc
argument_list|(
operator|(
name|__pyx_v_buffcount
operator|*
operator|(
sizeof|sizeof
argument_list|(
name|WSABUF
argument_list|)
operator|)
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_2
operator|==
name|NULL
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|16
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_v_ws_buf
operator|=
operator|(
operator|(
name|WSABUF
operator|*
operator|)
name|__pyx_2
operator|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":18 */
comment|/*try:*/
block|{
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":19 */
for|for
control|(
name|__pyx_v_i
operator|=
literal|0
init|;
name|__pyx_v_i
operator|<
name|__pyx_v_buffcount
condition|;
operator|++
name|__pyx_v_i
control|)
block|{
name|__pyx_1
operator|=
operator|(
name|PyObject
operator|*
operator|)
operator|(
name|__pyx_v_buffers
index|[
name|__pyx_v_i
index|]
operator|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
name|PyObject_AsWriteBuffer
argument_list|(
name|__pyx_1
argument_list|,
operator|(
operator|(
name|void
operator|*
operator|*
operator|)
operator|(
operator|&
operator|(
name|__pyx_v_ws_buf
index|[
name|__pyx_v_i
index|]
operator|)
operator|.
name|buf
operator|)
operator|)
argument_list|,
operator|(
operator|(
name|int
operator|*
operator|)
operator|(
operator|&
operator|(
name|__pyx_v_ws_buf
index|[
name|__pyx_v_i
index|]
operator|)
operator|.
name|len
operator|)
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_3
operator|==
operator|(
operator|-
literal|1
operator|)
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|20
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
block|}
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":22 */
name|__pyx_4
operator|=
name|__pyx_f_11iocpsupport_makeOV
argument_list|()
expr_stmt|;
if|if
condition|(
name|__pyx_4
operator|==
name|NULL
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|22
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_v_ov
operator|=
name|__pyx_4
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":23 */
name|__pyx_3
operator|=
name|__pyx_v_obj
operator|!=
name|Py_None
expr_stmt|;
if|if
condition|(
name|__pyx_3
condition|)
block|{
name|__pyx_v_ov
operator|->
name|obj
operator|=
operator|(
operator|(
expr|struct
name|PyObject
operator|*
operator|)
name|__pyx_v_obj
operator|)
expr_stmt|;
goto|goto
name|__pyx_L7
goto|;
block|}
name|__pyx_L7
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":26 */
name|__pyx_v_rc
operator|=
name|WSARecv
argument_list|(
name|__pyx_v_s
argument_list|,
name|__pyx_v_ws_buf
argument_list|,
name|__pyx_v_buffcount
argument_list|,
operator|(
operator|&
name|__pyx_v_bytes
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_flags
operator|)
argument_list|,
operator|(
operator|(
name|OVERLAPPED
operator|*
operator|)
name|__pyx_v_ov
operator|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":28 */
name|__pyx_3
operator|=
operator|(
name|__pyx_v_rc
operator|==
name|SOCKET_ERROR
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_3
condition|)
block|{
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":29 */
name|__pyx_v_rc
operator|=
name|WSAGetLastError
argument_list|()
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":30 */
name|__pyx_3
operator|=
operator|(
name|__pyx_v_rc
operator|!=
name|ERROR_IO_PENDING
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_3
condition|)
block|{
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|31
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_5
operator|=
name|PyInt_FromLong
argument_list|(
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|31
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_6
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_6
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|31
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_6
argument_list|,
literal|0
argument_list|,
name|__pyx_1
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_6
argument_list|,
literal|1
argument_list|,
name|__pyx_5
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
name|__pyx_r
operator|=
name|__pyx_6
expr_stmt|;
name|__pyx_6
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
goto|goto
name|__pyx_L9
goto|;
block|}
name|__pyx_L9
label|:
empty_stmt|;
goto|goto
name|__pyx_L8
goto|;
block|}
name|__pyx_L8
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":33 */
name|Py_XINCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":34 */
name|__pyx_1
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|34
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_5
operator|=
name|PyLong_FromUnsignedLong
argument_list|(
name|__pyx_v_bytes
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|34
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_6
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_6
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|34
expr_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_6
argument_list|,
literal|0
argument_list|,
name|__pyx_1
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_6
argument_list|,
literal|1
argument_list|,
name|__pyx_5
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
name|__pyx_r
operator|=
name|__pyx_6
expr_stmt|;
name|__pyx_6
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
block|}
comment|/*finally:*/
block|{
name|int
name|__pyx_why
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_exc_type
decl_stmt|,
modifier|*
name|__pyx_exc_value
decl_stmt|,
modifier|*
name|__pyx_exc_tb
decl_stmt|;
name|int
name|__pyx_exc_lineno
decl_stmt|;
name|__pyx_why
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L4
goto|;
name|__pyx_L2
label|:
name|__pyx_why
operator|=
literal|3
expr_stmt|;
goto|goto
name|__pyx_L4
goto|;
name|__pyx_L3
label|:
block|{
name|__pyx_why
operator|=
literal|4
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_6
argument_list|)
expr_stmt|;
name|__pyx_6
operator|=
literal|0
expr_stmt|;
name|PyErr_Fetch
argument_list|(
operator|&
name|__pyx_exc_type
argument_list|,
operator|&
name|__pyx_exc_value
argument_list|,
operator|&
name|__pyx_exc_tb
argument_list|)
expr_stmt|;
name|__pyx_exc_lineno
operator|=
name|__pyx_lineno
expr_stmt|;
goto|goto
name|__pyx_L4
goto|;
block|}
name|__pyx_L4
label|:
empty_stmt|;
name|PyMem_Free
argument_list|(
name|__pyx_v_ws_buf
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|__pyx_why
condition|)
block|{
case|case
literal|3
case|:
goto|goto
name|__pyx_L0
goto|;
case|case
literal|4
case|:
block|{
name|PyErr_Restore
argument_list|(
name|__pyx_exc_type
argument_list|,
name|__pyx_exc_value
argument_list|,
name|__pyx_exc_tb
argument_list|)
expr_stmt|;
name|__pyx_lineno
operator|=
name|__pyx_exc_lineno
expr_stmt|;
name|__pyx_exc_type
operator|=
literal|0
expr_stmt|;
name|__pyx_exc_value
operator|=
literal|0
expr_stmt|;
name|__pyx_exc_tb
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
block|}
block|}
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_6
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.recv"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_bufflist
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_recvfrom
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_recvfrom
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_recvfrom
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|long
name|__pyx_v_s
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_buff
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_addr_buff
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_obj
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_flags
decl_stmt|;
name|int
name|__pyx_v_rc
decl_stmt|;
name|int
name|__pyx_v_fromlen
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_v_ov
decl_stmt|;
name|WSABUF
name|__pyx_v_ws_buf
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_bytes
decl_stmt|;
name|struct
name|sockaddr
modifier|*
name|__pyx_v_fromaddr
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_2
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_5
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"s"
block|,
literal|"buff"
block|,
literal|"addr_buff"
block|,
literal|"obj"
block|,
literal|"flags"
block|,
literal|0
block|}
decl_stmt|;
name|__pyx_v_flags
operator|=
name|__pyx_k6
expr_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"lOOO|k"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_s
argument_list|,
operator|&
name|__pyx_v_buff
argument_list|,
operator|&
name|__pyx_v_addr_buff
argument_list|,
operator|&
name|__pyx_v_obj
argument_list|,
operator|&
name|__pyx_v_flags
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_buff
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_addr_buff
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":45 */
name|__pyx_1
operator|=
name|PyObject_AsWriteBuffer
argument_list|(
name|__pyx_v_buff
argument_list|,
operator|(
operator|(
name|void
operator|*
operator|*
operator|)
operator|(
operator|&
name|__pyx_v_ws_buf
operator|.
name|buf
operator|)
operator|)
argument_list|,
operator|(
operator|(
name|int
operator|*
operator|)
operator|(
operator|&
name|__pyx_v_ws_buf
operator|.
name|len
operator|)
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
operator|==
operator|(
operator|-
literal|1
operator|)
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|45
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":46 */
name|__pyx_1
operator|=
name|PyObject_AsWriteBuffer
argument_list|(
name|__pyx_v_addr_buff
argument_list|,
operator|(
operator|(
name|void
operator|*
operator|*
operator|)
operator|(
operator|&
name|__pyx_v_fromaddr
operator|)
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_fromlen
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
operator|==
operator|(
operator|-
literal|1
operator|)
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|46
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":48 */
name|__pyx_2
operator|=
name|__pyx_f_11iocpsupport_makeOV
argument_list|()
expr_stmt|;
if|if
condition|(
name|__pyx_2
operator|==
name|NULL
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|48
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_v_ov
operator|=
name|__pyx_2
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":49 */
name|__pyx_1
operator|=
name|__pyx_v_obj
operator|!=
name|Py_None
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_v_ov
operator|->
name|obj
operator|=
operator|(
operator|(
expr|struct
name|PyObject
operator|*
operator|)
name|__pyx_v_obj
operator|)
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":52 */
name|__pyx_v_rc
operator|=
name|WSARecvFrom
argument_list|(
name|__pyx_v_s
argument_list|,
operator|(
operator|&
name|__pyx_v_ws_buf
operator|)
argument_list|,
literal|1
argument_list|,
operator|(
operator|&
name|__pyx_v_bytes
operator|)
argument_list|,
operator|(
operator|&
name|__pyx_v_flags
operator|)
argument_list|,
name|__pyx_v_fromaddr
argument_list|,
operator|(
operator|&
name|__pyx_v_fromlen
operator|)
argument_list|,
operator|(
operator|(
name|OVERLAPPED
operator|*
operator|)
name|__pyx_v_ov
operator|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":54 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_rc
operator|==
name|SOCKET_ERROR
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":55 */
name|__pyx_v_rc
operator|=
name|WSAGetLastError
argument_list|()
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":56 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_rc
operator|!=
name|ERROR_IO_PENDING
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|57
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyInt_FromLong
argument_list|(
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|57
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_5
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|57
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|0
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|1
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_r
operator|=
name|__pyx_5
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
goto|goto
name|__pyx_L4
goto|;
block|}
name|__pyx_L4
label|:
empty_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_L3
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":59 */
name|Py_XINCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":60 */
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|60
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyLong_FromUnsignedLong
argument_list|(
name|__pyx_v_bytes
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|60
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_5
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|3
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|60
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|0
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|1
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_r
operator|=
name|__pyx_5
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.recvfrom"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_buff
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_addr_buff
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_function_decl
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_send
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|__pyx_f_11iocpsupport_send
specifier|static
name|PyObject
modifier|*
name|__pyx_f_11iocpsupport_send
parameter_list|(
name|PyObject
modifier|*
name|__pyx_self
parameter_list|,
name|PyObject
modifier|*
name|__pyx_args
parameter_list|,
name|PyObject
modifier|*
name|__pyx_kwds
parameter_list|)
block|{
name|long
name|__pyx_v_s
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_buff
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_v_obj
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_flags
decl_stmt|;
name|int
name|__pyx_v_rc
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_v_ov
decl_stmt|;
name|WSABUF
name|__pyx_v_ws_buf
decl_stmt|;
name|unsigned
name|long
name|__pyx_v_bytes
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_r
decl_stmt|;
name|int
name|__pyx_1
decl_stmt|;
name|struct
name|__pyx_t_11iocpsupport_myOVERLAPPED
modifier|*
name|__pyx_2
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_5
init|=
literal|0
decl_stmt|;
specifier|static
name|char
modifier|*
name|__pyx_argnames
index|[]
init|=
block|{
literal|"s"
block|,
literal|"buff"
block|,
literal|"obj"
block|,
literal|"flags"
block|,
literal|0
block|}
decl_stmt|;
name|__pyx_v_flags
operator|=
name|__pyx_k7
expr_stmt|;
if|if
condition|(
operator|!
name|PyArg_ParseTupleAndKeywords
argument_list|(
name|__pyx_args
argument_list|,
name|__pyx_kwds
argument_list|,
literal|"lOO|k"
argument_list|,
name|__pyx_argnames
argument_list|,
operator|&
name|__pyx_v_s
argument_list|,
operator|&
name|__pyx_v_buff
argument_list|,
operator|&
name|__pyx_v_obj
argument_list|,
operator|&
name|__pyx_v_flags
argument_list|)
condition|)
return|return
literal|0
return|;
name|Py_INCREF
argument_list|(
name|__pyx_v_buff
argument_list|)
expr_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsasend.pxi":11 */
name|__pyx_1
operator|=
name|PyObject_AsReadBuffer
argument_list|(
name|__pyx_v_buff
argument_list|,
operator|(
operator|(
name|void
operator|*
operator|*
operator|)
operator|(
operator|&
name|__pyx_v_ws_buf
operator|.
name|buf
operator|)
operator|)
argument_list|,
operator|(
operator|(
name|int
operator|*
operator|)
operator|(
operator|&
name|__pyx_v_ws_buf
operator|.
name|len
operator|)
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
operator|==
operator|(
operator|-
literal|1
operator|)
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|4
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|11
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsasend.pxi":13 */
name|__pyx_2
operator|=
name|__pyx_f_11iocpsupport_makeOV
argument_list|()
expr_stmt|;
if|if
condition|(
name|__pyx_2
operator|==
name|NULL
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|4
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|13
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_v_ov
operator|=
name|__pyx_2
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsasend.pxi":14 */
name|__pyx_1
operator|=
name|__pyx_v_obj
operator|!=
name|Py_None
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_v_ov
operator|->
name|obj
operator|=
operator|(
operator|(
expr|struct
name|PyObject
operator|*
operator|)
name|__pyx_v_obj
operator|)
expr_stmt|;
goto|goto
name|__pyx_L2
goto|;
block|}
name|__pyx_L2
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsasend.pxi":17 */
name|__pyx_v_rc
operator|=
name|WSASend
argument_list|(
name|__pyx_v_s
argument_list|,
operator|(
operator|&
name|__pyx_v_ws_buf
operator|)
argument_list|,
literal|1
argument_list|,
operator|(
operator|&
name|__pyx_v_bytes
operator|)
argument_list|,
name|__pyx_v_flags
argument_list|,
operator|(
operator|(
name|OVERLAPPED
operator|*
operator|)
name|__pyx_v_ov
operator|)
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsasend.pxi":19 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_rc
operator|==
name|SOCKET_ERROR
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsasend.pxi":20 */
name|__pyx_v_rc
operator|=
name|WSAGetLastError
argument_list|()
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsasend.pxi":21 */
name|__pyx_1
operator|=
operator|(
name|__pyx_v_rc
operator|!=
name|ERROR_IO_PENDING
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_1
condition|)
block|{
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|4
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|22
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyLong_FromUnsignedLong
argument_list|(
name|__pyx_v_bytes
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|4
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|22
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_5
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|4
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|22
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|0
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|1
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_r
operator|=
name|__pyx_5
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
goto|goto
name|__pyx_L4
goto|;
block|}
name|__pyx_L4
label|:
empty_stmt|;
goto|goto
name|__pyx_L3
goto|;
block|}
name|__pyx_L3
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsasend.pxi":24 */
name|Py_XINCREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsasend.pxi":25 */
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
name|__pyx_v_rc
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|4
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|25
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyLong_FromUnsignedLong
argument_list|(
name|__pyx_v_bytes
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|4
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|25
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_5
operator|=
name|PyTuple_New
argument_list|(
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_5
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|4
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|25
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|0
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
name|PyTuple_SET_ITEM
argument_list|(
name|__pyx_5
argument_list|,
literal|1
argument_list|,
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
name|__pyx_r
operator|=
name|__pyx_5
expr_stmt|;
name|__pyx_5
operator|=
literal|0
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_r
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|Py_None
argument_list|)
expr_stmt|;
goto|goto
name|__pyx_L0
goto|;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_5
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport.send"
argument_list|)
expr_stmt|;
name|__pyx_r
operator|=
literal|0
expr_stmt|;
name|__pyx_L0
label|:
empty_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_buff
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_v_obj
argument_list|)
expr_stmt|;
return|return
name|__pyx_r
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_intern_tab
specifier|static
name|__Pyx_InternTabEntry
name|__pyx_intern_tab
index|[]
init|=
block|{
block|{
operator|&
name|__pyx_n_CreateIoCompletionPort
block|,
literal|"CreateIoCompletionPort"
block|}
block|,
block|{
operator|&
name|__pyx_n_Event
block|,
literal|"Event"
block|}
block|,
block|{
operator|&
name|__pyx_n_False
block|,
literal|"False"
block|}
block|,
block|{
operator|&
name|__pyx_n_MemoryError
block|,
literal|"MemoryError"
block|}
block|,
block|{
operator|&
name|__pyx_n_PostQueuedCompletionStatus
block|,
literal|"PostQueuedCompletionStatus"
block|}
block|,
block|{
operator|&
name|__pyx_n_ValueError
block|,
literal|"ValueError"
block|}
block|,
block|{
operator|&
name|__pyx_n_WindowsError
block|,
literal|"WindowsError"
block|}
block|,
block|{
operator|&
name|__pyx_n___init__
block|,
literal|"__init__"
block|}
block|,
block|{
operator|&
name|__pyx_n_callback
block|,
literal|"callback"
block|}
block|,
block|{
operator|&
name|__pyx_n_getsockopt
block|,
literal|"getsockopt"
block|}
block|,
block|{
operator|&
name|__pyx_n_have_connectex
block|,
literal|"have_connectex"
block|}
block|,
block|{
operator|&
name|__pyx_n_ignore
block|,
literal|"ignore"
block|}
block|,
block|{
operator|&
name|__pyx_n_items
block|,
literal|"items"
block|}
block|,
block|{
operator|&
name|__pyx_n_owner
block|,
literal|"owner"
block|}
block|,
block|{
operator|&
name|__pyx_n_socket
block|,
literal|"socket"
block|}
block|,
block|{
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_string_tab
specifier|static
name|__Pyx_StringTabEntry
name|__pyx_string_tab
index|[]
init|=
block|{
block|{
operator|&
name|__pyx_k4p
block|,
name|__pyx_k4
block|,
expr|sizeof
operator|(
name|__pyx_k4
operator|)
block|}
block|,
block|{
operator|&
name|__pyx_k11p
block|,
name|__pyx_k11
block|,
expr|sizeof
operator|(
name|__pyx_k11
operator|)
block|}
block|,
block|{
operator|&
name|__pyx_k14p
block|,
name|__pyx_k14
block|,
expr|sizeof
operator|(
name|__pyx_k14
operator|)
block|}
block|,
block|{
operator|&
name|__pyx_k15p
block|,
name|__pyx_k15
block|,
expr|sizeof
operator|(
name|__pyx_k15
operator|)
block|}
block|,
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt
begin_function
DECL|function|__pyx_tp_new_11iocpsupport_CompletionPort
specifier|static
name|PyObject
modifier|*
name|__pyx_tp_new_11iocpsupport_CompletionPort
parameter_list|(
name|PyTypeObject
modifier|*
name|t
parameter_list|,
name|PyObject
modifier|*
name|a
parameter_list|,
name|PyObject
modifier|*
name|k
parameter_list|)
block|{
name|PyObject
modifier|*
name|o
init|=
call|(
modifier|*
name|t
operator|->
name|tp_alloc
call|)
argument_list|(
name|t
argument_list|,
literal|0
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|o
condition|)
return|return
literal|0
return|;
return|return
name|o
return|;
block|}
end_function
begin_function
DECL|function|__pyx_tp_dealloc_11iocpsupport_CompletionPort
specifier|static
name|void
name|__pyx_tp_dealloc_11iocpsupport_CompletionPort
parameter_list|(
name|PyObject
modifier|*
name|o
parameter_list|)
block|{
call|(
modifier|*
name|o
operator|->
name|ob_type
operator|->
name|tp_free
call|)
argument_list|(
name|o
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|__pyx_tp_traverse_11iocpsupport_CompletionPort
specifier|static
name|int
name|__pyx_tp_traverse_11iocpsupport_CompletionPort
parameter_list|(
name|PyObject
modifier|*
name|o
parameter_list|,
name|visitproc
name|v
parameter_list|,
name|void
modifier|*
name|a
parameter_list|)
block|{
return|return
literal|0
return|;
block|}
end_function
begin_function
DECL|function|__pyx_tp_clear_11iocpsupport_CompletionPort
specifier|static
name|int
name|__pyx_tp_clear_11iocpsupport_CompletionPort
parameter_list|(
name|PyObject
modifier|*
name|o
parameter_list|)
block|{
return|return
literal|0
return|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_methods_11iocpsupport_CompletionPort
specifier|static
name|struct
name|PyMethodDef
name|__pyx_methods_11iocpsupport_CompletionPort
index|[]
init|=
block|{
block|{
literal|"addHandle"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_14CompletionPort_addHandle
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"getEvent"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_14CompletionPort_getEvent
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"postEvent"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_14CompletionPort_postEvent
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"__del__"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_14CompletionPort___del__
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_tp_as_number_CompletionPort
specifier|static
name|PyNumberMethods
name|__pyx_tp_as_number_CompletionPort
init|=
block|{
literal|0
block|,
comment|/*nb_add*/
literal|0
block|,
comment|/*nb_subtract*/
literal|0
block|,
comment|/*nb_multiply*/
literal|0
block|,
comment|/*nb_divide*/
literal|0
block|,
comment|/*nb_remainder*/
literal|0
block|,
comment|/*nb_divmod*/
literal|0
block|,
comment|/*nb_power*/
literal|0
block|,
comment|/*nb_negative*/
literal|0
block|,
comment|/*nb_positive*/
literal|0
block|,
comment|/*nb_absolute*/
literal|0
block|,
comment|/*nb_nonzero*/
literal|0
block|,
comment|/*nb_invert*/
literal|0
block|,
comment|/*nb_lshift*/
literal|0
block|,
comment|/*nb_rshift*/
literal|0
block|,
comment|/*nb_and*/
literal|0
block|,
comment|/*nb_xor*/
literal|0
block|,
comment|/*nb_or*/
literal|0
block|,
comment|/*nb_coerce*/
literal|0
block|,
comment|/*nb_int*/
literal|0
block|,
comment|/*nb_long*/
literal|0
block|,
comment|/*nb_float*/
literal|0
block|,
comment|/*nb_oct*/
literal|0
block|,
comment|/*nb_hex*/
literal|0
block|,
comment|/*nb_inplace_add*/
literal|0
block|,
comment|/*nb_inplace_subtract*/
literal|0
block|,
comment|/*nb_inplace_multiply*/
literal|0
block|,
comment|/*nb_inplace_divide*/
literal|0
block|,
comment|/*nb_inplace_remainder*/
literal|0
block|,
comment|/*nb_inplace_power*/
literal|0
block|,
comment|/*nb_inplace_lshift*/
literal|0
block|,
comment|/*nb_inplace_rshift*/
literal|0
block|,
comment|/*nb_inplace_and*/
literal|0
block|,
comment|/*nb_inplace_xor*/
literal|0
block|,
comment|/*nb_inplace_or*/
literal|0
block|,
comment|/*nb_floor_divide*/
literal|0
block|,
comment|/*nb_true_divide*/
literal|0
block|,
comment|/*nb_inplace_floor_divide*/
literal|0
block|,
comment|/*nb_inplace_true_divide*/
if|#
directive|if
name|Py_TPFLAGS_DEFAULT
operator|&
name|Py_TPFLAGS_HAVE_INDEX
literal|0
block|,
comment|/*nb_index*/
endif|#
directive|endif
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_tp_as_sequence_CompletionPort
specifier|static
name|PySequenceMethods
name|__pyx_tp_as_sequence_CompletionPort
init|=
block|{
literal|0
block|,
comment|/*sq_length*/
literal|0
block|,
comment|/*sq_concat*/
literal|0
block|,
comment|/*sq_repeat*/
literal|0
block|,
comment|/*sq_item*/
literal|0
block|,
comment|/*sq_slice*/
literal|0
block|,
comment|/*sq_ass_item*/
literal|0
block|,
comment|/*sq_ass_slice*/
literal|0
block|,
comment|/*sq_contains*/
literal|0
block|,
comment|/*sq_inplace_concat*/
literal|0
block|,
comment|/*sq_inplace_repeat*/
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_tp_as_mapping_CompletionPort
specifier|static
name|PyMappingMethods
name|__pyx_tp_as_mapping_CompletionPort
init|=
block|{
literal|0
block|,
comment|/*mp_length*/
literal|0
block|,
comment|/*mp_subscript*/
literal|0
block|,
comment|/*mp_ass_subscript*/
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_tp_as_buffer_CompletionPort
specifier|static
name|PyBufferProcs
name|__pyx_tp_as_buffer_CompletionPort
init|=
block|{
literal|0
block|,
comment|/*bf_getreadbuffer*/
literal|0
block|,
comment|/*bf_getwritebuffer*/
literal|0
block|,
comment|/*bf_getsegcount*/
literal|0
block|,
comment|/*bf_getcharbuffer*/
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_type_11iocpsupport_CompletionPort
name|PyTypeObject
name|__pyx_type_11iocpsupport_CompletionPort
init|=
block|{
name|PyObject_HEAD_INIT
argument_list|(
literal|0
argument_list|)
literal|0
block|,
comment|/*ob_size*/
literal|"iocpsupport.CompletionPort"
block|,
comment|/*tp_name*/
sizeof|sizeof
argument_list|(
expr|struct
name|__pyx_obj_11iocpsupport_CompletionPort
argument_list|)
block|,
comment|/*tp_basicsize*/
literal|0
block|,
comment|/*tp_itemsize*/
name|__pyx_tp_dealloc_11iocpsupport_CompletionPort
block|,
comment|/*tp_dealloc*/
literal|0
block|,
comment|/*tp_print*/
literal|0
block|,
comment|/*tp_getattr*/
literal|0
block|,
comment|/*tp_setattr*/
literal|0
block|,
comment|/*tp_compare*/
literal|0
block|,
comment|/*tp_repr*/
operator|&
name|__pyx_tp_as_number_CompletionPort
block|,
comment|/*tp_as_number*/
operator|&
name|__pyx_tp_as_sequence_CompletionPort
block|,
comment|/*tp_as_sequence*/
operator|&
name|__pyx_tp_as_mapping_CompletionPort
block|,
comment|/*tp_as_mapping*/
literal|0
block|,
comment|/*tp_hash*/
literal|0
block|,
comment|/*tp_call*/
literal|0
block|,
comment|/*tp_str*/
literal|0
block|,
comment|/*tp_getattro*/
literal|0
block|,
comment|/*tp_setattro*/
operator|&
name|__pyx_tp_as_buffer_CompletionPort
block|,
comment|/*tp_as_buffer*/
name|Py_TPFLAGS_DEFAULT
operator||
name|Py_TPFLAGS_CHECKTYPES
operator||
name|Py_TPFLAGS_BASETYPE
operator||
name|Py_TPFLAGS_HAVE_GC
block|,
comment|/*tp_flags*/
literal|0
block|,
comment|/*tp_doc*/
name|__pyx_tp_traverse_11iocpsupport_CompletionPort
block|,
comment|/*tp_traverse*/
name|__pyx_tp_clear_11iocpsupport_CompletionPort
block|,
comment|/*tp_clear*/
literal|0
block|,
comment|/*tp_richcompare*/
literal|0
block|,
comment|/*tp_weaklistoffset*/
literal|0
block|,
comment|/*tp_iter*/
literal|0
block|,
comment|/*tp_iternext*/
name|__pyx_methods_11iocpsupport_CompletionPort
block|,
comment|/*tp_methods*/
literal|0
block|,
comment|/*tp_members*/
literal|0
block|,
comment|/*tp_getset*/
literal|0
block|,
comment|/*tp_base*/
literal|0
block|,
comment|/*tp_dict*/
literal|0
block|,
comment|/*tp_descr_get*/
literal|0
block|,
comment|/*tp_descr_set*/
literal|0
block|,
comment|/*tp_dictoffset*/
name|__pyx_f_11iocpsupport_14CompletionPort___init__
block|,
comment|/*tp_init*/
literal|0
block|,
comment|/*tp_alloc*/
name|__pyx_tp_new_11iocpsupport_CompletionPort
block|,
comment|/*tp_new*/
literal|0
block|,
comment|/*tp_free*/
literal|0
block|,
comment|/*tp_is_gc*/
literal|0
block|,
comment|/*tp_bases*/
literal|0
block|,
comment|/*tp_mro*/
literal|0
block|,
comment|/*tp_cache*/
literal|0
block|,
comment|/*tp_subclasses*/
literal|0
block|,
comment|/*tp_weaklist*/
block|}
decl_stmt|;
end_decl_stmt
begin_decl_stmt
DECL|variable|__pyx_methods
specifier|static
name|struct
name|PyMethodDef
name|__pyx_methods
index|[]
init|=
block|{
block|{
literal|"makesockaddr"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_makesockaddr
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"AllocateReadBuffer"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_AllocateReadBuffer
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"maxAddrLen"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_maxAddrLen
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"accept"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_accept
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"get_accept_addrs"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_get_accept_addrs
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"connect"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_connect
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"recv"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_recv
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"recvfrom"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_recvfrom
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|"send"
block|,
operator|(
name|PyCFunction
operator|)
name|__pyx_f_11iocpsupport_send
block|,
name|METH_VARARGS
operator||
name|METH_KEYWORDS
block|,
literal|0
block|}
block|,
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt
begin_function_decl
specifier|static
name|void
name|__pyx_init_filenames
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function_decl
name|PyMODINIT_FUNC
name|initiocpsupport
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl
begin_comment
comment|/*proto*/
end_comment
begin_function
DECL|function|initiocpsupport
name|PyMODINIT_FUNC
name|initiocpsupport
parameter_list|(
name|void
parameter_list|)
block|{
name|PyObject
modifier|*
name|__pyx_1
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_2
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_3
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|__pyx_4
init|=
literal|0
decl_stmt|;
name|int
name|__pyx_5
decl_stmt|;
name|__pyx_init_filenames
argument_list|()
expr_stmt|;
name|__pyx_m
operator|=
name|Py_InitModule4
argument_list|(
literal|"iocpsupport"
argument_list|,
name|__pyx_methods
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|PYTHON_API_VERSION
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_m
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|5
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
empty_stmt|;
name|Py_INCREF
argument_list|(
name|__pyx_m
argument_list|)
expr_stmt|;
name|__pyx_b
operator|=
name|PyImport_AddModule
argument_list|(
literal|"__builtin__"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_b
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|5
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
empty_stmt|;
if|if
condition|(
name|PyObject_SetAttrString
argument_list|(
name|__pyx_m
argument_list|,
literal|"__builtins__"
argument_list|,
name|__pyx_b
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|5
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
empty_stmt|;
if|if
condition|(
name|__Pyx_InternStrings
argument_list|(
name|__pyx_intern_tab
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|5
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
empty_stmt|;
if|if
condition|(
name|__Pyx_InitStrings
argument_list|(
name|__pyx_string_tab
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|5
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
empty_stmt|;
if|if
condition|(
name|PyType_Ready
argument_list|(
operator|&
name|__pyx_type_11iocpsupport_CompletionPort
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|129
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttrString
argument_list|(
name|__pyx_m
argument_list|,
literal|"CompletionPort"
argument_list|,
operator|(
name|PyObject
operator|*
operator|)
operator|&
name|__pyx_type_11iocpsupport_CompletionPort
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|129
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_ptype_11iocpsupport_CompletionPort
operator|=
operator|&
name|__pyx_type_11iocpsupport_CompletionPort
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":121 */
name|__pyx_1
operator|=
name|PyDict_New
argument_list|()
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_1
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|121
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_2
operator|=
name|PyTuple_New
argument_list|(
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|121
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_3
operator|=
name|__Pyx_CreateClass
argument_list|(
name|__pyx_2
argument_list|,
name|__pyx_1
argument_list|,
name|__pyx_n_Event
argument_list|,
literal|"iocpsupport"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|121
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
name|__pyx_2
operator|=
name|PyCFunction_New
argument_list|(
operator|&
name|__pyx_mdef_11iocpsupport_5Event___init__
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|122
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__pyx_4
operator|=
name|PyMethod_New
argument_list|(
name|__pyx_2
argument_list|,
literal|0
argument_list|,
name|__pyx_3
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|122
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_3
argument_list|,
name|__pyx_n___init__
argument_list|,
name|__pyx_4
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|122
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_Event
argument_list|,
name|__pyx_3
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|121
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|__pyx_1
operator|=
literal|0
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":138 */
name|__pyx_k2
operator|=
literal|0
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":240 */
name|__pyx_2
operator|=
name|__Pyx_Import
argument_list|(
name|__pyx_n_socket
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_2
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|240
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_socket
argument_list|,
name|__pyx_2
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|240
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|__pyx_2
operator|=
literal|0
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":241 */
name|__pyx_5
operator|=
operator|(
operator|!
name|initWinsockPointers
argument_list|()
operator|)
expr_stmt|;
if|if
condition|(
name|__pyx_5
condition|)
block|{
name|__pyx_4
operator|=
name|__Pyx_GetName
argument_list|(
name|__pyx_b
argument_list|,
name|__pyx_n_ValueError
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_4
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|242
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|__Pyx_Raise
argument_list|(
name|__pyx_4
argument_list|,
name|__pyx_k4p
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|Py_DECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|__pyx_4
operator|=
literal|0
expr_stmt|;
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|242
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
goto|goto
name|__pyx_L5
goto|;
block|}
name|__pyx_L5
label|:
empty_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport/iocpsupport.pyx":244 */
name|__pyx_3
operator|=
name|PyInt_FromLong
argument_list|(
operator|(
name|lpConnectEx
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__pyx_3
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|244
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
if|if
condition|(
name|PyObject_SetAttr
argument_list|(
name|__pyx_m
argument_list|,
name|__pyx_n_have_connectex
argument_list|,
name|__pyx_3
argument_list|)
operator|<
literal|0
condition|)
block|{
name|__pyx_filename
operator|=
name|__pyx_f
index|[
literal|0
index|]
expr_stmt|;
name|__pyx_lineno
operator|=
literal|244
expr_stmt|;
goto|goto
name|__pyx_L1
goto|;
block|}
name|Py_DECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|__pyx_3
operator|=
literal|0
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":5 */
name|__pyx_k5
operator|=
literal|0
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsarecv.pxi":38 */
name|__pyx_k6
operator|=
literal|0
expr_stmt|;
comment|/* "X:\projects\Twisted\trunk\twisted\internet\iocpreactor\iocpsupport\wsasend.pxi":5 */
name|__pyx_k7
operator|=
literal|0
expr_stmt|;
return|return;
name|__pyx_L1
label|:
empty_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_1
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_2
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_3
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__pyx_4
argument_list|)
expr_stmt|;
name|__Pyx_AddTraceback
argument_list|(
literal|"iocpsupport"
argument_list|)
expr_stmt|;
block|}
end_function
begin_decl_stmt
DECL|variable|__pyx_filenames
specifier|static
name|char
modifier|*
name|__pyx_filenames
index|[]
init|=
block|{
literal|"iocpsupport.pyx"
block|,
literal|"acceptex.pxi"
block|,
literal|"connectex.pxi"
block|,
literal|"wsarecv.pxi"
block|,
literal|"wsasend.pxi"
block|, }
decl_stmt|;
end_decl_stmt
begin_comment
comment|/* Runtime support code */
end_comment
begin_function
DECL|function|__pyx_init_filenames
specifier|static
name|void
name|__pyx_init_filenames
parameter_list|(
name|void
parameter_list|)
block|{
name|__pyx_f
operator|=
name|__pyx_filenames
expr_stmt|;
block|}
end_function
begin_function
DECL|function|__Pyx_CreateClass
specifier|static
name|PyObject
modifier|*
name|__Pyx_CreateClass
parameter_list|(
name|PyObject
modifier|*
name|bases
parameter_list|,
name|PyObject
modifier|*
name|dict
parameter_list|,
name|PyObject
modifier|*
name|name
parameter_list|,
name|char
modifier|*
name|modname
parameter_list|)
block|{
name|PyObject
modifier|*
name|py_modname
decl_stmt|;
name|PyObject
modifier|*
name|result
init|=
literal|0
decl_stmt|;
name|py_modname
operator|=
name|PyString_FromString
argument_list|(
name|modname
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_modname
condition|)
goto|goto
name|bad
goto|;
if|if
condition|(
name|PyDict_SetItemString
argument_list|(
name|dict
argument_list|,
literal|"__module__"
argument_list|,
name|py_modname
argument_list|)
operator|<
literal|0
condition|)
goto|goto
name|bad
goto|;
name|result
operator|=
name|PyClass_New
argument_list|(
name|bases
argument_list|,
name|dict
argument_list|,
name|name
argument_list|)
expr_stmt|;
name|bad
label|:
name|Py_XDECREF
argument_list|(
name|py_modname
argument_list|)
expr_stmt|;
return|return
name|result
return|;
block|}
end_function
begin_function
DECL|function|__Pyx_GetStarArgs
specifier|static
name|int
name|__Pyx_GetStarArgs
parameter_list|(
name|PyObject
modifier|*
modifier|*
name|args
parameter_list|,
name|PyObject
modifier|*
modifier|*
name|kwds
parameter_list|,
name|char
modifier|*
name|kwd_list
index|[]
parameter_list|,
name|Py_ssize_t
name|nargs
parameter_list|,
name|PyObject
modifier|*
modifier|*
name|args2
parameter_list|,
name|PyObject
modifier|*
modifier|*
name|kwds2
parameter_list|,
name|char
name|rqd_kwds
index|[]
parameter_list|)
block|{
name|PyObject
modifier|*
name|x
init|=
literal|0
decl_stmt|,
modifier|*
name|args1
init|=
literal|0
decl_stmt|,
modifier|*
name|kwds1
init|=
literal|0
decl_stmt|;
name|int
name|i
decl_stmt|;
name|char
modifier|*
modifier|*
name|p
decl_stmt|;
if|if
condition|(
name|args2
condition|)
operator|*
name|args2
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|kwds2
condition|)
operator|*
name|kwds2
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|args2
condition|)
block|{
name|args1
operator|=
name|PyTuple_GetSlice
argument_list|(
operator|*
name|args
argument_list|,
literal|0
argument_list|,
name|nargs
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|args1
condition|)
goto|goto
name|bad
goto|;
operator|*
name|args2
operator|=
name|PyTuple_GetSlice
argument_list|(
operator|*
name|args
argument_list|,
name|nargs
argument_list|,
name|PyTuple_GET_SIZE
argument_list|(
operator|*
name|args
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|*
name|args2
condition|)
goto|goto
name|bad
goto|;
block|}
elseif|else
if|if
condition|(
name|PyTuple_GET_SIZE
argument_list|(
operator|*
name|args
argument_list|)
operator|>
name|nargs
condition|)
block|{
name|int
name|m
init|=
name|nargs
decl_stmt|;
name|int
name|n
init|=
name|PyTuple_GET_SIZE
argument_list|(
operator|*
name|args
argument_list|)
decl_stmt|;
name|PyErr_Format
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"function takes at most %d positional arguments (%d given)"
argument_list|,
name|m
argument_list|,
name|n
argument_list|)
expr_stmt|;
goto|goto
name|bad
goto|;
block|}
else|else
block|{
name|args1
operator|=
operator|*
name|args
expr_stmt|;
name|Py_INCREF
argument_list|(
name|args1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|rqd_kwds
operator|&&
operator|!
operator|*
name|kwds
condition|)
for|for
control|(
name|i
operator|=
literal|0
operator|,
name|p
operator|=
name|kwd_list
init|;
operator|*
name|p
condition|;
name|i
operator|++
operator|,
name|p
operator|++
control|)
if|if
condition|(
name|rqd_kwds
index|[
name|i
index|]
condition|)
goto|goto
name|missing_kwarg
goto|;
if|if
condition|(
name|kwds2
condition|)
block|{
if|if
condition|(
operator|*
name|kwds
condition|)
block|{
name|kwds1
operator|=
name|PyDict_New
argument_list|()
expr_stmt|;
if|if
condition|(
operator|!
name|kwds1
condition|)
goto|goto
name|bad
goto|;
operator|*
name|kwds2
operator|=
name|PyDict_Copy
argument_list|(
operator|*
name|kwds
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|*
name|kwds2
condition|)
goto|goto
name|bad
goto|;
for|for
control|(
name|i
operator|=
literal|0
operator|,
name|p
operator|=
name|kwd_list
init|;
operator|*
name|p
condition|;
name|i
operator|++
operator|,
name|p
operator|++
control|)
block|{
name|x
operator|=
name|PyDict_GetItemString
argument_list|(
operator|*
name|kwds
argument_list|,
operator|*
name|p
argument_list|)
expr_stmt|;
if|if
condition|(
name|x
condition|)
block|{
if|if
condition|(
name|PyDict_SetItemString
argument_list|(
name|kwds1
argument_list|,
operator|*
name|p
argument_list|,
name|x
argument_list|)
operator|<
literal|0
condition|)
goto|goto
name|bad
goto|;
if|if
condition|(
name|PyDict_DelItemString
argument_list|(
operator|*
name|kwds2
argument_list|,
operator|*
name|p
argument_list|)
operator|<
literal|0
condition|)
goto|goto
name|bad
goto|;
block|}
elseif|else
if|if
condition|(
name|rqd_kwds
operator|&&
name|rqd_kwds
index|[
name|i
index|]
condition|)
goto|goto
name|missing_kwarg
goto|;
block|}
block|}
else|else
block|{
operator|*
name|kwds2
operator|=
name|PyDict_New
argument_list|()
expr_stmt|;
if|if
condition|(
operator|!
operator|*
name|kwds2
condition|)
goto|goto
name|bad
goto|;
block|}
block|}
else|else
block|{
name|kwds1
operator|=
operator|*
name|kwds
expr_stmt|;
name|Py_XINCREF
argument_list|(
name|kwds1
argument_list|)
expr_stmt|;
if|if
condition|(
name|rqd_kwds
operator|&&
operator|*
name|kwds
condition|)
for|for
control|(
name|i
operator|=
literal|0
operator|,
name|p
operator|=
name|kwd_list
init|;
operator|*
name|p
condition|;
name|i
operator|++
operator|,
name|p
operator|++
control|)
if|if
condition|(
name|rqd_kwds
index|[
name|i
index|]
operator|&&
operator|!
name|PyDict_GetItemString
argument_list|(
operator|*
name|kwds
argument_list|,
operator|*
name|p
argument_list|)
condition|)
goto|goto
name|missing_kwarg
goto|;
block|}
operator|*
name|args
operator|=
name|args1
expr_stmt|;
operator|*
name|kwds
operator|=
name|kwds1
expr_stmt|;
return|return
literal|0
return|;
name|missing_kwarg
label|:
name|PyErr_Format
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"required keyword argument '%s' is missing"
argument_list|,
operator|*
name|p
argument_list|)
expr_stmt|;
name|bad
label|:
name|Py_XDECREF
argument_list|(
name|args1
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|kwds1
argument_list|)
expr_stmt|;
if|if
condition|(
name|args2
condition|)
block|{
name|Py_XDECREF
argument_list|(
operator|*
name|args2
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|kwds2
condition|)
block|{
name|Py_XDECREF
argument_list|(
operator|*
name|kwds2
argument_list|)
expr_stmt|;
block|}
return|return
operator|-
literal|1
return|;
block|}
end_function
begin_function
DECL|function|__Pyx_Import
specifier|static
name|PyObject
modifier|*
name|__Pyx_Import
parameter_list|(
name|PyObject
modifier|*
name|name
parameter_list|,
name|PyObject
modifier|*
name|from_list
parameter_list|)
block|{
name|PyObject
modifier|*
name|__import__
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|empty_list
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|module
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|global_dict
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|empty_dict
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|list
decl_stmt|;
name|__import__
operator|=
name|PyObject_GetAttrString
argument_list|(
name|__pyx_b
argument_list|,
literal|"__import__"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|__import__
condition|)
goto|goto
name|bad
goto|;
if|if
condition|(
name|from_list
condition|)
name|list
operator|=
name|from_list
expr_stmt|;
else|else
block|{
name|empty_list
operator|=
name|PyList_New
argument_list|(
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|empty_list
condition|)
goto|goto
name|bad
goto|;
name|list
operator|=
name|empty_list
expr_stmt|;
block|}
name|global_dict
operator|=
name|PyModule_GetDict
argument_list|(
name|__pyx_m
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|global_dict
condition|)
goto|goto
name|bad
goto|;
name|empty_dict
operator|=
name|PyDict_New
argument_list|()
expr_stmt|;
if|if
condition|(
operator|!
name|empty_dict
condition|)
goto|goto
name|bad
goto|;
name|module
operator|=
name|PyObject_CallFunction
argument_list|(
name|__import__
argument_list|,
literal|"OOOO"
argument_list|,
name|name
argument_list|,
name|global_dict
argument_list|,
name|empty_dict
argument_list|,
name|list
argument_list|)
expr_stmt|;
name|bad
label|:
name|Py_XDECREF
argument_list|(
name|empty_list
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|__import__
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|empty_dict
argument_list|)
expr_stmt|;
return|return
name|module
return|;
block|}
end_function
begin_function
DECL|function|__Pyx_GetName
specifier|static
name|PyObject
modifier|*
name|__Pyx_GetName
parameter_list|(
name|PyObject
modifier|*
name|dict
parameter_list|,
name|PyObject
modifier|*
name|name
parameter_list|)
block|{
name|PyObject
modifier|*
name|result
decl_stmt|;
name|result
operator|=
name|PyObject_GetAttr
argument_list|(
name|dict
argument_list|,
name|name
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|result
condition|)
name|PyErr_SetObject
argument_list|(
name|PyExc_NameError
argument_list|,
name|name
argument_list|)
expr_stmt|;
return|return
name|result
return|;
block|}
end_function
begin_function
DECL|function|__Pyx_Raise
specifier|static
name|void
name|__Pyx_Raise
parameter_list|(
name|PyObject
modifier|*
name|type
parameter_list|,
name|PyObject
modifier|*
name|value
parameter_list|,
name|PyObject
modifier|*
name|tb
parameter_list|)
block|{
name|Py_XINCREF
argument_list|(
name|type
argument_list|)
expr_stmt|;
name|Py_XINCREF
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|Py_XINCREF
argument_list|(
name|tb
argument_list|)
expr_stmt|;
comment|/* First, check the traceback argument, replacing None with NULL. */
if|if
condition|(
name|tb
operator|==
name|Py_None
condition|)
block|{
name|Py_DECREF
argument_list|(
name|tb
argument_list|)
expr_stmt|;
name|tb
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|tb
operator|!=
name|NULL
operator|&&
operator|!
name|PyTraceBack_Check
argument_list|(
name|tb
argument_list|)
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"raise: arg 3 must be a traceback or None"
argument_list|)
expr_stmt|;
goto|goto
name|raise_error
goto|;
block|}
comment|/* Next, replace a missing value with None */
if|if
condition|(
name|value
operator|==
name|NULL
condition|)
block|{
name|value
operator|=
name|Py_None
expr_stmt|;
name|Py_INCREF
argument_list|(
name|value
argument_list|)
expr_stmt|;
block|}
if|#
directive|if
name|PY_VERSION_HEX
operator|<
literal|0x02050000
if|if
condition|(
operator|!
name|PyClass_Check
argument_list|(
name|type
argument_list|)
condition|)
else|#
directive|else
if|if
condition|(
operator|!
name|PyType_Check
argument_list|(
name|type
argument_list|)
condition|)
endif|#
directive|endif
block|{
comment|/* Raising an instance.  The value should be a dummy. */
if|if
condition|(
name|value
operator|!=
name|Py_None
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"instance exception may not have a separate value"
argument_list|)
expr_stmt|;
goto|goto
name|raise_error
goto|;
block|}
comment|/* Normalize to raise<class>,<instance> */
name|Py_DECREF
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|value
operator|=
name|type
expr_stmt|;
if|#
directive|if
name|PY_VERSION_HEX
operator|<
literal|0x02050000
if|if
condition|(
name|PyInstance_Check
argument_list|(
name|type
argument_list|)
condition|)
block|{
name|type
operator|=
operator|(
name|PyObject
operator|*
operator|)
operator|(
operator|(
name|PyInstanceObject
operator|*
operator|)
name|type
operator|)
operator|->
name|in_class
expr_stmt|;
name|Py_INCREF
argument_list|(
name|type
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"raise: exception must be an old-style class or instance"
argument_list|)
expr_stmt|;
goto|goto
name|raise_error
goto|;
block|}
else|#
directive|else
name|type
operator|=
operator|(
name|PyObject
operator|*
operator|)
name|type
operator|->
name|ob_type
expr_stmt|;
name|Py_INCREF
argument_list|(
name|type
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|PyType_IsSubtype
argument_list|(
operator|(
name|PyTypeObject
operator|*
operator|)
name|type
argument_list|,
operator|(
name|PyTypeObject
operator|*
operator|)
name|PyExc_BaseException
argument_list|)
condition|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_TypeError
argument_list|,
literal|"raise: exception class must be a subclass of BaseException"
argument_list|)
expr_stmt|;
goto|goto
name|raise_error
goto|;
block|}
endif|#
directive|endif
block|}
name|PyErr_Restore
argument_list|(
name|type
argument_list|,
name|value
argument_list|,
name|tb
argument_list|)
expr_stmt|;
return|return;
name|raise_error
label|:
name|Py_XDECREF
argument_list|(
name|value
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|type
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|tb
argument_list|)
expr_stmt|;
return|return;
block|}
end_function
begin_function
DECL|function|__Pyx_UnpackError
specifier|static
name|void
name|__Pyx_UnpackError
parameter_list|(
name|void
parameter_list|)
block|{
name|PyErr_SetString
argument_list|(
name|PyExc_ValueError
argument_list|,
literal|"unpack sequence of wrong size"
argument_list|)
expr_stmt|;
block|}
end_function
begin_function
DECL|function|__Pyx_UnpackItem
specifier|static
name|PyObject
modifier|*
name|__Pyx_UnpackItem
parameter_list|(
name|PyObject
modifier|*
name|iter
parameter_list|)
block|{
name|PyObject
modifier|*
name|item
decl_stmt|;
if|if
condition|(
operator|!
operator|(
name|item
operator|=
name|PyIter_Next
argument_list|(
name|iter
argument_list|)
operator|)
condition|)
block|{
if|if
condition|(
operator|!
name|PyErr_Occurred
argument_list|()
condition|)
name|__Pyx_UnpackError
argument_list|()
expr_stmt|;
block|}
return|return
name|item
return|;
block|}
end_function
begin_function
DECL|function|__Pyx_EndUnpack
specifier|static
name|int
name|__Pyx_EndUnpack
parameter_list|(
name|PyObject
modifier|*
name|iter
parameter_list|)
block|{
name|PyObject
modifier|*
name|item
decl_stmt|;
if|if
condition|(
operator|(
name|item
operator|=
name|PyIter_Next
argument_list|(
name|iter
argument_list|)
operator|)
condition|)
block|{
name|Py_DECREF
argument_list|(
name|item
argument_list|)
expr_stmt|;
name|__Pyx_UnpackError
argument_list|()
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
elseif|else
if|if
condition|(
operator|!
name|PyErr_Occurred
argument_list|()
condition|)
return|return
literal|0
return|;
else|else
return|return
operator|-
literal|1
return|;
block|}
end_function
begin_function
DECL|function|__Pyx_InternStrings
specifier|static
name|int
name|__Pyx_InternStrings
parameter_list|(
name|__Pyx_InternTabEntry
modifier|*
name|t
parameter_list|)
block|{
while|while
condition|(
name|t
operator|->
name|p
condition|)
block|{
operator|*
name|t
operator|->
name|p
operator|=
name|PyString_InternFromString
argument_list|(
name|t
operator|->
name|s
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|*
name|t
operator|->
name|p
condition|)
return|return
operator|-
literal|1
return|;
operator|++
name|t
expr_stmt|;
block|}
return|return
literal|0
return|;
block|}
end_function
begin_function
DECL|function|__Pyx_InitStrings
specifier|static
name|int
name|__Pyx_InitStrings
parameter_list|(
name|__Pyx_StringTabEntry
modifier|*
name|t
parameter_list|)
block|{
while|while
condition|(
name|t
operator|->
name|p
condition|)
block|{
operator|*
name|t
operator|->
name|p
operator|=
name|PyString_FromStringAndSize
argument_list|(
name|t
operator|->
name|s
argument_list|,
name|t
operator|->
name|n
operator|-
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|*
name|t
operator|->
name|p
condition|)
return|return
operator|-
literal|1
return|;
operator|++
name|t
expr_stmt|;
block|}
return|return
literal|0
return|;
block|}
end_function
begin_include
include|#
directive|include
file|"compile.h"
end_include
begin_include
include|#
directive|include
file|"frameobject.h"
end_include
begin_include
include|#
directive|include
file|"traceback.h"
end_include
begin_function
DECL|function|__Pyx_AddTraceback
specifier|static
name|void
name|__Pyx_AddTraceback
parameter_list|(
name|char
modifier|*
name|funcname
parameter_list|)
block|{
name|PyObject
modifier|*
name|py_srcfile
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|py_funcname
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|py_globals
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|empty_tuple
init|=
literal|0
decl_stmt|;
name|PyObject
modifier|*
name|empty_string
init|=
literal|0
decl_stmt|;
name|PyCodeObject
modifier|*
name|py_code
init|=
literal|0
decl_stmt|;
name|PyFrameObject
modifier|*
name|py_frame
init|=
literal|0
decl_stmt|;
name|py_srcfile
operator|=
name|PyString_FromString
argument_list|(
name|__pyx_filename
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_srcfile
condition|)
goto|goto
name|bad
goto|;
name|py_funcname
operator|=
name|PyString_FromString
argument_list|(
name|funcname
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_funcname
condition|)
goto|goto
name|bad
goto|;
name|py_globals
operator|=
name|PyModule_GetDict
argument_list|(
name|__pyx_m
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_globals
condition|)
goto|goto
name|bad
goto|;
name|empty_tuple
operator|=
name|PyTuple_New
argument_list|(
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|empty_tuple
condition|)
goto|goto
name|bad
goto|;
name|empty_string
operator|=
name|PyString_FromString
argument_list|(
literal|""
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|empty_string
condition|)
goto|goto
name|bad
goto|;
name|py_code
operator|=
name|PyCode_New
argument_list|(
literal|0
argument_list|,
comment|/*int argcount,*/
literal|0
argument_list|,
comment|/*int nlocals,*/
literal|0
argument_list|,
comment|/*int stacksize,*/
literal|0
argument_list|,
comment|/*int flags,*/
name|empty_string
argument_list|,
comment|/*PyObject *code,*/
name|empty_tuple
argument_list|,
comment|/*PyObject *consts,*/
name|empty_tuple
argument_list|,
comment|/*PyObject *names,*/
name|empty_tuple
argument_list|,
comment|/*PyObject *varnames,*/
name|empty_tuple
argument_list|,
comment|/*PyObject *freevars,*/
name|empty_tuple
argument_list|,
comment|/*PyObject *cellvars,*/
name|py_srcfile
argument_list|,
comment|/*PyObject *filename,*/
name|py_funcname
argument_list|,
comment|/*PyObject *name,*/
name|__pyx_lineno
argument_list|,
comment|/*int firstlineno,*/
name|empty_string
comment|/*PyObject *lnotab*/
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_code
condition|)
goto|goto
name|bad
goto|;
name|py_frame
operator|=
name|PyFrame_New
argument_list|(
name|PyThreadState_Get
argument_list|()
argument_list|,
comment|/*PyThreadState *tstate,*/
name|py_code
argument_list|,
comment|/*PyCodeObject *code,*/
name|py_globals
argument_list|,
comment|/*PyObject *globals,*/
literal|0
comment|/*PyObject *locals*/
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|py_frame
condition|)
goto|goto
name|bad
goto|;
name|py_frame
operator|->
name|f_lineno
operator|=
name|__pyx_lineno
expr_stmt|;
name|PyTraceBack_Here
argument_list|(
name|py_frame
argument_list|)
expr_stmt|;
name|bad
label|:
name|Py_XDECREF
argument_list|(
name|py_srcfile
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|py_funcname
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|empty_tuple
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|empty_string
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|py_code
argument_list|)
expr_stmt|;
name|Py_XDECREF
argument_list|(
name|py_frame
argument_list|)
expr_stmt|;
block|}
end_function
end_unit
