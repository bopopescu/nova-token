begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
string|'"""\nA modified gtk2 reactor with a Glade dialog in-process that allows you to stop,\nsuspend, resume and inspect transports interactively.\n"""'
newline|'\n'
nl|'\n'
DECL|variable|__all__
name|'__all__'
op|'='
op|'['
string|"'install'"
op|']'
newline|'\n'
nl|'\n'
comment|'# Twisted Imports'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'log'
op|','
name|'threadable'
op|','
name|'runtime'
op|','
name|'failure'
op|','
name|'util'
op|','
name|'reflect'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
op|'.'
name|'gtk2reactor'
name|'import'
name|'Gtk2Reactor'
name|'as'
name|'sup'
newline|'\n'
nl|'\n'
name|'import'
name|'gtk'
newline|'\n'
name|'import'
name|'gobject'
newline|'\n'
name|'import'
name|'gtk'
op|'.'
name|'glade'
newline|'\n'
nl|'\n'
DECL|variable|COLUMN_DESCRIPTION
name|'COLUMN_DESCRIPTION'
op|'='
number|'0'
newline|'\n'
DECL|variable|COLUMN_TRANSPORT
name|'COLUMN_TRANSPORT'
op|'='
number|'1'
newline|'\n'
DECL|variable|COLUMN_READING
name|'COLUMN_READING'
op|'='
number|'2'
newline|'\n'
DECL|variable|COLUMN_WRITING
name|'COLUMN_WRITING'
op|'='
number|'3'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|GladeReactor
name|'class'
name|'GladeReactor'
op|'('
name|'sup'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""GTK+-2 event loop reactor with GUI.\n    """'
newline|'\n'
nl|'\n'
DECL|member|listenTCP
name|'def'
name|'listenTCP'
op|'('
name|'self'
op|','
name|'port'
op|','
name|'factory'
op|','
name|'backlog'
op|'='
number|'50'
op|','
name|'interface'
op|'='
string|"''"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from'
name|'_inspectro'
name|'import'
name|'LoggingFactory'
newline|'\n'
name|'factory'
op|'='
name|'LoggingFactory'
op|'('
name|'factory'
op|')'
newline|'\n'
name|'return'
name|'sup'
op|'.'
name|'listenTCP'
op|'('
name|'self'
op|','
name|'port'
op|','
name|'factory'
op|','
name|'backlog'
op|','
name|'interface'
op|')'
newline|'\n'
nl|'\n'
DECL|member|connectTCP
dedent|''
name|'def'
name|'connectTCP'
op|'('
name|'self'
op|','
name|'host'
op|','
name|'port'
op|','
name|'factory'
op|','
name|'timeout'
op|'='
number|'30'
op|','
name|'bindAddress'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from'
name|'_inspectro'
name|'import'
name|'LoggingFactory'
newline|'\n'
name|'factory'
op|'='
name|'LoggingFactory'
op|'('
name|'factory'
op|')'
newline|'\n'
name|'return'
name|'sup'
op|'.'
name|'connectTCP'
op|'('
name|'self'
op|','
name|'host'
op|','
name|'port'
op|','
name|'factory'
op|','
name|'timeout'
op|','
name|'bindAddress'
op|')'
newline|'\n'
nl|'\n'
DECL|member|listenSSL
dedent|''
name|'def'
name|'listenSSL'
op|'('
name|'self'
op|','
name|'port'
op|','
name|'factory'
op|','
name|'contextFactory'
op|','
name|'backlog'
op|'='
number|'50'
op|','
name|'interface'
op|'='
string|"''"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from'
name|'_inspectro'
name|'import'
name|'LoggingFactory'
newline|'\n'
name|'factory'
op|'='
name|'LoggingFactory'
op|'('
name|'factory'
op|')'
newline|'\n'
name|'return'
name|'sup'
op|'.'
name|'listenSSL'
op|'('
name|'self'
op|','
name|'port'
op|','
name|'factory'
op|','
name|'contextFactory'
op|','
name|'backlog'
op|','
name|'interface'
op|')'
newline|'\n'
nl|'\n'
DECL|member|connectSSL
dedent|''
name|'def'
name|'connectSSL'
op|'('
name|'self'
op|','
name|'host'
op|','
name|'port'
op|','
name|'factory'
op|','
name|'contextFactory'
op|','
name|'timeout'
op|'='
number|'30'
op|','
name|'bindAddress'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from'
name|'_inspectro'
name|'import'
name|'LoggingFactory'
newline|'\n'
name|'factory'
op|'='
name|'LoggingFactory'
op|'('
name|'factory'
op|')'
newline|'\n'
name|'return'
name|'sup'
op|'.'
name|'connectSSL'
op|'('
name|'self'
op|','
name|'host'
op|','
name|'port'
op|','
name|'factory'
op|','
name|'contextFactory'
op|','
name|'timeout'
op|','
name|'bindAddress'
op|')'
newline|'\n'
nl|'\n'
DECL|member|connectUNIX
dedent|''
name|'def'
name|'connectUNIX'
op|'('
name|'self'
op|','
name|'address'
op|','
name|'factory'
op|','
name|'timeout'
op|'='
number|'30'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from'
name|'_inspectro'
name|'import'
name|'LoggingFactory'
newline|'\n'
name|'factory'
op|'='
name|'LoggingFactory'
op|'('
name|'factory'
op|')'
newline|'\n'
name|'return'
name|'sup'
op|'.'
name|'connectUNIX'
op|'('
name|'self'
op|','
name|'address'
op|','
name|'factory'
op|','
name|'timeout'
op|')'
newline|'\n'
nl|'\n'
DECL|member|listenUNIX
dedent|''
name|'def'
name|'listenUNIX'
op|'('
name|'self'
op|','
name|'address'
op|','
name|'factory'
op|','
name|'backlog'
op|'='
number|'50'
op|','
name|'mode'
op|'='
number|'0666'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'from'
name|'_inspectro'
name|'import'
name|'LoggingFactory'
newline|'\n'
name|'factory'
op|'='
name|'LoggingFactory'
op|'('
name|'factory'
op|')'
newline|'\n'
name|'return'
name|'sup'
op|'.'
name|'listenUNIX'
op|'('
name|'self'
op|','
name|'address'
op|','
name|'factory'
op|','
name|'backlog'
op|','
name|'mode'
op|')'
newline|'\n'
nl|'\n'
DECL|member|on_disconnect_clicked
dedent|''
name|'def'
name|'on_disconnect_clicked'
op|'('
name|'self'
op|','
name|'w'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'store'
op|','
name|'iter'
op|'='
name|'self'
op|'.'
name|'servers'
op|'.'
name|'get_selection'
op|'('
op|')'
op|'.'
name|'get_selected'
op|'('
op|')'
newline|'\n'
name|'store'
op|'['
name|'iter'
op|']'
op|'['
name|'COLUMN_TRANSPORT'
op|']'
op|'.'
name|'loseConnection'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|on_viewlog_clicked
dedent|''
name|'def'
name|'on_viewlog_clicked'
op|'('
name|'self'
op|','
name|'w'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'store'
op|','
name|'iter'
op|'='
name|'self'
op|'.'
name|'servers'
op|'.'
name|'get_selection'
op|'('
op|')'
op|'.'
name|'get_selected'
op|'('
op|')'
newline|'\n'
name|'data'
op|'='
name|'store'
op|'['
name|'iter'
op|']'
op|'['
number|'1'
op|']'
newline|'\n'
name|'from'
name|'_inspectro'
name|'import'
name|'LogViewer'
newline|'\n'
name|'if'
name|'hasattr'
op|'('
name|'data'
op|','
string|'"protocol"'
op|')'
name|'and'
name|'not'
name|'data'
op|'.'
name|'protocol'
op|'.'
name|'logViewer'
op|':'
newline|'\n'
indent|'            '
name|'LogViewer'
op|'('
name|'data'
op|'.'
name|'protocol'
op|')'
newline|'\n'
nl|'\n'
DECL|member|on_inspect_clicked
dedent|''
dedent|''
name|'def'
name|'on_inspect_clicked'
op|'('
name|'self'
op|','
name|'w'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'store'
op|','
name|'iter'
op|'='
name|'self'
op|'.'
name|'servers'
op|'.'
name|'get_selection'
op|'('
op|')'
op|'.'
name|'get_selected'
op|'('
op|')'
newline|'\n'
name|'data'
op|'='
name|'store'
op|'['
name|'iter'
op|']'
newline|'\n'
name|'from'
name|'_inspectro'
name|'import'
name|'Inspectro'
newline|'\n'
name|'Inspectro'
op|'('
name|'data'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|on_suspend_clicked
dedent|''
name|'def'
name|'on_suspend_clicked'
op|'('
name|'self'
op|','
name|'w'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'store'
op|','
name|'iter'
op|'='
name|'self'
op|'.'
name|'servers'
op|'.'
name|'get_selection'
op|'('
op|')'
op|'.'
name|'get_selected'
op|'('
op|')'
newline|'\n'
name|'data'
op|'='
name|'store'
op|'['
name|'iter'
op|']'
newline|'\n'
name|'sup'
op|'.'
name|'removeReader'
op|'('
name|'self'
op|','
name|'data'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
name|'sup'
op|'.'
name|'removeWriter'
op|'('
name|'self'
op|','
name|'data'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
name|'if'
name|'data'
op|'['
name|'COLUMN_DESCRIPTION'
op|']'
op|'.'
name|'endswith'
op|'('
string|"'(suspended)'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'data'
op|'['
name|'COLUMN_READING'
op|']'
op|':'
newline|'\n'
indent|'                '
name|'sup'
op|'.'
name|'addReader'
op|'('
name|'self'
op|','
name|'data'
op|'['
name|'COLUMN_TRANSPORT'
op|']'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'data'
op|'['
name|'COLUMN_WRITING'
op|']'
op|':'
newline|'\n'
indent|'                '
name|'sup'
op|'.'
name|'addWriter'
op|'('
name|'self'
op|','
name|'data'
op|'['
name|'COLUMN_TRANSPORT'
op|']'
op|')'
newline|'\n'
dedent|''
name|'data'
op|'['
name|'COLUMN_DESCRIPTION'
op|']'
op|'='
name|'str'
op|'('
name|'data'
op|'['
name|'COLUMN_TRANSPORT'
op|']'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'toggle_suspend'
op|'('
number|'1'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'data'
op|'['
number|'0'
op|']'
op|'+='
string|"' (suspended)'"
newline|'\n'
name|'self'
op|'.'
name|'toggle_suspend'
op|'('
number|'0'
op|')'
newline|'\n'
nl|'\n'
DECL|member|toggle_suspend
dedent|''
dedent|''
name|'def'
name|'toggle_suspend'
op|'('
name|'self'
op|','
name|'suspending'
op|'='
number|'0'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'stock'
op|','
name|'nonstock'
op|'='
op|'['
op|'('
string|"'gtk-redo'"
op|','
string|"'Resume'"
op|')'
op|','
nl|'\n'
op|'('
string|"'gtk-undo'"
op|','
string|"'Suspend'"
op|')'
op|']'
op|'['
name|'suspending'
op|']'
newline|'\n'
name|'b'
op|'='
name|'self'
op|'.'
name|'xml'
op|'.'
name|'get_widget'
op|'('
string|'"suspend"'
op|')'
newline|'\n'
name|'b'
op|'.'
name|'set_use_stock'
op|'('
number|'1'
op|')'
newline|'\n'
name|'b'
op|'.'
name|'set_label'
op|'('
name|'stock'
op|')'
newline|'\n'
name|'b'
op|'.'
name|'get_child'
op|'('
op|')'
op|'.'
name|'get_child'
op|'('
op|')'
op|'.'
name|'get_children'
op|'('
op|')'
op|'['
number|'1'
op|']'
op|'.'
name|'set_label'
op|'('
name|'nonstock'
op|')'
newline|'\n'
nl|'\n'
DECL|member|servers_selection_changed
dedent|''
name|'def'
name|'servers_selection_changed'
op|'('
name|'self'
op|','
name|'w'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'store'
op|','
name|'iter'
op|'='
name|'w'
op|'.'
name|'get_selected'
op|'('
op|')'
newline|'\n'
name|'if'
name|'iter'
name|'is'
name|'None'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'xml'
op|'.'
name|'get_widget'
op|'('
string|'"suspend"'
op|')'
op|'.'
name|'set_sensitive'
op|'('
number|'0'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'xml'
op|'.'
name|'get_widget'
op|'('
string|"'disconnect'"
op|')'
op|'.'
name|'set_sensitive'
op|'('
number|'0'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'data'
op|'='
name|'store'
op|'['
name|'iter'
op|']'
newline|'\n'
name|'self'
op|'.'
name|'toggle_suspend'
op|'('
name|'not'
nl|'\n'
name|'data'
op|'['
name|'COLUMN_DESCRIPTION'
op|']'
op|'.'
name|'endswith'
op|'('
string|"'(suspended)'"
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'xml'
op|'.'
name|'get_widget'
op|'('
string|'"suspend"'
op|')'
op|'.'
name|'set_sensitive'
op|'('
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'xml'
op|'.'
name|'get_widget'
op|'('
string|"'disconnect'"
op|')'
op|'.'
name|'set_sensitive'
op|'('
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|on_quit_clicked
dedent|''
dedent|''
name|'def'
name|'on_quit_clicked'
op|'('
name|'self'
op|','
name|'w'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|__init__
dedent|''
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'xml'
op|'='
name|'gtk'
op|'.'
name|'glade'
op|'.'
name|'XML'
op|'('
name|'util'
op|'.'
name|'sibpath'
op|'('
name|'__file__'
op|','
string|'"gladereactor.glade"'
op|')'
op|')'
newline|'\n'
name|'d'
op|'='
op|'{'
op|'}'
newline|'\n'
name|'for'
name|'m'
name|'in'
name|'reflect'
op|'.'
name|'prefixedMethods'
op|'('
name|'self'
op|','
string|'"on_"'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'d'
op|'['
name|'m'
op|'.'
name|'im_func'
op|'.'
name|'__name__'
op|']'
op|'='
name|'m'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'xml'
op|'.'
name|'signal_autoconnect'
op|'('
name|'d'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'xml'
op|'.'
name|'get_widget'
op|'('
string|"'window1'"
op|')'
op|'.'
name|'connect'
op|'('
string|"'destroy'"
op|','
nl|'\n'
name|'lambda'
name|'w'
op|':'
name|'self'
op|'.'
name|'stop'
op|'('
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'servers'
op|'='
name|'self'
op|'.'
name|'xml'
op|'.'
name|'get_widget'
op|'('
string|'"servertree"'
op|')'
newline|'\n'
name|'sel'
op|'='
name|'self'
op|'.'
name|'servers'
op|'.'
name|'get_selection'
op|'('
op|')'
newline|'\n'
name|'sel'
op|'.'
name|'set_mode'
op|'('
name|'gtk'
op|'.'
name|'SELECTION_SINGLE'
op|')'
newline|'\n'
name|'sel'
op|'.'
name|'connect'
op|'('
string|'"changed"'
op|','
nl|'\n'
name|'self'
op|'.'
name|'servers_selection_changed'
op|')'
newline|'\n'
comment|'## argh coredump: self.servers_selection_changed(sel)'
nl|'\n'
name|'self'
op|'.'
name|'xml'
op|'.'
name|'get_widget'
op|'('
string|"'suspend'"
op|')'
op|'.'
name|'set_sensitive'
op|'('
number|'0'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'xml'
op|'.'
name|'get_widget'
op|'('
string|"'disconnect'"
op|')'
op|'.'
name|'set_sensitive'
op|'('
number|'0'
op|')'
newline|'\n'
comment|'# setup model, connect it to my treeview'
nl|'\n'
name|'self'
op|'.'
name|'model'
op|'='
name|'gtk'
op|'.'
name|'ListStore'
op|'('
name|'str'
op|','
name|'object'
op|','
name|'gobject'
op|'.'
name|'TYPE_BOOLEAN'
op|','
nl|'\n'
name|'gobject'
op|'.'
name|'TYPE_BOOLEAN'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'servers'
op|'.'
name|'set_model'
op|'('
name|'self'
op|'.'
name|'model'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'servers'
op|'.'
name|'set_reorderable'
op|'('
number|'1'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'servers'
op|'.'
name|'set_headers_clickable'
op|'('
number|'1'
op|')'
newline|'\n'
comment|'# self.servers.set_headers_draggable(1)'
nl|'\n'
comment|'# add a column'
nl|'\n'
name|'for'
name|'col'
name|'in'
op|'['
nl|'\n'
name|'gtk'
op|'.'
name|'TreeViewColumn'
op|'('
string|"'Server'"
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'CellRendererText'
op|'('
op|')'
op|','
nl|'\n'
name|'text'
op|'='
number|'0'
op|')'
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'TreeViewColumn'
op|'('
string|"'Reading'"
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'CellRendererToggle'
op|'('
op|')'
op|','
nl|'\n'
name|'active'
op|'='
number|'2'
op|')'
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'TreeViewColumn'
op|'('
string|"'Writing'"
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'CellRendererToggle'
op|'('
op|')'
op|','
nl|'\n'
name|'active'
op|'='
number|'3'
op|')'
op|']'
op|':'
newline|'\n'
nl|'\n'
indent|'            '
name|'self'
op|'.'
name|'servers'
op|'.'
name|'append_column'
op|'('
name|'col'
op|')'
newline|'\n'
name|'col'
op|'.'
name|'set_resizable'
op|'('
number|'1'
op|')'
newline|'\n'
dedent|''
name|'sup'
op|'.'
name|'__init__'
op|'('
name|'self'
op|')'
newline|'\n'
nl|'\n'
DECL|member|addReader
dedent|''
name|'def'
name|'addReader'
op|'('
name|'self'
op|','
name|'reader'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'sup'
op|'.'
name|'addReader'
op|'('
name|'self'
op|','
name|'reader'
op|')'
newline|'\n'
comment|"##      gtk docs suggest this - but it's stupid"
nl|'\n'
comment|'##         self.model.set(self.model.append(),'
nl|'\n'
comment|'##                        0, str(reader),'
nl|'\n'
comment|'##                        1, reader)'
nl|'\n'
name|'self'
op|'.'
name|'_maybeAddServer'
op|'('
name|'reader'
op|','
name|'read'
op|'='
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_goAway
dedent|''
name|'def'
name|'_goAway'
op|'('
name|'self'
op|','
name|'reader'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'for'
name|'p'
name|'in'
name|'range'
op|'('
name|'len'
op|'('
name|'self'
op|'.'
name|'model'
op|')'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'self'
op|'.'
name|'model'
op|'['
name|'p'
op|']'
op|'['
number|'1'
op|']'
op|'=='
name|'reader'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'model'
op|'.'
name|'remove'
op|'('
name|'self'
op|'.'
name|'model'
op|'.'
name|'get_iter_from_string'
op|'('
name|'str'
op|'('
name|'p'
op|')'
op|')'
op|')'
newline|'\n'
name|'return'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|member|_maybeAddServer
dedent|''
dedent|''
dedent|''
name|'def'
name|'_maybeAddServer'
op|'('
name|'self'
op|','
name|'reader'
op|','
name|'read'
op|'='
number|'0'
op|','
name|'write'
op|'='
number|'0'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'p'
op|'='
number|'0'
newline|'\n'
name|'for'
name|'x'
name|'in'
name|'self'
op|'.'
name|'model'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'x'
op|'['
number|'1'
op|']'
op|'=='
name|'reader'
op|':'
newline|'\n'
indent|'                '
name|'if'
name|'reader'
op|'=='
number|'0'
op|':'
newline|'\n'
indent|'                    '
name|'reader'
op|'+='
number|'1'
newline|'\n'
dedent|''
name|'x'
op|'['
number|'2'
op|']'
op|'+='
name|'read'
newline|'\n'
name|'x'
op|'['
number|'3'
op|']'
op|'+='
name|'write'
newline|'\n'
name|'x'
op|'['
number|'2'
op|']'
op|'='
name|'max'
op|'('
name|'x'
op|'['
number|'2'
op|']'
op|','
number|'0'
op|')'
newline|'\n'
name|'x'
op|'['
number|'3'
op|']'
op|'='
name|'max'
op|'('
name|'x'
op|'['
number|'3'
op|']'
op|','
number|'0'
op|')'
newline|'\n'
nl|'\n'
name|'if'
name|'not'
op|'('
name|'x'
op|'['
number|'2'
op|']'
name|'or'
name|'x'
op|'['
number|'3'
op|']'
op|')'
op|':'
newline|'\n'
indent|'                    '
name|'x'
op|'['
number|'0'
op|']'
op|'='
name|'x'
op|'['
number|'0'
op|']'
op|'+'
string|"'(disconnected)'"
newline|'\n'
name|'self'
op|'.'
name|'callLater'
op|'('
number|'5'
op|','
name|'self'
op|'.'
name|'_goAway'
op|','
name|'reader'
op|')'
newline|'\n'
dedent|''
name|'return'
newline|'\n'
dedent|''
name|'p'
op|'+='
number|'1'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'read'
op|'='
name|'max'
op|'('
name|'read'
op|','
number|'0'
op|')'
newline|'\n'
name|'write'
op|'='
name|'max'
op|'('
name|'write'
op|','
number|'0'
op|')'
newline|'\n'
name|'if'
name|'read'
name|'or'
name|'write'
op|':'
newline|'\n'
indent|'                '
name|'self'
op|'.'
name|'model'
op|'.'
name|'append'
op|'('
op|'('
name|'reader'
op|','
name|'reader'
op|','
name|'read'
op|','
name|'write'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|addWriter
dedent|''
dedent|''
dedent|''
name|'def'
name|'addWriter'
op|'('
name|'self'
op|','
name|'writer'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'sup'
op|'.'
name|'addWriter'
op|'('
name|'self'
op|','
name|'writer'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_maybeAddServer'
op|'('
name|'writer'
op|','
name|'write'
op|'='
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|removeReader
dedent|''
name|'def'
name|'removeReader'
op|'('
name|'self'
op|','
name|'reader'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'sup'
op|'.'
name|'removeReader'
op|'('
name|'self'
op|','
name|'reader'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_maybeAddServer'
op|'('
name|'reader'
op|','
name|'read'
op|'='
op|'-'
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|removeWriter
dedent|''
name|'def'
name|'removeWriter'
op|'('
name|'self'
op|','
name|'writer'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'sup'
op|'.'
name|'removeWriter'
op|'('
name|'self'
op|','
name|'writer'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_maybeAddServer'
op|'('
name|'writer'
op|','
name|'write'
op|'='
op|'-'
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|crash
dedent|''
name|'def'
name|'crash'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'gtk'
op|'.'
name|'main_quit'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|run
dedent|''
name|'def'
name|'run'
op|'('
name|'self'
op|','
name|'installSignalHandlers'
op|'='
number|'1'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'startRunning'
op|'('
name|'installSignalHandlers'
op|'='
name|'installSignalHandlers'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'simulate'
op|'('
op|')'
newline|'\n'
name|'gtk'
op|'.'
name|'main'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|install
dedent|''
dedent|''
name|'def'
name|'install'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Configure the twisted mainloop to be run inside the gtk mainloop.\n    """'
newline|'\n'
name|'reactor'
op|'='
name|'GladeReactor'
op|'('
op|')'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
op|'.'
name|'main'
name|'import'
name|'installReactor'
newline|'\n'
name|'installReactor'
op|'('
name|'reactor'
op|')'
newline|'\n'
name|'return'
name|'reactor'
newline|'\n'
dedent|''
endmarker|''
end_unit
