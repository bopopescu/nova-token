begin_unit
comment|'# -*- test-case-name: twisted.conch.test.test_scripts -*-'
nl|'\n'
comment|'# Copyright (c) 2001-2007 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# $Id: tkconch.py,v 1.6 2003/02/22 08:10:15 z3p Exp $'
nl|'\n'
nl|'\n'
string|'""" Implementation module for the `tkconch` command.\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'__future__'
name|'import'
name|'nested_scopes'
newline|'\n'
nl|'\n'
name|'import'
name|'Tkinter'
op|','
name|'tkFileDialog'
op|','
name|'tkFont'
op|','
name|'tkMessageBox'
op|','
name|'string'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'conch'
op|'.'
name|'ui'
name|'import'
name|'tkvt100'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'conch'
op|'.'
name|'ssh'
name|'import'
name|'transport'
op|','
name|'userauth'
op|','
name|'connection'
op|','
name|'common'
op|','
name|'keys'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'conch'
op|'.'
name|'ssh'
name|'import'
name|'session'
op|','
name|'forwarding'
op|','
name|'channel'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'conch'
op|'.'
name|'client'
op|'.'
name|'default'
name|'import'
name|'isInKnownHosts'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
op|','
name|'defer'
op|','
name|'protocol'
op|','
name|'tksupport'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'usage'
op|','
name|'log'
newline|'\n'
nl|'\n'
name|'import'
name|'os'
op|','
name|'sys'
op|','
name|'getpass'
op|','
name|'struct'
op|','
name|'base64'
op|','
name|'signal'
newline|'\n'
nl|'\n'
DECL|class|TkConchMenu
name|'class'
name|'TkConchMenu'
op|'('
name|'Tkinter'
op|'.'
name|'Frame'
op|')'
op|':'
newline|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|','
op|'**'
name|'params'
op|')'
op|':'
newline|'\n'
comment|'## Standard heading: initialization'
nl|'\n'
indent|'        '
name|'apply'
op|'('
name|'Tkinter'
op|'.'
name|'Frame'
op|'.'
name|'__init__'
op|','
op|'('
name|'self'
op|','
op|')'
op|'+'
name|'args'
op|','
name|'params'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'master'
op|'.'
name|'title'
op|'('
string|"'TkConch'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'localRemoteVar'
op|'='
name|'Tkinter'
op|'.'
name|'StringVar'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'localRemoteVar'
op|'.'
name|'set'
op|'('
string|"'local'"
op|')'
newline|'\n'
nl|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'anchor'
op|'='
string|"'w'"
op|','
name|'justify'
op|'='
string|"'left'"
op|','
name|'text'
op|'='
string|"'Hostname'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'1'
op|','
name|'sticky'
op|'='
string|"'w'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'host'
op|'='
name|'Tkinter'
op|'.'
name|'Entry'
op|'('
name|'self'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'host'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'columnspan'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'1'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
nl|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'anchor'
op|'='
string|"'w'"
op|','
name|'justify'
op|'='
string|"'left'"
op|','
name|'text'
op|'='
string|"'Port'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'2'
op|','
name|'sticky'
op|'='
string|"'w'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'port'
op|'='
name|'Tkinter'
op|'.'
name|'Entry'
op|'('
name|'self'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'port'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'columnspan'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'2'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
nl|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'anchor'
op|'='
string|"'w'"
op|','
name|'justify'
op|'='
string|"'left'"
op|','
name|'text'
op|'='
string|"'Username'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'3'
op|','
name|'sticky'
op|'='
string|"'w'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'user'
op|'='
name|'Tkinter'
op|'.'
name|'Entry'
op|'('
name|'self'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'user'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'columnspan'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'3'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
nl|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'anchor'
op|'='
string|"'w'"
op|','
name|'justify'
op|'='
string|"'left'"
op|','
name|'text'
op|'='
string|"'Command'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'4'
op|','
name|'sticky'
op|'='
string|"'w'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'command'
op|'='
name|'Tkinter'
op|'.'
name|'Entry'
op|'('
name|'self'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'command'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'columnspan'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'4'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
nl|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'anchor'
op|'='
string|"'w'"
op|','
name|'justify'
op|'='
string|"'left'"
op|','
name|'text'
op|'='
string|"'Identity'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'5'
op|','
name|'sticky'
op|'='
string|"'w'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'identity'
op|'='
name|'Tkinter'
op|'.'
name|'Entry'
op|'('
name|'self'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'identity'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'5'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
name|'Tkinter'
op|'.'
name|'Button'
op|'('
name|'self'
op|','
name|'command'
op|'='
name|'self'
op|'.'
name|'getIdentityFile'
op|','
name|'text'
op|'='
string|"'Browse'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'3'
op|','
name|'row'
op|'='
number|'5'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
nl|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'text'
op|'='
string|"'Port Forwarding'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'6'
op|','
name|'sticky'
op|'='
string|"'w'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'forwards'
op|'='
name|'Tkinter'
op|'.'
name|'Listbox'
op|'('
name|'self'
op|','
name|'height'
op|'='
number|'0'
op|','
name|'width'
op|'='
number|'0'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'forwards'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'columnspan'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'6'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
name|'Tkinter'
op|'.'
name|'Button'
op|'('
name|'self'
op|','
name|'text'
op|'='
string|"'Add'"
op|','
name|'command'
op|'='
name|'self'
op|'.'
name|'addForward'
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'7'
op|')'
newline|'\n'
name|'Tkinter'
op|'.'
name|'Button'
op|'('
name|'self'
op|','
name|'text'
op|'='
string|"'Remove'"
op|','
name|'command'
op|'='
name|'self'
op|'.'
name|'removeForward'
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'8'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'forwardPort'
op|'='
name|'Tkinter'
op|'.'
name|'Entry'
op|'('
name|'self'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'forwardPort'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'7'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'text'
op|'='
string|"'Port'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'3'
op|','
name|'row'
op|'='
number|'7'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'forwardHost'
op|'='
name|'Tkinter'
op|'.'
name|'Entry'
op|'('
name|'self'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'forwardHost'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'8'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'text'
op|'='
string|"'Host'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'3'
op|','
name|'row'
op|'='
number|'8'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'localForward'
op|'='
name|'Tkinter'
op|'.'
name|'Radiobutton'
op|'('
name|'self'
op|','
name|'text'
op|'='
string|"'Local'"
op|','
name|'variable'
op|'='
name|'self'
op|'.'
name|'localRemoteVar'
op|','
name|'value'
op|'='
string|"'local'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'localForward'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'9'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'remoteForward'
op|'='
name|'Tkinter'
op|'.'
name|'Radiobutton'
op|'('
name|'self'
op|','
name|'text'
op|'='
string|"'Remote'"
op|','
name|'variable'
op|'='
name|'self'
op|'.'
name|'localRemoteVar'
op|','
name|'value'
op|'='
string|"'remote'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'remoteForward'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'3'
op|','
name|'row'
op|'='
number|'9'
op|')'
newline|'\n'
nl|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'text'
op|'='
string|"'Advanced Options'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'columnspan'
op|'='
number|'3'
op|','
name|'row'
op|'='
number|'10'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
nl|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'anchor'
op|'='
string|"'w'"
op|','
name|'justify'
op|'='
string|"'left'"
op|','
name|'text'
op|'='
string|"'Cipher'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'11'
op|','
name|'sticky'
op|'='
string|"'w'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cipher'
op|'='
name|'Tkinter'
op|'.'
name|'Entry'
op|'('
name|'self'
op|','
name|'name'
op|'='
string|"'cipher'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'cipher'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'columnspan'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'11'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
nl|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'anchor'
op|'='
string|"'w'"
op|','
name|'justify'
op|'='
string|"'left'"
op|','
name|'text'
op|'='
string|"'MAC'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'12'
op|','
name|'sticky'
op|'='
string|"'w'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'mac'
op|'='
name|'Tkinter'
op|'.'
name|'Entry'
op|'('
name|'self'
op|','
name|'name'
op|'='
string|"'mac'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'mac'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'columnspan'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'12'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
nl|'\n'
name|'Tkinter'
op|'.'
name|'Label'
op|'('
name|'self'
op|','
name|'anchor'
op|'='
string|"'w'"
op|','
name|'justify'
op|'='
string|"'left'"
op|','
name|'text'
op|'='
string|"'Escape Char'"
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'row'
op|'='
number|'13'
op|','
name|'sticky'
op|'='
string|"'w'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'escape'
op|'='
name|'Tkinter'
op|'.'
name|'Entry'
op|'('
name|'self'
op|','
name|'name'
op|'='
string|"'escape'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'escape'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'2'
op|','
name|'columnspan'
op|'='
number|'2'
op|','
name|'row'
op|'='
number|'13'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
name|'Tkinter'
op|'.'
name|'Button'
op|'('
name|'self'
op|','
name|'text'
op|'='
string|"'Connect!'"
op|','
name|'command'
op|'='
name|'self'
op|'.'
name|'doConnect'
op|')'
op|'.'
name|'grid'
op|'('
name|'column'
op|'='
number|'1'
op|','
name|'columnspan'
op|'='
number|'3'
op|','
name|'row'
op|'='
number|'14'
op|','
name|'sticky'
op|'='
string|"'nesw'"
op|')'
newline|'\n'
nl|'\n'
comment|'# Resize behavior(s)'
nl|'\n'
name|'self'
op|'.'
name|'grid_rowconfigure'
op|'('
number|'6'
op|','
name|'weight'
op|'='
number|'1'
op|','
name|'minsize'
op|'='
number|'64'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'grid_columnconfigure'
op|'('
number|'2'
op|','
name|'weight'
op|'='
number|'1'
op|','
name|'minsize'
op|'='
number|'2'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'master'
op|'.'
name|'protocol'
op|'('
string|'"WM_DELETE_WINDOW"'
op|','
name|'sys'
op|'.'
name|'exit'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|member|getIdentityFile
dedent|''
name|'def'
name|'getIdentityFile'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'r'
op|'='
name|'tkFileDialog'
op|'.'
name|'askopenfilename'
op|'('
op|')'
newline|'\n'
name|'if'
name|'r'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'identity'
op|'.'
name|'delete'
op|'('
number|'0'
op|','
name|'Tkinter'
op|'.'
name|'END'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'identity'
op|'.'
name|'insert'
op|'('
name|'Tkinter'
op|'.'
name|'END'
op|','
name|'r'
op|')'
newline|'\n'
nl|'\n'
DECL|member|addForward
dedent|''
dedent|''
name|'def'
name|'addForward'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'port'
op|'='
name|'self'
op|'.'
name|'forwardPort'
op|'.'
name|'get'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'forwardPort'
op|'.'
name|'delete'
op|'('
number|'0'
op|','
name|'Tkinter'
op|'.'
name|'END'
op|')'
newline|'\n'
name|'host'
op|'='
name|'self'
op|'.'
name|'forwardHost'
op|'.'
name|'get'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'forwardHost'
op|'.'
name|'delete'
op|'('
number|'0'
op|','
name|'Tkinter'
op|'.'
name|'END'
op|')'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'localRemoteVar'
op|'.'
name|'get'
op|'('
op|')'
op|'=='
string|"'local'"
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'forwards'
op|'.'
name|'insert'
op|'('
name|'Tkinter'
op|'.'
name|'END'
op|','
string|"'L:%s:%s'"
op|'%'
op|'('
name|'port'
op|','
name|'host'
op|')'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'forwards'
op|'.'
name|'insert'
op|'('
name|'Tkinter'
op|'.'
name|'END'
op|','
string|"'R:%s:%s'"
op|'%'
op|'('
name|'port'
op|','
name|'host'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|removeForward
dedent|''
dedent|''
name|'def'
name|'removeForward'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'cur'
op|'='
name|'self'
op|'.'
name|'forwards'
op|'.'
name|'curselection'
op|'('
op|')'
newline|'\n'
name|'if'
name|'cur'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'forwards'
op|'.'
name|'remove'
op|'('
name|'cur'
op|'['
number|'0'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|doConnect
dedent|''
dedent|''
name|'def'
name|'doConnect'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'finished'
op|'='
number|'1'
newline|'\n'
name|'options'
op|'['
string|"'host'"
op|']'
op|'='
name|'self'
op|'.'
name|'host'
op|'.'
name|'get'
op|'('
op|')'
newline|'\n'
name|'options'
op|'['
string|"'port'"
op|']'
op|'='
name|'self'
op|'.'
name|'port'
op|'.'
name|'get'
op|'('
op|')'
newline|'\n'
name|'options'
op|'['
string|"'user'"
op|']'
op|'='
name|'self'
op|'.'
name|'user'
op|'.'
name|'get'
op|'('
op|')'
newline|'\n'
name|'options'
op|'['
string|"'command'"
op|']'
op|'='
name|'self'
op|'.'
name|'command'
op|'.'
name|'get'
op|'('
op|')'
newline|'\n'
name|'cipher'
op|'='
name|'self'
op|'.'
name|'cipher'
op|'.'
name|'get'
op|'('
op|')'
newline|'\n'
name|'mac'
op|'='
name|'self'
op|'.'
name|'mac'
op|'.'
name|'get'
op|'('
op|')'
newline|'\n'
name|'escape'
op|'='
name|'self'
op|'.'
name|'escape'
op|'.'
name|'get'
op|'('
op|')'
newline|'\n'
name|'if'
name|'cipher'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'cipher'
name|'in'
name|'SSHClientTransport'
op|'.'
name|'supportedCiphers'
op|':'
newline|'\n'
indent|'                '
name|'SSHClientTransport'
op|'.'
name|'supportedCiphers'
op|'='
op|'['
name|'cipher'
op|']'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'tkMessageBox'
op|'.'
name|'showerror'
op|'('
string|"'TkConch'"
op|','
string|"'Bad cipher.'"
op|')'
newline|'\n'
name|'finished'
op|'='
number|'0'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'mac'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'mac'
name|'in'
name|'SSHClientTransport'
op|'.'
name|'supportedMACs'
op|':'
newline|'\n'
indent|'                '
name|'SSHClientTransport'
op|'.'
name|'supportedMACs'
op|'='
op|'['
name|'mac'
op|']'
newline|'\n'
dedent|''
name|'elif'
name|'finished'
op|':'
newline|'\n'
indent|'                '
name|'tkMessageBox'
op|'.'
name|'showerror'
op|'('
string|"'TkConch'"
op|','
string|"'Bad MAC.'"
op|')'
newline|'\n'
name|'finished'
op|'='
number|'0'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'escape'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'escape'
op|'=='
string|"'none'"
op|':'
newline|'\n'
indent|'                '
name|'options'
op|'['
string|"'escape'"
op|']'
op|'='
name|'None'
newline|'\n'
dedent|''
name|'elif'
name|'escape'
op|'['
number|'0'
op|']'
op|'=='
string|"'^'"
name|'and'
name|'len'
op|'('
name|'escape'
op|')'
op|'=='
number|'2'
op|':'
newline|'\n'
indent|'                '
name|'options'
op|'['
string|"'escape'"
op|']'
op|'='
name|'chr'
op|'('
name|'ord'
op|'('
name|'escape'
op|'['
number|'1'
op|']'
op|')'
op|'-'
number|'64'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'len'
op|'('
name|'escape'
op|')'
op|'=='
number|'1'
op|':'
newline|'\n'
indent|'                '
name|'options'
op|'['
string|"'escape'"
op|']'
op|'='
name|'escape'
newline|'\n'
dedent|''
name|'elif'
name|'finished'
op|':'
newline|'\n'
indent|'                '
name|'tkMessageBox'
op|'.'
name|'showerror'
op|'('
string|"'TkConch'"
op|','
string|'"Bad escape character \'%s\'."'
op|'%'
name|'escape'
op|')'
newline|'\n'
name|'finished'
op|'='
number|'0'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'self'
op|'.'
name|'identity'
op|'.'
name|'get'
op|'('
op|')'
op|':'
newline|'\n'
indent|'            '
name|'options'
op|'.'
name|'identitys'
op|'.'
name|'append'
op|'('
name|'self'
op|'.'
name|'identity'
op|'.'
name|'get'
op|'('
op|')'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'for'
name|'line'
name|'in'
name|'self'
op|'.'
name|'forwards'
op|'.'
name|'get'
op|'('
number|'0'
op|','
name|'Tkinter'
op|'.'
name|'END'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'line'
op|'['
number|'0'
op|']'
op|'=='
string|"'L'"
op|':'
newline|'\n'
indent|'                '
name|'options'
op|'.'
name|'opt_localforward'
op|'('
name|'line'
op|'['
number|'2'
op|':'
op|']'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'options'
op|'.'
name|'opt_remoteforward'
op|'('
name|'line'
op|'['
number|'2'
op|':'
op|']'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
string|"'@'"
name|'in'
name|'options'
op|'['
string|"'host'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'options'
op|'['
string|"'user'"
op|']'
op|','
name|'options'
op|'['
string|"'host'"
op|']'
op|'='
name|'options'
op|'['
string|"'host'"
op|']'
op|'.'
name|'split'
op|'('
string|"'@'"
op|','
number|'1'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
op|'('
name|'not'
name|'options'
op|'['
string|"'host'"
op|']'
name|'or'
name|'not'
name|'options'
op|'['
string|"'user'"
op|']'
op|')'
name|'and'
name|'finished'
op|':'
newline|'\n'
indent|'            '
name|'tkMessageBox'
op|'.'
name|'showerror'
op|'('
string|"'TkConch'"
op|','
string|"'Missing host or username.'"
op|')'
newline|'\n'
name|'finished'
op|'='
number|'0'
newline|'\n'
dedent|''
name|'if'
name|'finished'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'master'
op|'.'
name|'quit'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'master'
op|'.'
name|'destroy'
op|'('
op|')'
newline|'\n'
name|'if'
name|'options'
op|'['
string|"'log'"
op|']'
op|':'
newline|'\n'
indent|'                '
name|'realout'
op|'='
name|'sys'
op|'.'
name|'stdout'
newline|'\n'
name|'log'
op|'.'
name|'startLogging'
op|'('
name|'sys'
op|'.'
name|'stderr'
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'stdout'
op|'='
name|'realout'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'log'
op|'.'
name|'discardLogs'
op|'('
op|')'
newline|'\n'
dedent|''
name|'log'
op|'.'
name|'deferr'
op|'='
name|'handleError'
comment|'# HACK'
newline|'\n'
name|'if'
name|'not'
name|'options'
op|'.'
name|'identitys'
op|':'
newline|'\n'
indent|'                '
name|'options'
op|'.'
name|'identitys'
op|'='
op|'['
string|"'~/.ssh/id_rsa'"
op|','
string|"'~/.ssh/id_dsa'"
op|']'
newline|'\n'
dedent|''
name|'host'
op|'='
name|'options'
op|'['
string|"'host'"
op|']'
newline|'\n'
name|'port'
op|'='
name|'int'
op|'('
name|'options'
op|'['
string|"'port'"
op|']'
name|'or'
number|'22'
op|')'
newline|'\n'
name|'log'
op|'.'
name|'msg'
op|'('
op|'('
name|'host'
op|','
name|'port'
op|')'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'connectTCP'
op|'('
name|'host'
op|','
name|'port'
op|','
name|'SSHClientFactory'
op|'('
op|')'
op|')'
newline|'\n'
name|'frame'
op|'.'
name|'master'
op|'.'
name|'deiconify'
op|'('
op|')'
newline|'\n'
name|'frame'
op|'.'
name|'master'
op|'.'
name|'title'
op|'('
string|"'%s@%s - TkConch'"
op|'%'
op|'('
name|'options'
op|'['
string|"'user'"
op|']'
op|','
name|'options'
op|'['
string|"'host'"
op|']'
op|')'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'focus'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|class|GeneralOptions
dedent|''
dedent|''
dedent|''
name|'class'
name|'GeneralOptions'
op|'('
name|'usage'
op|'.'
name|'Options'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'synopsis'
op|'='
string|'"""Usage:    tkconch [options] host [command]\n """'
newline|'\n'
nl|'\n'
DECL|variable|optParameters
name|'optParameters'
op|'='
op|'['
op|'['
string|"'user'"
op|','
string|"'l'"
op|','
name|'None'
op|','
string|"'Log in using this user name.'"
op|']'
op|','
nl|'\n'
op|'['
string|"'identity'"
op|','
string|"'i'"
op|','
string|"'~/.ssh/identity'"
op|','
string|"'Identity for public key authentication'"
op|']'
op|','
nl|'\n'
op|'['
string|"'escape'"
op|','
string|"'e'"
op|','
string|"'~'"
op|','
string|'"Set escape character; ``none\'\' = disable"'
op|']'
op|','
nl|'\n'
op|'['
string|"'cipher'"
op|','
string|"'c'"
op|','
name|'None'
op|','
string|"'Select encryption algorithm.'"
op|']'
op|','
nl|'\n'
op|'['
string|"'macs'"
op|','
string|"'m'"
op|','
name|'None'
op|','
string|"'Specify MAC algorithms for protocol version 2.'"
op|']'
op|','
nl|'\n'
op|'['
string|"'port'"
op|','
string|"'p'"
op|','
name|'None'
op|','
string|"'Connect to this port.  Server must be on the same port.'"
op|']'
op|','
nl|'\n'
op|'['
string|"'localforward'"
op|','
string|"'L'"
op|','
name|'None'
op|','
string|"'listen-port:host:port   Forward local port to remote address'"
op|']'
op|','
nl|'\n'
op|'['
string|"'remoteforward'"
op|','
string|"'R'"
op|','
name|'None'
op|','
string|"'listen-port:host:port   Forward remote port to local address'"
op|']'
op|','
nl|'\n'
op|']'
newline|'\n'
nl|'\n'
DECL|variable|optFlags
name|'optFlags'
op|'='
op|'['
op|'['
string|"'tty'"
op|','
string|"'t'"
op|','
string|"'Tty; allocate a tty even if command is given.'"
op|']'
op|','
nl|'\n'
op|'['
string|"'notty'"
op|','
string|"'T'"
op|','
string|"'Do not allocate a tty.'"
op|']'
op|','
nl|'\n'
op|'['
string|"'version'"
op|','
string|"'V'"
op|','
string|"'Display version number only.'"
op|']'
op|','
nl|'\n'
op|'['
string|"'compress'"
op|','
string|"'C'"
op|','
string|"'Enable compression.'"
op|']'
op|','
nl|'\n'
op|'['
string|"'noshell'"
op|','
string|"'N'"
op|','
string|"'Do not execute a shell or command.'"
op|']'
op|','
nl|'\n'
op|'['
string|"'subsystem'"
op|','
string|"'s'"
op|','
string|"'Invoke command (mandatory) as SSH2 subsystem.'"
op|']'
op|','
nl|'\n'
op|'['
string|"'log'"
op|','
string|"'v'"
op|','
string|"'Log to stderr'"
op|']'
op|','
nl|'\n'
op|'['
string|"'ansilog'"
op|','
string|"'a'"
op|','
string|"'Print the receieved data to stdout'"
op|']'
op|']'
newline|'\n'
nl|'\n'
comment|'#zsh_altArgDescr = {"foo":"use this description for foo instead"}'
nl|'\n'
comment|'#zsh_multiUse = ["foo", "bar"]'
nl|'\n'
DECL|variable|zsh_mutuallyExclusive
name|'zsh_mutuallyExclusive'
op|'='
op|'['
op|'('
string|'"tty"'
op|','
string|'"notty"'
op|')'
op|']'
newline|'\n'
DECL|variable|zsh_actions
name|'zsh_actions'
op|'='
op|'{'
string|'"cipher"'
op|':'
string|'"(%s)"'
op|'%'
string|'" "'
op|'.'
name|'join'
op|'('
name|'transport'
op|'.'
name|'SSHClientTransport'
op|'.'
name|'supportedCiphers'
op|')'
op|','
nl|'\n'
string|'"macs"'
op|':'
string|'"(%s)"'
op|'%'
string|'" "'
op|'.'
name|'join'
op|'('
name|'transport'
op|'.'
name|'SSHClientTransport'
op|'.'
name|'supportedMACs'
op|')'
op|'}'
newline|'\n'
DECL|variable|zsh_actionDescr
name|'zsh_actionDescr'
op|'='
op|'{'
string|'"localforward"'
op|':'
string|'"listen-port:host:port"'
op|','
nl|'\n'
string|'"remoteforward"'
op|':'
string|'"listen-port:host:port"'
op|'}'
newline|'\n'
comment|"# user, host, or user@host completion similar to zsh's ssh completion"
nl|'\n'
name|'zsh_extras'
op|'='
op|'['
string|'\'1:host | user@host:{_ssh;if compset -P "*@"; then _wanted hosts expl "remote host name" _ssh_hosts && ret=0 elif compset -S "@*"; then _wanted users expl "login name" _ssh_users -S "" && ret=0 else if (( $+opt_args[-l] )); then tmp=() else tmp=( "users:login name:_ssh_users -qS@" ) fi; _alternative "hosts:remote host name:_ssh_hosts" "$tmp[@]" && ret=0 fi}\''
op|','
nl|'\n'
string|"'*:command: '"
op|']'
newline|'\n'
nl|'\n'
DECL|variable|identitys
name|'identitys'
op|'='
op|'['
op|']'
newline|'\n'
DECL|variable|localForwards
name|'localForwards'
op|'='
op|'['
op|']'
newline|'\n'
DECL|variable|remoteForwards
name|'remoteForwards'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
DECL|member|opt_identity
name|'def'
name|'opt_identity'
op|'('
name|'self'
op|','
name|'i'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'identitys'
op|'.'
name|'append'
op|'('
name|'i'
op|')'
newline|'\n'
nl|'\n'
DECL|member|opt_localforward
dedent|''
name|'def'
name|'opt_localforward'
op|'('
name|'self'
op|','
name|'f'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'localPort'
op|','
name|'remoteHost'
op|','
name|'remotePort'
op|'='
name|'f'
op|'.'
name|'split'
op|'('
string|"':'"
op|')'
comment|"# doesn't do v6 yet"
newline|'\n'
name|'localPort'
op|'='
name|'int'
op|'('
name|'localPort'
op|')'
newline|'\n'
name|'remotePort'
op|'='
name|'int'
op|'('
name|'remotePort'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'localForwards'
op|'.'
name|'append'
op|'('
op|'('
name|'localPort'
op|','
op|'('
name|'remoteHost'
op|','
name|'remotePort'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|opt_remoteforward
dedent|''
name|'def'
name|'opt_remoteforward'
op|'('
name|'self'
op|','
name|'f'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'remotePort'
op|','
name|'connHost'
op|','
name|'connPort'
op|'='
name|'f'
op|'.'
name|'split'
op|'('
string|"':'"
op|')'
comment|"# doesn't do v6 yet"
newline|'\n'
name|'remotePort'
op|'='
name|'int'
op|'('
name|'remotePort'
op|')'
newline|'\n'
name|'connPort'
op|'='
name|'int'
op|'('
name|'connPort'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'remoteForwards'
op|'.'
name|'append'
op|'('
op|'('
name|'remotePort'
op|','
op|'('
name|'connHost'
op|','
name|'connPort'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|opt_compress
dedent|''
name|'def'
name|'opt_compress'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'SSHClientTransport'
op|'.'
name|'supportedCompressions'
op|'['
number|'0'
op|':'
number|'1'
op|']'
op|'='
op|'['
string|"'zlib'"
op|']'
newline|'\n'
nl|'\n'
DECL|member|parseArgs
dedent|''
name|'def'
name|'parseArgs'
op|'('
name|'self'
op|','
op|'*'
name|'args'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'args'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'['
string|"'host'"
op|']'
op|'='
name|'args'
op|'['
number|'0'
op|']'
newline|'\n'
name|'self'
op|'['
string|"'command'"
op|']'
op|'='
string|"' '"
op|'.'
name|'join'
op|'('
name|'args'
op|'['
number|'1'
op|':'
op|']'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'['
string|"'host'"
op|']'
op|'='
string|"''"
newline|'\n'
name|'self'
op|'['
string|"'command'"
op|']'
op|'='
string|"''"
newline|'\n'
nl|'\n'
comment|'# Rest of code in "run"'
nl|'\n'
DECL|variable|options
dedent|''
dedent|''
dedent|''
name|'options'
op|'='
name|'None'
newline|'\n'
DECL|variable|menu
name|'menu'
op|'='
name|'None'
newline|'\n'
DECL|variable|exitStatus
name|'exitStatus'
op|'='
number|'0'
newline|'\n'
DECL|variable|frame
name|'frame'
op|'='
name|'None'
newline|'\n'
nl|'\n'
DECL|function|deferredAskFrame
name|'def'
name|'deferredAskFrame'
op|'('
name|'question'
op|','
name|'echo'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'if'
name|'frame'
op|'.'
name|'callback'
op|':'
newline|'\n'
indent|'        '
name|'raise'
name|'ValueError'
op|'('
string|'"can\'t ask 2 questions at once!"'
op|')'
newline|'\n'
dedent|''
name|'d'
op|'='
name|'defer'
op|'.'
name|'Deferred'
op|'('
op|')'
newline|'\n'
name|'resp'
op|'='
op|'['
op|']'
newline|'\n'
DECL|function|gotChar
name|'def'
name|'gotChar'
op|'('
name|'ch'
op|','
name|'resp'
op|'='
name|'resp'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'not'
name|'ch'
op|':'
name|'return'
newline|'\n'
name|'if'
name|'ch'
op|'=='
string|"'\\x03'"
op|':'
comment|'# C-c'
newline|'\n'
indent|'            '
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
dedent|''
name|'if'
name|'ch'
op|'=='
string|"'\\r'"
op|':'
newline|'\n'
indent|'            '
name|'frame'
op|'.'
name|'write'
op|'('
string|"'\\r\\n'"
op|')'
newline|'\n'
name|'stresp'
op|'='
string|"''"
op|'.'
name|'join'
op|'('
name|'resp'
op|')'
newline|'\n'
name|'del'
name|'resp'
newline|'\n'
name|'frame'
op|'.'
name|'callback'
op|'='
name|'None'
newline|'\n'
name|'d'
op|'.'
name|'callback'
op|'('
name|'stresp'
op|')'
newline|'\n'
name|'return'
newline|'\n'
dedent|''
name|'elif'
number|'32'
op|'<='
name|'ord'
op|'('
name|'ch'
op|')'
op|'<'
number|'127'
op|':'
newline|'\n'
indent|'            '
name|'resp'
op|'.'
name|'append'
op|'('
name|'ch'
op|')'
newline|'\n'
name|'if'
name|'echo'
op|':'
newline|'\n'
indent|'                '
name|'frame'
op|'.'
name|'write'
op|'('
name|'ch'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'elif'
name|'ord'
op|'('
name|'ch'
op|')'
op|'=='
number|'8'
name|'and'
name|'resp'
op|':'
comment|'# BS'
newline|'\n'
indent|'            '
name|'if'
name|'echo'
op|':'
name|'frame'
op|'.'
name|'write'
op|'('
string|"'\\x08 \\x08'"
op|')'
newline|'\n'
name|'resp'
op|'.'
name|'pop'
op|'('
op|')'
newline|'\n'
dedent|''
dedent|''
name|'frame'
op|'.'
name|'callback'
op|'='
name|'gotChar'
newline|'\n'
name|'frame'
op|'.'
name|'write'
op|'('
name|'question'
op|')'
newline|'\n'
name|'frame'
op|'.'
name|'canvas'
op|'.'
name|'focus_force'
op|'('
op|')'
newline|'\n'
name|'return'
name|'d'
newline|'\n'
nl|'\n'
DECL|function|run
dedent|''
name|'def'
name|'run'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'global'
name|'menu'
op|','
name|'options'
op|','
name|'frame'
newline|'\n'
name|'args'
op|'='
name|'sys'
op|'.'
name|'argv'
op|'['
number|'1'
op|':'
op|']'
newline|'\n'
name|'if'
string|"'-l'"
name|'in'
name|'args'
op|':'
comment|'# cvs is an idiot'
newline|'\n'
indent|'        '
name|'i'
op|'='
name|'args'
op|'.'
name|'index'
op|'('
string|"'-l'"
op|')'
newline|'\n'
name|'args'
op|'='
name|'args'
op|'['
name|'i'
op|':'
name|'i'
op|'+'
number|'2'
op|']'
op|'+'
name|'args'
newline|'\n'
name|'del'
name|'args'
op|'['
name|'i'
op|'+'
number|'2'
op|':'
name|'i'
op|'+'
number|'4'
op|']'
newline|'\n'
dedent|''
name|'for'
name|'arg'
name|'in'
name|'args'
op|'['
op|':'
op|']'
op|':'
newline|'\n'
indent|'        '
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'i'
op|'='
name|'args'
op|'.'
name|'index'
op|'('
name|'arg'
op|')'
newline|'\n'
name|'if'
name|'arg'
op|'['
op|':'
number|'2'
op|']'
op|'=='
string|"'-o'"
name|'and'
name|'args'
op|'['
name|'i'
op|'+'
number|'1'
op|']'
op|'['
number|'0'
op|']'
op|'!='
string|"'-'"
op|':'
newline|'\n'
indent|'                '
name|'args'
op|'['
name|'i'
op|':'
name|'i'
op|'+'
number|'2'
op|']'
op|'='
op|'['
op|']'
comment|'# suck on it scp'
newline|'\n'
dedent|''
dedent|''
name|'except'
name|'ValueError'
op|':'
newline|'\n'
indent|'            '
name|'pass'
newline|'\n'
dedent|''
dedent|''
name|'root'
op|'='
name|'Tkinter'
op|'.'
name|'Tk'
op|'('
op|')'
newline|'\n'
name|'root'
op|'.'
name|'withdraw'
op|'('
op|')'
newline|'\n'
name|'top'
op|'='
name|'Tkinter'
op|'.'
name|'Toplevel'
op|'('
op|')'
newline|'\n'
name|'menu'
op|'='
name|'TkConchMenu'
op|'('
name|'top'
op|')'
newline|'\n'
name|'menu'
op|'.'
name|'pack'
op|'('
name|'side'
op|'='
name|'Tkinter'
op|'.'
name|'TOP'
op|','
name|'fill'
op|'='
name|'Tkinter'
op|'.'
name|'BOTH'
op|','
name|'expand'
op|'='
number|'1'
op|')'
newline|'\n'
name|'options'
op|'='
name|'GeneralOptions'
op|'('
op|')'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'        '
name|'options'
op|'.'
name|'parseOptions'
op|'('
name|'args'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'usage'
op|'.'
name|'UsageError'
op|','
name|'u'
op|':'
newline|'\n'
indent|'        '
name|'print'
string|"'ERROR: %s'"
op|'%'
name|'u'
newline|'\n'
name|'options'
op|'.'
name|'opt_help'
op|'('
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
number|'1'
op|')'
newline|'\n'
dedent|''
name|'for'
name|'k'
op|','
name|'v'
name|'in'
name|'options'
op|'.'
name|'items'
op|'('
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'v'
name|'and'
name|'hasattr'
op|'('
name|'menu'
op|','
name|'k'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'getattr'
op|'('
name|'menu'
op|','
name|'k'
op|')'
op|'.'
name|'insert'
op|'('
name|'Tkinter'
op|'.'
name|'END'
op|','
name|'v'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'for'
op|'('
name|'p'
op|','
op|'('
name|'rh'
op|','
name|'rp'
op|')'
op|')'
name|'in'
name|'options'
op|'.'
name|'localForwards'
op|':'
newline|'\n'
indent|'        '
name|'menu'
op|'.'
name|'forwards'
op|'.'
name|'insert'
op|'('
name|'Tkinter'
op|'.'
name|'END'
op|','
string|"'L:%s:%s:%s'"
op|'%'
op|'('
name|'p'
op|','
name|'rh'
op|','
name|'rp'
op|')'
op|')'
newline|'\n'
dedent|''
name|'options'
op|'.'
name|'localForwards'
op|'='
op|'['
op|']'
newline|'\n'
name|'for'
op|'('
name|'p'
op|','
op|'('
name|'rh'
op|','
name|'rp'
op|')'
op|')'
name|'in'
name|'options'
op|'.'
name|'remoteForwards'
op|':'
newline|'\n'
indent|'        '
name|'menu'
op|'.'
name|'forwards'
op|'.'
name|'insert'
op|'('
name|'Tkinter'
op|'.'
name|'END'
op|','
string|"'R:%s:%s:%s'"
op|'%'
op|'('
name|'p'
op|','
name|'rh'
op|','
name|'rp'
op|')'
op|')'
newline|'\n'
dedent|''
name|'options'
op|'.'
name|'remoteForwards'
op|'='
op|'['
op|']'
newline|'\n'
name|'frame'
op|'='
name|'tkvt100'
op|'.'
name|'VT100Frame'
op|'('
name|'root'
op|','
name|'callback'
op|'='
name|'None'
op|')'
newline|'\n'
name|'root'
op|'.'
name|'geometry'
op|'('
string|"'%dx%d'"
op|'%'
op|'('
name|'tkvt100'
op|'.'
name|'fontWidth'
op|'*'
name|'frame'
op|'.'
name|'width'
op|'+'
number|'3'
op|','
name|'tkvt100'
op|'.'
name|'fontHeight'
op|'*'
name|'frame'
op|'.'
name|'height'
op|'+'
number|'3'
op|')'
op|')'
newline|'\n'
name|'frame'
op|'.'
name|'pack'
op|'('
name|'side'
op|'='
name|'Tkinter'
op|'.'
name|'TOP'
op|')'
newline|'\n'
name|'tksupport'
op|'.'
name|'install'
op|'('
name|'root'
op|')'
newline|'\n'
name|'root'
op|'.'
name|'withdraw'
op|'('
op|')'
newline|'\n'
name|'if'
op|'('
name|'options'
op|'['
string|"'host'"
op|']'
name|'and'
name|'options'
op|'['
string|"'user'"
op|']'
op|')'
name|'or'
string|"'@'"
name|'in'
name|'options'
op|'['
string|"'host'"
op|']'
op|':'
newline|'\n'
indent|'        '
name|'menu'
op|'.'
name|'doConnect'
op|'('
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'        '
name|'top'
op|'.'
name|'mainloop'
op|'('
op|')'
newline|'\n'
dedent|''
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
name|'exitStatus'
op|')'
newline|'\n'
nl|'\n'
DECL|function|handleError
dedent|''
name|'def'
name|'handleError'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'failure'
newline|'\n'
name|'global'
name|'exitStatus'
newline|'\n'
name|'exitStatus'
op|'='
number|'2'
newline|'\n'
name|'log'
op|'.'
name|'err'
op|'('
name|'failure'
op|'.'
name|'Failure'
op|'('
op|')'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
name|'raise'
newline|'\n'
nl|'\n'
DECL|class|SSHClientFactory
dedent|''
name|'class'
name|'SSHClientFactory'
op|'('
name|'protocol'
op|'.'
name|'ClientFactory'
op|')'
op|':'
newline|'\n'
DECL|variable|noisy
indent|'    '
name|'noisy'
op|'='
number|'1'
newline|'\n'
nl|'\n'
DECL|member|stopFactory
name|'def'
name|'stopFactory'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|buildProtocol
dedent|''
name|'def'
name|'buildProtocol'
op|'('
name|'self'
op|','
name|'addr'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'SSHClientTransport'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|clientConnectionFailed
dedent|''
name|'def'
name|'clientConnectionFailed'
op|'('
name|'self'
op|','
name|'connector'
op|','
name|'reason'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'tkMessageBox'
op|'.'
name|'showwarning'
op|'('
string|"'TkConch'"
op|','
string|"'Connection Failed, Reason:\\n %s: %s'"
op|'%'
op|'('
name|'reason'
op|'.'
name|'type'
op|','
name|'reason'
op|'.'
name|'value'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|class|SSHClientTransport
dedent|''
dedent|''
name|'class'
name|'SSHClientTransport'
op|'('
name|'transport'
op|'.'
name|'SSHClientTransport'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|member|receiveError
indent|'    '
name|'def'
name|'receiveError'
op|'('
name|'self'
op|','
name|'code'
op|','
name|'desc'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'global'
name|'exitStatus'
newline|'\n'
name|'exitStatus'
op|'='
string|"'conch:\\tRemote side disconnected with error code %i\\nconch:\\treason: %s'"
op|'%'
op|'('
name|'code'
op|','
name|'desc'
op|')'
newline|'\n'
nl|'\n'
DECL|member|sendDisconnect
dedent|''
name|'def'
name|'sendDisconnect'
op|'('
name|'self'
op|','
name|'code'
op|','
name|'reason'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'global'
name|'exitStatus'
newline|'\n'
name|'exitStatus'
op|'='
string|"'conch:\\tSending disconnect with error code %i\\nconch:\\treason: %s'"
op|'%'
op|'('
name|'code'
op|','
name|'reason'
op|')'
newline|'\n'
name|'transport'
op|'.'
name|'SSHClientTransport'
op|'.'
name|'sendDisconnect'
op|'('
name|'self'
op|','
name|'code'
op|','
name|'reason'
op|')'
newline|'\n'
nl|'\n'
DECL|member|receiveDebug
dedent|''
name|'def'
name|'receiveDebug'
op|'('
name|'self'
op|','
name|'alwaysDisplay'
op|','
name|'message'
op|','
name|'lang'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'global'
name|'options'
newline|'\n'
name|'if'
name|'alwaysDisplay'
name|'or'
name|'options'
op|'['
string|"'log'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'log'
op|'.'
name|'msg'
op|'('
string|"'Received Debug Message: %s'"
op|'%'
name|'message'
op|')'
newline|'\n'
nl|'\n'
DECL|member|verifyHostKey
dedent|''
dedent|''
name|'def'
name|'verifyHostKey'
op|'('
name|'self'
op|','
name|'pubKey'
op|','
name|'fingerprint'
op|')'
op|':'
newline|'\n'
comment|'#d = defer.Deferred()'
nl|'\n'
comment|'#d.addCallback(lambda x:defer.succeed(1))'
nl|'\n'
comment|'#d.callback(2)'
nl|'\n'
comment|'#return d'
nl|'\n'
indent|'        '
name|'goodKey'
op|'='
name|'isInKnownHosts'
op|'('
name|'options'
op|'['
string|"'host'"
op|']'
op|','
name|'pubKey'
op|','
op|'{'
string|"'known-hosts'"
op|':'
name|'None'
op|'}'
op|')'
newline|'\n'
name|'if'
name|'goodKey'
op|'=='
number|'1'
op|':'
comment|'# good key'
newline|'\n'
indent|'            '
name|'return'
name|'defer'
op|'.'
name|'succeed'
op|'('
number|'1'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'goodKey'
op|'=='
number|'2'
op|':'
comment|'# AAHHHHH changed'
newline|'\n'
indent|'            '
name|'return'
name|'defer'
op|'.'
name|'fail'
op|'('
name|'error'
op|'.'
name|'ConchError'
op|'('
string|"'bad host key'"
op|')'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'options'
op|'['
string|"'host'"
op|']'
op|'=='
name|'self'
op|'.'
name|'transport'
op|'.'
name|'getPeer'
op|'('
op|')'
op|'['
number|'1'
op|']'
op|':'
newline|'\n'
indent|'                '
name|'host'
op|'='
name|'options'
op|'['
string|"'host'"
op|']'
newline|'\n'
name|'khHost'
op|'='
name|'options'
op|'['
string|"'host'"
op|']'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'                '
name|'host'
op|'='
string|"'%s (%s)'"
op|'%'
op|'('
name|'options'
op|'['
string|"'host'"
op|']'
op|','
nl|'\n'
name|'self'
op|'.'
name|'transport'
op|'.'
name|'getPeer'
op|'('
op|')'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
name|'khHost'
op|'='
string|"'%s,%s'"
op|'%'
op|'('
name|'options'
op|'['
string|"'host'"
op|']'
op|','
nl|'\n'
name|'self'
op|'.'
name|'transport'
op|'.'
name|'getPeer'
op|'('
op|')'
op|'['
number|'1'
op|']'
op|')'
newline|'\n'
dedent|''
name|'keyType'
op|'='
name|'common'
op|'.'
name|'getNS'
op|'('
name|'pubKey'
op|')'
op|'['
number|'0'
op|']'
newline|'\n'
name|'ques'
op|'='
string|'"""The authenticity of host \'%s\' can\'t be established.\\r\n%s key fingerprint is %s."""'
op|'%'
op|'('
name|'host'
op|','
nl|'\n'
op|'{'
string|"'ssh-dss'"
op|':'
string|"'DSA'"
op|','
string|"'ssh-rsa'"
op|':'
string|"'RSA'"
op|'}'
op|'['
name|'keyType'
op|']'
op|','
nl|'\n'
name|'fingerprint'
op|')'
newline|'\n'
name|'ques'
op|'+='
string|"'\\r\\nAre you sure you want to continue connecting (yes/no)? '"
newline|'\n'
name|'return'
name|'deferredAskFrame'
op|'('
name|'ques'
op|','
number|'1'
op|')'
op|'.'
name|'addCallback'
op|'('
name|'self'
op|'.'
name|'_cbVerifyHostKey'
op|','
name|'pubKey'
op|','
name|'khHost'
op|','
name|'keyType'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_cbVerifyHostKey
dedent|''
dedent|''
name|'def'
name|'_cbVerifyHostKey'
op|'('
name|'self'
op|','
name|'ans'
op|','
name|'pubKey'
op|','
name|'khHost'
op|','
name|'keyType'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'ans'
op|'.'
name|'lower'
op|'('
op|')'
name|'not'
name|'in'
op|'('
string|"'yes'"
op|','
string|"'no'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'deferredAskFrame'
op|'('
string|'"Please type  \'yes\' or \'no\': "'
op|','
number|'1'
op|')'
op|'.'
name|'addCallback'
op|'('
name|'self'
op|'.'
name|'_cbVerifyHostKey'
op|','
name|'pubKey'
op|','
name|'khHost'
op|','
name|'keyType'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'ans'
op|'.'
name|'lower'
op|'('
op|')'
op|'=='
string|"'no'"
op|':'
newline|'\n'
indent|'            '
name|'frame'
op|'.'
name|'write'
op|'('
string|"'Host key verification failed.\\r\\n'"
op|')'
newline|'\n'
name|'raise'
name|'error'
op|'.'
name|'ConchError'
op|'('
string|"'bad host key'"
op|')'
newline|'\n'
dedent|''
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'frame'
op|'.'
name|'write'
op|'('
string|'"Warning: Permanently added \'%s\' (%s) to the list of known hosts.\\r\\n"'
op|'%'
op|'('
name|'khHost'
op|','
op|'{'
string|"'ssh-dss'"
op|':'
string|"'DSA'"
op|','
string|"'ssh-rsa'"
op|':'
string|"'RSA'"
op|'}'
op|'['
name|'keyType'
op|']'
op|')'
op|')'
newline|'\n'
name|'known_hosts'
op|'='
name|'open'
op|'('
name|'os'
op|'.'
name|'path'
op|'.'
name|'expanduser'
op|'('
string|"'~/.ssh/known_hosts'"
op|')'
op|','
string|"'a'"
op|')'
newline|'\n'
name|'encodedKey'
op|'='
name|'base64'
op|'.'
name|'encodestring'
op|'('
name|'pubKey'
op|')'
op|'.'
name|'replace'
op|'('
string|"'\\n'"
op|','
string|"''"
op|')'
newline|'\n'
name|'known_hosts'
op|'.'
name|'write'
op|'('
string|"'\\n%s %s %s'"
op|'%'
op|'('
name|'khHost'
op|','
name|'keyType'
op|','
name|'encodedKey'
op|')'
op|')'
newline|'\n'
name|'known_hosts'
op|'.'
name|'close'
op|'('
op|')'
newline|'\n'
dedent|''
name|'except'
op|':'
newline|'\n'
indent|'            '
name|'log'
op|'.'
name|'deferr'
op|'('
op|')'
newline|'\n'
name|'raise'
name|'error'
op|'.'
name|'ConchError'
newline|'\n'
nl|'\n'
DECL|member|connectionSecure
dedent|''
dedent|''
name|'def'
name|'connectionSecure'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'options'
op|'['
string|"'user'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'user'
op|'='
name|'options'
op|'['
string|"'user'"
op|']'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'user'
op|'='
name|'getpass'
op|'.'
name|'getuser'
op|'('
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'requestService'
op|'('
name|'SSHUserAuthClient'
op|'('
name|'user'
op|','
name|'SSHConnection'
op|'('
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|class|SSHUserAuthClient
dedent|''
dedent|''
name|'class'
name|'SSHUserAuthClient'
op|'('
name|'userauth'
op|'.'
name|'SSHUserAuthClient'
op|')'
op|':'
newline|'\n'
DECL|variable|usedFiles
indent|'    '
name|'usedFiles'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
DECL|member|getPassword
name|'def'
name|'getPassword'
op|'('
name|'self'
op|','
name|'prompt'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'not'
name|'prompt'
op|':'
newline|'\n'
indent|'            '
name|'prompt'
op|'='
string|'"%s@%s\'s password: "'
op|'%'
op|'('
name|'self'
op|'.'
name|'user'
op|','
name|'options'
op|'['
string|"'host'"
op|']'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'deferredAskFrame'
op|'('
name|'prompt'
op|','
number|'0'
op|')'
newline|'\n'
nl|'\n'
DECL|member|getPublicKey
dedent|''
name|'def'
name|'getPublicKey'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'files'
op|'='
op|'['
name|'x'
name|'for'
name|'x'
name|'in'
name|'options'
op|'.'
name|'identitys'
name|'if'
name|'x'
name|'not'
name|'in'
name|'self'
op|'.'
name|'usedFiles'
op|']'
newline|'\n'
name|'if'
name|'not'
name|'files'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'None'
newline|'\n'
dedent|''
name|'file'
op|'='
name|'files'
op|'['
number|'0'
op|']'
newline|'\n'
name|'log'
op|'.'
name|'msg'
op|'('
name|'file'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'usedFiles'
op|'.'
name|'append'
op|'('
name|'file'
op|')'
newline|'\n'
name|'file'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'expanduser'
op|'('
name|'file'
op|')'
newline|'\n'
name|'file'
op|'+='
string|"'.pub'"
newline|'\n'
name|'if'
name|'not'
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'file'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
newline|'\n'
dedent|''
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'keys'
op|'.'
name|'getPublicKeyString'
op|'('
name|'file'
op|')'
newline|'\n'
dedent|''
name|'except'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'self'
op|'.'
name|'getPublicKey'
op|'('
op|')'
comment|'# try again'
newline|'\n'
nl|'\n'
DECL|member|getPrivateKey
dedent|''
dedent|''
name|'def'
name|'getPrivateKey'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'file'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'expanduser'
op|'('
name|'self'
op|'.'
name|'usedFiles'
op|'['
op|'-'
number|'1'
op|']'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'os'
op|'.'
name|'path'
op|'.'
name|'exists'
op|'('
name|'file'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'None'
newline|'\n'
dedent|''
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'defer'
op|'.'
name|'succeed'
op|'('
name|'keys'
op|'.'
name|'getPrivateKeyObject'
op|'('
name|'file'
op|')'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'keys'
op|'.'
name|'BadKeyError'
op|','
name|'e'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'e'
op|'.'
name|'args'
op|'['
number|'0'
op|']'
op|'=='
string|"'encrypted key with no password'"
op|':'
newline|'\n'
indent|'                '
name|'prompt'
op|'='
string|'"Enter passphrase for key \'%s\': "'
op|'%'
name|'self'
op|'.'
name|'usedFiles'
op|'['
op|'-'
number|'1'
op|']'
newline|'\n'
name|'return'
name|'deferredAskFrame'
op|'('
name|'prompt'
op|','
number|'0'
op|')'
op|'.'
name|'addCallback'
op|'('
name|'self'
op|'.'
name|'_cbGetPrivateKey'
op|','
number|'0'
op|')'
newline|'\n'
DECL|member|_cbGetPrivateKey
dedent|''
dedent|''
dedent|''
name|'def'
name|'_cbGetPrivateKey'
op|'('
name|'self'
op|','
name|'ans'
op|','
name|'count'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'file'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'expanduser'
op|'('
name|'self'
op|'.'
name|'usedFiles'
op|'['
op|'-'
number|'1'
op|']'
op|')'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'            '
name|'return'
name|'keys'
op|'.'
name|'getPrivateKeyObject'
op|'('
name|'file'
op|','
name|'password'
op|'='
name|'ans'
op|')'
newline|'\n'
dedent|''
name|'except'
name|'keys'
op|'.'
name|'BadKeyError'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'count'
op|'=='
number|'2'
op|':'
newline|'\n'
indent|'                '
name|'raise'
newline|'\n'
dedent|''
name|'prompt'
op|'='
string|'"Enter passphrase for key \'%s\': "'
op|'%'
name|'self'
op|'.'
name|'usedFiles'
op|'['
op|'-'
number|'1'
op|']'
newline|'\n'
name|'return'
name|'deferredAskFrame'
op|'('
name|'prompt'
op|','
number|'0'
op|')'
op|'.'
name|'addCallback'
op|'('
name|'self'
op|'.'
name|'_cbGetPrivateKey'
op|','
name|'count'
op|'+'
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|class|SSHConnection
dedent|''
dedent|''
dedent|''
name|'class'
name|'SSHConnection'
op|'('
name|'connection'
op|'.'
name|'SSHConnection'
op|')'
op|':'
newline|'\n'
DECL|member|serviceStarted
indent|'    '
name|'def'
name|'serviceStarted'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'not'
name|'options'
op|'['
string|"'noshell'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'openChannel'
op|'('
name|'SSHSession'
op|'('
op|')'
op|')'
newline|'\n'
dedent|''
name|'if'
name|'options'
op|'.'
name|'localForwards'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'localPort'
op|','
name|'hostport'
name|'in'
name|'options'
op|'.'
name|'localForwards'
op|':'
newline|'\n'
indent|'                '
name|'reactor'
op|'.'
name|'listenTCP'
op|'('
name|'localPort'
op|','
nl|'\n'
name|'forwarding'
op|'.'
name|'SSHListenForwardingFactory'
op|'('
name|'self'
op|','
nl|'\n'
name|'hostport'
op|','
nl|'\n'
name|'forwarding'
op|'.'
name|'SSHListenClientForwardingChannel'
op|')'
op|')'
newline|'\n'
dedent|''
dedent|''
name|'if'
name|'options'
op|'.'
name|'remoteForwards'
op|':'
newline|'\n'
indent|'            '
name|'for'
name|'remotePort'
op|','
name|'hostport'
name|'in'
name|'options'
op|'.'
name|'remoteForwards'
op|':'
newline|'\n'
indent|'                '
name|'log'
op|'.'
name|'msg'
op|'('
string|"'asking for remote forwarding for %s:%s'"
op|'%'
nl|'\n'
op|'('
name|'remotePort'
op|','
name|'hostport'
op|')'
op|')'
newline|'\n'
name|'data'
op|'='
name|'forwarding'
op|'.'
name|'packGlobal_tcpip_forward'
op|'('
nl|'\n'
op|'('
string|"'0.0.0.0'"
op|','
name|'remotePort'
op|')'
op|')'
newline|'\n'
name|'d'
op|'='
name|'self'
op|'.'
name|'sendGlobalRequest'
op|'('
string|"'tcpip-forward'"
op|','
name|'data'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'remoteForwards'
op|'['
name|'remotePort'
op|']'
op|'='
name|'hostport'
newline|'\n'
nl|'\n'
DECL|class|SSHSession
dedent|''
dedent|''
dedent|''
dedent|''
name|'class'
name|'SSHSession'
op|'('
name|'channel'
op|'.'
name|'SSHChannel'
op|')'
op|':'
newline|'\n'
nl|'\n'
DECL|variable|name
indent|'    '
name|'name'
op|'='
string|"'session'"
newline|'\n'
nl|'\n'
DECL|member|channelOpen
name|'def'
name|'channelOpen'
op|'('
name|'self'
op|','
name|'foo'
op|')'
op|':'
newline|'\n'
comment|'#global globalSession'
nl|'\n'
comment|'#globalSession = self'
nl|'\n'
comment|'# turn off local echo'
nl|'\n'
indent|'        '
name|'self'
op|'.'
name|'escapeMode'
op|'='
number|'1'
newline|'\n'
name|'c'
op|'='
name|'session'
op|'.'
name|'SSHSessionClient'
op|'('
op|')'
newline|'\n'
name|'if'
name|'options'
op|'['
string|"'escape'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'c'
op|'.'
name|'dataReceived'
op|'='
name|'self'
op|'.'
name|'handleInput'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'c'
op|'.'
name|'dataReceived'
op|'='
name|'self'
op|'.'
name|'write'
newline|'\n'
dedent|''
name|'c'
op|'.'
name|'connectionLost'
op|'='
name|'self'
op|'.'
name|'sendEOF'
newline|'\n'
name|'frame'
op|'.'
name|'callback'
op|'='
name|'c'
op|'.'
name|'dataReceived'
newline|'\n'
name|'frame'
op|'.'
name|'canvas'
op|'.'
name|'focus_force'
op|'('
op|')'
newline|'\n'
name|'if'
name|'options'
op|'['
string|"'subsystem'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'conn'
op|'.'
name|'sendRequest'
op|'('
name|'self'
op|','
string|"'subsystem'"
op|','
name|'common'
op|'.'
name|'NS'
op|'('
name|'options'
op|'['
string|"'command'"
op|']'
op|')'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'options'
op|'['
string|"'command'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'options'
op|'['
string|"'tty'"
op|']'
op|':'
newline|'\n'
indent|'                '
name|'term'
op|'='
name|'os'
op|'.'
name|'environ'
op|'.'
name|'get'
op|'('
string|"'TERM'"
op|','
string|"'xterm'"
op|')'
newline|'\n'
comment|"#winsz = fcntl.ioctl(fd, tty.TIOCGWINSZ, '12345678')"
nl|'\n'
name|'winSize'
op|'='
op|'('
number|'25'
op|','
number|'80'
op|','
number|'0'
op|','
number|'0'
op|')'
comment|"#struct.unpack('4H', winsz)"
newline|'\n'
name|'ptyReqData'
op|'='
name|'session'
op|'.'
name|'packRequest_pty_req'
op|'('
name|'term'
op|','
name|'winSize'
op|','
string|"''"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'conn'
op|'.'
name|'sendRequest'
op|'('
name|'self'
op|','
string|"'pty-req'"
op|','
name|'ptyReqData'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'conn'
op|'.'
name|'sendRequest'
op|'('
name|'self'
op|','
string|"'exec'"
op|','
name|'common'
op|'.'
name|'NS'
op|'('
name|'options'
op|'['
string|"'command'"
op|']'
op|')'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'if'
name|'not'
name|'options'
op|'['
string|"'notty'"
op|']'
op|':'
newline|'\n'
indent|'                '
name|'term'
op|'='
name|'os'
op|'.'
name|'environ'
op|'.'
name|'get'
op|'('
string|"'TERM'"
op|','
string|"'xterm'"
op|')'
newline|'\n'
comment|"#winsz = fcntl.ioctl(fd, tty.TIOCGWINSZ, '12345678')"
nl|'\n'
name|'winSize'
op|'='
op|'('
number|'25'
op|','
number|'80'
op|','
number|'0'
op|','
number|'0'
op|')'
comment|"#struct.unpack('4H', winsz)"
newline|'\n'
name|'ptyReqData'
op|'='
name|'session'
op|'.'
name|'packRequest_pty_req'
op|'('
name|'term'
op|','
name|'winSize'
op|','
string|"''"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'conn'
op|'.'
name|'sendRequest'
op|'('
name|'self'
op|','
string|"'pty-req'"
op|','
name|'ptyReqData'
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'conn'
op|'.'
name|'sendRequest'
op|'('
name|'self'
op|','
string|"'shell'"
op|','
string|"''"
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'conn'
op|'.'
name|'transport'
op|'.'
name|'transport'
op|'.'
name|'setTcpNoDelay'
op|'('
number|'1'
op|')'
newline|'\n'
nl|'\n'
DECL|member|handleInput
dedent|''
name|'def'
name|'handleInput'
op|'('
name|'self'
op|','
name|'char'
op|')'
op|':'
newline|'\n'
comment|"#log.msg('handling %s' % repr(char))"
nl|'\n'
indent|'        '
name|'if'
name|'char'
name|'in'
op|'('
string|"'\\n'"
op|','
string|"'\\r'"
op|')'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'escapeMode'
op|'='
number|'1'
newline|'\n'
name|'self'
op|'.'
name|'write'
op|'('
name|'char'
op|')'
newline|'\n'
dedent|''
name|'elif'
name|'self'
op|'.'
name|'escapeMode'
op|'=='
number|'1'
name|'and'
name|'char'
op|'=='
name|'options'
op|'['
string|"'escape'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'escapeMode'
op|'='
number|'2'
newline|'\n'
dedent|''
name|'elif'
name|'self'
op|'.'
name|'escapeMode'
op|'=='
number|'2'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'escapeMode'
op|'='
number|'1'
comment|'# so we can chain escapes together'
newline|'\n'
name|'if'
name|'char'
op|'=='
string|"'.'"
op|':'
comment|'# disconnect'
newline|'\n'
indent|'                '
name|'log'
op|'.'
name|'msg'
op|'('
string|"'disconnecting from escape'"
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
name|'return'
newline|'\n'
dedent|''
name|'elif'
name|'char'
op|'=='
string|"'\\x1a'"
op|':'
comment|'# ^Z, suspend'
newline|'\n'
comment|'# following line courtesy of Erwin@freenode'
nl|'\n'
indent|'                '
name|'os'
op|'.'
name|'kill'
op|'('
name|'os'
op|'.'
name|'getpid'
op|'('
op|')'
op|','
name|'signal'
op|'.'
name|'SIGSTOP'
op|')'
newline|'\n'
name|'return'
newline|'\n'
dedent|''
name|'elif'
name|'char'
op|'=='
string|"'R'"
op|':'
comment|'# rekey connection'
newline|'\n'
indent|'                '
name|'log'
op|'.'
name|'msg'
op|'('
string|"'rekeying connection'"
op|')'
newline|'\n'
name|'self'
op|'.'
name|'conn'
op|'.'
name|'transport'
op|'.'
name|'sendKexInit'
op|'('
op|')'
newline|'\n'
name|'return'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'write'
op|'('
string|"'~'"
op|'+'
name|'char'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'escapeMode'
op|'='
number|'0'
newline|'\n'
name|'self'
op|'.'
name|'write'
op|'('
name|'char'
op|')'
newline|'\n'
nl|'\n'
DECL|member|dataReceived
dedent|''
dedent|''
name|'def'
name|'dataReceived'
op|'('
name|'self'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'options'
op|'['
string|"'ansilog'"
op|']'
op|':'
newline|'\n'
indent|'            '
name|'print'
name|'repr'
op|'('
name|'data'
op|')'
newline|'\n'
dedent|''
name|'frame'
op|'.'
name|'write'
op|'('
name|'data'
op|')'
newline|'\n'
nl|'\n'
DECL|member|extReceived
dedent|''
name|'def'
name|'extReceived'
op|'('
name|'self'
op|','
name|'t'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'t'
op|'=='
name|'connection'
op|'.'
name|'EXTENDED_DATA_STDERR'
op|':'
newline|'\n'
indent|'            '
name|'log'
op|'.'
name|'msg'
op|'('
string|"'got %s stderr data'"
op|'%'
name|'len'
op|'('
name|'data'
op|')'
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'stderr'
op|'.'
name|'write'
op|'('
name|'data'
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'stderr'
op|'.'
name|'flush'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|eofReceived
dedent|''
dedent|''
name|'def'
name|'eofReceived'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'log'
op|'.'
name|'msg'
op|'('
string|"'got eof'"
op|')'
newline|'\n'
name|'sys'
op|'.'
name|'stdin'
op|'.'
name|'close'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|closed
dedent|''
name|'def'
name|'closed'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'log'
op|'.'
name|'msg'
op|'('
string|"'closed %s'"
op|'%'
name|'self'
op|')'
newline|'\n'
name|'if'
name|'len'
op|'('
name|'self'
op|'.'
name|'conn'
op|'.'
name|'channels'
op|')'
op|'=='
number|'1'
op|':'
comment|'# just us left'
newline|'\n'
indent|'            '
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|request_exit_status
dedent|''
dedent|''
name|'def'
name|'request_exit_status'
op|'('
name|'self'
op|','
name|'data'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'global'
name|'exitStatus'
newline|'\n'
name|'exitStatus'
op|'='
name|'int'
op|'('
name|'struct'
op|'.'
name|'unpack'
op|'('
string|"'>L'"
op|','
name|'data'
op|')'
op|'['
number|'0'
op|']'
op|')'
newline|'\n'
name|'log'
op|'.'
name|'msg'
op|'('
string|"'exit status: %s'"
op|'%'
name|'exitStatus'
op|')'
newline|'\n'
nl|'\n'
DECL|member|sendEOF
dedent|''
name|'def'
name|'sendEOF'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'conn'
op|'.'
name|'sendEOF'
op|'('
name|'self'
op|')'
newline|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'__name__'
op|'=='
string|'"__main__"'
op|':'
newline|'\n'
indent|'    '
name|'run'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
