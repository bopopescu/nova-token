begin_unit
comment|'# This shows an example of a bare-bones distributed web'
nl|'\n'
comment|'# set up.'
nl|'\n'
comment|'# The "master" and "slave" parts will usually be in different files'
nl|'\n'
comment|'# -- they are here together only for brevity of illustration '
nl|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
op|','
name|'protocol'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'web'
name|'import'
name|'server'
op|','
name|'distrib'
op|','
name|'static'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'spread'
name|'import'
name|'pb'
newline|'\n'
nl|'\n'
comment|'# The "master" server'
nl|'\n'
DECL|variable|site
name|'site'
op|'='
name|'server'
op|'.'
name|'Site'
op|'('
name|'distrib'
op|'.'
name|'ResourceSubscription'
op|'('
string|"'unix'"
op|','
string|"'.rp'"
op|')'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'listenTCP'
op|'('
number|'19988'
op|','
name|'site'
op|')'
newline|'\n'
nl|'\n'
comment|'# The "slave" server'
nl|'\n'
DECL|variable|fact
name|'fact'
op|'='
name|'pb'
op|'.'
name|'PBServerFactory'
op|'('
name|'distrib'
op|'.'
name|'ResourcePublisher'
op|'('
name|'server'
op|'.'
name|'Site'
op|'('
name|'static'
op|'.'
name|'File'
op|'('
string|"'static'"
op|')'
op|')'
op|')'
op|')'
newline|'\n'
nl|'\n'
name|'reactor'
op|'.'
name|'listenUNIX'
op|'('
string|"'./.rp'"
op|','
name|'fact'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
endmarker|''
end_unit
