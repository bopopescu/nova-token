begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
comment|'#'
nl|'\n'
nl|'\n'
string|"'''\nUsage: \nadvogato.py <name> <diary entry file>\n'''"
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'web'
op|'.'
name|'xmlrpc'
name|'import'
name|'Proxy'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
newline|'\n'
name|'from'
name|'getpass'
name|'import'
name|'getpass'
newline|'\n'
name|'import'
name|'sys'
newline|'\n'
nl|'\n'
DECL|class|AddDiary
name|'class'
name|'AddDiary'
op|':'
newline|'\n'
nl|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'name'
op|','
name|'password'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'name'
op|'='
name|'name'
newline|'\n'
name|'self'
op|'.'
name|'password'
op|'='
name|'password'
newline|'\n'
name|'self'
op|'.'
name|'proxy'
op|'='
name|'Proxy'
op|'('
string|"'http://advogato.org/XMLRPC'"
op|')'
newline|'\n'
nl|'\n'
DECL|member|__call__
dedent|''
name|'def'
name|'__call__'
op|'('
name|'self'
op|','
name|'filename'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'data'
op|'='
name|'open'
op|'('
name|'filename'
op|')'
op|'.'
name|'read'
op|'('
op|')'
newline|'\n'
name|'d'
op|'='
name|'self'
op|'.'
name|'proxy'
op|'.'
name|'callRemote'
op|'('
string|"'authenticate'"
op|','
name|'self'
op|'.'
name|'name'
op|','
name|'self'
op|'.'
name|'password'
op|')'
newline|'\n'
name|'d'
op|'.'
name|'addCallbacks'
op|'('
name|'self'
op|'.'
name|'login'
op|','
name|'self'
op|'.'
name|'noLogin'
op|')'
newline|'\n'
nl|'\n'
DECL|member|noLogin
dedent|''
name|'def'
name|'noLogin'
op|'('
name|'self'
op|','
name|'reason'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'print'
string|'"could not login"'
newline|'\n'
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|login
dedent|''
name|'def'
name|'login'
op|'('
name|'self'
op|','
name|'cookie'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'d'
op|'='
name|'self'
op|'.'
name|'proxy'
op|'.'
name|'callRemote'
op|'('
string|"'diary.set'"
op|','
name|'cookie'
op|','
op|'-'
number|'1'
op|','
name|'self'
op|'.'
name|'data'
op|')'
newline|'\n'
name|'d'
op|'.'
name|'addCallbacks'
op|'('
name|'self'
op|'.'
name|'setDiary'
op|','
name|'self'
op|'.'
name|'errorSetDiary'
op|')'
newline|'\n'
nl|'\n'
DECL|member|setDiary
dedent|''
name|'def'
name|'setDiary'
op|'('
name|'self'
op|','
name|'response'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|errorSetDiary
dedent|''
name|'def'
name|'errorSetDiary'
op|'('
name|'self'
op|','
name|'error'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'print'
string|'"could not set diary"'
op|','
name|'error'
newline|'\n'
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|variable|diary
dedent|''
dedent|''
name|'diary'
op|'='
name|'AddDiary'
op|'('
name|'sys'
op|'.'
name|'argv'
op|'['
number|'1'
op|']'
op|','
name|'getpass'
op|'('
op|')'
op|')'
newline|'\n'
name|'diary'
op|'('
name|'sys'
op|'.'
name|'argv'
op|'['
number|'2'
op|']'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
endmarker|''
end_unit
