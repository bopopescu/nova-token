begin_unit
comment|'# With this, you can have an instant "community web site",'
nl|'\n'
comment|'# letting your shell users publish data in secure ways.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Just put this script anywhere, and /path/to/this/script/<user>/'
nl|'\n'
comment|"# will publish a user's ~/public_html, and a .../<user>.twistd/"
nl|'\n'
comment|"# will attempt to contact a user's personal web server."
nl|'\n'
comment|'#'
nl|'\n'
comment|'# For example, if you put this at the root of the web server'
nl|'\n'
comment|'# as "users.rpy", and configure --allow-ignore-ext, then'
nl|'\n'
comment|'# http://example.com/users/<name>/ and http://example.com/users/<name>.twistd'
nl|'\n'
comment|'# will work similarily to how they work on twistedmatrix.com'
nl|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'web'
name|'import'
name|'distrib'
newline|'\n'
nl|'\n'
DECL|variable|resource
name|'resource'
op|'='
name|'registry'
op|'.'
name|'getComponent'
op|'('
name|'distrib'
op|'.'
name|'UserDirectory'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'resource'
op|':'
newline|'\n'
DECL|variable|resource
indent|'    '
name|'resource'
op|'='
name|'distrib'
op|'.'
name|'UserDirectory'
op|'('
op|')'
newline|'\n'
name|'registry'
op|'.'
name|'setComponent'
op|'('
name|'distrib'
op|'.'
name|'UserDirectory'
op|','
name|'resource'
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
