begin_unit
string|'"""Non-twisted throughput server."""'
newline|'\n'
nl|'\n'
name|'import'
name|'socket'
op|','
name|'signal'
op|','
name|'sys'
newline|'\n'
nl|'\n'
DECL|function|signalhandler
name|'def'
name|'signalhandler'
op|'('
op|'*'
name|'args'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'print'
string|'"alarm!"'
newline|'\n'
name|'sys'
op|'.'
name|'stdout'
op|'.'
name|'flush'
op|'('
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'signal'
op|'.'
name|'signal'
op|'('
name|'signal'
op|'.'
name|'SIGALRM'
op|','
name|'signalhandler'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|s
name|'s'
op|'='
name|'socket'
op|'.'
name|'socket'
op|'('
name|'socket'
op|'.'
name|'AF_INET'
op|','
name|'socket'
op|'.'
name|'SOCK_STREAM'
op|')'
newline|'\n'
name|'s'
op|'.'
name|'bind'
op|'('
op|'('
string|"''"
op|','
number|'8001'
op|')'
op|')'
newline|'\n'
name|'s'
op|'.'
name|'listen'
op|'('
number|'1'
op|')'
newline|'\n'
name|'while'
number|'1'
op|':'
newline|'\n'
indent|'    '
name|'c'
op|','
op|'('
name|'h'
op|','
name|'p'
op|')'
op|'='
name|'s'
op|'.'
name|'accept'
op|'('
op|')'
newline|'\n'
name|'c'
op|'.'
name|'settimeout'
op|'('
number|'30'
op|')'
newline|'\n'
name|'signal'
op|'.'
name|'alarm'
op|'('
number|'5'
op|')'
newline|'\n'
name|'while'
number|'1'
op|':'
newline|'\n'
indent|'        '
name|'d'
op|'='
name|'c'
op|'.'
name|'recv'
op|'('
number|'16384'
op|')'
newline|'\n'
name|'if'
name|'not'
name|'d'
op|':'
newline|'\n'
indent|'            '
name|'break'
newline|'\n'
dedent|''
dedent|''
name|'c'
op|'.'
name|'close'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
