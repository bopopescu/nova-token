begin_unit
comment|'#!/usr/bin/env python'
nl|'\n'
nl|'\n'
comment|'# Copyright (c) 2001-2009 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
op|'.'
name|'protocol'
name|'import'
name|'DatagramProtocol'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
newline|'\n'
nl|'\n'
DECL|class|EchoClientDatagramProtocol
name|'class'
name|'EchoClientDatagramProtocol'
op|'('
name|'DatagramProtocol'
op|')'
op|':'
newline|'\n'
DECL|variable|strings
indent|'    '
name|'strings'
op|'='
op|'['
nl|'\n'
string|'"Hello, world!"'
op|','
nl|'\n'
string|'"What a fine day it is."'
op|','
nl|'\n'
string|'"Bye-bye!"'
nl|'\n'
op|']'
newline|'\n'
nl|'\n'
DECL|member|startProtocol
name|'def'
name|'startProtocol'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'transport'
op|'.'
name|'connect'
op|'('
string|"'127.0.0.1'"
op|','
number|'8000'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'sendDatagram'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|sendDatagram
dedent|''
name|'def'
name|'sendDatagram'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'len'
op|'('
name|'self'
op|'.'
name|'strings'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'datagram'
op|'='
name|'self'
op|'.'
name|'strings'
op|'.'
name|'pop'
op|'('
number|'0'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'transport'
op|'.'
name|'write'
op|'('
name|'datagram'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|datagramReceived
dedent|''
dedent|''
name|'def'
name|'datagramReceived'
op|'('
name|'self'
op|','
name|'datagram'
op|','
name|'host'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'print'
string|"'Datagram received: '"
op|','
name|'repr'
op|'('
name|'datagram'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'sendDatagram'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|main
dedent|''
dedent|''
name|'def'
name|'main'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'protocol'
op|'='
name|'EchoClientDatagramProtocol'
op|'('
op|')'
newline|'\n'
name|'t'
op|'='
name|'reactor'
op|'.'
name|'listenUDP'
op|'('
number|'0'
op|','
name|'protocol'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'main'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
