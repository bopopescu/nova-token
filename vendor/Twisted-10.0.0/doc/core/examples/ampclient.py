begin_unit
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
op|','
name|'defer'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
op|'.'
name|'protocol'
name|'import'
name|'ClientCreator'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'protocols'
name|'import'
name|'amp'
newline|'\n'
name|'from'
name|'ampserver'
name|'import'
name|'Sum'
op|','
name|'Divide'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|doMath
name|'def'
name|'doMath'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'d1'
op|'='
name|'ClientCreator'
op|'('
name|'reactor'
op|','
name|'amp'
op|'.'
name|'AMP'
op|')'
op|'.'
name|'connectTCP'
op|'('
nl|'\n'
string|"'127.0.0.1'"
op|','
number|'1234'
op|')'
op|'.'
name|'addCallback'
op|'('
nl|'\n'
name|'lambda'
name|'p'
op|':'
name|'p'
op|'.'
name|'callRemote'
op|'('
name|'Sum'
op|','
name|'a'
op|'='
number|'13'
op|','
name|'b'
op|'='
number|'81'
op|')'
op|')'
op|'.'
name|'addCallback'
op|'('
nl|'\n'
name|'lambda'
name|'result'
op|':'
name|'result'
op|'['
string|"'total'"
op|']'
op|')'
newline|'\n'
DECL|function|trapZero
name|'def'
name|'trapZero'
op|'('
name|'result'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'result'
op|'.'
name|'trap'
op|'('
name|'ZeroDivisionError'
op|')'
newline|'\n'
name|'print'
string|'"Divided by zero: returning INF"'
newline|'\n'
name|'return'
number|'1e1000'
newline|'\n'
dedent|''
name|'d2'
op|'='
name|'ClientCreator'
op|'('
name|'reactor'
op|','
name|'amp'
op|'.'
name|'AMP'
op|')'
op|'.'
name|'connectTCP'
op|'('
nl|'\n'
string|"'127.0.0.1'"
op|','
number|'1234'
op|')'
op|'.'
name|'addCallback'
op|'('
nl|'\n'
name|'lambda'
name|'p'
op|':'
name|'p'
op|'.'
name|'callRemote'
op|'('
name|'Divide'
op|','
name|'numerator'
op|'='
number|'1234'
op|','
nl|'\n'
name|'denominator'
op|'='
number|'0'
op|')'
op|')'
op|'.'
name|'addErrback'
op|'('
name|'trapZero'
op|')'
newline|'\n'
DECL|function|done
name|'def'
name|'done'
op|'('
name|'result'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'print'
string|"'Done with math:'"
op|','
name|'result'
newline|'\n'
dedent|''
name|'defer'
op|'.'
name|'DeferredList'
op|'('
op|'['
name|'d1'
op|','
name|'d2'
op|']'
op|')'
op|'.'
name|'addCallback'
op|'('
name|'done'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'doMath'
op|'('
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
