begin_unit
nl|'\n'
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
name|'from'
name|'OpenSSL'
name|'import'
name|'SSL'
newline|'\n'
nl|'\n'
DECL|class|ServerContextFactory
name|'class'
name|'ServerContextFactory'
op|':'
newline|'\n'
nl|'\n'
DECL|member|getContext
indent|'    '
name|'def'
name|'getContext'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
string|'"""Create an SSL context.\n        \n        This is a sample implementation that loads a certificate from a file \n        called \'server.pem\'."""'
newline|'\n'
name|'ctx'
op|'='
name|'SSL'
op|'.'
name|'Context'
op|'('
name|'SSL'
op|'.'
name|'SSLv23_METHOD'
op|')'
newline|'\n'
name|'ctx'
op|'.'
name|'use_certificate_file'
op|'('
string|"'server.pem'"
op|')'
newline|'\n'
name|'ctx'
op|'.'
name|'use_privatekey_file'
op|'('
string|"'server.pem'"
op|')'
newline|'\n'
name|'return'
name|'ctx'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'import'
name|'echoserv'
op|','
name|'sys'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
op|'.'
name|'protocol'
name|'import'
name|'Factory'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'ssl'
op|','
name|'reactor'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'log'
newline|'\n'
name|'log'
op|'.'
name|'startLogging'
op|'('
name|'sys'
op|'.'
name|'stdout'
op|')'
newline|'\n'
DECL|variable|factory
name|'factory'
op|'='
name|'Factory'
op|'('
op|')'
newline|'\n'
name|'factory'
op|'.'
name|'protocol'
op|'='
name|'echoserv'
op|'.'
name|'Echo'
newline|'\n'
name|'reactor'
op|'.'
name|'listenSSL'
op|'('
number|'8000'
op|','
name|'factory'
op|','
name|'ServerContextFactory'
op|'('
op|')'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
dedent|''
endmarker|''
end_unit
