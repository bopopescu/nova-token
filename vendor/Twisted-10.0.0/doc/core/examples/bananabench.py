begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
name|'import'
name|'sys'
newline|'\n'
name|'import'
name|'time'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'    '
name|'import'
name|'cStringIO'
name|'as'
name|'StringIO'
newline|'\n'
dedent|''
name|'except'
name|'ImportError'
op|':'
newline|'\n'
indent|'    '
name|'import'
name|'StringIO'
newline|'\n'
nl|'\n'
comment|'# Twisted Imports'
nl|'\n'
dedent|''
name|'from'
name|'twisted'
op|'.'
name|'spread'
name|'import'
name|'banana'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'protocol'
newline|'\n'
nl|'\n'
DECL|variable|iterationCount
name|'iterationCount'
op|'='
number|'10000'
newline|'\n'
nl|'\n'
DECL|class|BananaBench
name|'class'
name|'BananaBench'
op|':'
newline|'\n'
DECL|variable|r
indent|'    '
name|'r'
op|'='
name|'range'
op|'('
name|'iterationCount'
op|')'
newline|'\n'
DECL|member|setUp
name|'def'
name|'setUp'
op|'('
name|'self'
op|','
name|'encClass'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'io'
op|'='
name|'StringIO'
op|'.'
name|'StringIO'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'enc'
op|'='
name|'encClass'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'enc'
op|'.'
name|'makeConnection'
op|'('
name|'protocol'
op|'.'
name|'FileWrapper'
op|'('
name|'self'
op|'.'
name|'io'
op|')'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'enc'
op|'.'
name|'_selectDialect'
op|'('
string|'"none"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'enc'
op|'.'
name|'expressionReceived'
op|'='
name|'self'
op|'.'
name|'putResult'
newline|'\n'
nl|'\n'
DECL|member|putResult
dedent|''
name|'def'
name|'putResult'
op|'('
name|'self'
op|','
name|'result'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'result'
op|'='
name|'result'
newline|'\n'
nl|'\n'
DECL|member|tearDown
dedent|''
name|'def'
name|'tearDown'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'enc'
op|'.'
name|'connectionLost'
op|'('
op|')'
newline|'\n'
name|'del'
name|'self'
op|'.'
name|'enc'
newline|'\n'
nl|'\n'
DECL|member|testEncode
dedent|''
name|'def'
name|'testEncode'
op|'('
name|'self'
op|','
name|'value'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'starttime'
op|'='
name|'time'
op|'.'
name|'time'
op|'('
op|')'
newline|'\n'
name|'for'
name|'i'
name|'in'
name|'self'
op|'.'
name|'r'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'enc'
op|'.'
name|'sendEncoded'
op|'('
name|'value'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'io'
op|'.'
name|'truncate'
op|'('
number|'0'
op|')'
newline|'\n'
dedent|''
name|'endtime'
op|'='
name|'time'
op|'.'
name|'time'
op|'('
op|')'
newline|'\n'
name|'print'
string|"'    Encode took %s seconds'"
op|'%'
op|'('
name|'endtime'
op|'-'
name|'starttime'
op|')'
newline|'\n'
name|'return'
name|'endtime'
op|'-'
name|'starttime'
newline|'\n'
nl|'\n'
DECL|member|testDecode
dedent|''
name|'def'
name|'testDecode'
op|'('
name|'self'
op|','
name|'value'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'enc'
op|'.'
name|'sendEncoded'
op|'('
name|'value'
op|')'
newline|'\n'
name|'encoded'
op|'='
name|'self'
op|'.'
name|'io'
op|'.'
name|'getvalue'
op|'('
op|')'
newline|'\n'
name|'starttime'
op|'='
name|'time'
op|'.'
name|'time'
op|'('
op|')'
newline|'\n'
name|'for'
name|'i'
name|'in'
name|'self'
op|'.'
name|'r'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'enc'
op|'.'
name|'dataReceived'
op|'('
name|'encoded'
op|')'
newline|'\n'
dedent|''
name|'endtime'
op|'='
name|'time'
op|'.'
name|'time'
op|'('
op|')'
newline|'\n'
name|'print'
string|"'    Decode took %s seconds'"
op|'%'
op|'('
name|'endtime'
op|'-'
name|'starttime'
op|')'
newline|'\n'
name|'return'
name|'endtime'
op|'-'
name|'starttime'
newline|'\n'
nl|'\n'
DECL|member|performTest
dedent|''
name|'def'
name|'performTest'
op|'('
name|'self'
op|','
name|'method'
op|','
name|'data'
op|','
name|'encClass'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'setUp'
op|'('
name|'encClass'
op|')'
newline|'\n'
name|'method'
op|'('
name|'data'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'tearDown'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|runTests
dedent|''
name|'def'
name|'runTests'
op|'('
name|'self'
op|','
name|'testData'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'print'
string|"'Test data is: %s'"
op|'%'
name|'testData'
newline|'\n'
name|'print'
string|"'  Using Pure Python Banana:'"
newline|'\n'
name|'self'
op|'.'
name|'performTest'
op|'('
name|'self'
op|'.'
name|'testEncode'
op|','
name|'testData'
op|','
name|'banana'
op|'.'
name|'Banana'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'performTest'
op|'('
name|'self'
op|'.'
name|'testDecode'
op|','
name|'testData'
op|','
name|'banana'
op|'.'
name|'Banana'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|bench
dedent|''
dedent|''
name|'bench'
op|'='
name|'BananaBench'
op|'('
op|')'
newline|'\n'
name|'print'
string|"'Doing %s iterations of each test.'"
op|'%'
name|'iterationCount'
newline|'\n'
name|'print'
string|"''"
newline|'\n'
DECL|variable|testData
name|'testData'
op|'='
op|'['
number|'1'
op|','
number|'2'
op|','
number|'3'
op|','
number|'4'
op|','
number|'5'
op|','
number|'6'
op|','
number|'7'
op|','
number|'8'
op|','
number|'9'
op|','
number|'10'
op|']'
newline|'\n'
name|'bench'
op|'.'
name|'runTests'
op|'('
name|'testData'
op|')'
newline|'\n'
DECL|variable|testData
name|'testData'
op|'='
op|'['
number|'1.0'
op|','
number|'2.0'
op|','
number|'3.0'
op|','
number|'4.0'
op|','
number|'5.0'
op|','
number|'6.0'
op|','
number|'7.0'
op|','
number|'8.0'
op|','
number|'9.0'
op|','
number|'10.0'
op|']'
newline|'\n'
name|'bench'
op|'.'
name|'runTests'
op|'('
name|'testData'
op|')'
newline|'\n'
DECL|variable|testData
name|'testData'
op|'='
op|'['
op|'['
number|'1'
op|','
number|'2'
op|']'
op|','
op|'['
number|'3'
op|','
number|'4'
op|']'
op|','
op|'['
number|'5'
op|','
number|'6'
op|']'
op|','
op|'['
number|'7'
op|','
number|'8'
op|']'
op|','
op|'['
number|'9'
op|','
number|'10'
op|']'
op|']'
newline|'\n'
name|'bench'
op|'.'
name|'runTests'
op|'('
name|'testData'
op|')'
newline|'\n'
DECL|variable|testData
name|'testData'
op|'='
op|'['
string|'"one"'
op|','
string|'"two"'
op|','
string|'"three"'
op|','
string|'"four"'
op|','
string|'"five"'
op|','
string|'"six"'
op|','
string|'"seven"'
op|','
string|'"eight"'
op|','
string|'"nine"'
op|','
string|'"ten"'
op|']'
newline|'\n'
name|'bench'
op|'.'
name|'runTests'
op|'('
name|'testData'
op|')'
newline|'\n'
DECL|variable|testData
name|'testData'
op|'='
op|'['
number|'1l'
op|','
number|'2l'
op|','
number|'3l'
op|','
number|'4l'
op|','
number|'5l'
op|','
number|'6l'
op|','
number|'7l'
op|','
number|'8l'
op|','
number|'9l'
op|','
number|'10l'
op|']'
newline|'\n'
name|'bench'
op|'.'
name|'runTests'
op|'('
name|'testData'
op|')'
newline|'\n'
DECL|variable|testData
name|'testData'
op|'='
op|'['
number|'1'
op|','
number|'2'
op|','
op|'['
number|'3'
op|','
number|'4'
op|']'
op|','
op|'['
number|'30.5'
op|','
number|'40.2'
op|']'
op|','
number|'5'
op|','
op|'['
string|'"six"'
op|','
string|'"seven"'
op|','
op|'['
string|'"eight"'
op|','
number|'9'
op|']'
op|']'
op|','
op|'['
number|'10'
op|']'
op|','
op|'['
op|']'
op|']'
newline|'\n'
name|'bench'
op|'.'
name|'runTests'
op|'('
name|'testData'
op|')'
newline|'\n'
nl|'\n'
endmarker|''
end_unit
