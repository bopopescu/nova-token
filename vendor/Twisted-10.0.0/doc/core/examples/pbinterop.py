begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
string|'"""PB interop server."""'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'spread'
name|'import'
name|'pb'
op|','
name|'jelly'
op|','
name|'flavors'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|Interop
name|'class'
name|'Interop'
op|'('
name|'pb'
op|'.'
name|'Root'
op|')'
op|':'
newline|'\n'
indent|'    '
string|'"""Test object for PB interop tests."""'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'o'
op|'='
name|'pb'
op|'.'
name|'Referenceable'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|remote_int
dedent|''
name|'def'
name|'remote_int'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
number|'1'
newline|'\n'
nl|'\n'
DECL|member|remote_string
dedent|''
name|'def'
name|'remote_string'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|'"string"'
newline|'\n'
nl|'\n'
DECL|member|remote_unicode
dedent|''
name|'def'
name|'remote_unicode'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|'u"string"'
newline|'\n'
nl|'\n'
DECL|member|remote_float
dedent|''
name|'def'
name|'remote_float'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
number|'1.5'
newline|'\n'
nl|'\n'
DECL|member|remote_list
dedent|''
name|'def'
name|'remote_list'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'['
number|'1'
op|','
number|'2'
op|','
number|'3'
op|']'
newline|'\n'
nl|'\n'
DECL|member|remote_recursive
dedent|''
name|'def'
name|'remote_recursive'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'l'
op|'='
op|'['
op|']'
newline|'\n'
name|'l'
op|'.'
name|'append'
op|'('
name|'l'
op|')'
newline|'\n'
name|'return'
name|'l'
newline|'\n'
nl|'\n'
DECL|member|remote_dict
dedent|''
name|'def'
name|'remote_dict'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
op|'{'
number|'1'
op|':'
number|'2'
op|'}'
newline|'\n'
nl|'\n'
DECL|member|remote_reference
dedent|''
name|'def'
name|'remote_reference'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'self'
op|'.'
name|'o'
newline|'\n'
nl|'\n'
DECL|member|remote_local
dedent|''
name|'def'
name|'remote_local'
op|'('
name|'self'
op|','
name|'obj'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'d'
op|'='
name|'obj'
op|'.'
name|'callRemote'
op|'('
string|'"hello"'
op|')'
newline|'\n'
name|'d'
op|'.'
name|'addCallback'
op|'('
name|'self'
op|'.'
name|'_local_success'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_local_success
dedent|''
name|'def'
name|'_local_success'
op|'('
name|'self'
op|','
name|'result'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'result'
op|'!='
string|'"hello, world"'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'ValueError'
op|','
string|'"%r != %r"'
op|'%'
op|'('
name|'result'
op|','
string|'"hello, world"'
op|')'
newline|'\n'
nl|'\n'
DECL|member|remote_receive
dedent|''
dedent|''
name|'def'
name|'remote_receive'
op|'('
name|'self'
op|','
name|'obj'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'expected'
op|'='
op|'['
number|'1'
op|','
number|'1.5'
op|','
string|'"hi"'
op|','
string|'u"hi"'
op|','
op|'{'
number|'1'
op|':'
number|'2'
op|'}'
op|']'
newline|'\n'
name|'if'
name|'obj'
op|'!='
name|'expected'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'ValueError'
op|','
string|'"%r != %r"'
op|'%'
op|'('
name|'obj'
op|','
name|'expected'
op|')'
newline|'\n'
nl|'\n'
DECL|member|remote_self
dedent|''
dedent|''
name|'def'
name|'remote_self'
op|'('
name|'self'
op|','
name|'obj'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'obj'
op|'!='
name|'self'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'ValueError'
op|','
string|'"%r != %r"'
op|'%'
op|'('
name|'obj'
op|','
name|'self'
op|')'
newline|'\n'
nl|'\n'
DECL|member|remote_copy
dedent|''
dedent|''
name|'def'
name|'remote_copy'
op|'('
name|'self'
op|','
name|'x'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'o'
op|'='
name|'flavors'
op|'.'
name|'Copyable'
op|'('
op|')'
newline|'\n'
name|'o'
op|'.'
name|'x'
op|'='
name|'x'
newline|'\n'
name|'return'
name|'o'
newline|'\n'
nl|'\n'
nl|'\n'
dedent|''
dedent|''
name|'if'
name|'__name__'
op|'=='
string|"'__main__'"
op|':'
newline|'\n'
indent|'    '
name|'reactor'
op|'.'
name|'listenTCP'
op|'('
number|'8789'
op|','
name|'pb'
op|'.'
name|'PBServerFactory'
op|'('
name|'Interop'
op|'('
op|')'
op|')'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
nl|'\n'
dedent|''
endmarker|''
end_unit
