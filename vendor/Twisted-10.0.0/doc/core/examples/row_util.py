begin_unit
name|'from'
name|'twisted'
op|'.'
name|'enterprise'
name|'import'
name|'row'
newline|'\n'
nl|'\n'
nl|'\n'
comment|'##################################################'
nl|'\n'
comment|'########## Definitions of Row Classes ############'
nl|'\n'
comment|'##################################################'
nl|'\n'
nl|'\n'
DECL|class|KeyFactory
name|'class'
name|'KeyFactory'
op|':'
newline|'\n'
indent|'    '
string|'"""This is a lame, but simple way to generate keys.\n       For real code, use the database instead."""'
newline|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'minimum'
op|','
name|'pool'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'min'
op|'='
name|'minimum'
newline|'\n'
name|'self'
op|'.'
name|'pool'
op|'='
name|'minimum'
op|'+'
name|'pool'
newline|'\n'
name|'self'
op|'.'
name|'current'
op|'='
name|'self'
op|'.'
name|'min'
newline|'\n'
nl|'\n'
DECL|member|getNextKey
dedent|''
name|'def'
name|'getNextKey'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'next'
op|'='
name|'self'
op|'.'
name|'current'
op|'+'
number|'1'
newline|'\n'
name|'self'
op|'.'
name|'current'
op|'='
name|'next'
newline|'\n'
name|'if'
name|'self'
op|'.'
name|'current'
op|'>='
name|'self'
op|'.'
name|'pool'
op|':'
newline|'\n'
indent|'            '
name|'raise'
name|'ValueError'
op|'('
string|'"Key factory key pool exceeded."'
op|')'
newline|'\n'
dedent|''
name|'return'
name|'next'
newline|'\n'
nl|'\n'
DECL|function|myRowFactory
dedent|''
dedent|''
name|'def'
name|'myRowFactory'
op|'('
name|'rowClass'
op|','
name|'data'
op|','
name|'kw'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'newRow'
op|'='
name|'rowClass'
op|'('
op|')'
newline|'\n'
name|'newRow'
op|'.'
name|'__dict__'
op|'.'
name|'update'
op|'('
name|'kw'
op|')'
newline|'\n'
name|'return'
name|'newRow'
newline|'\n'
nl|'\n'
DECL|class|RoomRow
dedent|''
name|'class'
name|'RoomRow'
op|'('
name|'row'
op|'.'
name|'RowObject'
op|')'
op|':'
newline|'\n'
DECL|variable|rowColumns
indent|'    '
name|'rowColumns'
op|'='
op|'['
nl|'\n'
op|'('
string|'"roomId"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"town_id"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"name"'
op|','
string|'"varchar"'
op|')'
op|','
nl|'\n'
op|'('
string|'"owner"'
op|','
string|'"varchar"'
op|')'
op|','
nl|'\n'
op|'('
string|'"posx"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"posy"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"width"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"height"'
op|','
string|'"int"'
op|')'
nl|'\n'
op|']'
newline|'\n'
DECL|variable|rowKeyColumns
name|'rowKeyColumns'
op|'='
op|'['
op|'('
string|'"roomId"'
op|','
string|'"int"'
op|')'
op|']'
newline|'\n'
DECL|variable|rowTableName
name|'rowTableName'
op|'='
string|'"testrooms"'
newline|'\n'
DECL|variable|rowFactoryMethod
name|'rowFactoryMethod'
op|'='
op|'['
name|'myRowFactory'
op|']'
newline|'\n'
nl|'\n'
DECL|member|__init__
name|'def'
name|'__init__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'furniture'
op|'='
op|'['
op|']'
newline|'\n'
nl|'\n'
DECL|member|addStuff
dedent|''
name|'def'
name|'addStuff'
op|'('
name|'self'
op|','
name|'stuff'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'furniture'
op|'.'
name|'append'
op|'('
name|'stuff'
op|')'
newline|'\n'
nl|'\n'
DECL|member|moveTo
dedent|''
name|'def'
name|'moveTo'
op|'('
name|'self'
op|','
name|'x'
op|','
name|'y'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'posx'
op|'='
name|'x'
newline|'\n'
name|'self'
op|'.'
name|'posy'
op|'='
name|'y'
newline|'\n'
nl|'\n'
DECL|member|__repr__
dedent|''
name|'def'
name|'__repr__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|'"<Room #%s: %s (%s) (%s,%s)>"'
op|'%'
op|'('
name|'self'
op|'.'
name|'roomId'
op|','
name|'self'
op|'.'
name|'name'
op|','
name|'self'
op|'.'
name|'owner'
op|','
name|'self'
op|'.'
name|'posx'
op|','
name|'self'
op|'.'
name|'posy'
op|')'
newline|'\n'
nl|'\n'
DECL|class|FurnitureRow
dedent|''
dedent|''
name|'class'
name|'FurnitureRow'
op|'('
name|'row'
op|'.'
name|'RowObject'
op|')'
op|':'
newline|'\n'
DECL|variable|rowColumns
indent|'    '
name|'rowColumns'
op|'='
op|'['
nl|'\n'
op|'('
string|'"furnId"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"roomId"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"name"'
op|','
string|'"varchar"'
op|')'
op|','
nl|'\n'
op|'('
string|'"posx"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"posy"'
op|','
string|'"int"'
op|')'
nl|'\n'
op|']'
newline|'\n'
DECL|variable|rowKeyColumns
name|'rowKeyColumns'
op|'='
op|'['
op|'('
string|'"furnId"'
op|','
string|'"int"'
op|')'
op|']'
newline|'\n'
DECL|variable|rowTableName
name|'rowTableName'
op|'='
string|'"furniture"'
newline|'\n'
DECL|variable|rowForeignKeys
name|'rowForeignKeys'
op|'='
op|'['
op|'('
string|'"testrooms"'
op|','
op|'['
op|'('
string|'"roomId"'
op|','
string|'"int"'
op|')'
op|']'
op|','
op|'['
op|'('
string|'"roomId"'
op|','
string|'"int"'
op|')'
op|']'
op|','
string|'"addStuff"'
op|','
number|'1'
op|')'
op|']'
newline|'\n'
nl|'\n'
DECL|member|__repr__
name|'def'
name|'__repr__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|'"Furniture #%s: room #%s (%s) (%s,%s)"'
op|'%'
op|'('
name|'self'
op|'.'
name|'furnId'
op|','
name|'self'
op|'.'
name|'roomId'
op|','
name|'self'
op|'.'
name|'name'
op|','
name|'self'
op|'.'
name|'posx'
op|','
name|'self'
op|'.'
name|'posy'
op|')'
newline|'\n'
nl|'\n'
DECL|class|RugRow
dedent|''
dedent|''
name|'class'
name|'RugRow'
op|'('
name|'row'
op|'.'
name|'RowObject'
op|')'
op|':'
newline|'\n'
DECL|variable|rowColumns
indent|'    '
name|'rowColumns'
op|'='
op|'['
nl|'\n'
op|'('
string|'"rugId"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"roomId"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"name"'
op|','
string|'"varchar"'
op|')'
nl|'\n'
op|']'
newline|'\n'
DECL|variable|rowKeyColumns
name|'rowKeyColumns'
op|'='
op|'['
op|'('
string|'"rugId"'
op|','
string|'"int"'
op|')'
op|']'
newline|'\n'
DECL|variable|rowTableName
name|'rowTableName'
op|'='
string|'"rugs"'
newline|'\n'
DECL|variable|rowFactoryMethod
name|'rowFactoryMethod'
op|'='
op|'['
name|'myRowFactory'
op|']'
newline|'\n'
DECL|variable|rowForeignKeys
name|'rowForeignKeys'
op|'='
op|'['
op|'('
string|'"testrooms"'
op|','
op|'['
op|'('
string|'"roomId"'
op|','
string|'"int"'
op|')'
op|']'
op|','
op|'['
op|'('
string|'"roomId"'
op|','
string|'"int"'
op|')'
op|']'
op|','
string|'"addStuff"'
op|','
number|'1'
op|')'
op|']'
newline|'\n'
nl|'\n'
DECL|member|__repr__
name|'def'
name|'__repr__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|'"Rug %#s: room #%s, (%s)"'
op|'%'
op|'('
name|'self'
op|'.'
name|'rugId'
op|','
name|'self'
op|'.'
name|'roomId'
op|','
name|'self'
op|'.'
name|'name'
op|')'
newline|'\n'
nl|'\n'
DECL|class|LampRow
dedent|''
dedent|''
name|'class'
name|'LampRow'
op|'('
name|'row'
op|'.'
name|'RowObject'
op|')'
op|':'
newline|'\n'
DECL|variable|rowColumns
indent|'    '
name|'rowColumns'
op|'='
op|'['
nl|'\n'
op|'('
string|'"lampId"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"furnId"'
op|','
string|'"int"'
op|')'
op|','
nl|'\n'
op|'('
string|'"furnName"'
op|','
string|'"varchar"'
op|')'
op|','
nl|'\n'
op|'('
string|'"lampName"'
op|','
string|'"varchar"'
op|')'
nl|'\n'
op|']'
newline|'\n'
DECL|variable|rowKeyColumns
name|'rowKeyColumns'
op|'='
op|'['
op|'('
string|'"lampId"'
op|','
string|'"int"'
op|')'
op|']'
newline|'\n'
DECL|variable|rowTableName
name|'rowTableName'
op|'='
string|'"lamps"'
newline|'\n'
DECL|variable|rowForeignKeys
name|'rowForeignKeys'
op|'='
op|'['
op|'('
string|'"furniture"'
op|','
nl|'\n'
op|'['
op|'('
string|'"furnId"'
op|','
string|'"int"'
op|')'
op|','
op|'('
string|'"furnName"'
op|','
string|'"varchar"'
op|')'
op|']'
op|','
comment|'# child table columns (this table)'
nl|'\n'
op|'['
op|'('
string|'"furnId"'
op|','
string|'"int"'
op|')'
op|','
op|'('
string|'"name"'
op|','
string|'"varchar"'
op|')'
op|']'
op|','
comment|'# parent table columns (the other table)'
nl|'\n'
name|'None'
op|','
nl|'\n'
number|'1'
op|')'
nl|'\n'
op|']'
newline|'\n'
comment|'# NOTE: this has no containerMethod so children will be added to "childRows"'
nl|'\n'
nl|'\n'
DECL|member|__repr__
name|'def'
name|'__repr__'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
string|'"Lamp #%s"'
op|'%'
name|'self'
op|'.'
name|'lampId'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
