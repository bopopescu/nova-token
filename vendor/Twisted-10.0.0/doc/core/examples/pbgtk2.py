begin_unit
comment|'# Copyright (c) 2001-2009 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
name|'from'
name|'__future__'
name|'import'
name|'nested_scopes'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'gtk2reactor'
newline|'\n'
name|'gtk2reactor'
op|'.'
name|'install'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'import'
name|'gtk'
newline|'\n'
name|'from'
name|'gtk'
name|'import'
name|'glade'
newline|'\n'
name|'from'
name|'twisted'
name|'import'
name|'copyright'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
op|','
name|'defer'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'failure'
op|','
name|'log'
op|','
name|'util'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'spread'
name|'import'
name|'pb'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'cred'
op|'.'
name|'credentials'
name|'import'
name|'UsernamePassword'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'error'
name|'as'
name|'netError'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|LoginDialog
name|'class'
name|'LoginDialog'
op|':'
newline|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'deferred'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'deferredResult'
op|'='
name|'deferred'
newline|'\n'
nl|'\n'
name|'gladefile'
op|'='
name|'util'
op|'.'
name|'sibpath'
op|'('
name|'__file__'
op|','
string|'"pbgtk2login.glade"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'glade'
op|'='
name|'glade'
op|'.'
name|'XML'
op|'('
name|'gladefile'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'glade'
op|'.'
name|'signal_autoconnect'
op|'('
name|'self'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'setWidgetsFromGladefile'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_loginDialog'
op|'.'
name|'show'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|setWidgetsFromGladefile
dedent|''
name|'def'
name|'setWidgetsFromGladefile'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'widgets'
op|'='
op|'('
string|'"hostEntry"'
op|','
string|'"portEntry"'
op|','
string|'"userNameEntry"'
op|','
string|'"passwordEntry"'
op|','
nl|'\n'
string|'"statusBar"'
op|','
string|'"loginDialog"'
op|')'
newline|'\n'
name|'gw'
op|'='
name|'self'
op|'.'
name|'glade'
op|'.'
name|'get_widget'
newline|'\n'
name|'for'
name|'widgetName'
name|'in'
name|'widgets'
op|':'
newline|'\n'
indent|'            '
name|'setattr'
op|'('
name|'self'
op|','
string|'"_"'
op|'+'
name|'widgetName'
op|','
name|'gw'
op|'('
name|'widgetName'
op|')'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'_statusContext'
op|'='
name|'self'
op|'.'
name|'_statusBar'
op|'.'
name|'get_context_id'
op|'('
string|'"Login dialog."'
op|')'
newline|'\n'
nl|'\n'
DECL|member|on_loginDialog_response
dedent|''
name|'def'
name|'on_loginDialog_response'
op|'('
name|'self'
op|','
name|'widget'
op|','
name|'response'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'handlers'
op|'='
op|'{'
name|'gtk'
op|'.'
name|'RESPONSE_NONE'
op|':'
name|'self'
op|'.'
name|'windowClosed'
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'RESPONSE_DELETE_EVENT'
op|':'
name|'self'
op|'.'
name|'windowClosed'
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'RESPONSE_OK'
op|':'
name|'self'
op|'.'
name|'doLogin'
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'RESPONSE_CANCEL'
op|':'
name|'self'
op|'.'
name|'cancelled'
op|'}'
newline|'\n'
name|'handlers'
op|'.'
name|'get'
op|'('
name|'response'
op|')'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|on_loginDialog_close
dedent|''
name|'def'
name|'on_loginDialog_close'
op|'('
name|'self'
op|','
name|'widget'
op|','
name|'userdata'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'windowClosed'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|cancelled
dedent|''
name|'def'
name|'cancelled'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'not'
name|'self'
op|'.'
name|'deferredResult'
op|'.'
name|'called'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'deferredResult'
op|'.'
name|'errback'
op|'('
op|')'
newline|'\n'
dedent|''
name|'self'
op|'.'
name|'_loginDialog'
op|'.'
name|'destroy'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|windowClosed
dedent|''
name|'def'
name|'windowClosed'
op|'('
name|'self'
op|','
name|'reason'
op|'='
name|'None'
op|')'
op|':'
newline|'\n'
indent|'         '
name|'if'
name|'not'
name|'self'
op|'.'
name|'deferredResult'
op|'.'
name|'called'
op|':'
newline|'\n'
indent|'            '
name|'self'
op|'.'
name|'deferredResult'
op|'.'
name|'errback'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|doLogin
dedent|''
dedent|''
name|'def'
name|'doLogin'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'host'
op|'='
name|'self'
op|'.'
name|'_hostEntry'
op|'.'
name|'get_text'
op|'('
op|')'
newline|'\n'
name|'port'
op|'='
name|'int'
op|'('
name|'self'
op|'.'
name|'_portEntry'
op|'.'
name|'get_text'
op|'('
op|')'
op|')'
newline|'\n'
name|'userName'
op|'='
name|'self'
op|'.'
name|'_userNameEntry'
op|'.'
name|'get_text'
op|'('
op|')'
newline|'\n'
name|'password'
op|'='
name|'self'
op|'.'
name|'_passwordEntry'
op|'.'
name|'get_text'
op|'('
op|')'
newline|'\n'
nl|'\n'
name|'client_factory'
op|'='
name|'pb'
op|'.'
name|'PBClientFactory'
op|'('
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'connectTCP'
op|'('
name|'host'
op|','
name|'port'
op|','
name|'client_factory'
op|')'
newline|'\n'
name|'creds'
op|'='
name|'UsernamePassword'
op|'('
name|'userName'
op|','
name|'password'
op|')'
newline|'\n'
name|'client_factory'
op|'.'
name|'login'
op|'('
name|'creds'
op|')'
op|'.'
name|'addCallbacks'
op|'('
name|'self'
op|'.'
name|'_cbGotPerspective'
op|','
name|'self'
op|'.'
name|'_ebFailedLogin'
op|')'
newline|'\n'
nl|'\n'
name|'self'
op|'.'
name|'statusMsg'
op|'('
string|'"Contacting server..."'
op|')'
newline|'\n'
nl|'\n'
DECL|member|_cbGotPerspective
dedent|''
name|'def'
name|'_cbGotPerspective'
op|'('
name|'self'
op|','
name|'perspective'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'statusMsg'
op|'('
string|'"Connected to server."'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'deferredResult'
op|'.'
name|'callback'
op|'('
name|'perspective'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'_loginDialog'
op|'.'
name|'destroy'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|_ebFailedLogin
dedent|''
name|'def'
name|'_ebFailedLogin'
op|'('
name|'self'
op|','
name|'reason'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'if'
name|'isinstance'
op|'('
name|'reason'
op|','
name|'failure'
op|'.'
name|'Failure'
op|')'
op|':'
newline|'\n'
indent|'            '
name|'text'
op|'='
name|'str'
op|'('
name|'reason'
op|'.'
name|'value'
op|')'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
indent|'            '
name|'text'
op|'='
name|'str'
op|'('
name|'reason'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'self'
op|'.'
name|'statusMsg'
op|'('
name|'text'
op|')'
newline|'\n'
name|'msg'
op|'='
name|'gtk'
op|'.'
name|'MessageDialog'
op|'('
name|'self'
op|'.'
name|'_loginDialog'
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'DIALOG_DESTROY_WITH_PARENT'
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'MESSAGE_ERROR'
op|','
nl|'\n'
name|'gtk'
op|'.'
name|'BUTTONS_CLOSE'
op|','
nl|'\n'
name|'text'
op|')'
newline|'\n'
name|'msg'
op|'.'
name|'show_all'
op|'('
op|')'
newline|'\n'
name|'msg'
op|'.'
name|'connect'
op|'('
string|'"response"'
op|','
name|'lambda'
op|'*'
name|'a'
op|':'
name|'msg'
op|'.'
name|'destroy'
op|'('
op|')'
op|')'
newline|'\n'
nl|'\n'
DECL|member|statusMsg
dedent|''
name|'def'
name|'statusMsg'
op|'('
name|'self'
op|','
name|'text'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'_statusBar'
op|'.'
name|'push'
op|'('
name|'self'
op|'.'
name|'_statusContext'
op|','
name|'text'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|class|EchoClient
dedent|''
dedent|''
name|'class'
name|'EchoClient'
op|':'
newline|'\n'
DECL|member|__init__
indent|'    '
name|'def'
name|'__init__'
op|'('
name|'self'
op|','
name|'echoer'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'self'
op|'.'
name|'echoer'
op|'='
name|'echoer'
newline|'\n'
name|'w'
op|'='
name|'gtk'
op|'.'
name|'Window'
op|'('
name|'gtk'
op|'.'
name|'WINDOW_TOPLEVEL'
op|')'
newline|'\n'
name|'vb'
op|'='
name|'gtk'
op|'.'
name|'VBox'
op|'('
op|')'
op|';'
name|'b'
op|'='
name|'gtk'
op|'.'
name|'Button'
op|'('
string|'"Echo:"'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'entry'
op|'='
name|'gtk'
op|'.'
name|'Entry'
op|'('
op|')'
op|';'
name|'self'
op|'.'
name|'outry'
op|'='
name|'gtk'
op|'.'
name|'Entry'
op|'('
op|')'
newline|'\n'
name|'w'
op|'.'
name|'add'
op|'('
name|'vb'
op|')'
newline|'\n'
name|'map'
op|'('
name|'vb'
op|'.'
name|'add'
op|','
op|'['
name|'b'
op|','
name|'self'
op|'.'
name|'entry'
op|','
name|'self'
op|'.'
name|'outry'
op|']'
op|')'
newline|'\n'
name|'b'
op|'.'
name|'connect'
op|'('
string|"'clicked'"
op|','
name|'self'
op|'.'
name|'clicked'
op|')'
newline|'\n'
name|'w'
op|'.'
name|'connect'
op|'('
string|"'destroy'"
op|','
name|'self'
op|'.'
name|'stop'
op|')'
newline|'\n'
name|'w'
op|'.'
name|'show_all'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|member|clicked
dedent|''
name|'def'
name|'clicked'
op|'('
name|'self'
op|','
name|'b'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'txt'
op|'='
name|'self'
op|'.'
name|'entry'
op|'.'
name|'get_text'
op|'('
op|')'
newline|'\n'
name|'self'
op|'.'
name|'entry'
op|'.'
name|'set_text'
op|'('
string|'""'
op|')'
newline|'\n'
name|'self'
op|'.'
name|'echoer'
op|'.'
name|'callRemote'
op|'('
string|"'echo'"
op|','
name|'txt'
op|')'
op|'.'
name|'addCallback'
op|'('
name|'self'
op|'.'
name|'outry'
op|'.'
name|'set_text'
op|')'
newline|'\n'
nl|'\n'
DECL|member|stop
dedent|''
name|'def'
name|'stop'
op|'('
name|'self'
op|','
name|'b'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|variable|d
dedent|''
dedent|''
name|'d'
op|'='
name|'defer'
op|'.'
name|'Deferred'
op|'('
op|')'
newline|'\n'
name|'LoginDialog'
op|'('
name|'d'
op|')'
newline|'\n'
name|'d'
op|'.'
name|'addCallbacks'
op|'('
name|'EchoClient'
op|','
nl|'\n'
name|'lambda'
name|'_'
op|':'
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
op|')'
newline|'\n'
nl|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
endmarker|''
end_unit
