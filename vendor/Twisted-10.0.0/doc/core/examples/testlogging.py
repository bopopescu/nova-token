begin_unit
comment|'# Copyright (c) 2001-2004 Twisted Matrix Laboratories.'
nl|'\n'
comment|'# See LICENSE for details.'
nl|'\n'
nl|'\n'
nl|'\n'
string|'"""Test logging.\n\nMessage should only be printed second time around.\n"""'
newline|'\n'
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'log'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
newline|'\n'
nl|'\n'
name|'import'
name|'sys'
op|','
name|'warnings'
newline|'\n'
nl|'\n'
DECL|function|test
name|'def'
name|'test'
op|'('
name|'i'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'print'
string|'"printed"'
op|','
name|'i'
newline|'\n'
name|'log'
op|'.'
name|'msg'
op|'('
string|'"message %s"'
op|'%'
name|'i'
op|')'
newline|'\n'
name|'warnings'
op|'.'
name|'warn'
op|'('
string|'"warning %s"'
op|'%'
name|'i'
op|')'
newline|'\n'
name|'try'
op|':'
newline|'\n'
indent|'        '
name|'raise'
name|'RuntimeError'
op|','
string|'"error %s"'
op|'%'
name|'i'
newline|'\n'
dedent|''
name|'except'
op|':'
newline|'\n'
indent|'        '
name|'log'
op|'.'
name|'err'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|startlog
dedent|''
dedent|''
name|'def'
name|'startlog'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'log'
op|'.'
name|'startLogging'
op|'('
name|'sys'
op|'.'
name|'stdout'
op|')'
newline|'\n'
nl|'\n'
DECL|function|end
dedent|''
name|'def'
name|'end'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
comment|'# pre-reactor run'
nl|'\n'
dedent|''
name|'test'
op|'('
number|'1'
op|')'
newline|'\n'
nl|'\n'
comment|'# after reactor run'
nl|'\n'
name|'reactor'
op|'.'
name|'callLater'
op|'('
number|'0.1'
op|','
name|'test'
op|','
number|'2'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'callLater'
op|'('
number|'0.2'
op|','
name|'startlog'
op|')'
newline|'\n'
nl|'\n'
comment|'# after startLogging'
nl|'\n'
name|'reactor'
op|'.'
name|'callLater'
op|'('
number|'0.3'
op|','
name|'test'
op|','
number|'3'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'callLater'
op|'('
number|'0.4'
op|','
name|'end'
op|')'
newline|'\n'
nl|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
newline|'\n'
endmarker|''
end_unit
