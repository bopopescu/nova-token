begin_unit
nl|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'protocol'
op|','
name|'reactor'
op|','
name|'defer'
op|','
name|'utils'
newline|'\n'
name|'import'
name|'pwd'
newline|'\n'
nl|'\n'
comment|'# Another back-end'
nl|'\n'
nl|'\n'
DECL|class|LocalFingerService
name|'class'
name|'LocalFingerService'
op|'('
name|'service'
op|'.'
name|'Service'
op|')'
op|':'
newline|'\n'
nl|'\n'
indent|'    '
name|'implements'
op|'('
name|'IFingerService'
op|')'
newline|'\n'
nl|'\n'
DECL|member|getUser
name|'def'
name|'getUser'
op|'('
name|'self'
op|','
name|'user'
op|')'
op|':'
newline|'\n'
comment|'# need a local finger daemon running for this to work'
nl|'\n'
indent|'        '
name|'return'
name|'utils'
op|'.'
name|'getProcessOutput'
op|'('
string|'"finger"'
op|','
op|'['
name|'user'
op|']'
op|')'
newline|'\n'
nl|'\n'
DECL|member|getUsers
dedent|''
name|'def'
name|'getUsers'
op|'('
name|'self'
op|')'
op|':'
newline|'\n'
indent|'        '
name|'return'
name|'defer'
op|'.'
name|'succeed'
op|'('
op|'['
op|']'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|variable|f
dedent|''
dedent|''
name|'f'
op|'='
name|'LocalFingerService'
op|'('
op|')'
newline|'\n'
endmarker|''
end_unit
