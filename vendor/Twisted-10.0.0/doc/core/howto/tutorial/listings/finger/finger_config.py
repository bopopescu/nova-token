begin_unit
comment|'# Easy configuration'
nl|'\n'
comment|'# makeService from finger module'
nl|'\n'
nl|'\n'
DECL|function|makeService
name|'def'
name|'makeService'
op|'('
name|'config'
op|')'
op|':'
newline|'\n'
comment|'# finger on port 79'
nl|'\n'
indent|'    '
name|'s'
op|'='
name|'service'
op|'.'
name|'MultiService'
op|'('
op|')'
newline|'\n'
name|'f'
op|'='
name|'FingerService'
op|'('
name|'config'
op|'['
string|"'file'"
op|']'
op|')'
newline|'\n'
name|'h'
op|'='
name|'internet'
op|'.'
name|'TCPServer'
op|'('
number|'79'
op|','
name|'IFingerFactory'
op|'('
name|'f'
op|')'
op|')'
newline|'\n'
name|'h'
op|'.'
name|'setServiceParent'
op|'('
name|'s'
op|')'
newline|'\n'
nl|'\n'
comment|'# website on port 8000'
nl|'\n'
name|'r'
op|'='
name|'resource'
op|'.'
name|'IResource'
op|'('
name|'f'
op|')'
newline|'\n'
name|'r'
op|'.'
name|'templateDirectory'
op|'='
name|'config'
op|'['
string|"'templates'"
op|']'
newline|'\n'
name|'site'
op|'='
name|'server'
op|'.'
name|'Site'
op|'('
name|'r'
op|')'
newline|'\n'
name|'j'
op|'='
name|'internet'
op|'.'
name|'TCPServer'
op|'('
number|'8000'
op|','
name|'site'
op|')'
newline|'\n'
name|'j'
op|'.'
name|'setServiceParent'
op|'('
name|'s'
op|')'
newline|'\n'
nl|'\n'
comment|'# ssl on port 443'
nl|'\n'
name|'if'
name|'config'
op|'.'
name|'get'
op|'('
string|"'ssl'"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'k'
op|'='
name|'internet'
op|'.'
name|'SSLServer'
op|'('
number|'443'
op|','
name|'site'
op|','
name|'ServerContextFactory'
op|'('
op|')'
op|')'
newline|'\n'
name|'k'
op|'.'
name|'setServiceParent'
op|'('
name|'s'
op|')'
newline|'\n'
nl|'\n'
comment|'# irc fingerbot'
nl|'\n'
dedent|''
name|'if'
name|'config'
op|'.'
name|'has_key'
op|'('
string|"'ircnick'"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'i'
op|'='
name|'IIRCClientFactory'
op|'('
name|'f'
op|')'
newline|'\n'
name|'i'
op|'.'
name|'nickname'
op|'='
name|'config'
op|'['
string|"'ircnick'"
op|']'
newline|'\n'
name|'ircserver'
op|'='
name|'config'
op|'['
string|"'ircserver'"
op|']'
newline|'\n'
name|'b'
op|'='
name|'internet'
op|'.'
name|'TCPClient'
op|'('
name|'ircserver'
op|','
number|'6667'
op|','
name|'i'
op|')'
newline|'\n'
name|'b'
op|'.'
name|'setServiceParent'
op|'('
name|'s'
op|')'
newline|'\n'
nl|'\n'
comment|'# Pespective Broker on port 8889'
nl|'\n'
dedent|''
name|'if'
name|'config'
op|'.'
name|'has_key'
op|'('
string|"'pbport'"
op|')'
op|':'
newline|'\n'
indent|'        '
name|'m'
op|'='
name|'internet'
op|'.'
name|'TCPServer'
op|'('
nl|'\n'
name|'int'
op|'('
name|'config'
op|'['
string|"'pbport'"
op|']'
op|')'
op|','
nl|'\n'
name|'pb'
op|'.'
name|'PBServerFactory'
op|'('
name|'IPerspectiveFinger'
op|'('
name|'f'
op|')'
op|')'
op|')'
newline|'\n'
name|'m'
op|'.'
name|'setServiceParent'
op|'('
name|'s'
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'return'
name|'s'
newline|'\n'
dedent|''
endmarker|''
end_unit
