begin_unit
nl|'\n'
name|'from'
name|'sys'
name|'import'
name|'stdout'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'python'
name|'import'
name|'log'
newline|'\n'
name|'log'
op|'.'
name|'discardLogs'
op|'('
op|')'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'internet'
name|'import'
name|'reactor'
newline|'\n'
name|'from'
name|'twisted'
op|'.'
name|'spread'
name|'import'
name|'pb'
newline|'\n'
nl|'\n'
DECL|function|connected
name|'def'
name|'connected'
op|'('
name|'root'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'root'
op|'.'
name|'callRemote'
op|'('
string|"'nextQuote'"
op|')'
op|'.'
name|'addCallbacks'
op|'('
name|'success'
op|','
name|'failure'
op|')'
newline|'\n'
nl|'\n'
DECL|function|success
dedent|''
name|'def'
name|'success'
op|'('
name|'quote'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'stdout'
op|'.'
name|'write'
op|'('
name|'quote'
op|'+'
string|'"\\n"'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|function|failure
dedent|''
name|'def'
name|'failure'
op|'('
name|'error'
op|')'
op|':'
newline|'\n'
indent|'    '
name|'stdout'
op|'.'
name|'write'
op|'('
string|'"Failed to obtain quote.\\n"'
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'stop'
op|'('
op|')'
newline|'\n'
nl|'\n'
DECL|variable|factory
dedent|''
name|'factory'
op|'='
name|'pb'
op|'.'
name|'PBClientFactory'
op|'('
op|')'
newline|'\n'
name|'reactor'
op|'.'
name|'connectTCP'
op|'('
nl|'\n'
string|'"localhost"'
op|','
comment|'# host name'
nl|'\n'
name|'pb'
op|'.'
name|'portno'
op|','
comment|'# port number'
nl|'\n'
name|'factory'
op|','
comment|'# factory'
nl|'\n'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
nl|'\n'
name|'factory'
op|'.'
name|'getRootObject'
op|'('
op|')'
op|'.'
name|'addCallbacks'
op|'('
name|'connected'
op|','
comment|'# when we get the root'
nl|'\n'
name|'failure'
op|')'
comment|"# when we can't"
newline|'\n'
nl|'\n'
name|'reactor'
op|'.'
name|'run'
op|'('
op|')'
comment|'# start the main loop'
newline|'\n'
nl|'\n'
endmarker|''
end_unit
