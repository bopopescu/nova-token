begin_unit
comment|'#!/usr/bin/env python'
nl|'\n'
nl|'\n'
comment|'# Copyright (c) 2009, Google Inc.'
nl|'\n'
comment|'# All rights reserved.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Redistribution and use in source and binary forms, with or without'
nl|'\n'
comment|'# modification, are permitted provided that the following conditions are'
nl|'\n'
comment|'# met:'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#     * Redistributions of source code must retain the above copyright'
nl|'\n'
comment|'# notice, this list of conditions and the following disclaimer.'
nl|'\n'
comment|'#     * Redistributions in binary form must reproduce the above'
nl|'\n'
comment|'# copyright notice, this list of conditions and the following disclaimer'
nl|'\n'
comment|'# in the documentation and/or other materials provided with the'
nl|'\n'
comment|'# distribution.'
nl|'\n'
comment|'#     * Neither the name of Google Inc. nor the names of its'
nl|'\n'
comment|'# contributors may be used to endorse or promote products derived from'
nl|'\n'
comment|'# this software without specific prior written permission.'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS'
nl|'\n'
comment|'# "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT'
nl|'\n'
comment|'# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR'
nl|'\n'
comment|'# A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT'
nl|'\n'
comment|'# OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,'
nl|'\n'
comment|'# SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT'
nl|'\n'
comment|'# LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,'
nl|'\n'
comment|'# DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY'
nl|'\n'
comment|'# THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT'
nl|'\n'
comment|'# (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE'
nl|'\n'
comment|'# OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.'
nl|'\n'
nl|'\n'
string|'"""Auxiliary module for testing flags.py.\n\nThe purpose of this module is to define a few flags.  We want to make\nsure the unit tests for flags.py involve more than one module.\n"""'
newline|'\n'
nl|'\n'
DECL|variable|__author__
name|'__author__'
op|'='
string|"'Alex Salcianu'"
newline|'\n'
nl|'\n'
DECL|variable|__pychecker__
name|'__pychecker__'
op|'='
string|'"no-local"'
comment|'# for unittest'
newline|'\n'
nl|'\n'
comment|"# We use the name 'flags' internally in this test, for historical reasons."
nl|'\n'
comment|"# Don't do this yourself! :-) Just do 'import gflags; FLAGS=gflags.FLAGS; etc'"
nl|'\n'
name|'import'
name|'gflags'
name|'as'
name|'flags'
newline|'\n'
DECL|variable|FLAGS
name|'FLAGS'
op|'='
name|'flags'
op|'.'
name|'FLAGS'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|DefineFlags
name|'def'
name|'DefineFlags'
op|'('
name|'flag_values'
op|'='
name|'FLAGS'
op|')'
op|':'
newline|'\n'
indent|'  '
string|'"""Defines some flags.\n\n  Args:\n    flag_values: The FlagValues object we want to register the flags\n      with.\n  """'
newline|'\n'
comment|"# The 'tmod_bar_' prefix (short for 'test_module_bar') ensures there"
nl|'\n'
comment|'# is no name clash with the existing flags.'
nl|'\n'
name|'flags'
op|'.'
name|'DEFINE_boolean'
op|'('
string|"'tmod_bar_x'"
op|','
name|'True'
op|','
string|"'Boolean flag.'"
op|','
nl|'\n'
name|'flag_values'
op|'='
name|'flag_values'
op|')'
newline|'\n'
name|'flags'
op|'.'
name|'DEFINE_string'
op|'('
string|"'tmod_bar_y'"
op|','
string|"'default'"
op|','
string|"'String flag.'"
op|','
nl|'\n'
name|'flag_values'
op|'='
name|'flag_values'
op|')'
newline|'\n'
name|'flags'
op|'.'
name|'DEFINE_boolean'
op|'('
string|"'tmod_bar_z'"
op|','
name|'False'
op|','
nl|'\n'
string|"'Another boolean flag from module bar.'"
op|','
nl|'\n'
name|'flag_values'
op|'='
name|'flag_values'
op|')'
newline|'\n'
name|'flags'
op|'.'
name|'DEFINE_integer'
op|'('
string|"'tmod_bar_t'"
op|','
number|'4'
op|','
string|"'Sample int flag.'"
op|','
nl|'\n'
name|'flag_values'
op|'='
name|'flag_values'
op|')'
newline|'\n'
name|'flags'
op|'.'
name|'DEFINE_integer'
op|'('
string|"'tmod_bar_u'"
op|','
number|'5'
op|','
string|"'Sample int flag.'"
op|','
nl|'\n'
name|'flag_values'
op|'='
name|'flag_values'
op|')'
newline|'\n'
name|'flags'
op|'.'
name|'DEFINE_integer'
op|'('
string|"'tmod_bar_v'"
op|','
number|'6'
op|','
string|"'Sample int flag.'"
op|','
nl|'\n'
name|'flag_values'
op|'='
name|'flag_values'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|RemoveOneFlag
dedent|''
name|'def'
name|'RemoveOneFlag'
op|'('
name|'flag_name'
op|','
name|'flag_values'
op|'='
name|'FLAGS'
op|')'
op|':'
newline|'\n'
indent|'  '
string|'"""Removes the definition of one flag from flags.FLAGS.\n\n  Note: if the flag is not defined in flags.FLAGS, this function does\n  not do anything (in particular, it does not raise any exception).\n\n  Motivation: We use this function for cleanup *after* a test: if\n  there was a failure during a test and not all flags were declared,\n  we do not want the cleanup code to crash.\n\n  Args:\n    flag_name: A string, the name of the flag to delete.\n    flag_values: The FlagValues object we remove the flag from.\n  """'
newline|'\n'
name|'if'
name|'flag_name'
name|'in'
name|'flag_values'
op|'.'
name|'FlagDict'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'flag_values'
op|'.'
name|'__delattr__'
op|'('
name|'flag_name'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|NamesOfDefinedFlags
dedent|''
dedent|''
name|'def'
name|'NamesOfDefinedFlags'
op|'('
op|')'
op|':'
newline|'\n'
indent|'  '
string|'"""Returns: List of names of the flags declared in this module."""'
newline|'\n'
name|'return'
op|'['
string|"'tmod_bar_x'"
op|','
nl|'\n'
string|"'tmod_bar_y'"
op|','
nl|'\n'
string|"'tmod_bar_z'"
op|','
nl|'\n'
string|"'tmod_bar_t'"
op|','
nl|'\n'
string|"'tmod_bar_u'"
op|','
nl|'\n'
string|"'tmod_bar_v'"
op|']'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|RemoveFlags
dedent|''
name|'def'
name|'RemoveFlags'
op|'('
name|'flag_values'
op|'='
name|'FLAGS'
op|')'
op|':'
newline|'\n'
indent|'  '
string|'"""Deletes the flag definitions done by the above DefineFlags().\n\n  Args:\n    flag_values: The FlagValues object we remove the flags from.\n  """'
newline|'\n'
name|'for'
name|'flag_name'
name|'in'
name|'NamesOfDefinedFlags'
op|'('
op|')'
op|':'
newline|'\n'
indent|'    '
name|'RemoveOneFlag'
op|'('
name|'flag_name'
op|','
name|'flag_values'
op|'='
name|'flag_values'
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|GetModuleName
dedent|''
dedent|''
name|'def'
name|'GetModuleName'
op|'('
op|')'
op|':'
newline|'\n'
indent|'  '
string|'"""Uses flags._GetCallingModule() to return the name of this module.\n\n  For checking that _GetCallingModule works as expected.\n\n  Returns:\n    A string, the name of this module.\n  """'
newline|'\n'
comment|'# Calling the protected _GetCallingModule generates a lint warning,'
nl|'\n'
comment|'# but we do not have any other alternative to test that function.'
nl|'\n'
name|'return'
name|'flags'
op|'.'
name|'_GetCallingModule'
op|'('
op|')'
newline|'\n'
nl|'\n'
nl|'\n'
DECL|function|ExecuteCode
dedent|''
name|'def'
name|'ExecuteCode'
op|'('
name|'code'
op|','
name|'global_dict'
op|')'
op|':'
newline|'\n'
indent|'  '
string|'"""Executes some code in a given global environment.\n\n  For testing of _GetCallingModule.\n\n  Args:\n    code: A string, the code to be executed.\n    global_dict: A dictionary, the global environment that code should\n      be executed in.\n  """'
newline|'\n'
comment|'# Indeed, using exec generates a lint warning.  But some user code'
nl|'\n'
comment|'# actually uses exec, and we have to test for it ...'
nl|'\n'
name|'exec'
name|'code'
name|'in'
name|'global_dict'
newline|'\n'
dedent|''
endmarker|''
end_unit
