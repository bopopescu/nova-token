

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Flat Network Mode (Original and Flat) &mdash; nova v2010.1 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2010.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.tweet.js"></script>
    <link rel="top" title="nova v2010.1 documentation" href="../index.html" />
    <link rel="up" title="Administration Guide" href="index.html" />
    <link rel="next" title="Flags and Flagfiles" href="flags.html" />
    <link rel="prev" title="VLAN Network Mode" href="network.vlan.html" />
    <script type='text/javascript'>
        $(document).ready(function(){
            $("#twitter_feed").tweet({
                username: "openstack",
                query: "from:openstack",
                avatar_size: 32,
                count: 10,
                loading_text: "loading tweets..."
            });
        });
    </script>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="flags.html" title="Flags and Flagfiles"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="network.vlan.html" title="VLAN Network Mode"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">nova v2010.1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Administration Guide</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Flat Network Mode (Original and Flat)</a><ul>
<li><a class="reference internal" href="#original-flat-mode">Original Flat Mode</a></li>
<li><a class="reference internal" href="#flat-dhcp-mode">Flat DHCP Mode</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="network.vlan.html"
                                  title="previous chapter">VLAN Network Mode</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="flags.html"
                                  title="next chapter">Flags and Flagfiles</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/adminguide/network.flat.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="flat-network-mode-original-and-flat">
<h1>Flat Network Mode (Original and Flat)<a class="headerlink" href="#flat-network-mode-original-and-flat" title="Permalink to this headline">¶</a></h1>
<p>Flat network mode removes most of the complexity of VLAN mode by simply
bridging all instance interfaces onto a single network.</p>
<p>There are two variations of flat mode that differ mostly in how IP addresses
are given to instances.</p>
<div class="section" id="original-flat-mode">
<h2>Original Flat Mode<a class="headerlink" href="#original-flat-mode" title="Permalink to this headline">¶</a></h2>
<p>IP addresses for VM instances are grabbed from a subnet specified by the network administrator, and injected into the image on launch. All instances of the system are attached to the same Linux networking bridge, configured manually by the network administrator both on the network controller hosting the network and on the computer controllers hosting the instances.  To recap:</p>
<ul class="simple">
<li>Each compute host creates a single bridge for all instances to use to attach to the external network.</li>
<li>The networking configuration is injected into the instance before it is booted or it is obtained by a guest agent installed in the instance.</li>
</ul>
<p>Note that the configuration injection currently only works on linux-style systems that keep networking
configuration in /etc/network/interfaces.</p>
</div>
<div class="section" id="flat-dhcp-mode">
<h2>Flat DHCP Mode<a class="headerlink" href="#flat-dhcp-mode" title="Permalink to this headline">¶</a></h2>
<p>IP addresses for VM instances are grabbed from a subnet specified by the network administrator. Similar to the flat network, a single Linux networking bridge is created and configured manually by the network administrator and used for all instances. A DHCP server is started to pass out IP addresses to VM instances from the specified subnet.  To recap:</p>
<ul class="simple">
<li>Like flat mode, all instances are attached to a single bridge on the compute node.</li>
<li>In addition a DHCP server is running to configure instances.</li>
</ul>
</div>
<div class="section" id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>The network nodes do not act as a default gateway in flat mode.  Instances
are given public IP addresses.</p>
<p>Compute nodes have iptables/ebtables entries created per project and
instance to protect against IP/MAC address spoofing and ARP poisoning.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="admonition-todo admonition " id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">add flat network mode configuration examples</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="flags.html" title="Flags and Flagfiles"
             >next</a> |</li>
        <li class="right" >
          <a href="network.vlan.html" title="VLAN Network Mode"
             >previous</a> |</li>
        <li><a href="../index.html">nova v2010.1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Administration Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, United States Government as represented by the Administrator of the National Aeronautics and Space Administration..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
  </body>
</html>